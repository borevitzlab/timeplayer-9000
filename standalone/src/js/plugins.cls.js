/*
 jQuery v2.2.4 | (c) jQuery Foundation | jquery.org/license */
var $jscomp={scope:{},findInternal:function(a,e,f){a instanceof String&&(a=String(a));for(var g=a.length,d=0;d<g;d++){var b=a[d];if(e.call(f,b,d,a))return{i:d,v:b}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,f){if(f.get||f.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[e]=f.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,e,f,g){if(e){f=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var d=a[g];d in f||(f[d]={});f=f[d]}a=a[a.length-1];g=f[a];e=e(g);e!=g&&null!=e&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,f){return $jscomp.findInternal(this,a,f).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var e=0;return $jscomp.iteratorPrototype(function(){return e<a.length?{done:!1,value:a[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,e){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var f=0,g={next:function(){if(f<a.length){var d=f++;return{value:e(d,a[d]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,f){return f})}},"es6","es3");$jscomp.polyfill("Array.prototype.entries",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,f){return[a,f]})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,f,g){var d=this.length||0;0>f&&(f=Math.max(0,d+f));if(null==g||g>d)g=d;g=Number(g);0>g&&(g=Math.max(0,d+g));for(f=Number(f||0);f<g;f++)this[f]=a;return this}},"es6-impl","es3");
!function(a,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?e(a,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");return e(a)}:e(a)}("undefined"!=typeof window?window:this,function(a,e){function f(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"===c||r.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&0<b&&b-1 in a}function g(a,b,c){if(r.isFunction(b))return r.grep(a,function(a,d){return!!b.call(a,d,a)!==
c});if(b.nodeType)return r.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(Ub.test(b))return r.filter(b,a,c);b=r.filter(b,a)}return r.grep(a,function(a){return-1<Ja.call(b,a)!==c})}function d(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function b(a){var b={};return r.each(a.match(Ga)||[],function(a,c){b[c]=!0}),b}function c(){Q.removeEventListener("DOMContentLoaded",c);a.removeEventListener("load",c);r.ready()}function h(){this.expando=r.expando+h.uid++}function n(a,b,c){var d;if(void 0===
c&&1===a.nodeType)if(d="data-"+b.replace(pb,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:cb.test(c)?r.parseJSON(c):c}catch(Ac){}Ka.set(a,b,c)}else c=void 0;return c}function m(a,b,c,d){var e,f=1,h=20,g=d?function(){return d.cur()}:function(){return r.css(a,b,"")},m=g(),n=c&&c[3]||(r.cssNumber[b]?"":"px"),t=(r.cssNumber[b]||"px"!==n&&+m)&&Wa.exec(r.css(a,b));if(t&&t[3]!==n){n=n||t[3];c=c||[];t=+m||1;do f=f||".5",t/=f,r.style(a,
b,t+n);while(f!==(f=g()/m)&&1!==f&&--h)}return c&&(t=+t||+m||0,e=c[1]?t+(c[1]+1)*c[2]:+c[2],d&&(d.unit=n,d.start=t,d.end=e)),e}function t(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&r.nodeName(a,b)?r.merge([a],c):c}function w(a,b){for(var c=0,d=a.length;d>c;c++)ca.set(a[c],"globalEval",!b||ca.get(b[c],"globalEval"))}function l(a,b,c,d,e){for(var f,h,g,m,n=b.createDocumentFragment(),
ya=[],l=0,k=a.length;k>l;l++)if(f=a[l],f||0===f)if("object"===r.type(f))r.merge(ya,f.nodeType?[f]:f);else if(Pc.test(f)){h=h||n.appendChild(b.createElement("div"));g=(eb.exec(f)||["",""])[1].toLowerCase();g=Xa[g]||Xa._default;h.innerHTML=g[1]+r.htmlPrefilter(f)+g[2];for(g=g[0];g--;)h=h.lastChild;r.merge(ya,h.childNodes);h=n.firstChild;h.textContent=""}else ya.push(b.createTextNode(f));n.textContent="";for(l=0;f=ya[l++];)if(d&&-1<r.inArray(f,d))e&&e.push(f);else if(m=r.contains(f.ownerDocument,f),
h=t(n.appendChild(f),"script"),m&&w(h),c)for(g=0;f=h[g++];)lb.test(f.type||"")&&c.push(f);return n}function p(){return!0}function u(){return!1}function k(){try{return Q.activeElement}catch(ya){}}function q(a,b,c,d,e,f){var h,g;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(g in b)q(a,g,c,d,b[g],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),!1===e)e=u;else if(!e)return a;return 1===f&&(h=e,e=function(a){return r().off(a),
h.apply(this,arguments)},e.guid=h.guid||(h.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}function A(a,b){return r.nodeName(a,"table")&&r.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function z(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function B(a){var b=fc.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function E(a,b){var c,d,e,f,h,g;if(1===b.nodeType){if(ca.hasData(a)&&
(c=ca.access(a),d=ca.set(b,c),g=c.events))for(e in delete d.handle,d.events={},g)for(c=0,d=g[e].length;d>c;c++)r.event.add(b,e,g[e][c]);Ka.hasData(a)&&(f=Ka.access(a),h=r.extend({},f),Ka.set(b,h))}}function D(a,b,c,d){b=Na.apply([],b);var e,f,h,g,m=0,n=a.length,ya=n-1,k=b[0],p=r.isFunction(k);if(p||1<n&&"string"==typeof k&&!la.checkClone&&Ib.test(k))return a.each(function(e){var f=a.eq(e);p&&(b[0]=k.call(this,e,f.html()));D(f,b,c,d)});if(n&&(e=l(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&
(e=f),f||d)){f=r.map(t(e,"script"),z);for(h=f.length;n>m;m++)g=e,m!==ya&&(g=r.clone(g,!0,!0),h&&r.merge(f,t(g,"script"))),c.call(a[m],g,m);if(h)for(e=f[f.length-1].ownerDocument,r.map(f,B),m=0;h>m;m++)g=f[m],lb.test(g.type||"")&&!ca.access(g,"globalEval")&&r.contains(e,g)&&(g.src?r._evalUrl&&r._evalUrl(g.src):r.globalEval(g.textContent.replace(Bc,"")))}return a}function F(a,b,c){for(var d=b?r.filter(b,a):a,e=0;null!=(b=d[e]);e++)c||1!==b.nodeType||r.cleanData(t(b)),b.parentNode&&(c&&r.contains(b.ownerDocument,
b)&&w(t(b,"script")),b.parentNode.removeChild(b));return a}function G(a,b){var c=r(b.createElement(a)).appendTo(b.body),d=r.css(c[0],"display");return c.detach(),d}function P(a){var b=Q,c=oc[a];return c||(c=G(a,b),"none"!==c&&c||(Jb=(Jb||r("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Jb[0].contentDocument,b.write(),b.close(),c=G(a,b),Jb.detach()),oc[a]=c),c}function J(a,b,c){var d,e,f,h,g=a.style;return c=c||Sa(a),h=c?c.getPropertyValue(b)||c[b]:void 0,""!==h&&
void 0!==h||r.contains(a.ownerDocument,a)||(h=r.style(a,b)),c&&!la.pixelMarginRight()&&jb.test(h)&&Vb.test(b)&&(d=g.width,e=g.minWidth,f=g.maxWidth,g.minWidth=g.maxWidth=g.width=h,h=c.width,g.width=d,g.minWidth=e,g.maxWidth=f),void 0!==h?h+"":h}function I(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function U(a){if(a in Kb)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=Lb.length;c--;)if(a=Lb[c]+b,a in Kb)return a}function O(a,b,c){return(a=Wa.exec(b))?
Math.max(0,a[2]-(c||0))+(a[3]||"px"):b}function aa(a,b,c,d,e){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var f=0;4>b;b+=2)"margin"===c&&(f+=r.css(a,c+Ya[b],!0,e)),d?("content"===c&&(f-=r.css(a,"padding"+Ya[b],!0,e)),"margin"!==c&&(f-=r.css(a,"border"+Ya[b]+"Width",!0,e))):(f+=r.css(a,"padding"+Ya[b],!0,e),"padding"!==c&&(f+=r.css(a,"border"+Ya[b]+"Width",!0,e)));return f}function ia(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Sa(a),h="border-box"===r.css(a,"boxSizing",!1,
f);if(0>=e||null==e){if(e=J(a,b,f),(0>e||null==e)&&(e=a.style[b]),jb.test(e))return e;d=h&&(la.boxSizingReliable()||e===a.style[b]);e=parseFloat(e)||0}return e+aa(a,b,c||(h?"border":"content"),d,f)+"px"}function X(a,b){for(var c,d,e,f=[],h=0,g=a.length;g>h;h++)d=a[h],d.style&&(f[h]=ca.get(d,"olddisplay"),c=d.style.display,b?(f[h]||"none"!==c||(d.style.display=""),""===d.style.display&&Mb(d)&&(f[h]=ca.access(d,"olddisplay",P(d.nodeName)))):(e=Mb(d),"none"===c&&e||ca.set(d,"olddisplay",e?c:r.css(d,
"display"))));for(h=0;g>h;h++)d=a[h],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[h]||"":"none"));return a}function R(a,b,c,d,e){return new R.prototype.init(a,b,c,d,e)}function L(){return a.setTimeout(function(){Ab=void 0}),Ab=r.now()}function ja(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=Ya[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function H(a,b,c){for(var d,e=(ka.tweeners[b]||[]).concat(ka.tweeners["*"]),f=0,h=e.length;h>
f;f++)if(d=e[f].call(c,b,a))return d}function Y(a,b){var c,d,e,f,h;for(c in a)if(d=r.camelCase(c),e=b[d],f=a[c],r.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),h=r.cssHooks[d],h&&"expand"in h)for(c in f=h.expand(f),delete a[d],f)c in a||(a[c]=f[c],b[c]=e);else b[d]=e}function ka(a,b,c){var d,e=0,f=ka.prefilters.length,h=r.Deferred().always(function(){delete g.elem}),g=function(){if(d)return!1;for(var b=Ab||L(),b=Math.max(0,m.startTime+m.duration-b),c=1-(b/m.duration||0),e=0,f=m.tweens.length;f>
e;e++)m.tweens[e].run(c);return h.notifyWith(a,[m,c,b]),1>c&&f?b:(h.resolveWith(a,[m]),!1)},m=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:Ab||L(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,m.opts,b,c,m.opts.specialEasing[b]||m.opts.easing);return m.tweens.push(d),d},stop:function(b){var c=0,e=b?m.tweens.length:0;if(d)return this;for(d=!0;e>c;c++)m.tweens[c].run(1);
return b?(h.notifyWith(a,[m,1,0]),h.resolveWith(a,[m,b])):h.rejectWith(a,[m,b]),this}});c=m.props;for(Y(c,m.opts.specialEasing);f>e;e++)if(b=ka.prefilters[e].call(m,a,c,m.opts))return r.isFunction(b.stop)&&(r._queueHooks(m.elem,m.opts.queue).stop=r.proxy(b.stop,b)),b;return r.map(c,H,m),r.isFunction(m.opts.start)&&m.opts.start.call(a,m),r.fx.timer(r.extend(g,{elem:a,anim:m,queue:m.opts.queue})),m.progress(m.opts.progress).done(m.opts.done,m.opts.complete).fail(m.opts.fail).always(m.opts.always)}function qa(a){return a.getAttribute&&
a.getAttribute("class")||""}function ua(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(Ga)||[];if(r.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function T(a,b,c,d){function e(g){var m;return f[g]=!0,r.each(a[g]||[],function(a,g){var n=g(b,c,d);return"string"!=typeof n||h||f[n]?h?!(m=n):void 0:(b.dataTypes.unshift(n),e(n),!1)}),m}var f={},h=a===Cc;return e(b.dataTypes[0])||!f["*"]&&e("*")}
function ba(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}function ha(a,b,c,d){var e;if(r.isArray(b))r.each(b,function(b,e){c||Dc.test(a)?d(a,e):ha(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(e in b)ha(a+"["+e+"]",b[e],c,d)}function N(a){return r.isWindow(a)?a:9===a.nodeType&&a.defaultView}var M=[],Q=a.document,Z=M.slice,Na=M.concat,xa=M.push,Ja=M.indexOf,La=
{},Ca=La.toString,Za=La.hasOwnProperty,la={},r=function(a,b){return new r.fn.init(a,b)},Ma=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,fb=/^-ms-/,Ea=/-([\da-z])/gi,mb=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:"2.2.4",constructor:r,selector:"",length:0,toArray:function(){return Z.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:Z.call(this)},pushStack:function(a){a=r.merge(this.constructor(),a);return a.prevObject=this,a.context=this.context,a},each:function(a){return r.each(this,
a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(Z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&b>a?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},push:xa,sort:M.sort,splice:M.splice};r.extend=r.fn.extend=function(){var a,b,c,d,e,f,h=arguments[0]||{},g=1,m=arguments.length,
n=!1;"boolean"==typeof h&&(n=h,h=arguments[g]||{},g++);"object"==typeof h||r.isFunction(h)||(h={});for(g===m&&(h=this,g--);m>g;g++)if(null!=(a=arguments[g]))for(b in a)c=h[b],d=a[b],h!==d&&(n&&d&&(r.isPlainObject(d)||(e=r.isArray(d)))?(e?(e=!1,f=c&&r.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},h[b]=r.extend(n,f,d)):void 0!==d&&(h[b]=d));return h};r.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},isFunction:function(a){return"function"===
r.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!r.isArray(a)&&0<=b-parseFloat(b)+1},isPlainObject:function(a){var b;if("object"!==r.type(a)||a.nodeType||r.isWindow(a)||a.constructor&&!Za.call(a,"constructor")&&!Za.call(a.constructor.prototype||{},"isPrototypeOf"))return!1;for(b in a);return void 0===b||Za.call(a,b)},isEmptyObject:function(a){for(var b in a)return!1;return!0},type:function(a){return null==a?a+"":
"object"==typeof a||"function"==typeof a?La[Ca.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;(a=r.trim(a))&&(1===a.indexOf("use strict")?(b=Q.createElement("script"),b.text=a,Q.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(fb,"ms-").replace(Ea,mb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(f(a))for(c=a.length;c>d&&!1!==b.call(a[d],d,a[d]);d++);else for(d in a)if(!1===
b.call(a[d],d,a[d]))break;return a},trim:function(a){return null==a?"":(a+"").replace(Ma,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(f(Object(a))?r.merge(c,"string"==typeof a?[a]:a):xa.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:Ja.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d=[],e=0,f=a.length,h=!c;f>e;e++)c=!b(a[e],e),c!==h&&d.push(a[e]);return d},map:function(a,b,c){var d,e,h=
0,g=[];if(f(a))for(d=a.length;d>h;h++)e=b(a[h],h,c),null!=e&&g.push(e);else for(h in a)e=b(a[h],h,c),null!=e&&g.push(e);return Na.apply([],g)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a)?(d=Z.call(arguments,2),e=function(){return a.apply(b||this,d.concat(Z.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e):void 0},now:Date.now,support:la});"function"==typeof Symbol&&(r.fn[Symbol.iterator]=M[Symbol.iterator]);r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),
function(a,b){La["[object "+b+"]"]=b.toLowerCase()});var Ha=function(a){function b(a,b,c,d){var e,f,h,g,m,n=b&&b.ownerDocument,l=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==l&&9!==l&&11!==l)return c;if(!d&&((b?b.ownerDocument||b:P)!==ba&&N(b),b=b||ba,R)){if(11!==l&&(g=Ma.exec(a)))if(e=g[1])if(9===l){if(!(f=b.getElementById(e)))return c;if(f.id===e)return c.push(f),c}else{if(n&&(f=n.getElementById(e))&&xa(b,f)&&f.id===e)return c.push(f),c}else{if(g[2])return aa.apply(c,b.getElementsByTagName(a)),
c;if((e=g[3])&&A.getElementsByClassName&&b.getElementsByClassName)return aa.apply(c,b.getElementsByClassName(e)),c}if(!(!A.qsa||x[a+" "]||L&&L.test(a))){if(1!==l)n=b,m=a;else if("object"!==b.nodeName.toLowerCase()){(h=b.getAttribute("id"))?h=h.replace(sa,"\\$&"):b.setAttribute("id",h=H);g=D(a);e=g.length;for(f=U.test(h)?"#"+h:"[id='"+h+"']";e--;)g[e]=f+" "+k(g[e]);m=g.join(",");n=Ea.test(a)&&t(b.parentNode)||b}if(m)try{return aa.apply(c,n.querySelectorAll(m)),c}catch(Ke){}finally{h===H&&b.removeAttribute("id")}}}return T(a.replace(ka,
"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>z.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[H]=!0,a}function e(a){var b=ba.createElement("div");try{return!!a(b)}catch(Ge){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)z.attrHandle[c[d]]=b}function h(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(d)return d;
if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function g(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function m(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function n(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),h=f.length;h--;)c[e=f[h]]&&(c[e]=!(d[e]=c[e]))})})}function t(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function l(){}function k(a){for(var b=
0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function p(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=J++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,h){var g,m,n,t=[Y,f];if(h)for(;b=b[d];){if((1===b.nodeType||e)&&a(b,c,h))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(n=b[H]||(b[H]={}),m=n[b.uniqueID]||(n[b.uniqueID]={}),(g=m[d])&&g[0]===Y&&g[1]===f)return t[2]=g[2];if(m[d]=t,t[2]=a(b,c,h))return!0}}}function w(a){return 1<a.length?function(b,
c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ya(a,b,c,d,e){for(var f,h=[],g=0,m=a.length,n=null!=b;m>g;g++)(f=a[g])&&(c&&!c(f,d,e)||(h.push(f),n&&b.push(g)));return h}function q(a,c,e,f,h,g){return f&&!f[H]&&(f=q(f)),h&&!h[H]&&(h=q(h,g)),d(function(d,g,m,n){var t,l,x=[],k=[],p=g.length,w;if(!(w=d)){w=c||"*";for(var q=m.nodeType?[m]:m,u=[],Q=0,K=q.length;K>Q;Q++)b(w,q[Q],u);w=u}w=!a||!d&&c?w:ya(w,x,a,m,n);q=e?h||(d?a:p||f)?[]:g:w;if(e&&e(w,q,m,n),f)for(t=ya(q,k),f(t,
[],m,n),m=t.length;m--;)(l=t[m])&&(q[k[m]]=!(w[k[m]]=l));if(d){if(h||a){if(h){t=[];for(m=q.length;m--;)(l=q[m])&&t.push(w[m]=l);h(null,q=[],t,n)}for(m=q.length;m--;)(l=q[m])&&-1<(t=h?X(d,l):x[m])&&(d[t]=!(g[t]=l))}}else q=ya(q===g?q.splice(p,q.length):q),h?h(null,g,q,n):aa.apply(g,q)})}function u(a){var b,c,d,e=a.length,f=z.relative[a[0].type];c=f||z.relative[" "];for(var h=f?1:0,g=p(function(a){return a===b},c,!0),m=p(function(a){return-1<X(b,a)},c,!0),n=[function(a,c,d){a=!f&&(d||c!==ha)||((b=c).nodeType?
g(a,c,d):m(a,c,d));return b=null,a}];e>h;h++)if(c=z.relative[a[h].type])n=[p(w(n),c)];else{if(c=z.filter[a[h].type].apply(null,a[h].matches),c[H]){for(d=++h;e>d&&!z.relative[a[d].type];d++);return q(1<h&&w(n),1<h&&k(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ka,"$1"),c,d>h&&u(a.slice(h,d)),e>d&&u(a=a.slice(d)),e>d&&k(a))}n.push(c)}return w(n)}function Q(a,c){var e=0<c.length,f=0<a.length,h=function(d,h,g,m,n){var t,l,x,k=0,p="0",w=d&&[],q=[],u=ha,Q=d||f&&z.find.TAG("*",n),K=
Y+=null==u?1:Math.random()||.1,r=Q.length;for(n&&(ha=h===ba||h||n);p!==r&&null!=(t=Q[p]);p++){if(f&&t){l=0;for(h||t.ownerDocument===ba||(N(t),g=!R);x=a[l++];)if(x(t,h||ba,g)){m.push(t);break}n&&(Y=K)}e&&((t=!x&&t)&&k--,d&&w.push(t))}if(k+=p,e&&p!==k){for(l=0;x=c[l++];)x(w,q,h,g);if(d){if(0<k)for(;p--;)w[p]||q[p]||(q[p]=Rc.call(m));q=ya(q)}aa.apply(m,q);n&&!d&&0<q.length&&1<k+c.length&&b.uniqueSort(m)}return n&&(Y=K,ha=u),w};return e?d(h):h}var r,A,z,ua,B,D,Z,T,ha,M,E,N,ba,F,R,L,G,Na,xa,H="sizzle"+
1*new Date,P=a.document,Y=0,J=0,ja=c(),ia=c(),x=c(),K=function(a,b){return a===b&&(E=!0),0},Aa={}.hasOwnProperty,ma=[],Rc=ma.pop,Ja=ma.push,aa=ma.push,I=ma.slice,X=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},Za=RegExp("[\\x20\\t\\r\\n\\f]+","g"),ka=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),La=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,O=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,qa=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]",
"g"),Ca=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,U=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,la={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,
PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,
needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},fb=/^(?:input|select|textarea|button)$/i,ca=/^h\d$/i,da=/^[^{]+\{\s*\[native \w/,Ma=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ea=/[+~]/,sa=/'|\\/g,pa=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),ra=function(a,b,c){a="0x"+b-65536;return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,1023&a|56320)},Ba=function(){N()};
try{aa.apply(ma=I.call(P.childNodes),P.childNodes),ma[P.childNodes.length].nodeType}catch(xf){aa={apply:ma.length?function(a,b){Ja.apply(a,I.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}A=b.support={};B=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};N=b.setDocument=function(a){var b,c;a=a?a.ownerDocument||a:P;return a!==ba&&9===a.nodeType&&a.documentElement?(ba=a,F=ba.documentElement,R=!B(ba),(c=ba.defaultView)&&c.top!==
c&&(c.addEventListener?c.addEventListener("unload",Ba,!1):c.attachEvent&&c.attachEvent("onunload",Ba)),A.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),A.getElementsByTagName=e(function(a){return a.appendChild(ba.createComment("")),!a.getElementsByTagName("*").length}),A.getElementsByClassName=da.test(ba.getElementsByClassName),A.getById=e(function(a){return F.appendChild(a).id=H,!ba.getElementsByName||!ba.getElementsByName(H).length}),A.getById?(z.find.ID=function(a,
b){if("undefined"!=typeof b.getElementById&&R){var c=b.getElementById(a);return c?[c]:[]}},z.filter.ID=function(a){var b=a.replace(pa,ra);return function(a){return a.getAttribute("id")===b}}):(delete z.find.ID,z.filter.ID=function(a){var b=a.replace(pa,ra);return function(a){return(a="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}}),z.find.TAG=A.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):A.qsa?b.querySelectorAll(a):
void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},z.find.CLASS=A.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&R?b.getElementsByClassName(a):void 0},G=[],L=[],(A.qsa=da.test(ba.querySelectorAll))&&(e(function(a){F.appendChild(a).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>";a.querySelectorAll("[msallowcapture^='']").length&&
L.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||L.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll("[id~="+H+"-]").length||L.push("~=");a.querySelectorAll(":checked").length||L.push(":checked");a.querySelectorAll("a#"+H+"+*").length||L.push(".#.+[+~]")}),e(function(a){var b=ba.createElement("input");b.setAttribute("type","hidden");
a.appendChild(b).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&L.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||L.push(":enabled",":disabled");a.querySelectorAll("*,:x");L.push(",.*:")})),(A.matchesSelector=da.test(Na=F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&e(function(a){A.disconnectedMatch=Na.call(a,"div");Na.call(a,"[s!='']:x");G.push("!=",":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
L=L.length&&new RegExp(L.join("|")),G=G.length&&new RegExp(G.join("|")),b=da.test(F.compareDocumentPosition),xa=b||da.test(F.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},K=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;
return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!A.sortDetached&&b.compareDocumentPosition(a)===c?a===ba||a.ownerDocument===P&&xa(P,a)?-1:b===ba||b.ownerDocument===P&&xa(P,b)?1:M?X(M,a)-X(M,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,d=0;c=a.parentNode;var e=b.parentNode,f=[a],g=[b];if(!c||!e)return a===ba?-1:b===ba?1:c?-1:e?1:M?X(M,a)-X(M,b):0;if(c===e)return h(a,b);for(c=a;c=c.parentNode;)f.unshift(c);for(c=b;c=c.parentNode;)g.unshift(c);
for(;f[d]===g[d];)d++;return d?h(f[d],g[d]):f[d]===P?-1:g[d]===P?1:0},ba):ba};b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==ba&&N(a),c=c.replace(qa,"='$1']"),!(!A.matchesSelector||!R||x[c+" "]||G&&G.test(c)||L&&L.test(c)))try{var d=Na.call(a,c);if(d||A.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(zf){}return 0<b(c,ba,null,[a]).length};b.contains=function(a,b){return(a.ownerDocument||a)!==ba&&N(a),xa(a,b)};b.attr=
function(a,b){(a.ownerDocument||a)!==ba&&N(a);var c=z.attrHandle[b.toLowerCase()],c=c&&Aa.call(z.attrHandle,b.toLowerCase())?c(a,b,!R):void 0;return void 0!==c?c:A.attributes||!R?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!A.detectDuplicates,M=!A.sortStable&&a.slice(0),a.sort(K),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],
1)}return M=null,a};ua=b.getText=function(a){var b,c="",d=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=ua(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=a[d++];)c+=ua(b);return c};z=b.selectors={cacheLength:50,createPseudo:d,match:la,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=
a[1].replace(pa,ra),a[3]=(a[3]||a[4]||a[5]||"").replace(pa,ra),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return la.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&Ca.test(c)&&(b=D(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,
b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(pa,ra).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=ja[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),ja(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")}))},ATTR:function(a,c,d){return function(e){e=b.attr(e,
a);return null==e?"!="===c:c?(e+="","="===c?e===d:"!="===c?e!==d:"^="===c?d&&0===e.indexOf(d):"*="===c?d&&-1<e.indexOf(d):"$="===c?d&&e.slice(-d.length)===d:"~="===c?-1<(" "+e.replace(Za," ")+" ").indexOf(d):"|="===c?e===d||e.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),h="last"!==a.slice(-4),g="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,m){var n,t,l,x,k,p;c=f!==h?"nextSibling":"previousSibling";var w=b.parentNode,q=
g&&b.nodeName.toLowerCase();m=!m&&!g;var ya=!1;if(w){if(f){for(;c;){for(x=b;x=x[c];)if(g?x.nodeName.toLowerCase()===q:1===x.nodeType)return!1;p=c="only"===a&&!p&&"nextSibling"}return!0}if(p=[h?w.firstChild:w.lastChild],h&&m)for(x=w,l=x[H]||(x[H]={}),t=l[x.uniqueID]||(l[x.uniqueID]={}),n=t[a]||[],ya=(k=n[0]===Y&&n[1])&&n[2],x=k&&w.childNodes[k];x=++k&&x&&x[c]||(ya=k=0)||p.pop();){if(1===x.nodeType&&++ya&&x===b){t[a]=[Y,k,ya];break}}else if(m&&(x=b,l=x[H]||(x[H]={}),t=l[x.uniqueID]||(l[x.uniqueID]=
{}),n=t[a]||[],k=n[0]===Y&&n[1],ya=k),!1===ya)for(;(x=++k&&x&&x[c]||(ya=k=0)||p.pop())&&((g?x.nodeName.toLowerCase()!==q:1!==x.nodeType)||!++ya||(m&&(l=x[H]||(x[H]={}),t=l[x.uniqueID]||(l[x.uniqueID]={}),t[a]=[Y,ya]),x!==b)););return ya-=e,ya===d||0===ya%d&&0<=ya/d}}},PSEUDO:function(a,c){var e,f=z.pseudos[a]||z.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[H]?f(c):1<f.length?(e=[a,a,"",c],z.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),h=
e.length;h--;)d=X(a,e[h]),a[d]=!(b[d]=e[h])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=Z(a.replace(ka,"$1"));return e[H]?d(function(a,b,c,d){var f;c=e(a,null,d,[]);for(d=a.length;d--;)(f=c[d])&&(a[d]=!(b[d]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return 0<b(a,c).length}}),contains:d(function(a){return a=a.replace(pa,ra),function(b){return-1<(b.textContent||b.innerText||ua(b)).indexOf(a)}}),lang:d(function(a){return U.test(a||
"")||b.error("unsupported lang: "+a),a=a.replace(pa,ra).toLowerCase(),function(b){var c;do if(c=R?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===F},focus:function(a){return a===ba.activeElement&&(!ba.hasFocus||ba.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===
a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!z.pseudos.empty(a)},header:function(a){return ca.test(a.nodeName)},input:function(a){return fb.test(a.nodeName)},button:function(a){var b=
a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:n(function(){return[0]}),last:n(function(a,b){return[b-1]}),eq:n(function(a,b,c){return[0>c?c+b:c]}),even:n(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:n(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:n(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);
return a}),gt:n(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};z.pseudos.nth=z.pseudos.eq;for(r in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})z.pseudos[r]=g(r);for(r in{submit:!0,reset:!0})z.pseudos[r]=m(r);l.prototype=z.filters=z.pseudos;z.setFilters=new l;D=b.tokenize=function(a,c){var d,e,f,h,g,m,n;if(g=ia[a+" "])return c?0:g.slice(0);g=a;m=[];for(n=z.preFilter;g;){d&&!(e=La.exec(g))||(e&&(g=g.slice(e[0].length)||g),m.push(f=[]));d=!1;(e=O.exec(g))&&(d=e.shift(),f.push({value:d,
type:e[0].replace(ka," ")}),g=g.slice(d.length));for(h in z.filter)!(e=la[h].exec(g))||n[h]&&!(e=n[h](e))||(d=e.shift(),f.push({value:d,type:h,matches:e}),g=g.slice(d.length));if(!d)break}return c?g.length:g?b.error(a):ia(a,m).slice(0)};return Z=b.compile=function(a,b){var c,d=[],e=[],f=x[a+" "];if(!f){b||(b=D(a));for(c=b.length;c--;)f=u(b[c]),f[H]?d.push(f):e.push(f);f=x(a,Q(e,d));f.selector=a}return f},T=b.select=function(a,b,c,d){var e,f,h,g,m,n="function"==typeof a&&a,l=!d&&D(a=n.selector||a);
if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),2<f.length&&"ID"===(h=f[0]).type&&A.getById&&9===b.nodeType&&R&&z.relative[f[1].type]){if(b=(z.find.ID(h.matches[0].replace(pa,ra),b)||[])[0],!b)return c;n&&(b=b.parentNode);a=a.slice(f.shift().value.length)}for(e=la.needsContext.test(a)?0:f.length;e--&&(h=f[e],!z.relative[g=h.type]);)if((m=z.find[g])&&(d=m(h.matches[0].replace(pa,ra),Ea.test(f[0].type)&&t(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&k(f),!a)return aa.apply(c,d),c;break}}return(n||
Z(a,l))(d,b,!R,c,!b||Ea.test(a)&&t(b.parentNode)||b),c},A.sortStable=H.split("").sort(K).join("")===H,A.detectDuplicates=!!E,N(),A.sortDetached=e(function(a){return 1&a.compareDocumentPosition(ba.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),A.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",
""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,c){var d;return c?void 0:!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);r.find=Ha;r.expr=Ha.selectors;r.expr[":"]=r.expr.pseudos;
r.uniqueSort=r.unique=Ha.uniqueSort;r.text=Ha.getText;r.isXMLDoc=Ha.isXML;r.contains=Ha.contains;var Oa=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},Ta=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},qb=r.expr.match.needsContext,Da=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Ub=/^.[^:#\[\.,]*$/;r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?
r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))};r.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(r(a).filter(function(){for(b=0;c>b;b++)if(r.contains(e[b],this))return!0}));for(b=0;c>b;b++)r.find(a,e[b],d);return d=this.pushStack(1<c?r.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(g(this,a||[],!1))},not:function(a){return this.pushStack(g(this,
a||[],!0))},is:function(a){return!!g(this,"string"==typeof a&&qb.test(a)?r(a):a||[],!1).length}});var db,rc=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(r.fn.init=function(a,b,c){var d,e;if(!a)return this;if(c=c||db,"string"==typeof a){if(d="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:rc.exec(a),!d||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:Q,!0)),Da.test(d[1])&&
r.isPlainObject(b))for(d in b)r.isFunction(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}return e=Q.getElementById(d[2]),e&&e.parentNode&&(this.length=1,this[0]=e),this.context=Q,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),r.makeArray(a,this))}).prototype=r.fn;db=r(Q);var ra=/^(?:parents|prev(?:Until|All))/,Yb={children:!0,contents:!0,
next:!0,prev:!0};r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],h=qb.test(a)||"string"!=typeof a?r(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(h?-1<h.index(c):1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(1<f.length?r.uniqueSort(f):f)},index:function(a){return a?"string"==
typeof a?Ja.call(r(a),this[0]):Ja.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});r.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return Oa(a,"parentNode")},parentsUntil:function(a,b,c){return Oa(a,"parentNode",c)},next:function(a){return d(a,
"nextSibling")},prev:function(a){return d(a,"previousSibling")},nextAll:function(a){return Oa(a,"nextSibling")},prevAll:function(a){return Oa(a,"previousSibling")},nextUntil:function(a,b,c){return Oa(a,"nextSibling",c)},prevUntil:function(a,b,c){return Oa(a,"previousSibling",c)},siblings:function(a){return Ta((a.parentNode||{}).firstChild,a)},children:function(a){return Ta(a.firstChild)},contents:function(a){return a.contentDocument||r.merge([],a.childNodes)}},function(a,b){r.fn[a]=function(c,d){var e=
r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),1<this.length&&(Yb[a]||r.uniqueSort(e),ra.test(a)&&e.reverse()),this.pushStack(e)}});var Ga=/\S+/g;r.Callbacks=function(a){a="string"==typeof a?b(a):r.extend({},a);var c,d,e,f,h=[],g=[],m=-1,n=function(){f=a.once;for(e=c=!0;g.length;m=-1)for(d=g.shift();++m<h.length;)!1===h[m].apply(d[0],d[1])&&a.stopOnFalse&&(m=h.length,d=!1);a.memory||(d=!1);c=!1;f&&(h=d?[]:"")},t={add:function(){return h&&(d&&!c&&(m=h.length-
1,g.push(d)),function nc(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&t.has(c)||h.push(c):c&&c.length&&"string"!==r.type(c)&&nc(c)})}(arguments),d&&!c&&n()),this},remove:function(){return r.each(arguments,function(a,b){for(var c;-1<(c=r.inArray(b,h,c));)h.splice(c,1),m>=c&&m--}),this},has:function(a){return a?-1<r.inArray(a,h):0<h.length},empty:function(){return h&&(h=[]),this},disable:function(){return f=g=[],h=d="",this},disabled:function(){return!h},lock:function(){return f=g=[],d||(h=d=
""),this},locked:function(){return!!f},fireWith:function(a,b){return f||(b=b||[],b=[a,b.slice?b.slice():b],g.push(b),c||n()),this},fire:function(){return t.fireWith(this,arguments),this},fired:function(){return!!e}};return t};r.extend({Deferred:function(a){var b=[["resolve","done",r.Callbacks("once memory"),"resolved"],["reject","fail",r.Callbacks("once memory"),"rejected"],["notify","progress",r.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),
this},then:function(){var a=arguments;return r.Deferred(function(c){r.each(b,function(b,f){var h=r.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,h?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?r.extend(a,d):d}},e={};return d.pipe=d.then,r.each(b,function(a,f){var h=f[2],g=f[3];d[f[1]]=h.add;g&&h.add(function(){c=
g},b[1^a][2].disable,b[2][2].lock);e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this};e[f[0]+"With"]=h.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=Z.call(arguments),d=c.length,e=1!==d||a&&r.isFunction(a.promise)?d:0,f=1===e?a:r.Deferred(),h=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?Z.call(arguments):d;c===g?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},g,m,n;if(1<d)for(g=Array(d),m=Array(d),n=Array(d);d>b;b++)c[b]&&r.isFunction(c[b].promise)?
c[b].promise().progress(h(b,m,g)).done(h(b,n,c)).fail(f.reject):--e;return e||f.resolveWith(n,c),f.promise()}});var kb;r.fn.ready=function(a){return r.ready.promise().done(a),this};r.extend({isReady:!1,readyWait:1,holdReady:function(a){a?r.readyWait++:r.ready(!0)},ready:function(a){(!0===a?--r.readyWait:r.isReady)||(r.isReady=!0,!0!==a&&0<--r.readyWait||(kb.resolveWith(Q,[r]),r.fn.triggerHandler&&(r(Q).triggerHandler("ready"),r(Q).off("ready"))))}});r.ready.promise=function(b){return kb||(kb=r.Deferred(),
"complete"===Q.readyState||"loading"!==Q.readyState&&!Q.documentElement.doScroll?a.setTimeout(r.ready):(Q.addEventListener("DOMContentLoaded",c),a.addEventListener("load",c))),kb.promise(b)};r.ready.promise();var da=function(a,b,c,d,e,f,h){var g=0,m=a.length,n=null==c;if("object"===r.type(c))for(g in e=!0,c)da(a,b,g,c[g],!0,f,h);else if(void 0!==d&&(e=!0,r.isFunction(d)||(h=!0),n&&(h?(b.call(a,d),b=null):(n=b,b=function(a,b,c){return n.call(r(a),c)})),b))for(;m>g;g++)b(a[g],c,h?d:d.call(a[g],g,b(a[g],
c)));return e?a:n?b.call(a):m?b(a[0],c):f},gb=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};h.uid=1;h.prototype={register:function(a,b){var c=b||{};return a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,writable:!0,configurable:!0}),a[this.expando]},cache:function(a){if(!gb(a))return{};var b=a[this.expando];return b||(b={},gb(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d;
a=this.cache(a);if("string"==typeof b)a[b]=c;else for(d in b)a[d]=b[d];return a},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,r.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e=a[this.expando];if(void 0!==e){if(void 0===b)this.register(a);else for(r.isArray(b)?d=b.concat(b.map(r.camelCase)):(c=r.camelCase(b),
b in e?d=[b,c]:(d=c,d=d in e?[d]:d.match(Ga)||[])),c=d.length;c--;)delete e[d[c]];(void 0===b||r.isEmptyObject(e))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){a=a[this.expando];return void 0!==a&&!r.isEmptyObject(a)}};var ca=new h,Ka=new h,cb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,pb=/[A-Z]/g;r.extend({hasData:function(a){return Ka.hasData(a)||ca.hasData(a)},data:function(a,b,c){return Ka.access(a,b,c)},removeData:function(a,b){Ka.remove(a,b)},_data:function(a,b,c){return ca.access(a,
b,c)},_removeData:function(a,b){ca.remove(a,b)}});r.fn.extend({data:function(a,b){var c,d,e,f=this[0],h=f&&f.attributes;if(void 0===a){if(this.length&&(e=Ka.get(f),1===f.nodeType&&!ca.get(f,"hasDataAttrs"))){for(c=h.length;c--;)h[c]&&(d=h[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),n(f,d,e[d])));ca.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){Ka.set(this,a)}):da(this,function(b){var c,d;if(f&&void 0===b){if((c=Ka.get(f,a)||Ka.get(f,a.replace(pb,"-$&").toLowerCase()),
void 0!==c)||(d=r.camelCase(a),c=Ka.get(f,d),void 0!==c)||(c=n(f,d,void 0),void 0!==c))return c}else d=r.camelCase(a),this.each(function(){var c=Ka.get(this,d);Ka.set(this,d,b);-1<a.indexOf("-")&&void 0!==c&&Ka.set(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){Ka.remove(this,a)})}});r.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=ca.get(a,b),c&&(!d||r.isArray(c)?d=ca.access(a,b,r.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,
b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b),h=function(){r.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--);e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,h,f));!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ca.get(a,c)||ca.access(a,c,{empty:r.Callbacks("once memory").add(function(){ca.remove(a,[b+"queue",c])})})}});r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],
a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,h=this.length,g=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0);for(a=a||"fx";h--;)(c=ca.get(f[h],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(g));return g(),e.promise(b)}});
var gc=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Wa=new RegExp("^(?:([+-])=|)("+gc+")([a-z%]*)$","i"),Ya=["Top","Right","Bottom","Left"],Mb=function(a,b){return a=b||a,"none"===r.css(a,"display")||!r.contains(a.ownerDocument,a)},sc=/^(?:checkbox|radio)$/i,eb=/<([\w:-]+)/,lb=/^$|\/(?:java|ecma)script/i,Xa={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>",
"</tr></tbody></table>"],_default:[0,"",""]};Xa.optgroup=Xa.option;Xa.tbody=Xa.tfoot=Xa.colgroup=Xa.caption=Xa.thead;Xa.th=Xa.td;var Pc=/<|&#?\w+;/;!function(){var a=Q.createDocumentFragment().appendChild(Q.createElement("div")),b=Q.createElement("input");b.setAttribute("type","radio");b.setAttribute("checked","checked");b.setAttribute("name","t");a.appendChild(b);la.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";la.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue}();
var Pa=/^key/,Nb=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Bb=/^([^.]*)(?:\.(.+)|)/;r.event={global:{},add:function(a,b,c,d,e){var f,h,g,m,n,t,l,k,p,w;if(n=ca.get(a))for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=r.guid++),(m=n.events)||(m=n.events={}),(h=n.handle)||(h=n.handle=function(b){return"undefined"!=typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(Ga)||[""],n=b.length;n--;)g=Bb.exec(b[n])||[],p=w=g[1],g=(g[2]||"").split(".").sort(),
p&&(l=r.event.special[p]||{},p=(e?l.delegateType:l.bindType)||p,l=r.event.special[p]||{},t=r.extend({type:p,origType:w,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:g.join(".")},f),(k=m[p])||(k=m[p]=[],k.delegateCount=0,l.setup&&!1!==l.setup.call(a,d,g,h)||a.addEventListener&&a.addEventListener(p,h)),l.add&&(l.add.call(a,t),t.handler.guid||(t.handler.guid=c.guid)),e?k.splice(k.delegateCount++,0,t):k.push(t),r.event.global[p]=!0)},remove:function(a,
b,c,d,e){var f,h,g,m,n,t,l,k,p,w,q,u=ca.hasData(a)&&ca.get(a);if(u&&(m=u.events)){b=(b||"").match(Ga)||[""];for(n=b.length;n--;)if(g=Bb.exec(b[n])||[],p=q=g[1],w=(g[2]||"").split(".").sort(),p){l=r.event.special[p]||{};p=(d?l.delegateType:l.bindType)||p;k=m[p]||[];g=g[2]&&new RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)");for(h=f=k.length;f--;)t=k[f],!e&&q!==t.origType||c&&c.guid!==t.guid||g&&!g.test(t.namespace)||d&&d!==t.selector&&("**"!==d||!t.selector)||(k.splice(f,1),t.selector&&k.delegateCount--,
l.remove&&l.remove.call(a,t));h&&!k.length&&(l.teardown&&!1!==l.teardown.call(a,w,u.handle)||r.removeEvent(a,p,u.handle),delete m[p])}else for(p in m)r.event.remove(a,p+b[n],c,d,!0);r.isEmptyObject(m)&&ca.remove(a,"handle events")}},dispatch:function(a){a=r.event.fix(a);var b,c,d,e,f,h,g=Z.call(arguments);b=(ca.get(this,"events")||{})[a.type]||[];var m=r.event.special[a.type]||{};if(g[0]=a,a.delegateTarget=this,!m.preDispatch||!1!==m.preDispatch.call(this,a)){h=r.event.handlers.call(this,a,b);for(b=
0;(e=h[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(f.namespace)||(a.handleObj=f,a.data=f.data,d=((r.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,g),void 0!==d&&!1===(a.result=d)&&(a.preventDefault(),a.stopPropagation()));return m.postDispatch&&m.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,h=[],g=b.delegateCount,m=a.target;if(g&&m.nodeType&&("click"!==
a.type||isNaN(a.button)||1>a.button))for(;m!==this;m=m.parentNode||this)if(1===m.nodeType&&(!0!==m.disabled||"click"!==a.type)){d=[];for(c=0;g>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?-1<r(e,this).index(m):r.find(e,this,null,[m]).length),d[e]&&d.push(f);d.length&&h.push({elem:m,handlers:d})}return g<b.length&&h.push({elem:this,handlers:b.slice(g)}),h},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||Q,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||
0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[r.expando])return a;var b,c,d;b=a.type;var e=a,f=this.fixHooks[b];f||(this.fixHooks[b]=f=Nb.test(b)?this.mouseHooks:Pa.test(b)?this.keyHooks:{});d=f.props?this.props.concat(f.props):this.props;a=new r.Event(e);for(b=d.length;b--;)c=d[b],a[c]=e[c];return a.target||(a.target=Q),3===a.target.nodeType&&(a.target=a.target.parentNode),
f.filter?f.filter(a,e):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==k()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===k()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&r.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return r.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&
(a.originalEvent.returnValue=a.result)}}}};r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)};r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?p:u):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)};r.Event.prototype={constructor:r.Event,isDefaultPrevented:u,isPropagationStopped:u,
isImmediatePropagationStopped:u,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=p;a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=p;a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=p;a&&!this.isSimulated&&a.stopImmediatePropagation();this.stopPropagation()}};r.each({mouseenter:"mouseover",mouseleave:"mouseout",
pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=a.relatedTarget,e=a.handleObj;return d&&(d===this||r.contains(this,d))||(a.type=e.origType,c=e.handler.apply(this,arguments),a.type=b),c}}});r.fn.extend({on:function(a,b,c,d){return q(this,a,b,c,d)},one:function(a,b,c,d){return q(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?
d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return!1!==b&&"function"!=typeof b||(c=b,b=void 0),!1===c&&(c=u),this.each(function(){r.event.remove(this,a,c,b)})}});var Zb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,tc=/<script|<style|<link/i,Ib=/checked\s*(?:[^=]|=\s*.checked.)/i,fc=/^true\/(.*)/,Bc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;r.extend({htmlPrefilter:function(a){return a.replace(Zb,
"<$1></$2>")},clone:function(a,b,c){var d,e,f,h,g=a.cloneNode(!0),m=r.contains(a.ownerDocument,a);if(!(la.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(h=t(g),f=t(a),d=0,e=f.length;e>d;d++){var n=f[d],l=h[d],p=l.nodeName.toLowerCase();"input"===p&&sc.test(n.type)?l.checked=n.checked:"input"!==p&&"textarea"!==p||(l.defaultValue=n.defaultValue)}if(b)if(c)for(f=f||t(a),h=h||t(g),d=0,e=f.length;e>d;d++)E(f[d],h[d]);else E(a,g);return h=t(g,"script"),0<h.length&&w(h,!m&&t(a,"script")),
g},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(gb(c)){if(b=c[ca.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[ca.expando]=void 0}c[Ka.expando]&&(c[Ka.expando]=void 0)}}});r.fn.extend({domManip:D,detach:function(a){return F(this,a,!0)},remove:function(a){return F(this,a)},text:function(a){return da(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&
9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return D(this,arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||A(this,a).appendChild(a)})},prepend:function(){return D(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=A(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return D(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return D(this,
arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(t(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return da(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!tc.test(a)&&!Xa[(eb.exec(a)||["",
""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(r.cleanData(t(b,!1)),b.innerHTML=a);b=0}catch(cd){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return D(this,arguments,function(b){var c=this.parentNode;0>r.inArray(this,a)&&(r.cleanData(t(this)),c&&c.replaceChild(b,this))},a)}});r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=
function(a){for(var c=[],d=r(a),e=d.length-1,f=0;e>=f;f++)a=f===e?this:this.clone(!0),r(d[f])[b](a),xa.apply(c,a.get());return this.pushStack(c)}});var Jb,oc={HTML:"block",BODY:"block"},Vb=/^margin/,jb=new RegExp("^("+gc+")(?!px)[a-z%]+$","i"),Sa=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},vb=function(a,b,c,d){var e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];c=c.apply(a,d||[]);for(e in b)a.style[e]=f[e];return c},Ua=Q.documentElement;!function(){var b,
c,d,e,f=Q.createElement("div"),h=Q.createElement("div");if(h.style){var g=function(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";h.innerHTML="";Ua.appendChild(f);var g=a.getComputedStyle(h);b="1%"!==g.top;e="2px"===g.marginLeft;c="4px"===g.width;h.style.marginRight="50%";d="4px"===g.marginRight;Ua.removeChild(f)};h.style.backgroundClip="content-box";h.cloneNode(!0).style.backgroundClip=
"";la.clearCloneStyle="content-box"===h.style.backgroundClip;f.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute";f.appendChild(h);r.extend(la,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},pixelMarginRight:function(){return null==c&&g(),d},reliableMarginLeft:function(){return null==c&&g(),e},reliableMarginRight:function(){var b,c=h.appendChild(Q.createElement("div"));return c.style.cssText=h.style.cssText=
"-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",h.style.width="1px",Ua.appendChild(f),b=!parseFloat(a.getComputedStyle(c).marginRight),Ua.removeChild(f),h.removeChild(c),b}})}}();var hb=/^(none|table(?!-c[ea]).+)/,Cb={position:"absolute",visibility:"hidden",display:"block"},hc={letterSpacing:"0",fontWeight:"400"},Lb=["Webkit","O","Moz","ms"],Kb=Q.createElement("div").style;r.extend({cssHooks:{opacity:{get:function(a,
b){if(b){var c=J(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,h,g=r.camelCase(b),n=a.style;return b=r.cssProps[g]||(r.cssProps[g]=U(g)||g),h=r.cssHooks[b]||r.cssHooks[g],void 0===c?h&&"get"in h&&void 0!==(e=h.get(a,!1,d))?
e:n[b]:(f=typeof c,"string"===f&&(e=Wa.exec(c))&&e[1]&&(c=m(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[g]?"":"px")),la.clearCloneStyle||""!==c||0!==b.indexOf("background")||(n[b]="inherit"),h&&"set"in h&&void 0===(c=h.set(a,c,d))||(n[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,h,g=r.camelCase(b);return b=r.cssProps[g]||(r.cssProps[g]=U(g)||g),h=r.cssHooks[b]||r.cssHooks[g],h&&"get"in h&&(e=h.get(a,!0,c)),void 0===e&&(e=J(a,b,d)),"normal"===e&&b in hc&&(e=hc[b]),
""===c||c?(f=parseFloat(e),!0===c||isFinite(f)?f||0:e):e}});r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){return c?hb.test(r.css(a,"display"))&&0===a.offsetWidth?vb(a,Cb,function(){return ia(a,b,d)}):ia(a,b,d):void 0},set:function(a,c,d){var e,f=d&&Sa(a);d=d&&aa(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return d&&(e=Wa.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),O(a,c,d)}}});r.cssHooks.marginLeft=I(la.reliableMarginLeft,function(a,b){return b?(parseFloat(J(a,
"marginLeft"))||a.getBoundingClientRect().left-vb(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0});r.cssHooks.marginRight=I(la.reliableMarginRight,function(a,b){return b?vb(a,{display:"inline-block"},J,[a,"marginRight"]):void 0});r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){var d=0,e={};for(c="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+Ya[d]+b]=c[d]||c[d-2]||c[0];return e}};Vb.test(a)||(r.cssHooks[a+b].set=O)});
r.fn.extend({css:function(a,b){return da(this,function(a,b,c){var d,e={},f=0;if(r.isArray(b)){c=Sa(a);for(d=b.length;d>f;f++)e[b[f]]=r.css(a,b[f],!1,c);return e}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,1<arguments.length)},show:function(){return X(this,!0)},hide:function(){return X(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Mb(this)?r(this).show():r(this).hide()})}});r.Tween=R;R.prototype={constructor:R,init:function(a,b,c,d,e,f){this.elem=
a;this.prop=c;this.easing=e||r.easing._default;this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=R.propHooks[this.prop];return a&&a.get?a.get(this):R.propHooks._default.get(this)},run:function(a){var b,c=R.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,
this.now,this),c&&c.set?c.set(this):R.propHooks._default.set(this),this}};R.prototype.init.prototype=R.prototype;R.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}};R.propHooks.scrollTop=
R.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"};r.fx=R.prototype.init;r.fx.step={};var Ab,sa,rb=/^(?:toggle|show|hide)$/,Db=/queueHooks$/;r.Animation=r.extend(ka,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return m(c.elem,a,Wa.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(Ga);for(var c,d=0,e=a.length;e>
d;d++)c=a[d],ka.tweeners[c]=ka.tweeners[c]||[],ka.tweeners[c].unshift(b)},prefilters:[function(a,b,c){var d,e,f,h,g,m,n,t=this,l={},p=a.style,k=a.nodeType&&Mb(a),w=ca.get(a,"fxshow");c.queue||(h=r._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,g=h.empty.fire,h.empty.fire=function(){h.unqueued||g()}),h.unqueued++,t.always(function(){t.always(function(){h.unqueued--;r.queue(a,"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],
m=r.css(a,"display"),n="none"===m?ca.get(a,"olddisplay")||P(a.nodeName):m,"inline"===n&&"none"===r.css(a,"float")&&(p.display="inline-block"));c.overflow&&(p.overflow="hidden",t.always(function(){p.overflow=c.overflow[0];p.overflowX=c.overflow[1];p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],rb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(k?"hide":"show")){if("show"!==e||!w||void 0===w[d])continue;k=!0}l[d]=w&&w[d]||r.style(a,d)}else m=void 0;if(r.isEmptyObject(l))"inline"===("none"===m?P(a.nodeName):
m)&&(p.display=m);else for(d in w?"hidden"in w&&(k=w.hidden):w=ca.access(a,"fxshow",{}),f&&(w.hidden=!k),k?r(a).show():t.done(function(){r(a).hide()}),t.done(function(){var b;ca.remove(a,"fxshow");for(b in l)r.style(a,b,l[b])}),l)b=H(k?w[d]:0,d,t),d in w||(w[d]=b.start,k&&(b.end=b.start,b.start="width"===d||"height"===d?1:0))}],prefilter:function(a,b){b?ka.prefilters.unshift(a):ka.prefilters.push(a)}});r.speed=function(a,b,c){var d=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&
a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return d.duration=r.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in r.fx.speeds?r.fx.speeds[d.duration]:r.fx.speeds._default,null!=d.queue&&!0!==d.queue||(d.queue="fx"),d.old=d.complete,d.complete=function(){r.isFunction(d.old)&&d.old.call(this);d.queue&&r.dequeue(this,d.queue)},d};r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Mb).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),
f=r.speed(b,c,d);b=function(){var b=ka(this,r.extend({},a),f);(e||ca.get(this,"finish"))&&b.stop(!0)};return b.finish=b,e||!1===f.queue?this.each(b):this.queue(f.queue,b)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,h=ca.get(this);if(e)h[e]&&h[e].stop&&d(h[e]);else for(e in h)h[e]&&h[e].stop&&Db.test(e)&&d(h[e]);for(e=f.length;e--;)f[e].elem!==
this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,c=ca.get(this),d=c[a+"queue"];b=c[a+"queueHooks"];var e=r.timers,f=d?d.length:0;c.finish=!0;r.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=e.length;b--;)e[b].elem===this&&e[b].queue===a&&(e[b].anim.stop(!0),e.splice(b,1));for(b=0;f>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}});r.each(["toggle","show",
"hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(ja(b,!0),a,d,e)}});r.each({slideDown:ja("show"),slideUp:ja("hide"),slideToggle:ja("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});r.timers=[];r.fx.tick=function(){var a,b=0,c=r.timers;for(Ab=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||
r.fx.stop();Ab=void 0};r.fx.timer=function(a){r.timers.push(a);a()?r.fx.start():r.timers.pop()};r.fx.interval=13;r.fx.start=function(){sa||(sa=a.setInterval(r.fx.tick,r.fx.interval))};r.fx.stop=function(){a.clearInterval(sa);sa=null};r.fx.speeds={slow:600,fast:200,_default:400};r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})};(function(){var a=Q.createElement("input"),b=Q.createElement("select"),
c=b.appendChild(Q.createElement("option"));a.type="checkbox";la.checkOn=""!==a.value;la.optSelected=c.selected;b.disabled=!0;la.optDisabled=!c.disabled;a=Q.createElement("input");a.value="t";a.type="radio";la.radioValue="t"===a.value})();var $b,$a=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return da(this,r.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}});r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==
typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(b=b.toLowerCase(),e=r.attrHooks[b]||(r.expr.match.bool.test(b)?$b:void 0)),void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=r.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!la.radioValue&&"radio"===b&&r.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,
b){var c,d,e=0,f=b&&b.match(Ga);if(f&&1===a.nodeType)for(;c=f[e++];)d=r.propFix[c]||c,r.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}});$b={set:function(a,b,c){return!1===b?r.removeAttr(a,c):a.setAttribute(c,c),c}};r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$a[b]||r.find.attr;$a[b]=function(a,b,d){var e,f;return d||(f=$a[b],$a[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$a[b]=f),e}});var wb=/^(?:input|select|textarea|button)$/i,nb=/^(?:a|area)$/i;r.fn.extend({prop:function(a,
b){return da(this,r.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}});r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):wb.test(a.nodeName)||nb.test(a.nodeName)&&
a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});la.optSelected||(r.propHooks.selected={get:function(a){a=a.parentNode;return a&&a.parentNode&&a.parentNode.selectedIndex,null},set:function(a){a=a.parentNode;a&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex)}});r.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){r.propFix[this.toLowerCase()]=this});var Ob=/[\t\r\n\f]/g;r.fn.extend({addClass:function(a){var b,
c,d,e,f,h,g=0;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,qa(this)))});if("string"==typeof a&&a)for(b=a.match(Ga)||[];c=this[g++];)if(e=qa(c),d=1===c.nodeType&&(" "+e+" ").replace(Ob," ")){for(h=0;f=b[h++];)0>d.indexOf(" "+f+" ")&&(d+=f+" ");d=r.trim(d);e!==d&&c.setAttribute("class",d)}return this},removeClass:function(a){var b,c,d,e,f,h,g=0;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,qa(this)))});if(!arguments.length)return this.attr("class",
"");if("string"==typeof a&&a)for(b=a.match(Ga)||[];c=this[g++];)if(e=qa(c),d=1===c.nodeType&&(" "+e+" ").replace(Ob," ")){for(h=0;f=b[h++];)for(;-1<d.indexOf(" "+f+" ");)d=d.replace(" "+f+" "," ");d=r.trim(d);e!==d&&c.setAttribute("class",d)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,qa(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===
c)for(d=0,e=r(this),f=a.match(Ga)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else void 0!==a&&"boolean"!==c||(b=qa(this),b&&ca.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||!1===a?"":ca.get(this,"__className__")||""))})},hasClass:function(a){var b,c=0;for(a=" "+a+" ";b=this[c++];)if(1===b.nodeType&&-1<(" "+qa(b)+" ").replace(Ob," ").indexOf(a))return!0;return!1}});var ib=/\r/g,uc=/[\x20\t\r\n\f]+/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];if(arguments.length)return d=
r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,r(this).val()):a,null==e?e="":"number"==typeof e?e+="":r.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ib,""):null==c?
"":c)}});r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:r.trim(r.text(a)).replace(uc," ")}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,e="select-one"===a.type||0>d,f=e?null:[],h=e?d+1:c.length,g=0>d?h:e?d:0;h>g;g++)if(b=c[g],!(!b.selected&&g!==d||(la.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&r.nodeName(b.parentNode,"optgroup"))){if(a=r(b).val(),e)return a;f.push(a)}return f},set:function(a,b){for(var c,
d,e=a.options,f=r.makeArray(b),h=e.length;h--;)d=e[h],(d.selected=-1<r.inArray(r.valHooks.option.get(d),f))&&(c=!0);return c||(a.selectedIndex=-1),f}}}});r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){return r.isArray(b)?a.checked=-1<r.inArray(r(a).val(),b):void 0}};la.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var ac=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,d,e){var f,h,g,m,n,t,l,p=
[d||Q],k=Za.call(b,"type")?b.type:b;f=Za.call(b,"namespace")?b.namespace.split("."):[];if(h=g=d=d||Q,3!==d.nodeType&&8!==d.nodeType&&!ac.test(k+r.event.triggered)&&(-1<k.indexOf(".")&&(f=k.split("."),k=f.shift(),f.sort()),n=0>k.indexOf(":")&&"on"+k,b=b[r.expando]?b:new r.Event(k,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=f.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:r.makeArray(c,[b]),
l=r.event.special[k]||{},e||!l.trigger||!1!==l.trigger.apply(d,c))){if(!e&&!l.noBubble&&!r.isWindow(d)){m=l.delegateType||k;for(ac.test(m+k)||(h=h.parentNode);h;h=h.parentNode)p.push(h),g=h;g===(d.ownerDocument||Q)&&p.push(g.defaultView||g.parentWindow||a)}for(f=0;(h=p[f++])&&!b.isPropagationStopped();)b.type=1<f?m:l.bindType||k,(t=(ca.get(h,"events")||{})[b.type]&&ca.get(h,"handle"))&&t.apply(h,c),(t=n&&h[n])&&t.apply&&gb(h)&&(b.result=t.apply(h,c),!1===b.result&&b.preventDefault());return b.type=
k,e||b.isDefaultPrevented()||l._default&&!1!==l._default.apply(p.pop(),c)||!gb(d)||n&&r.isFunction(d[k])&&!r.isWindow(d)&&(g=d[n],g&&(d[n]=null),r.event.triggered=k,d[k](),r.event.triggered=void 0,g&&(d[n]=g)),b.result}},simulate:function(a,b,c){a=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(a,null,b)}});r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?r.event.trigger(a,b,c,!0):void 0}});
r.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});la.focusin="onfocusin"in a;la.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,
a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=ca.access(d,b);e||d.addEventListener(a,c,!0);ca.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=ca.access(d,b)-1;e?ca.access(d,b,e):(d.removeEventListener(a,c,!0),ca.remove(d,b))}}});var xb=a.location,pa=r.now(),Pb=/\?/;r.parseJSON=function(a){return JSON.parse(a+"")};r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,
"text/xml")}catch(Id){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var Tc=/#.*$/,ic=/([?&])_=[^&]*/,Uc=/^(.*?):[ \t]*([^\r\n]*)$/gm,vc=/^(?:GET|HEAD)$/,wc=/^\/\//,jc={},Cc={},Qb="*/".concat("*"),Rb=Q.createElement("a");Rb.href=xb.href;r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xb.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",
accepts:{"*":Qb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":r.parseJSON,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?ba(ba(a,r.ajaxSettings),b):ba(r.ajaxSettings,a)},ajaxPrefilter:ua(jc),ajaxTransport:ua(Cc),
ajax:function(b,c){function d(b,c,d,g){var n,l,Q,z,ua=c;if(2!==B){B=2;m&&a.clearTimeout(m);e=void 0;h=g||"";Z.readyState=0<b?4:0;g=200<=b&&300>b||304===b;if(d){Q=k;for(var D=Z,T,ha,ba,M,E=Q.contents,N=Q.dataTypes;"*"===N[0];)N.shift(),void 0===T&&(T=Q.mimeType||D.getResponseHeader("Content-Type"));if(T)for(ha in E)if(E[ha]&&E[ha].test(T)){N.unshift(ha);break}if(N[0]in d)ba=N[0];else{for(ha in d){if(!N[0]||Q.converters[ha+" "+N[0]]){ba=ha;break}M||(M=ha)}ba=ba||M}Q=ba?(ba!==N[0]&&N.unshift(ba),d[ba]):
void 0}var F;a:{d=k;T=Q;ha=Z;ba=g;var R,L,G;Q={};D=d.dataTypes.slice();if(D[1])for(R in d.converters)Q[R.toLowerCase()]=d.converters[R];for(M=D.shift();M;)if(d.responseFields[M]&&(ha[d.responseFields[M]]=T),!G&&ba&&d.dataFilter&&(T=d.dataFilter(T,d.dataType)),G=M,M=D.shift())if("*"===M)M=G;else if("*"!==G&&G!==M){if(R=Q[G+" "+M]||Q["* "+M],!R)for(F in Q)if(L=F.split(" "),L[1]===M&&(R=Q[G+" "+L[0]]||Q["* "+L[0]])){!0===R?R=Q[F]:!0!==Q[F]&&(M=L[0],D.unshift(L[1]));break}if(!0!==R)if(R&&d["throws"])T=
R(T);else try{T=R(T)}catch(Fc){F={state:"parsererror",error:R?Fc:"No conversion from "+G+" to "+M};break a}}F={state:"success",data:T}}Q=F;g?(k.ifModified&&(z=Z.getResponseHeader("Last-Modified"),z&&(r.lastModified[f]=z),z=Z.getResponseHeader("etag"),z&&(r.etag[f]=z)),204===b||"HEAD"===k.type?ua="nocontent":304===b?ua="notmodified":(ua=Q.state,n=Q.data,l=Q.error,g=!l)):(l=ua,!b&&ua||(ua="error",0>b&&(b=0)));Z.status=b;Z.statusText=(c||ua)+"";g?q.resolveWith(p,[n,ua,Z]):q.rejectWith(p,[Z,ua,l]);Z.statusCode(A);
A=void 0;t&&w.trigger(g?"ajaxSuccess":"ajaxError",[Z,k,g?n:l]);u.fireWith(p,[Z,ua]);t&&(w.trigger("ajaxComplete",[Z,k]),--r.active||r.event.trigger("ajaxStop"))}}"object"==typeof b&&(c=b,b=void 0);c=c||{};var e,f,h,g,m,n,t,l,k=r.ajaxSetup({},c),p=k.context||k,w=k.context&&(p.nodeType||p.jquery)?r(p):r.event,q=r.Deferred(),u=r.Callbacks("once memory"),A=k.statusCode||{},z={},ua={},B=0,D="canceled",Z={readyState:0,getResponseHeader:function(a){var b;if(2===B){if(!g)for(g={};b=Uc.exec(h);)g[b[1].toLowerCase()]=
b[2];b=g[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===B?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return B||(a=ua[c]=ua[c]||a,z[a]=b),this},overrideMimeType:function(a){return B||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>B)for(b in a)A[b]=[A[b],a[b]];else Z.always(a[Z.status]);return this},abort:function(a){a=a||D;return e&&e.abort(a),d(0,a),this}};if(q.promise(Z).complete=u.add,Z.success=Z.done,Z.error=Z.fail,k.url=((b||
k.url||xb.href)+"").replace(Tc,"").replace(wc,xb.protocol+"//"),k.type=c.method||c.type||k.method||k.type,k.dataTypes=r.trim(k.dataType||"*").toLowerCase().match(Ga)||[""],null==k.crossDomain){n=Q.createElement("a");try{n.href=k.url,n.href=n.href,k.crossDomain=Rb.protocol+"//"+Rb.host!=n.protocol+"//"+n.host}catch(S){k.crossDomain=!0}}if(k.data&&k.processData&&"string"!=typeof k.data&&(k.data=r.param(k.data,k.traditional)),T(jc,k,c,Z),2===B)return Z;(t=r.event&&k.global)&&0===r.active++&&r.event.trigger("ajaxStart");
k.type=k.type.toUpperCase();k.hasContent=!vc.test(k.type);f=k.url;k.hasContent||(k.data&&(f=k.url+=(Pb.test(f)?"&":"?")+k.data,delete k.data),!1===k.cache&&(k.url=ic.test(f)?f.replace(ic,"$1_="+pa++):f+(Pb.test(f)?"&":"?")+"_="+pa++));k.ifModified&&(r.lastModified[f]&&Z.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&Z.setRequestHeader("If-None-Match",r.etag[f]));(k.data&&k.hasContent&&!1!==k.contentType||c.contentType)&&Z.setRequestHeader("Content-Type",k.contentType);Z.setRequestHeader("Accept",
k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Qb+"; q=0.01":""):k.accepts["*"]);for(l in k.headers)Z.setRequestHeader(l,k.headers[l]);if(k.beforeSend&&(!1===k.beforeSend.call(p,Z,k)||2===B))return Z.abort();D="abort";for(l in{success:1,error:1,complete:1})Z[l](k[l]);if(e=T(Cc,k,c,Z)){if(Z.readyState=1,t&&w.trigger("ajaxSend",[Z,k]),2===B)return Z;k.async&&0<k.timeout&&(m=a.setTimeout(function(){Z.abort("timeout")},k.timeout));try{B=1,e.send(z,d)}catch(S){if(!(2>
B))throw S;d(-1,S)}}else d(-1,"No Transport");return Z},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}});r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}});r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};r.fn.extend({wrapAll:function(a){var b;
return r.isFunction(a)?this.each(function(b){r(this).wrapAll(a.call(this,b))}):(this[0]&&(b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);
return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){r.nodeName(this,"body")||r(this).replaceWith(this.childNodes)}).end()}});r.expr.filters.hidden=function(a){return!r.expr.filters.visible(a)};r.expr.filters.visible=function(a){return 0<a.offsetWidth||0<a.offsetHeight||0<a.getClientRects().length};var Vc=/%20/g,Dc=/\[\]$/,sb=/\r?\n/g,Eb=/^(?:submit|button|image|reset|file)$/i,yb=/^(?:input|select|textarea|keygen)/i;r.param=function(a,
b){var c,d=[],e=function(a,b){b=r.isFunction(b)?b():null==b?"":b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=r.ajaxSettings&&r.ajaxSettings.traditional),r.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(c in a)ha(c,a[c],b,e);return d.join("&").replace(Vc,"+")};r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");
return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&yb.test(this.nodeName)&&!Eb.test(a)&&(this.checked||!sc.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:r.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(sb,"\r\n")}}):{name:b.name,value:c.replace(sb,"\r\n")}}).get()}});r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(ya){}};var Va={0:200,1223:204},ab=r.ajaxSettings.xhr();la.cors=!!ab&&
"withCredentials"in ab;la.ajax=ab=!!ab;r.ajaxTransport(function(b){var c,d;return la.cors||ab&&!b.crossDomain?{send:function(e,f){var h,g=b.xhr();if(g.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(h in b.xhrFields)g[h]=b.xhrFields[h];b.mimeType&&g.overrideMimeType&&g.overrideMimeType(b.mimeType);b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(h in e)g.setRequestHeader(h,e[h]);c=function(a){return function(){c&&(c=d=g.onload=g.onerror=g.onabort=
g.onreadystatechange=null,"abort"===a?g.abort():"error"===a?"number"!=typeof g.status?f(0,"error"):f(g.status,g.statusText):f(Va[g.status]||g.status,g.statusText,"text"!==(g.responseType||"text")||"string"!=typeof g.responseText?{binary:g.response}:{text:g.responseText},g.getAllResponseHeaders()))}};g.onload=c();d=g.onerror=c("error");void 0!==g.onabort?g.onabort=d:g.onreadystatechange=function(){4===g.readyState&&a.setTimeout(function(){c&&d()})};c=c("abort");try{g.send(b.hasContent&&b.data||null)}catch(Oc){if(c)throw Oc;
}},abort:function(){c&&c()}}:void 0});r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}});r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=r("<script>").prop({charset:a.scriptCharset,
src:a.url}).on("load error",c=function(a){b.remove();c=null;a&&e("error"===a.type?404:200,a.type)});Q.head.appendChild(b[0])},abort:function(){c&&c()}}}});var zb=[],Fb=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=zb.pop()||r.expando+"_"+pa++;return this[a]=!0,a}});r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,h,g=!1!==b.jsonp&&(Fb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fb.test(b.data)&&
"data");return g||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,g?b[g]=b[g].replace(Fb,"$1"+e):!1!==b.jsonp&&(b.url+=(Pb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return h||r.error(e+" was not called"),h[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){h=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f;b[e]&&(b.jsonpCallback=c.jsonpCallback,zb.push(e));h&&r.isFunction(f)&&f(h[0]);h=f=
void 0}),"script"):void 0});r.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1);b=b||Q;var d=Da.exec(a);c=!c&&[];return d?[b.createElement(d[1])]:(d=l([a],b,c),c&&c.length&&r(c).remove(),r.merge([],d.childNodes))};var fd=r.fn.load;r.fn.load=function(a,b,c){if("string"!=typeof a&&fd)return fd.apply(this,arguments);var d,e,f,h=this,g=a.indexOf(" ");return-1<g&&(d=r.trim(a.slice(g)),a=a.slice(0,g)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e=
"POST"),0<h.length&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments;h.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){h.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this};r.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){r.fn[b]=function(a){return this.on(b,a)}});r.expr.filters.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length};r.offset={setOffset:function(a,
b,c){var d,e,f,h,g,m,n=r.css(a,"position"),t=r(a),l={};"static"===n&&(a.style.position="relative");g=t.offset();f=r.css(a,"top");m=r.css(a,"left");("absolute"===n||"fixed"===n)&&-1<(f+m).indexOf("auto")?(d=t.position(),h=d.top,e=d.left):(h=parseFloat(f)||0,e=parseFloat(m)||0);r.isFunction(b)&&(b=b.call(a,c,r.extend({},g)));null!=b.top&&(l.top=b.top-g.top+h);null!=b.left&&(l.left=b.left-g.left+e);"using"in b?b.using.call(a,l):t.css(l)}};r.fn.extend({offset:function(a){if(arguments.length)return void 0===
a?this:this.each(function(b){r.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,r.contains(b,d)?(e=d.getBoundingClientRect(),c=N(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),r.nodeName(a[0],"html")||(d=a.offset()),d.top+=r.css(a[0],
"borderTopWidth",!0),d.left+=r.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===r.css(a,"position");)a=a.offsetParent;return a||Ua})}});r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return da(this,function(a,d,e){var f=N(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?
f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}});r.each(["top","left"],function(a,b){r.cssHooks[b]=I(la.pixelPosition,function(a,c){return c?(c=J(a,b),jb.test(c)?r(a).position()[b]+"px":c):void 0})});r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),h=c||(!0===d||!0===e?"margin":"border");return da(this,function(b,c,d){var e;return r.isWindow(b)?
b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?r.css(b,c,h):r.style(b,c,d,h)},b,f?d:void 0,f,null)}})});r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}});
r.fn.andSelf=r.fn.addBack;"function"==typeof define&&define.amd&&define("jquery",[],function(){return r});var gd=a.jQuery,Ba=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Ba),b&&a.jQuery===r&&(a.jQuery=gd),r},e||(a.jQuery=a.$=r),r});/*
 Bootstrap v3.3.6 (http://getbootstrap.com)
 Copyright 2011-2015 Twitter, Inc.
 Licensed under the MIT license
*/
if("undefined"===typeof jQuery)throw Error("Bootstrap's JavaScript requires jQuery");+function(a){a=a.fn.jquery.split(" ")[0].split(".");if(2>a[0]&&9>a[1]||1==a[0]&&9==a[1]&&1>a[2]||2<a[0])throw Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3");}(jQuery);
+function(a){function e(){var a=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},d;for(d in e)if(void 0!==a.style[d])return{end:e[d]};return!1}a.fn.emulateTransitionEnd=function(e){var f=!1,d=this;a(this).one("bsTransitionEnd",function(){f=!0});setTimeout(function(){f||a(d).trigger(a.support.transition.end)},e);return this};a(function(){a.support.transition=e();a.support.transition&&
(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(e){if(a(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery);
+function(a){var e=function(e){a(e).on("click",'[data-dismiss="alert"]',this.close)};e.VERSION="3.3.6";e.TRANSITION_DURATION=150;e.prototype.close=function(f){function d(){h.detach().trigger("closed.bs.alert").remove()}var b=a(this),c=b.attr("data-target");c||(c=(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]*$)/,""));var h=a(c);f&&f.preventDefault();h.length||(h=b.closest(".alert"));h.trigger(f=a.Event("close.bs.alert"));f.isDefaultPrevented()||(h.removeClass("in"),a.support.transition&&h.hasClass("fade")?
h.one("bsTransitionEnd",d).emulateTransitionEnd(e.TRANSITION_DURATION):d())};var f=a.fn.alert;a.fn.alert=function(f){return this.each(function(){var d=a(this),b=d.data("bs.alert");b||d.data("bs.alert",b=new e(this));"string"==typeof f&&b[f].call(d)})};a.fn.alert.Constructor=e;a.fn.alert.noConflict=function(){a.fn.alert=f;return this};a(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',e.prototype.close)}(jQuery);
+function(a){function e(d){return this.each(function(){var b=a(this),c=b.data("bs.button"),e="object"==typeof d&&d;c||b.data("bs.button",c=new f(this,e));"toggle"==d?c.toggle():d&&c.setState(d)})}var f=function(d,b){this.$element=a(d);this.options=a.extend({},f.DEFAULTS,b);this.isLoading=!1};f.VERSION="3.3.6";f.DEFAULTS={loadingText:"loading..."};f.prototype.setState=function(d){var b=this.$element,c=b.is("input")?"val":"html",e=b.data();d+="Text";null==e.resetText&&b.data("resetText",b[c]());setTimeout(a.proxy(function(){b[c](null==
e[d]?this.options[d]:e[d]);"loadingText"==d?(this.isLoading=!0,b.addClass("disabled").attr("disabled","disabled")):this.isLoading&&(this.isLoading=!1,b.removeClass("disabled").removeAttr("disabled"))},this),0)};f.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&
(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active"));c.prop("checked",this.$element.hasClass("active"));a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var g=a.fn.button;a.fn.button=e;a.fn.button.Constructor=f;a.fn.button.noConflict=function(){a.fn.button=g;return this};a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(d){var b=a(d.target);
b.hasClass("btn")||(b=b.closest(".btn"));e.call(b,"toggle");a(d.target).is('input[type="radio"]')||a(d.target).is('input[type="checkbox"]')||d.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(d){a(d.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(d.type))})}(jQuery);
+function(a){function e(b){return this.each(function(){var c=a(this),d=c.data("bs.carousel"),e=a.extend({},f.DEFAULTS,c.data(),"object"==typeof b&&b),g="string"==typeof b?b:e.slide;d||c.data("bs.carousel",d=new f(this,e));if("number"==typeof b)d.to(b);else if(g)d[g]();else e.interval&&d.pause().cycle()})}var f=function(b,c){this.$element=a(b);this.$indicators=this.$element.find(".carousel-indicators");this.options=c;this.$items=this.$active=this.interval=this.sliding=this.paused=null;this.options.keyboard&&
this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this));"hover"!=this.options.pause||"ontouchstart"in document.documentElement||this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};f.VERSION="3.3.6";f.TRANSITION_DURATION=600;f.DEFAULTS={interval:5E3,pause:"hover",wrap:!0,keyboard:!0};f.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();
break;default:return}a.preventDefault()}};f.prototype.cycle=function(b){b||(this.paused=!1);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval));return this};f.prototype.getItemIndex=function(a){this.$items=a.parent().children(".item");return this.$items.index(a||this.$active)};f.prototype.getItemForDirection=function(a,c){var b=this.getItemIndex(c);return("prev"==a&&0===b||"next"==a&&b==this.$items.length-
1)&&!this.options.wrap?c:this.$items.eq((b+("prev"==a?-1:1))%this.$items.length)};f.prototype.to=function(a){var b=this,d=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||0>a))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):d==a?this.pause().cycle():this.slide(a>d?"next":"prev",this.$items.eq(a))};f.prototype.pause=function(b){b||(this.paused=!0);this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),
this.cycle(!0));this.interval=clearInterval(this.interval);return this};f.prototype.next=function(){if(!this.sliding)return this.slide("next")};f.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};f.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||this.getItemForDirection(b,d),g=this.interval,t="next"==b?"left":"right",w=this;if(e.hasClass("active"))return this.sliding=!1;var l=e[0],p=a.Event("slide.bs.carousel",{relatedTarget:l,direction:t});this.$element.trigger(p);
if(!p.isDefaultPrevented()){this.sliding=!0;g&&this.pause();this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),(p=a(this.$indicators.children()[this.getItemIndex(e)]))&&p.addClass("active"));var u=a.Event("slid.bs.carousel",{relatedTarget:l,direction:t});a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(t),e.addClass(t),d.one("bsTransitionEnd",function(){e.removeClass([b,t].join(" ")).addClass("active");d.removeClass(["active",
t].join(" "));w.sliding=!1;setTimeout(function(){w.$element.trigger(u)},0)}).emulateTransitionEnd(f.TRANSITION_DURATION)):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger(u));g&&this.cycle();return this}};var g=a.fn.carousel;a.fn.carousel=e;a.fn.carousel.Constructor=f;a.fn.carousel.noConflict=function(){a.fn.carousel=g;return this};var d=function(b){var c,d=a(this),f=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){c=
a.extend({},f.data(),d.data());if(d=d.attr("data-slide-to"))c.interval=!1;e.call(f,c);d&&f.data("bs.carousel").to(d);b.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",d).on("click.bs.carousel.data-api","[data-slide-to]",d);a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);e.call(b,b.data())})})}(jQuery);
+function(a){function e(b){var c;b=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(b)}function f(b){return this.each(function(){var c=a(this),d=c.data("bs.collapse"),e=a.extend({},g.DEFAULTS,c.data(),"object"==typeof b&&b);!d&&e.toggle&&/show|hide/.test(b)&&(e.toggle=!1);d||c.data("bs.collapse",d=new g(this,e));if("string"==typeof b)d[b]()})}var g=function(b,c){this.$element=a(b);this.options=a.extend({},g.DEFAULTS,c);this.$trigger=a('[data-toggle="collapse"][href="#'+
b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()};g.VERSION="3.3.6";g.TRANSITION_DURATION=350;g.DEFAULTS={toggle:!0};g.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"};g.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,c=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");
if(c&&c.length&&(b=c.data("bs.collapse"))&&b.transitioning)return;var d=a.Event("show.bs.collapse");this.$element.trigger(d);if(!d.isDefaultPrevented()){c&&c.length&&(f.call(c,"hide"),b||c.data("bs.collapse",null));var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0).attr("aria-expanded",!0);this.$trigger.removeClass("collapsed").attr("aria-expanded",!0);this.transitioning=1;b=function(){this.$element.removeClass("collapsing").addClass("collapse in")[e]("");this.transitioning=
0;this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return b.call(this);c=a.camelCase(["scroll",e].join("-"));this.$element.one("bsTransitionEnd",a.proxy(b,this)).emulateTransitionEnd(g.TRANSITION_DURATION)[e](this.$element[0][c])}}};g.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");this.$element.trigger(b);if(!b.isDefaultPrevented()){b=this.dimension();this.$element[b](this.$element[b]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",
!1);this.$trigger.addClass("collapsed").attr("aria-expanded",!1);this.transitioning=1;var c=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!a.support.transition)return c.call(this);this.$element[b](0).one("bsTransitionEnd",a.proxy(c,this)).emulateTransitionEnd(g.TRANSITION_DURATION)}}};g.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};g.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+
this.options.parent+'"]').each(a.proxy(function(b,c){var d=a(c);this.addAriaAndCollapsedClass(e(d),d)},this)).end()};g.prototype.addAriaAndCollapsedClass=function(a,c){var b=a.hasClass("in");a.attr("aria-expanded",b);c.toggleClass("collapsed",!b).attr("aria-expanded",b)};var d=a.fn.collapse;a.fn.collapse=f;a.fn.collapse.Constructor=g;a.fn.collapse.noConflict=function(){a.fn.collapse=d;return this};a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(b){var c=a(this);c.attr("data-target")||
b.preventDefault();b=e(c);c=b.data("bs.collapse")?"toggle":c.data();f.call(b,c)})}(jQuery);
+function(a){function e(b){var c=b.attr("data-target");c||(c=(c=b.attr("href"))&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));return(c=c&&a(c))&&c.length?c:b.parent()}function f(b){b&&3===b.which||(a(".dropdown-backdrop").remove(),a('[data-toggle="dropdown"]').each(function(){var c=a(this),d=e(c),f={relatedTarget:this};!d.hasClass("open")||b&&"click"==b.type&&/input|textarea/i.test(b.target.tagName)&&a.contains(d[0],b.target)||(d.trigger(b=a.Event("hide.bs.dropdown",f)),b.isDefaultPrevented()||
(c.attr("aria-expanded","false"),d.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f))))}))}var g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.6";g.prototype.toggle=function(b){var c=a(this);if(!c.is(".disabled, :disabled")){var d=e(c);b=d.hasClass("open");f();if(!b){if("ontouchstart"in document.documentElement&&!d.closest(".navbar-nav").length)a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",f);var g={relatedTarget:this};
d.trigger(b=a.Event("show.bs.dropdown",g));if(b.isDefaultPrevented())return;c.trigger("focus").attr("aria-expanded","true");d.toggleClass("open").trigger(a.Event("shown.bs.dropdown",g))}return!1}};g.prototype.keydown=function(b){if(/(38|40|27|32)/.test(b.which)&&!/input|textarea/i.test(b.target.tagName)){var c=a(this);b.preventDefault();b.stopPropagation();if(!c.is(".disabled, :disabled")){var d=e(c),f=d.hasClass("open");if(!f&&27!=b.which||f&&27==b.which)return 27==b.which&&d.find('[data-toggle="dropdown"]').trigger("focus"),
c.trigger("click");c=d.find(".dropdown-menu li:not(.disabled):visible a");c.length&&(d=c.index(b.target),38==b.which&&0<d&&d--,40==b.which&&d<c.length-1&&d++,~d||(d=0),c.eq(d).trigger("focus"))}}};var d=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this));"string"==typeof b&&d[b].call(c)})};a.fn.dropdown.Constructor=g;a.fn.dropdown.noConflict=function(){a.fn.dropdown=d;return this};a(document).on("click.bs.dropdown.data-api",
f).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",'[data-toggle="dropdown"]',g.prototype.toggle).on("keydown.bs.dropdown.data-api",'[data-toggle="dropdown"]',g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery);
+function(a){function e(d,b){return this.each(function(){var c=a(this),e=c.data("bs.modal"),g=a.extend({},f.DEFAULTS,c.data(),"object"==typeof d&&d);e||c.data("bs.modal",e=new f(this,g));if("string"==typeof d)e[d](b);else g.show&&e.show(b)})}var f=function(d,b){this.options=b;this.$body=a(document.body);this.$element=a(d);this.$dialog=this.$element.find(".modal-dialog");this.originalBodyPad=this.isShown=this.$backdrop=null;this.scrollbarWidth=0;this.ignoreBackdropClick=!1;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,
a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};f.VERSION="3.3.6";f.TRANSITION_DURATION=300;f.BACKDROP_TRANSITION_DURATION=150;f.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};f.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)};f.prototype.show=function(d){var b=this,c=a.Event("show.bs.modal",{relatedTarget:d});this.$element.trigger(c);this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),
this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){b.$element.one("mouseup.dismiss.bs.modal",function(c){a(c.target).is(b.$element)&&(b.ignoreBackdropClick=!0)})}),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(b.$body);b.$element.show().scrollTop(0);b.adjustDialog();c&&b.$element[0].offsetWidth;
b.$element.addClass("in");b.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:d});c?b.$dialog.one("bsTransitionEnd",function(){b.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(f.TRANSITION_DURATION):b.$element.trigger("focus").trigger(e)}))};f.prototype.hide=function(d){d&&d.preventDefault();d=a.Event("hide.bs.modal");this.$element.trigger(d);this.isShown&&!d.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),
this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(f.TRANSITION_DURATION):this.hideModal())};f.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))};f.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keydown.dismiss.bs.modal",
a.proxy(function(a){27==a.which&&this.hide()},this));else this.isShown||this.$element.off("keydown.dismiss.bs.modal")};f.prototype.resize=function(){if(this.isShown)a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this));else a(window).off("resize.bs.modal")};f.prototype.hideModal=function(){var a=this;this.$element.hide();this.backdrop(function(){a.$body.removeClass("modal-open");a.resetAdjustments();a.resetScrollbar();a.$element.trigger("hidden.bs.modal")})};f.prototype.removeBackdrop=function(){this.$backdrop&&
this.$backdrop.remove();this.$backdrop=null};f.prototype.backdrop=function(d){var b=this,c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&c;this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+c).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():
this.hide())},this));e&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");d&&(e?this.$backdrop.one("bsTransitionEnd",d).emulateTransitionEnd(f.BACKDROP_TRANSITION_DURATION):d())}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),c=function(){b.removeBackdrop();d&&d()},a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",c).emulateTransitionEnd(f.BACKDROP_TRANSITION_DURATION):c()):d&&d()};f.prototype.handleUpdate=function(){this.adjustDialog()};
f.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})};f.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};f.prototype.checkScrollbar=function(){var a=window.innerWidth;a||(a=document.documentElement.getBoundingClientRect(),a=a.right-Math.abs(a.left));this.bodyIsOverflowing=
document.body.clientWidth<a;this.scrollbarWidth=this.measureScrollbar()};f.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)};f.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};f.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure";
this.$body.append(a);var b=a.offsetWidth-a.clientWidth;this.$body[0].removeChild(a);return b};var g=a.fn.modal;a.fn.modal=e;a.fn.modal.Constructor=f;a.fn.modal.noConflict=function(){a.fn.modal=g;return this};a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(d){var b=a(this),c=b.attr("href"),f=a(b.attr("data-target")||c&&c.replace(/.*(?=#[^\s]+$)/,"")),c=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(c)&&c},f.data(),b.data());b.is("a")&&d.preventDefault();f.one("show.bs.modal",
function(a){if(!a.isDefaultPrevented())f.one("hidden.bs.modal",function(){b.is(":visible")&&b.trigger("focus")})});e.call(f,c,this)})}(jQuery);
+function(a){var e=function(a,d){this.inState=this.$element=this.hoverState=this.timeout=this.enabled=this.options=this.type=null;this.init("tooltip",a,d)};e.VERSION="3.3.6";e.TRANSITION_DURATION=150;e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};e.prototype.init=function(e,d,
b){this.enabled=!0;this.type=e;this.$element=a(d);this.options=this.getOptions(b);this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:!1,hover:!1,focus:!1};if(this.$element[0]instanceof document.constructor&&!this.options.selector)throw Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");e=this.options.trigger.split(" ");
for(d=e.length;d--;)if(b=e[d],"click"==b)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=b){var c="hover"==b?"mouseleave":"focusout";this.$element.on(("hover"==b?"mouseenter":"focusin")+"."+this.type,this.options.selector,a.proxy(this.enter,this));this.$element.on(c+"."+this.type,this.options.selector,a.proxy(this.leave,this))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};e.prototype.getDefaults=
function(){return e.DEFAULTS};e.prototype.getOptions=function(e){e=a.extend({},this.getDefaults(),this.$element.data(),e);e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay});return e};e.prototype.getDelegateOptions=function(){var e={},d=this.getDefaults();this._options&&a.each(this._options,function(a,c){d[a]!=c&&(e[a]=c)});return e};e.prototype.enter=function(e){var d=e instanceof this.constructor?e:a(e.currentTarget).data("bs."+this.type);d||(d=new this.constructor(e.currentTarget,
this.getDelegateOptions()),a(e.currentTarget).data("bs."+this.type,d));e instanceof a.Event&&(d.inState["focusin"==e.type?"focus":"hover"]=!0);if(d.tip().hasClass("in")||"in"==d.hoverState)d.hoverState="in";else{clearTimeout(d.timeout);d.hoverState="in";if(!d.options.delay||!d.options.delay.show)return d.show();d.timeout=setTimeout(function(){"in"==d.hoverState&&d.show()},d.options.delay.show)}};e.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1};e.prototype.leave=
function(e){var d=e instanceof this.constructor?e:a(e.currentTarget).data("bs."+this.type);d||(d=new this.constructor(e.currentTarget,this.getDelegateOptions()),a(e.currentTarget).data("bs."+this.type,d));e instanceof a.Event&&(d.inState["focusout"==e.type?"focus":"hover"]=!1);if(!d.isInStateTrue()){clearTimeout(d.timeout);d.hoverState="out";if(!d.options.delay||!d.options.delay.hide)return d.hide();d.timeout=setTimeout(function(){"out"==d.hoverState&&d.hide()},d.options.delay.hide)}};e.prototype.show=
function(){var f=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(f);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(!f.isDefaultPrevented()&&d){var b=this,f=this.tip(),d=this.getUID(this.type);this.setContent();f.attr("id",d);this.$element.attr("aria-describedby",d);this.options.animation&&f.addClass("fade");var d="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,
c=/\s?auto?\s?/i,h=c.test(d);h&&(d=d.replace(c,"")||"top");f.detach().css({top:0,left:0,display:"block"}).addClass(d).data("bs."+this.type,this);this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),n=f[0].offsetWidth,m=f[0].offsetHeight;if(h){var h=d,t=this.getPosition(this.$viewport),d="bottom"==d&&c.bottom+m>t.bottom?"top":"top"==d&&c.top-m<t.top?"bottom":"right"==d&&c.right+n>t.width?"left":
"left"==d&&c.left-n<t.left?"right":d;f.removeClass(h).addClass(d)}c=this.getCalculatedOffset(d,c,n,m);this.applyPlacement(c,d);d=function(){var a=b.hoverState;b.$element.trigger("shown.bs."+b.type);b.hoverState=null;"out"==a&&b.leave(b)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(e.TRANSITION_DURATION):d()}}};e.prototype.applyPlacement=function(e,d){var b=this.tip(),c=b[0].offsetWidth,f=b[0].offsetHeight,g=parseInt(b.css("margin-top"),10),m=parseInt(b.css("margin-left"),
10);isNaN(g)&&(g=0);isNaN(m)&&(m=0);e.top+=g;e.left+=m;a.offset.setOffset(b[0],a.extend({using:function(a){b.css({top:Math.round(a.top),left:Math.round(a.left)})}},e),0);b.addClass("in");var m=b[0].offsetWidth,t=b[0].offsetHeight;"top"==d&&t!=f&&(e.top=e.top+f-t);var w=this.getViewportAdjustedDelta(d,e,m,t);w.left?e.left+=w.left:e.top+=w.top;c=(g=/top|bottom/.test(d))?2*w.left-c+m:2*w.top-f+t;f=g?"offsetWidth":"offsetHeight";b.offset(e);this.replaceArrow(c,b[0][f],g)};e.prototype.replaceArrow=function(a,
d,b){this.arrow().css(b?"left":"top",50*(1-a/d)+"%").css(b?"top":"left","")};e.prototype.setContent=function(){var a=this.tip(),d=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](d);a.removeClass("fade in top bottom left right")};e.prototype.hide=function(f){function d(){"in"!=b.hoverState&&c.detach();b.$element.removeAttr("aria-describedby").trigger("hidden.bs."+b.type);f&&f()}var b=this,c=a(this.$tip),h=a.Event("hide.bs."+this.type);this.$element.trigger(h);if(!h.isDefaultPrevented())return c.removeClass("in"),
a.support.transition&&c.hasClass("fade")?c.one("bsTransitionEnd",d).emulateTransitionEnd(e.TRANSITION_DURATION):d(),this.hoverState=null,this};e.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")};e.prototype.hasContent=function(){return this.getTitle()};e.prototype.getPosition=function(e){e=e||this.$element;var d=e[0],b="BODY"==d.tagName,d=d.getBoundingClientRect();
null==d.width&&(d=a.extend({},d,{width:d.right-d.left,height:d.bottom-d.top}));var c=b?{top:0,left:0}:e.offset();e={scroll:b?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()};b=b?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},d,e,b,c)};e.prototype.getCalculatedOffset=function(a,d,b,c){return"bottom"==a?{top:d.top+d.height,left:d.left+d.width/2-b/2}:"top"==a?{top:d.top-c,left:d.left+d.width/2-b/2}:"left"==a?{top:d.top+d.height/2-c/2,left:d.left-
b}:{top:d.top+d.height/2-c/2,left:d.left+d.width}};e.prototype.getViewportAdjustedDelta=function(a,d,b,c){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);/right|left/.test(a)?(b=d.top-f-g.scroll,d=d.top+f-g.scroll+c,b<g.top?e.top=g.top-b:d>g.top+g.height&&(e.top=g.top+g.height-d)):(c=d.left-f,d=d.left+f+b,c<g.left?e.left=g.left-c:d>g.right&&(e.left=g.left+g.width-d));return e};e.prototype.getTitle=function(){var a=
this.$element,d=this.options;return a.attr("data-original-title")||("function"==typeof d.title?d.title.call(a[0]):d.title)};e.prototype.getUID=function(a){do a+=~~(1E6*Math.random());while(document.getElementById(a));return a};e.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip};e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};
e.prototype.enable=function(){this.enabled=!0};e.prototype.disable=function(){this.enabled=!1};e.prototype.toggleEnabled=function(){this.enabled=!this.enabled};e.prototype.toggle=function(e){var d=this;e&&(d=a(e.currentTarget).data("bs."+this.type),d||(d=new this.constructor(e.currentTarget,this.getDelegateOptions()),a(e.currentTarget).data("bs."+this.type,d)));e?(d.inState.click=!d.inState.click,d.isInStateTrue()?d.enter(d):d.leave(d)):d.tip().hasClass("in")?d.leave(d):d.enter(d)};e.prototype.destroy=
function(){var a=this;clearTimeout(this.timeout);this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type);a.$tip&&a.$tip.detach();a.$tip=null;a.$arrow=null;a.$viewport=null})};var f=a.fn.tooltip;a.fn.tooltip=function(f){return this.each(function(){var d=a(this),b=d.data("bs.tooltip"),c="object"==typeof f&&f;if(b||!/destroy|hide/.test(f))if(b||d.data("bs.tooltip",b=new e(this,c)),"string"==typeof f)b[f]()})};a.fn.tooltip.Constructor=e;a.fn.tooltip.noConflict=function(){a.fn.tooltip=
f;return this}}(jQuery);
+function(a){var e=function(a,d){this.init("popover",a,d)};if(!a.fn.tooltip)throw Error("Popover requires tooltip.js");e.VERSION="3.3.6";e.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});e.prototype=a.extend({},a.fn.tooltip.Constructor.prototype);e.prototype.constructor=e;e.prototype.getDefaults=function(){return e.DEFAULTS};
e.prototype.setContent=function(){var a=this.tip(),d=this.getTitle(),b=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](d);a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof b?"html":"append":"text"](b);a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||a.find(".popover-title").hide()};e.prototype.hasContent=function(){return this.getTitle()||this.getContent()};e.prototype.getContent=function(){var a=this.$element,
d=this.options;return a.attr("data-content")||("function"==typeof d.content?d.content.call(a[0]):d.content)};e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var f=a.fn.popover;a.fn.popover=function(f){return this.each(function(){var d=a(this),b=d.data("bs.popover"),c="object"==typeof f&&f;if(b||!/destroy|hide/.test(f))if(b||d.data("bs.popover",b=new e(this,c)),"string"==typeof f)b[f]()})};a.fn.popover.Constructor=e;a.fn.popover.noConflict=function(){a.fn.popover=
f;return this}}(jQuery);
+function(a){function e(d,b){this.$body=a(document.body);this.$scrollElement=a(d).is(document.body)?a(window):a(d);this.options=a.extend({},e.DEFAULTS,b);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this));this.refresh();this.process()}function f(d){return this.each(function(){var b=a(this),c=b.data("bs.scrollspy"),f="object"==typeof d&&d;c||b.data("bs.scrollspy",
c=new e(this,f));if("string"==typeof d)c[d]()})}e.VERSION="3.3.6";e.DEFAULTS={offset:10};e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};e.prototype.refresh=function(){var d=this,b="offset",c=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();a.isWindow(this.$scrollElement[0])||(b="position",c=this.$scrollElement.scrollTop());this.$body.find(this.selector).map(function(){var d=
a(this),d=d.data("target")||d.attr("href"),e=/^#./.test(d)&&a(d);return e&&e.length&&e.is(":visible")&&[[e[b]().top+c,d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){d.offsets.push(this[0]);d.targets.push(this[1])})};e.prototype.process=function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.getScrollHeight(),c=this.options.offset+b-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget,t;this.scrollHeight!=b&&this.refresh();if(a>=c)return g!=
(t=f[f.length-1])&&this.activate(t);if(g&&a<e[0])return this.activeTarget=null,this.clear();for(t=e.length;t--;)g!=f[t]&&a>=e[t]&&(void 0===e[t+1]||a<e[t+1])&&this.activate(f[t])};e.prototype.activate=function(d){this.activeTarget=d;this.clear();d=a(this.selector+'[data-target="'+d+'"],'+this.selector+'[href="'+d+'"]').parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active"));d.trigger("activate.bs.scrollspy")};e.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,
".active").removeClass("active")};var g=a.fn.scrollspy;a.fn.scrollspy=f;a.fn.scrollspy.Constructor=e;a.fn.scrollspy.noConflict=function(){a.fn.scrollspy=g;return this};a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var d=a(this);f.call(d,d.data())})})}(jQuery);
+function(a){function e(b){return this.each(function(){var c=a(this),d=c.data("bs.tab");d||c.data("bs.tab",d=new f(this));if("string"==typeof b)d[b]()})}var f=function(b){this.element=a(b)};f.VERSION="3.3.6";f.TRANSITION_DURATION=150;f.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");d||(d=(d=b.attr("href"))&&d.replace(/.*(?=#[^\s]*$)/,""));if(!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),
g=a.Event("show.bs.tab",{relatedTarget:e[0]});e.trigger(f);b.trigger(g);g.isDefaultPrevented()||f.isDefaultPrevented()||(d=a(d),this.activate(b.closest("li"),c),this.activate(d,d.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]});b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})}))}};f.prototype.activate=function(b,c,d){function e(){h.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1);b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",
!0);g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade");b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0);d&&d()}var h=c.find("> .active"),g=d&&a.support.transition&&(h.length&&h.hasClass("fade")||!!c.find("> .fade").length);h.length&&g?h.one("bsTransitionEnd",e).emulateTransitionEnd(f.TRANSITION_DURATION):e();h.removeClass("in")};var g=a.fn.tab;a.fn.tab=e;a.fn.tab.Constructor=f;a.fn.tab.noConflict=function(){a.fn.tab=
g;return this};var d=function(b){b.preventDefault();e.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',d).on("click.bs.tab.data-api",'[data-toggle="pill"]',d)}(jQuery);
+function(a){function e(d){return this.each(function(){var b=a(this),c=b.data("bs.affix"),e="object"==typeof d&&d;c||b.data("bs.affix",c=new f(this,e));if("string"==typeof d)c[d]()})}var f=function(d,b){this.options=a.extend({},f.DEFAULTS,b);this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this));this.$element=a(d);this.pinnedOffset=this.unpin=this.affixed=null;this.checkPosition()};
f.VERSION="3.3.6";f.RESET="affix affix-top affix-bottom";f.DEFAULTS={offset:0,target:window};f.prototype.getState=function(a,b,c,e){var d=this.$target.scrollTop(),f=this.$element.offset(),h=this.$target.height();if(null!=c&&"top"==this.affixed)return d<c?"top":!1;if("bottom"==this.affixed)return null!=c?d+this.unpin<=f.top?!1:"bottom":d+h<=a-e?!1:"bottom";var g=null==this.affixed,f=g?d:f.top;return null!=c&&d<=c?"top":null!=e&&f+(g?h:b)>=a-e?"bottom":!1};f.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;
this.$element.removeClass(f.RESET).addClass("affix");var a=this.$target.scrollTop();return this.pinnedOffset=this.$element.offset().top-a};f.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)};f.prototype.checkPosition=function(){if(this.$element.is(":visible")){var d=this.$element.height(),b=this.options.offset,c=b.top,e=b.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof b&&(e=c=b);"function"==typeof c&&(c=b.top(this.$element));
"function"==typeof e&&(e=b.bottom(this.$element));b=this.getState(g,d,c,e);if(this.affixed!=b){null!=this.unpin&&this.$element.css("top","");var c="affix"+(b?"-"+b:""),m=a.Event(c+".bs.affix");this.$element.trigger(m);if(m.isDefaultPrevented())return;this.affixed=b;this.unpin="bottom"==b?this.getPinnedOffset():null;this.$element.removeClass(f.RESET).addClass(c).trigger(c.replace("affix","affixed")+".bs.affix")}"bottom"==b&&this.$element.offset({top:g-d-e})}};var g=a.fn.affix;a.fn.affix=e;a.fn.affix.Constructor=
f;a.fn.affix.noConflict=function(){a.fn.affix=g;return this};a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var d=a(this),b=d.data();b.offset=b.offset||{};null!=b.offsetBottom&&(b.offset.bottom=b.offsetBottom);null!=b.offsetTop&&(b.offset.top=b.offsetTop);e.call(d,b)})})}(jQuery);window.OpenSeadragon=window.OpenSeadragon||function(a){return new OpenSeadragon.Viewer(a)};"function"===typeof define&&define.amd&&define(function(){return window.OpenSeadragon});
(function(a){a.version={versionStr:"2.2.0",major:2,minor:2,revision:0};var e={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},f=Object.prototype.toString,g=Object.prototype.hasOwnProperty;a.isFunction=function(d){return"function"===a.type(d)};a.isArray=Array.isArray||function(d){return"array"===a.type(d)};a.isWindow=function(a){return a&&
"object"===typeof a&&"setInterval"in a};a.type=function(a){return null===a||void 0===a?String(a):e[f.call(a)]||"object"};a.isPlainObject=function(d){if(!d||"object"!==OpenSeadragon.type(d)||d.nodeType||a.isWindow(d)||d.constructor&&!g.call(d,"constructor")&&!g.call(d.constructor.prototype,"isPrototypeOf"))return!1;var b,c;for(c in d)b=c;return void 0===b||g.call(d,b)};a.isEmptyObject=function(a){for(var b in a)return!1;return!0};a.freezeObject=function(d){a.freezeObject=Object.freeze?Object.freeze:
function(a){return a};return a.freezeObject(d)};a.supportsCanvas=function(){var d=document.createElement("canvas");return!(!a.isFunction(d.getContext)||!d.getContext("2d"))}();a.isCanvasTainted=function(a){var b=!1;try{a.getContext("2d").getImageData(0,0,1,1)}catch(c){b=!0}return b};a.pixelDensityRatio=function(){if(a.supportsCanvas){var d=document.createElement("canvas").getContext("2d");return(window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||
d.oBackingStorePixelRatio||d.backingStorePixelRatio||1)}return 1}()})(OpenSeadragon);
(function(a){a.extend=function(){var a,b,c,e,f,g=arguments[0]||{},t=arguments.length,w=!1,l=1;"boolean"===typeof g&&(w=g,g=arguments[1]||{},l=2);"object"===typeof g||OpenSeadragon.isFunction(g)||(g={});t===l&&(g=this,--l);for(;l<t;l++)if(a=arguments[l],null!==a||void 0!==a)for(b in a)c=g[b],e=a[b],g!==e&&(w&&e&&(OpenSeadragon.isPlainObject(e)||(f=OpenSeadragon.isArray(e)))?(f?(f=!1,c=c&&OpenSeadragon.isArray(c)?c:[]):c=c&&OpenSeadragon.isPlainObject(c)?c:{},g[b]=OpenSeadragon.extend(w,c,e)):void 0!==
e&&(g[b]=e));return g};a.extend(a,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,
clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,
flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,pixelsPerWheelLine:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,
showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,controlsFadeDelay:2E3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,degrees:0,opacity:1,compositeOperation:null,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",
referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3E4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",
GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",
HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:"#437AB2"},SIGNAL:"----seadragon----",delegate:function(a,b){return function(){var c=arguments;void 0===c&&(c=[]);return b.apply(a,c)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,
OPERA:5},getElement:function(a){"string"==typeof a&&(a=document.getElementById(a));return a},getElementPosition:function(d){var b=new a.Point,c,e;d=a.getElement(d);for(e=(c="fixed"==a.getElementStyle(d).position)&&d!=document.body?document.body:d.offsetParent;e;)b.x+=d.offsetLeft,b.y+=d.offsetTop,c&&(b=b.plus(a.getPageScroll())),d=e,e=(c="fixed"==a.getElementStyle(d).position)&&d!=document.body?document.body:d.offsetParent;return b},getElementOffset:function(d){var b=(d=a.getElement(d))&&d.ownerDocument,
c,e={top:0,left:0};if(!b)return new a.Point;c=b.documentElement;"undefined"!==typeof d.getBoundingClientRect&&(e=d.getBoundingClientRect());d=b==b.window?b:9===b.nodeType?b.defaultView||b.parentWindow:!1;return new a.Point(e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0),e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0))},getElementSize:function(d){d=a.getElement(d);return new a.Point(d.clientWidth,d.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(d){d=a.getElement(d);
return d.currentStyle}:function(d){d=a.getElement(d);return window.getComputedStyle(d,"")},getCssPropertyWithVendorPrefix:function(d){var b={};a.getCssPropertyWithVendorPrefix=function(c){if(void 0!==b[c])return b[c];var d=document.createElement("div").style,e=null;if(void 0!==d[c])e=c;else for(var f="Webkit Moz MS O webkit moz ms o".split(" "),g=a.capitalizeFirstLetter(c),w=0;w<f.length;w++){var l=f[w]+g;if(void 0!==d[l]){e=l;break}}return b[c]=e};return a.getCssPropertyWithVendorPrefix(d)},capitalizeFirstLetter:function(a){return a.charAt(0).toUpperCase()+
a.slice(1)},pointInElement:function(d,b){d=a.getElement(d);var c=a.getElementOffset(d),e=a.getElementSize(d);return b.x>=c.x&&b.x<c.x+e.x&&b.y<c.y+e.y&&b.y>=c.y},getEvent:function(d){a.getEvent=d?function(a){return a}:function(){return window.event};return a.getEvent(d)},getMousePosition:function(d){if("number"==typeof d.pageX)a.getMousePosition=function(b){var c=new a.Point;b=a.getEvent(b);c.x=b.pageX;c.y=b.pageY;return c};else if("number"==typeof d.clientX)a.getMousePosition=function(b){var c=new a.Point;
b=a.getEvent(b);c.x=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;c.y=b.clientY+document.body.scrollTop+document.documentElement.scrollTop;return c};else throw Error("Unknown event mouse position, no known technique.");return a.getMousePosition(d)},getPageScroll:function(){var d=document.documentElement||{},b=document.body||{};if("number"==typeof window.pageXOffset)a.getPageScroll=function(){return new a.Point(window.pageXOffset,window.pageYOffset)};else if(b.scrollLeft||
b.scrollTop)a.getPageScroll=function(){return new a.Point(document.body.scrollLeft,document.body.scrollTop)};else if(d.scrollLeft||d.scrollTop)a.getPageScroll=function(){return new a.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new a.Point(0,0);return a.getPageScroll()},setPageScroll:function(d){if("undefined"!==typeof window.scrollTo)a.setPageScroll=function(a){window.scrollTo(a.x,a.y)};else{var b=a.getPageScroll();if(b.x===d.x&&b.y===d.y)return;document.body.scrollLeft=
d.x;document.body.scrollTop=d.y;var c=a.getPageScroll();if(c.x!==b.x&&c.y!==b.y){a.setPageScroll=function(a){document.body.scrollLeft=a.x;document.body.scrollTop=a.y};return}document.documentElement.scrollLeft=d.x;document.documentElement.scrollTop=d.y;c=a.getPageScroll();if(c.x!==b.x&&c.y!==b.y){a.setPageScroll=function(a){document.documentElement.scrollLeft=a.x;document.documentElement.scrollTop=a.y};return}a.setPageScroll=function(a){}}return a.setPageScroll(d)},getWindowSize:function(){var d=
document.documentElement||{},b=document.body||{};if("number"==typeof window.innerWidth)a.getWindowSize=function(){return new a.Point(window.innerWidth,window.innerHeight)};else if(d.clientWidth||d.clientHeight)a.getWindowSize=function(){return new a.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(b.clientWidth||b.clientHeight)a.getWindowSize=function(){return new a.Point(document.body.clientWidth,document.body.clientHeight)};else throw Error("Unknown window size, no known technique.");
return a.getWindowSize()},makeCenteredNode:function(d){d=a.getElement(d);var b=[a.makeNeutralElement("div"),a.makeNeutralElement("div"),a.makeNeutralElement("div")];a.extend(b[0].style,{display:"table",height:"100%",width:"100%"});a.extend(b[1].style,{display:"table-row"});a.extend(b[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"});b[0].appendChild(b[1]);b[1].appendChild(b[2]);b[2].appendChild(d);return b[0]},makeNeutralElement:function(a){a=document.createElement(a);var b=
a.style;b.background="transparent none";b.border="none";b.margin="0px";b.padding="0px";b.position="static";return a},now:function(){a.now=Date.now?Date.now:function(){return(new Date).getTime()};return a.now()},makeTransparentImage:function(d){a.makeTransparentImage=function(b){var c=a.makeNeutralElement("img");c.src=b;return c};a.Browser.vendor==a.BROWSERS.IE&&7>a.Browser.version&&(a.makeTransparentImage=function(b){var c=a.makeNeutralElement("img"),d=null,d=a.makeNeutralElement("span");d.style.display=
"inline-block";c.onload=function(){d.style.width=d.style.width||c.width+"px";d.style.height=d.style.height||c.height+"px";c=c.onload=null};c.src=b;d.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b+"', sizingMethod='scale')";return d});return a.makeTransparentImage(d)},setElementOpacity:function(d,b,c){d=a.getElement(d);c&&!a.Browser.alpha&&(b=Math.round(b));a.Browser.opacity?d.style.opacity=1>b?b:"":1>b?(b=Math.round(100*b),d.style.filter="alpha(opacity="+b+")"):d.style.filter=
""},setElementTouchActionNone:function(d){d=a.getElement(d);"undefined"!==typeof d.style.touchAction?d.style.touchAction="none":"undefined"!==typeof d.style.msTouchAction&&(d.style.msTouchAction="none")},addClass:function(d,b){d=a.getElement(d);d.className?-1===(" "+d.className+" ").indexOf(" "+b+" ")&&(d.className+=" "+b):d.className=b},indexOf:function(a,b,c){this.indexOf=Array.prototype.indexOf?function(a,b,c){return a.indexOf(b,c)}:function(a,b,c){var d;d=c?c:0;if(!a)throw new TypeError;c=a.length;
if(0===c||d>=c)return-1;for(0>d&&(d=c-Math.abs(d));d<c;d++)if(a[d]===b)return d;return-1};return this.indexOf(a,b,c)},removeClass:function(d,b){var c,e=[],f;d=a.getElement(d);c=d.className.split(/\s+/);for(f=0;f<c.length;f++)c[f]&&c[f]!==b&&e.push(c[f]);d.className=e.join(" ")},addEvent:function(){if(window.addEventListener)return function(d,b,c,e){d=a.getElement(d);d.addEventListener(b,c,e)};if(window.attachEvent)return function(d,b,c,e){d=a.getElement(d);d.attachEvent("on"+b,c)};throw Error("No known event model.");
}(),removeEvent:function(){if(window.removeEventListener)return function(d,b,c,e){d=a.getElement(d);d.removeEventListener(b,c,e)};if(window.detachEvent)return function(d,b,c,e){d=a.getElement(d);d.detachEvent("on"+b,c)};throw Error("No known event model.");}(),cancelEvent:function(d){d=a.getEvent(d);a.cancelEvent=d.preventDefault?function(a){a.preventDefault()}:function(b){b=a.getEvent(b);b.cancel=!0;b.returnValue=!1};a.cancelEvent(d)},stopEvent:function(d){d=a.getEvent(d);a.stopEvent=d.stopPropagation?
function(a){a.stopPropagation()}:function(b){b=a.getEvent(b);b.cancelBubble=!0};a.stopEvent(d)},createCallback:function(a,b){var c=[],d;for(d=2;d<arguments.length;d++)c.push(arguments[d]);return function(){var d=c.concat([]),e;for(e=0;e<arguments.length;e++)d.push(arguments[e]);return b.apply(a,d)}},getUrlParameter:function(a){return(a=f[a])?a:null},getUrlProtocol:function(a){a=a.match(/^([a-z]+:)\/\//i);return null===a?window.location.protocol:a[1].toLowerCase()},createAjaxRequest:function(d){var b;
try{b=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(c){b=!1}if(b)a.createAjaxRequest=window.XMLHttpRequest?function(a){return a?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)a.createAjaxRequest=function(){return new XMLHttpRequest};else throw Error("Browser doesn't support XMLHttpRequest.");return a.createAjaxRequest(d)},makeAjaxRequest:function(d,b,c){var e;a.isPlainObject(d)&&(b=d.success,c=d.error,
e=d.withCredentials,d=d.url);var f=a.getUrlProtocol(d),g=a.createAjaxRequest("file:"===f);if(!a.isFunction(b))throw Error("makeAjaxRequest requires a success callback");g.onreadystatechange=function(){4==g.readyState&&(g.onreadystatechange=function(){},200===g.status||0===g.status&&"http:"!==f&&"https:"!==f?b(g):(a.console.log("AJAX request returned %d: %s",g.status,d),a.isFunction(c)&&c(g)))};e&&(g.withCredentials=!0);try{g.open("GET",d,!0),g.send(null)}catch(w){if(e=w.message,a.Browser.vendor==
a.BROWSERS.IE&&10>a.Browser.version&&"undefined"!=typeof w.number&&-2147024891==w.number&&(e+="\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain"),a.console.log("%s while making AJAX request: %s",w.name,e),g.onreadystatechange=function(){},window.XDomainRequest){var t=new XDomainRequest;t.onload=function(c){a.isFunction(b)&&b({responseText:t.responseText,status:200,statusText:"OK"})};t.onerror=function(b){a.isFunction(c)&&c({responseText:t.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};
try{t.open("GET",d),t.send()}catch(l){a.isFunction(c)&&c(g,w)}}else a.isFunction(c)&&c(g,w)}},jsonp:function(d){var b,c=d.url,e=document.head||document.getElementsByTagName("head")[0]||document.documentElement,f=d.callbackName||"openseadragon"+a.now(),g=window[f],t=d.param||"callback",w=d.callback,c=c.replace(/(\=)\?(&|$)|\?\?/i,"$1"+f+"$2"),c=c+((/\?/.test(c)?"&":"?")+t+"="+f);window[f]=function(b){if(g)window[f]=g;else try{delete window[f]}catch(p){}w&&a.isFunction(w)&&w(b)};b=document.createElement("script");
if(void 0!==d.async||!1!==d.async)b.async="async";d.scriptCharset&&(b.charset=d.scriptCharset);b.src=c;b.onload=b.onreadystatechange=function(a,c){if(c||!b.readyState||/loaded|complete/.test(b.readyState))b.onload=b.onreadystatechange=null,e&&b.parentNode&&e.removeChild(b),b=void 0};e.insertBefore(b,e.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open.";},parseXml:function(d){if(window.DOMParser)a.parseXml=function(a){return(new DOMParser).parseFromString(a,
"text/xml")};else if(window.ActiveXObject)a.parseXml=function(a){var b;b=new ActiveXObject("Microsoft.XMLDOM");b.async=!1;b.loadXML(a);return b};else throw Error("Browser doesn't support XML DOM.");return a.parseXml(d)},parseJSON:function(d){a.parseJSON=window.JSON&&window.JSON.parse?window.JSON.parse:function(a){return eval("("+a+")")};return a.parseJSON(d)},imageFormatSupported:function(a){return!!e[(a?a:"").toLowerCase()]}});a.Browser={vendor:a.BROWSERS.UNKNOWN,version:0,alpha:!0};var e={bmp:!1,
jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},f={};(function(){var d=navigator.appVersion,b=navigator.userAgent;switch(navigator.appName){case "Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(a.Browser.vendor=a.BROWSERS.IE,a.Browser.version=parseFloat(b.substring(b.indexOf("MSIE")+5,b.indexOf(";",b.indexOf("MSIE")))));break;case "Netscape":window.addEventListener&&(0<=b.indexOf("Firefox")?(a.Browser.vendor=a.BROWSERS.FIREFOX,a.Browser.version=parseFloat(b.substring(b.indexOf("Firefox")+
8))):0<=b.indexOf("Safari")?(a.Browser.vendor=0<=b.indexOf("Chrome")?a.BROWSERS.CHROME:a.BROWSERS.SAFARI,a.Browser.version=parseFloat(b.substring(b.substring(0,b.indexOf("Safari")).lastIndexOf("/")+1,b.indexOf("Safari")))):(d=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!==d.exec(b)&&(a.Browser.vendor=a.BROWSERS.IE,a.Browser.version=parseFloat(RegExp.$1))));break;case "Opera":a.Browser.vendor=a.BROWSERS.OPERA,a.Browser.version=parseFloat(d)}var b=window.location.search.substring(1).split("&"),c,e;for(e=
0;e<b.length;e++)d=b[e],c=d.indexOf("="),0<c&&(f[d.substring(0,c)]=decodeURIComponent(d.substring(c+1)));a.Browser.alpha=!(a.Browser.vendor==a.BROWSERS.IE&&9>a.Browser.version||a.Browser.vendor==a.BROWSERS.CHROME&&2>a.Browser.version);a.Browser.opacity=!(a.Browser.vendor==a.BROWSERS.IE&&9>a.Browser.version)})();var g=function(a){};a.console=window.console||{log:g,debug:g,info:g,warn:g,error:g,assert:g};(function(d){var b=d.requestAnimationFrame||d.mozRequestAnimationFrame||d.webkitRequestAnimationFrame||
d.msRequestAnimationFrame,c=d.cancelAnimationFrame||d.mozCancelAnimationFrame||d.webkitCancelAnimationFrame||d.msCancelAnimationFrame;if(b&&c)a.requestAnimationFrame=function(){return b.apply(d,arguments)},a.cancelAnimationFrame=function(){return c.apply(d,arguments)};else{var e=[],f=[],g=0,t;a.requestAnimationFrame=function(b){e.push([++g,b]);t||(t=setInterval(function(){if(e.length){var b=a.now(),c=f;f=e;for(e=c;f.length;)f.shift()[1](b)}else clearInterval(t),t=void 0},20));return g};a.cancelAnimationFrame=
function(a){var b,c;b=0;for(c=e.length;b<c;b+=1)if(e[b][0]===a){e.splice(b,1);return}b=0;for(c=f.length;b<c;b+=1)if(f[b][0]===a){f.splice(b,1);break}}}})(window)})(OpenSeadragon);
(function(a){var e={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.fullscreenElement},e.requestFullScreen=function(a){return a.requestFullscreen()},e.exitFullScreen=function(){document.exitFullscreen()},e.fullScreenEventName=
"fullscreenchange",e.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.msFullscreenElement},e.requestFullScreen=function(a){return a.msRequestFullscreen()},e.exitFullScreen=function(){document.msExitFullscreen()},e.fullScreenEventName="MSFullscreenChange",e.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.webkitFullscreenElement},
e.requestFullScreen=function(a){return a.webkitRequestFullscreen()},e.exitFullScreen=function(){document.webkitExitFullscreen()},e.fullScreenEventName="webkitfullscreenchange",e.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},e.requestFullScreen=function(a){return a.webkitRequestFullScreen()},e.exitFullScreen=function(){document.webkitCancelFullScreen()},e.fullScreenEventName=
"webkitfullscreenchange",e.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.mozFullScreenElement},e.requestFullScreen=function(a){return a.mozRequestFullScreen()},e.exitFullScreen=function(){document.mozCancelFullScreen()},e.fullScreenEventName="mozfullscreenchange",e.fullScreenErrorEventName="mozfullscreenerror");e.isFullScreen=function(){return null!==e.getFullScreenElement()};e.cancelFullScreen=
function(){a.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead.");e.exitFullScreen()};a.extend(a,e)})(OpenSeadragon);
(function(a){a.EventSource=function(){this.events={}};a.EventSource.prototype={addOnceHandler:function(a,f,g,d){var b=this;d=d||1;var c=0,e=function(g){c++;c===d&&b.removeHandler(a,e);f(g)};this.addHandler(a,e,g)},addHandler:function(e,f,g){var d=this.events[e];d||(this.events[e]=d=[]);f&&a.isFunction(f)&&(d[d.length]={handler:f,userData:g||null})},removeHandler:function(e,f){var g=this.events[e],d=[],b;if(g&&a.isArray(g)){for(b=0;b<g.length;b++)g[b].handler!==f&&d.push(g[b]);this.events[e]=d}},removeAllHandlers:function(a){if(a)this.events[a]=
[];else for(var e in this.events)this.events[e]=[]},getHandler:function(a){var e=this.events[a];if(!e||!e.length)return null;e=1===e.length?[e[0]]:Array.apply(null,e);return function(a,d){var b,c=e.length;for(b=0;b<c;b++)e[b]&&(d.eventSource=a,d.userData=e[b].userData,e[b].handler(d))}},raiseEvent:function(a,f){var e=this.getHandler(a);e&&(f||(f={}),e(this,f))}}})(OpenSeadragon);
(function(a){function e(b){b=ka[b.hash];var c,d=b.activePointersLists.length;for(c=0;c<d;c++)0<b.activePointersLists[c].captureCount&&(a.removeEvent(a.MouseTracker.captureElement,"mousemove",b.mousemovecaptured,!0),a.removeEvent(a.MouseTracker.captureElement,"mouseup",b.mouseupcaptured,!0),a.removeEvent(a.MouseTracker.captureElement,a.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",b.pointermovecaptured,!0),a.removeEvent(a.MouseTracker.captureElement,a.MouseTracker.unprefixedPointerEvents?
"pointerup":"MSPointerUp",b.pointerupcaptured,!0),a.removeEvent(a.MouseTracker.captureElement,"touchmove",b.touchmovecaptured,!0),a.removeEvent(a.MouseTracker.captureElement,"touchend",b.touchendcaptured,!0),b.activePointersLists[c].captureCount=0);for(c=0;c<d;c++)b.activePointersLists.pop()}function f(b){var c=ka[b.hash],d,f;if(c.tracking){for(f=0;f<a.MouseTracker.subscribeEvents.length;f++)d=a.MouseTracker.subscribeEvents[f],a.removeEvent(b.element,d,c[d],!1);e(b);c.tracking=!1}}function g(b,c){var d=
ka[b.hash];if("pointerevent"===c)return{upName:a.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:d.pointerupcaptured,moveName:a.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:d.pointermovecaptured};if("mouse"===c)return{upName:"mouseup",upHandler:d.mouseupcaptured,moveName:"mousemove",moveHandler:d.mousemovecaptured};if("touch"===c)return{upName:"touchend",upHandler:d.touchendcaptured,moveName:"touchmove",moveHandler:d.touchmovecaptured};throw Error("MouseTracker.getCaptureEventParams: Unknown pointer type.");
}function d(b,c,d){var e=b.getActivePointersListByType(c);e.captureCount+=d||1;1===e.captureCount&&(a.Browser.vendor===a.BROWSERS.IE&&9>a.Browser.version?b.element.setCapture(!0):(b=g(b,a.MouseTracker.havePointerEvents?"pointerevent":c),qa&&H(window.top)&&a.addEvent(window.top,b.upName,b.upHandler,!0),a.addEvent(a.MouseTracker.captureElement,b.upName,b.upHandler,!0),a.addEvent(a.MouseTracker.captureElement,b.moveName,b.moveHandler,!0)))}function b(b,c,d){var e=b.getActivePointersListByType(c);e.captureCount-=
d||1;0===e.captureCount&&(a.Browser.vendor===a.BROWSERS.IE&&9>a.Browser.version?b.element.releaseCapture():(b=g(b,a.MouseTracker.havePointerEvents?"pointerevent":c),qa&&H(window.top)&&a.removeEvent(window.top,b.upName,b.upHandler,!0),a.removeEvent(a.MouseTracker.captureElement,b.moveName,b.moveHandler,!0),a.removeEvent(a.MouseTracker.captureElement,b.upName,b.upHandler,!0)))}function c(b){if(a.MouseTracker.unprefixedPointerEvents)b=b.pointerType;else switch(b.pointerType){case 2:b="touch";break;case 3:b=
"pen";break;case 4:b="mouse";break;default:b=""}return b}function h(b){return a.getMousePosition(b)}function n(a,b){return m(h(a),b)}function m(b,c){var d=a.getElementOffset(c);return b.minus(d)}function t(b,c){return new a.Point((b.x+c.x)/2,(b.y+c.y)/2)}function w(b,c){c=a.getEvent(c);var d={target:c.target||c.srcElement,type:"wheel",shiftKey:c.shiftKey||!1,clientX:c.clientX,clientY:c.clientY,pageX:c.pageX?c.pageX:c.clientX,pageY:c.pageY?c.pageY:c.clientY,deltaMode:"MozMousePixelScroll"==c.type?
0:1,deltaX:0,deltaZ:0};d.deltaY="mousewheel"==a.MouseTracker.wheelEventName?-1/a.DEFAULT_SETTINGS.pixelsPerWheelLine*c.wheelDelta:c.detail;l(b,d,c)}function l(b,c,d){var e;e=0>c.deltaY?1:-1;b.scrollHandler&&(b=b.scrollHandler({eventSource:b,pointerType:"mouse",position:n(c,b.element),scroll:e,shift:c.shiftKey,isTouchEvent:!1,originalEvent:d,preventDefaultAction:!1,userData:b.userData}),!1===b&&a.cancelEvent(d))}function p(a,b){if(a===b)return!1;for(;b&&b!==a;)b=b.parentNode;return b===a}function u(b,
c){var d={id:a.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:h(c),currentTime:a.now()};ia(b,c,[d])}function k(b,c){var d={id:a.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:h(c),currentTime:a.now()};X(b,c,[d])}function q(b){return a.Browser.vendor===a.BROWSERS.IE&&9>a.Browser.version?1===b?0:2===b?2:4===b?1:-1:b}function A(c,d){var e;d=a.getEvent(d);e={id:a.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:h(d),currentTime:a.now()};L(c,d,[e],q(d.button))&&
b(c,"mouse")}function z(b,c){var d;c=a.getEvent(c);d={id:a.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:h(c),currentTime:a.now()};ja(b,c,[d])}function B(a,c,d){var e,f=d.getLength(),g=[];for(e=0;e<f;e++)g.push(d.getByIndex(e));0<g.length&&(L(a,c,g,0),d.captureCount=1,b(a,"touch"),X(a,c,g))}function E(c,d){var e,f,g,m=d.changedTouches.length;g=[];var n;e=a.now();for(f=0;f<m;f++)g.push({id:d.changedTouches[f].identifier,type:"touch",currentPos:h(d.changedTouches[f]),currentTime:e});
L(c,d,g,0)&&b(c,"touch",m);X(c,d,g);for(f=0;f<Y.length;f++)if(Y[f]!==c&&Y[f].isTracking()&&p(Y[f].element,c.element)){n=[];for(g=0;g<m;g++)n.push({id:d.changedTouches[g].identifier,type:"touch",currentPos:h(d.changedTouches[g]),currentTime:e});X(Y[f],d,n)}a.cancelEvent(d)}function D(b,c){var d,e=c.changedTouches.length,f=[];for(d=0;d<e;d++)f.push({id:c.changedTouches[d].identifier,type:"touch",currentPos:h(c.changedTouches[d]),currentTime:a.now()});ja(b,c,f);a.cancelEvent(c)}function F(b,d){var e;
d.currentTarget===d.relatedTarget||p(d.currentTarget,d.relatedTarget)||(e={id:d.pointerId,type:c(d),isPrimary:d.isPrimary,currentPos:h(d),currentTime:a.now()},ia(b,d,[e]))}function G(b,d){var e;d.currentTarget===d.relatedTarget||p(d.currentTarget,d.relatedTarget)||(e={id:d.pointerId,type:c(d),isPrimary:d.isPrimary,currentPos:h(d),currentTime:a.now()},X(b,d,[e]))}function P(b,e){var f;f={id:e.pointerId,type:c(e),isPrimary:e.isPrimary,currentPos:h(e),currentTime:a.now()};R(b,e,[f],e.button)&&(a.stopEvent(e),
d(b,f.type));(b.clickHandler||b.dblClickHandler||b.pressHandler||b.dragHandler||b.dragEndHandler||b.pinchHandler)&&a.cancelEvent(e)}function J(d,e){var f;f={id:e.pointerId,type:c(e),isPrimary:e.isPrimary,currentPos:h(e),currentTime:a.now()};L(d,e,[f],e.button)&&b(d,f.type)}function I(b,d){var e;e={id:d.pointerId,type:c(d),isPrimary:d.isPrimary,currentPos:h(d),currentTime:a.now()};ja(b,d,[e])}function U(a,b){var d=[{id:b.pointerId,type:c(b)}];L(a,b,d,0);X(a,b,d)}function O(a,b){b.hasOwnProperty("isPrimary")||
(0===a.getLength()?b.isPrimary=!0:b.isPrimary=!1);b.speed=0;b.direction=0;b.contactPos=b.currentPos;b.contactTime=b.currentTime;b.lastPos=b.currentPos;b.lastTime=b.currentTime;return a.add(b)}function aa(a,b){var c,d;a.getById(b.id)?(c=a.removeById(b.id),b.hasOwnProperty("isPrimary")||(d=a.getPrimary(),d||!(d=a.getByIndex(0))))||(d.isPrimary=!0):c=a.getLength();return c}function ia(b,c,d){var e=b.getActivePointersListByType(d[0].type),f,g=d.length,h,n;for(f=0;f<g;f++)h=d[f],(n=e.getById(h.id))?(n.insideElement=
!0,n.lastPos=n.currentPos,n.lastTime=n.currentTime,n.currentPos=h.currentPos,n.currentTime=h.currentTime,h=n):(h.captured=!1,h.insideElementPressed=!1,h.insideElement=!0,O(e,h)),b.enterHandler&&(h=b.enterHandler({eventSource:b,pointerType:h.type,position:m(h.currentPos,b.element),buttons:e.buttons,pointers:b.getActivePointerCount(),insideElementPressed:h.insideElementPressed,buttonDownAny:0!==e.buttons,isTouchEvent:"touch"===h.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData}),!1===
h&&a.cancelEvent(c))}function X(b,c,d){var e=b.getActivePointersListByType(d[0].type),f,g=d.length,h,n;for(f=0;f<g;f++){h=d[f];if(n=e.getById(h.id))n.captured?(n.insideElement=!1,n.lastPos=n.currentPos,n.lastTime=n.currentTime,n.currentPos=h.currentPos,n.currentTime=h.currentTime):aa(e,n),h=n;b.exitHandler&&(h=b.exitHandler({eventSource:b,pointerType:h.type,position:m(h.currentPos,b.element),buttons:e.buttons,pointers:b.getActivePointerCount(),insideElementPressed:n?n.insideElementPressed:!1,buttonDownAny:0!==
e.buttons,isTouchEvent:"touch"===h.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData}),!1===h&&a.cancelEvent(c))}}function R(b,c,d,e){var f=ka[b.hash],g,h=b.getActivePointersListByType(d[0].type),n=d.length,l;"undefined"!==typeof c.buttons?h.buttons=c.buttons:a.Browser.vendor===a.BROWSERS.IE&&9>a.Browser.version?0===e?h.buttons+=1:1===e?h.buttons+=4:2===e?h.buttons+=2:3===e?h.buttons+=8:4===e?h.buttons+=16:5===e&&(h.buttons+=32):0===e?h.buttons|=1:1===e?h.buttons|=4:2===e?h.buttons|=
2:3===e?h.buttons|=8:4===e?h.buttons|=16:5===e&&(h.buttons|=32);if(0!==e)return b.nonPrimaryPressHandler&&(g=b.nonPrimaryPressHandler({eventSource:b,pointerType:d[0].type,position:m(d[0].currentPos,b.element),button:e,buttons:h.buttons,isTouchEvent:"touch"===d[0].type,originalEvent:c,preventDefaultAction:!1,userData:b.userData}),!1===g&&a.cancelEvent(c)),!1;for(e=0;e<n;e++)g=d[e],(l=h.getById(g.id))?(l.captured=!0,l.insideElementPressed=!0,l.insideElement=!0,l.contactPos=g.currentPos,l.contactTime=
g.currentTime,l.lastPos=l.currentPos,l.lastTime=l.currentTime,l.currentPos=g.currentPos,l.currentTime=g.currentTime,g=l):(g.captured=!0,g.insideElementPressed=!0,g.insideElement=!0,O(h,g)),h.contacts++,(b.dragHandler||b.dragEndHandler||b.pinchHandler)&&a.MouseTracker.gesturePointVelocityTracker.addPoint(b,g),1===h.contacts?b.pressHandler&&(g=b.pressHandler({eventSource:b,pointerType:g.type,position:m(g.contactPos,b.element),buttons:h.buttons,isTouchEvent:"touch"===g.type,originalEvent:c,preventDefaultAction:!1,
userData:b.userData}),!1===g&&a.cancelEvent(c)):2===h.contacts&&b.pinchHandler&&"touch"===g.type&&(f.pinchGPoints=h.asArray(),f.lastPinchDist=f.currentPinchDist=f.pinchGPoints[0].currentPos.distanceTo(f.pinchGPoints[1].currentPos),f.lastPinchCenter=f.currentPinchCenter=t(f.pinchGPoints[0].currentPos,f.pinchGPoints[1].currentPos));return!0}function L(b,c,d,e){var f=ka[b.hash],g=b.getActivePointersListByType(d[0].type),h,n,l,k=d.length,p,w=!1,q=!1;"undefined"!==typeof c.buttons?g.buttons=c.buttons:
a.Browser.vendor===a.BROWSERS.IE&&9>a.Browser.version?0===e?--g.buttons:1===e?g.buttons-=4:2===e?g.buttons-=2:3===e?g.buttons-=8:4===e?g.buttons-=16:5===e&&(g.buttons-=32):0===e?g.buttons^=-2:1===e?g.buttons^=-5:2===e?g.buttons^=-3:3===e?g.buttons^=-9:4===e?g.buttons^=-17:5===e&&(g.buttons^=-33);if(0!==e)return b.nonPrimaryReleaseHandler&&(h=b.nonPrimaryReleaseHandler({eventSource:b,pointerType:d[0].type,position:m(d[0].currentPos,b.element),button:e,buttons:g.buttons,isTouchEvent:"touch"===d[0].type,
originalEvent:c,preventDefaultAction:!1,userData:b.userData}),!1===h&&a.cancelEvent(c)),!1;for(e=0;e<k;e++)if(h=d[e],p=g.getById(h.id))p.captured&&(p.captured=!1,q=w=!0),p.lastPos=p.currentPos,p.lastTime=p.currentTime,p.currentPos=h.currentPos,p.currentTime=h.currentTime,p.insideElement||aa(g,p),n=p.currentPos,l=p.currentTime,q?(g.contacts--,(b.dragHandler||b.dragEndHandler||b.pinchHandler)&&a.MouseTracker.gesturePointVelocityTracker.removePoint(b,p),0===g.contacts?(b.releaseHandler&&(h=b.releaseHandler({eventSource:b,
pointerType:p.type,position:m(n,b.element),buttons:g.buttons,insideElementPressed:p.insideElementPressed,insideElementReleased:p.insideElement,isTouchEvent:"touch"===p.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData}),!1===h&&a.cancelEvent(c)),b.dragEndHandler&&!p.currentPos.equals(p.contactPos)&&(h=b.dragEndHandler({eventSource:b,pointerType:p.type,position:m(p.currentPos,b.element),speed:p.speed,direction:p.direction,shift:c.shiftKey,isTouchEvent:"touch"===p.type,originalEvent:c,
preventDefaultAction:!1,userData:b.userData}),!1===h&&a.cancelEvent(c)),(b.clickHandler||b.dblClickHandler)&&p.insideElement&&(l=l-p.contactTime<=b.clickTimeThreshold&&p.contactPos.distanceTo(n)<=b.clickDistThreshold,b.clickHandler&&(h=b.clickHandler({eventSource:b,pointerType:p.type,position:m(p.currentPos,b.element),quick:l,shift:c.shiftKey,isTouchEvent:"touch"===p.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData}),!1===h&&a.cancelEvent(c)),b.dblClickHandler&&l&&(g.clicks++,1===
g.clicks?(f.lastClickPos=n,f.dblClickTimeOut=setTimeout(function(){g.clicks=0},b.dblClickTimeThreshold)):2===g.clicks&&(clearTimeout(f.dblClickTimeOut),g.clicks=0,f.lastClickPos.distanceTo(n)<=b.dblClickDistThreshold&&(h=b.dblClickHandler({eventSource:b,pointerType:p.type,position:m(p.currentPos,b.element),shift:c.shiftKey,isTouchEvent:"touch"===p.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData}),!1===h&&a.cancelEvent(c)),f.lastClickPos=null)))):2===g.contacts&&b.pinchHandler&&"touch"===
p.type&&(f.pinchGPoints=g.asArray(),f.lastPinchDist=f.currentPinchDist=f.pinchGPoints[0].currentPos.distanceTo(f.pinchGPoints[1].currentPos),f.lastPinchCenter=f.currentPinchCenter=t(f.pinchGPoints[0].currentPos,f.pinchGPoints[1].currentPos))):b.releaseHandler&&(h=b.releaseHandler({eventSource:b,pointerType:p.type,position:m(n,b.element),buttons:g.buttons,insideElementPressed:p.insideElementPressed,insideElementReleased:p.insideElement,isTouchEvent:"touch"===p.type,originalEvent:c,preventDefaultAction:!1,
userData:b.userData}),!1===h&&a.cancelEvent(c));return w}function ja(b,c,d){var e=ka[b.hash],f=b.getActivePointersListByType(d[0].type),g,h=d.length,l,k;"undefined"!==typeof c.buttons&&(f.buttons=c.buttons);for(g=0;g<h;g++)l=d[g],(k=f.getById(l.id))?(l.hasOwnProperty("isPrimary")&&(k.isPrimary=l.isPrimary),k.lastPos=k.currentPos,k.lastTime=k.currentTime,k.currentPos=l.currentPos,k.currentTime=l.currentTime):(l.captured=!1,l.insideElementPressed=!1,l.insideElement=!0,O(f,l));b.stopHandler&&"mouse"===
d[0].type&&(clearTimeout(b.stopTimeOut),b.stopTimeOut=setTimeout(function(){var a=d[0].type;b.stopHandler&&b.stopHandler({eventSource:b,pointerType:a,position:n(c,b.element),buttons:b.getActivePointersListByType(a).buttons,isTouchEvent:"touch"===a,originalEvent:c,preventDefaultAction:!1,userData:b.userData})},b.stopDelay));0===f.contacts?b.moveHandler&&(k=b.moveHandler({eventSource:b,pointerType:d[0].type,position:m(d[0].currentPos,b.element),buttons:f.buttons,isTouchEvent:"touch"===d[0].type,originalEvent:c,
preventDefaultAction:!1,userData:b.userData}),!1===k&&a.cancelEvent(c)):1===f.contacts?(b.moveHandler&&(k=f.asArray()[0],k=b.moveHandler({eventSource:b,pointerType:k.type,position:m(k.currentPos,b.element),buttons:f.buttons,isTouchEvent:"touch"===k.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData}),!1===k&&a.cancelEvent(c)),b.dragHandler&&(k=f.asArray()[0],g=k.currentPos.minus(k.lastPos),k=b.dragHandler({eventSource:b,pointerType:k.type,position:m(k.currentPos,b.element),buttons:f.buttons,
delta:g,speed:k.speed,direction:k.direction,shift:c.shiftKey,isTouchEvent:"touch"===k.type,originalEvent:c,preventDefaultAction:!1,userData:b.userData}),!1===k&&a.cancelEvent(c))):2===f.contacts&&(b.moveHandler&&(k=f.asArray(),k=b.moveHandler({eventSource:b,pointerType:k[0].type,position:m(t(k[0].currentPos,k[1].currentPos),b.element),buttons:f.buttons,isTouchEvent:"touch"===k[0].type,originalEvent:c,preventDefaultAction:!1,userData:b.userData}),!1===k&&a.cancelEvent(c)),b.pinchHandler&&"touch"===
d[0].type&&(g=e.pinchGPoints[0].currentPos.distanceTo(e.pinchGPoints[1].currentPos),g!=e.currentPinchDist&&(e.lastPinchDist=e.currentPinchDist,e.currentPinchDist=g,e.lastPinchCenter=e.currentPinchCenter,e.currentPinchCenter=t(e.pinchGPoints[0].currentPos,e.pinchGPoints[1].currentPos),k=b.pinchHandler({eventSource:b,pointerType:"touch",gesturePoints:e.pinchGPoints,lastCenter:m(e.lastPinchCenter,b.element),center:m(e.currentPinchCenter,b.element),lastDistance:e.lastPinchDist,distance:e.currentPinchDist,
shift:c.shiftKey,originalEvent:c,preventDefaultAction:!1,userData:b.userData}),!1===k&&a.cancelEvent(c))))}function H(a){try{return a.addEventListener&&a.removeEventListener}catch(T){return!1}}var Y=[],ka={};a.MouseTracker=function(b){Y.push(this);var e=arguments;a.isPlainObject(b)||(b={element:e[0],clickTimeThreshold:e[1],clickDistThreshold:e[2]});this.hash=Math.random();this.element=a.getElement(b.element);this.clickTimeThreshold=b.clickTimeThreshold||a.DEFAULT_SETTINGS.clickTimeThreshold;this.clickDistThreshold=
b.clickDistThreshold||a.DEFAULT_SETTINGS.clickDistThreshold;this.dblClickTimeThreshold=b.dblClickTimeThreshold||a.DEFAULT_SETTINGS.dblClickTimeThreshold;this.dblClickDistThreshold=b.dblClickDistThreshold||a.DEFAULT_SETTINGS.dblClickDistThreshold;this.userData=b.userData||null;this.stopDelay=b.stopDelay||50;this.enterHandler=b.enterHandler||null;this.exitHandler=b.exitHandler||null;this.pressHandler=b.pressHandler||null;this.nonPrimaryPressHandler=b.nonPrimaryPressHandler||null;this.releaseHandler=
b.releaseHandler||null;this.nonPrimaryReleaseHandler=b.nonPrimaryReleaseHandler||null;this.moveHandler=b.moveHandler||null;this.scrollHandler=b.scrollHandler||null;this.clickHandler=b.clickHandler||null;this.dblClickHandler=b.dblClickHandler||null;this.dragHandler=b.dragHandler||null;this.dragEndHandler=b.dragEndHandler||null;this.pinchHandler=b.pinchHandler||null;this.stopHandler=b.stopHandler||null;this.keyDownHandler=b.keyDownHandler||null;this.keyUpHandler=b.keyUpHandler||null;this.keyHandler=
b.keyHandler||null;this.focusHandler=b.focusHandler||null;this.blurHandler=b.blurHandler||null;var f=this;ka[this.hash]={click:function(b){f.clickHandler&&a.cancelEvent(b)},dblclick:function(b){f.dblClickHandler&&a.cancelEvent(b)},keydown:function(b){var c=f;c.keyDownHandler&&(b=a.getEvent(b),(c=c.keyDownHandler({eventSource:c,keyCode:b.keyCode?b.keyCode:b.charCode,ctrl:b.ctrlKey,shift:b.shiftKey,alt:b.altKey,meta:b.metaKey,originalEvent:b,preventDefaultAction:!1,userData:c.userData}))||a.cancelEvent(b))},
keyup:function(b){var c=f;c.keyUpHandler&&(b=a.getEvent(b),(c=c.keyUpHandler({eventSource:c,keyCode:b.keyCode?b.keyCode:b.charCode,ctrl:b.ctrlKey,shift:b.shiftKey,alt:b.altKey,meta:b.metaKey,originalEvent:b,preventDefaultAction:!1,userData:c.userData}))||a.cancelEvent(b))},keypress:function(b){var c=f;c.keyHandler&&(b=a.getEvent(b),(c=c.keyHandler({eventSource:c,keyCode:b.keyCode?b.keyCode:b.charCode,ctrl:b.ctrlKey,shift:b.shiftKey,alt:b.altKey,meta:b.metaKey,originalEvent:b,preventDefaultAction:!1,
userData:c.userData}))||a.cancelEvent(b))},focus:function(b){var c=f;c.focusHandler&&(b=a.getEvent(b),c=c.focusHandler({eventSource:c,originalEvent:b,preventDefaultAction:!1,userData:c.userData}),!1===c&&a.cancelEvent(b))},blur:function(b){var c=f;c.blurHandler&&(b=a.getEvent(b),c=c.blurHandler({eventSource:c,originalEvent:b,preventDefaultAction:!1,userData:c.userData}),!1===c&&a.cancelEvent(b))},wheel:function(a){l(f,a,a)},mousewheel:function(a){w(f,a)},DOMMouseScroll:function(a){w(f,a)},MozMousePixelScroll:function(a){w(f,
a)},mouseenter:function(b){var c=f;b=a.getEvent(b);u(c,b)},mouseleave:function(b){var c=f;b=a.getEvent(b);k(c,b)},mouseover:function(b){var c=f;b=a.getEvent(b);b.currentTarget===b.relatedTarget||p(b.currentTarget,b.relatedTarget)||u(c,b)},mouseout:function(b){var c=f;b=a.getEvent(b);b.currentTarget===b.relatedTarget||p(b.currentTarget,b.relatedTarget)||k(c,b)},mousedown:function(b){var c=f,e;b=a.getEvent(b);e={id:a.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:h(b),currentTime:a.now()};
R(c,b,[e],q(b.button))&&(a.stopEvent(b),d(c,"mouse"));(c.clickHandler||c.dblClickHandler||c.pressHandler||c.dragHandler||c.dragEndHandler)&&a.cancelEvent(b)},mouseup:function(a){A(f,a)},mouseupcaptured:function(b){A(f,b);a.stopEvent(b)},mousemove:function(a){z(f,a)},mousemovecaptured:function(b){z(f,b);a.stopEvent(b)},touchstart:function(b){var c=f,e,g,m,n=b.changedTouches.length,t=[],l;g=c.getActivePointersListByType("touch");e=a.now();g.getLength()>b.touches.length-n&&(a.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),
B(c,b,g));for(g=0;g<n;g++)t.push({id:b.changedTouches[g].identifier,type:"touch",currentPos:h(b.changedTouches[g]),currentTime:e});ia(c,b,t);for(g=0;g<Y.length;g++)if(Y[g]!==c&&Y[g].isTracking()&&p(Y[g].element,c.element)){l=[];for(m=0;m<n;m++)l.push({id:b.changedTouches[m].identifier,type:"touch",currentPos:h(b.changedTouches[m]),currentTime:e});ia(Y[g],b,l)}R(c,b,t,0)&&(a.stopEvent(b),d(c,"touch",n));a.cancelEvent(b)},touchend:function(a){E(f,a)},touchendcaptured:function(b){E(f,b);a.stopEvent(b)},
touchmove:function(a){D(f,a)},touchmovecaptured:function(b){D(f,b);a.stopEvent(b)},touchcancel:function(a){var b=f,c=b.getActivePointersListByType("touch");B(b,a,c)},gesturestart:function(a){a.stopPropagation();a.preventDefault()},gesturechange:function(a){a.stopPropagation();a.preventDefault()},pointerover:function(a){F(f,a)},MSPointerOver:function(a){F(f,a)},pointerout:function(a){G(f,a)},MSPointerOut:function(a){G(f,a)},pointerdown:function(a){P(f,a)},MSPointerDown:function(a){P(f,a)},pointerup:function(a){J(f,
a)},MSPointerUp:function(a){J(f,a)},pointermove:function(a){I(f,a)},MSPointerMove:function(a){I(f,a)},pointercancel:function(a){U(f,a)},MSPointerCancel:function(a){U(f,a)},pointerupcaptured:function(b){var d=f;d.getActivePointersListByType(c(b)).getById(b.pointerId)&&J(d,b);a.stopEvent(b)},pointermovecaptured:function(b){var d=f;d.getActivePointersListByType(c(b)).getById(b.pointerId)&&I(d,b);a.stopEvent(b)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],
lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null};b.startDisabled||this.setTracking(!0)};a.MouseTracker.prototype={destroy:function(){var a;f(this);this.element=null;for(a=0;a<Y.length;a++)if(Y[a]===this){Y.splice(a,1);break}ka[this.hash]=null;delete ka[this.hash]},isTracking:function(){return ka[this.hash].tracking},setTracking:function(b){if(b){b=ka[this.hash];var c,d;if(!b.tracking){for(d=0;d<a.MouseTracker.subscribeEvents.length;d++)c=a.MouseTracker.subscribeEvents[d],
a.addEvent(this.element,c,b[c],!1);e(this);b.tracking=!0}}else f(this);return this},getActivePointersListByType:function(b){var c=ka[this.hash],d,e=c.activePointersLists.length;for(d=0;d<e;d++)if(c.activePointersLists[d].type===b)return c.activePointersLists[d];b=new a.MouseTracker.GesturePointList(b);c.activePointersLists.push(b);return b},getActivePointerCount:function(){var a=ka[this.hash],b,c=a.activePointersLists.length,d=0;for(b=0;b<c;b++)d+=a.activePointersLists[b].getLength();return d},enterHandler:function(){},
exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};a.MouseTracker.gesturePointVelocityTracker=
function(){var b=[],c=0,d=0,e=function(){var c,e=b.length,f,g;c=a.now();var h,m;h=c-d;d=c;for(c=0;c<e;c++)f=b[c],g=f.gPoint,g.direction=Math.atan2(g.currentPos.y-f.lastPos.y,g.currentPos.x-f.lastPos.x),m=f.lastPos.distanceTo(g.currentPos),f.lastPos=g.currentPos,f=1E3*m/(h+1),g.speed=.75*f+.25*g.speed};return{addPoint:function(f,g){b.push({guid:f.hash.toString()+g.type+g.id.toString(),gPoint:g,lastPos:g.currentPos});1===b.length&&(d=a.now(),c=window.setInterval(e,50))},removePoint:function(a,d){var e=
a.hash.toString()+d.type+d.id.toString(),f,g=b.length;for(f=0;f<g;f++)if(b[f].guid===e){b.splice(f,1);g--;0===g&&window.clearInterval(c);break}}}}();a.MouseTracker.captureElement=document;a.MouseTracker.wheelEventName=a.Browser.vendor==a.BROWSERS.IE&&8<a.Browser.version||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";a.MouseTracker.supportsMouseCapture=function(){var b=document.createElement("div");return a.isFunction(b.setCapture)&&
a.isFunction(b.releaseCapture)}();a.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",a.MouseTracker.wheelEventName];"DOMMouseScroll"==a.MouseTracker.wheelEventName&&a.MouseTracker.subscribeEvents.push("MozMousePixelScroll");window.PointerEvent&&(window.navigator.pointerEnabled||a.Browser.vendor!==a.BROWSERS.IE)?(a.MouseTracker.havePointerEvents=!0,a.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),
a.MouseTracker.unprefixedPointerEvents=!0,a.MouseTracker.maxTouchPoints=navigator.maxTouchPoints?navigator.maxTouchPoints:0,a.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(a.MouseTracker.havePointerEvents=!0,a.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),a.MouseTracker.unprefixedPointerEvents=!1,a.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints?navigator.msMaxTouchPoints:
0,a.MouseTracker.haveMouseEnter=!1):(a.MouseTracker.havePointerEvents=!1,a.Browser.vendor===a.BROWSERS.IE&&9>a.Browser.version?(a.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),a.MouseTracker.haveMouseEnter=!0):(a.MouseTracker.subscribeEvents.push("mouseover","mouseout"),a.MouseTracker.haveMouseEnter=!1),a.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&a.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),
"ongesturestart"in window&&a.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),a.MouseTracker.mousePointerId="legacy-mouse",a.MouseTracker.maxTouchPoints=10);a.MouseTracker.GesturePointList=function(a){this._gPoints=[];this.type=a;this.captureCount=this.clicks=this.contacts=this.buttons=0};a.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(a){return this._gPoints.push(a)},removeById:function(a){var b,
c=this._gPoints.length;for(b=0;b<c;b++)if(this._gPoints[b].id===a){this._gPoints.splice(b,1);break}return this._gPoints.length},getByIndex:function(a){return a<this._gPoints.length?this._gPoints[a]:null},getById:function(a){var b,c=this._gPoints.length;for(b=0;b<c;b++)if(this._gPoints[b].id===a)return this._gPoints[b];return null},getPrimary:function(a){var b=this._gPoints.length;for(a=0;a<b;a++)if(this._gPoints[a].isPrimary)return this._gPoints[a];return null}};var qa;try{qa=window.self!==window.top}catch(ua){qa=
!0}})(OpenSeadragon);
(function(a){a.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5};a.Control=function(e,f,g){var d=e.parentNode;"number"===typeof f&&(a.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),f={anchor:f});f.attachToViewer="undefined"===typeof f.attachToViewer?!0:f.attachToViewer;this.autoFade="undefined"===
typeof f.autoFade?!0:f.autoFade;this.element=e;this.anchor=f.anchor;this.container=g;this.anchor==a.ControlAnchor.ABSOLUTE?(this.wrapper=a.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof f.top?f.top+"px":f.top,this.wrapper.style.left="number"==typeof f.left?f.left+"px":f.left,this.wrapper.style.height="number"==typeof f.height?f.height+"px":f.height,this.wrapper.style.width="number"==typeof f.width?f.width+"px":f.width,this.wrapper.style.margin=
"0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=a.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==a.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%"));this.wrapper.appendChild(this.element);f.attachToViewer?this.anchor==a.ControlAnchor.TOP_RIGHT||this.anchor==a.ControlAnchor.BOTTOM_RIGHT?
this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):d.appendChild(this.wrapper)};a.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element);this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(e){this.wrapper.style.display=e?this.anchor==a.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(e){this.element[a.SIGNAL]&&a.Browser.vendor==
a.BROWSERS.IE?a.setElementOpacity(this.element,e,!0):a.setElementOpacity(this.wrapper,e,!0)}}})(OpenSeadragon);
(function(a){function e(a,e){var d=a.controls,b;for(b=d.length-1;0<=b;b--)if(d[b].element==e)return b;return-1}a.ControlDock=function(e){var f=["topleft","topright","bottomright","bottomleft"],d;a.extend(!0,this,{id:"controldock-"+a.now()+"-"+Math.floor(1E6*Math.random()),container:a.makeNeutralElement("div"),controls:[]},e);this.container.onsubmit=function(){return!1};this.element&&(this.element=a.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",
this.container.style.width="100%",this.container.style.height="100%");for(d=0;d<f.length;d++)e=f[d],this.controls[e]=a.makeNeutralElement("div"),this.controls[e].style.position="absolute",e.match("left")&&(this.controls[e].style.left="0px"),e.match("right")&&(this.controls[e].style.right="0px"),e.match("top")&&(this.controls[e].style.top="0px"),e.match("bottom")&&(this.controls[e].style.bottom="0px");this.container.appendChild(this.controls.topleft);this.container.appendChild(this.controls.topright);
this.container.appendChild(this.controls.bottomright);this.container.appendChild(this.controls.bottomleft)};a.ControlDock.prototype={addControl:function(f,g){f=a.getElement(f);var d;if(!(0<=e(this,f))){switch(g.anchor){case a.ControlAnchor.TOP_RIGHT:d=this.controls.topright;f.style.position="relative";f.style.paddingRight="0px";f.style.paddingTop="0px";break;case a.ControlAnchor.BOTTOM_RIGHT:d=this.controls.bottomright;f.style.position="relative";f.style.paddingRight="0px";f.style.paddingBottom="0px";
break;case a.ControlAnchor.BOTTOM_LEFT:d=this.controls.bottomleft;f.style.position="relative";f.style.paddingLeft="0px";f.style.paddingBottom="0px";break;case a.ControlAnchor.TOP_LEFT:d=this.controls.topleft;f.style.position="relative";f.style.paddingLeft="0px";f.style.paddingTop="0px";break;case a.ControlAnchor.ABSOLUTE:d=this.container;f.style.margin="0px";f.style.padding="0px";break;default:case a.ControlAnchor.NONE:d=this.container,f.style.margin="0px",f.style.padding="0px"}this.controls.push(new a.Control(f,
g,d));f.style.display="inline-block"}},removeControl:function(f){f=a.getElement(f);f=e(this,f);0<=f&&(this.controls[f].destroy(),this.controls.splice(f,1));return this},clearControls:function(){for(;0<this.controls.length;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var a;for(a=this.controls.length-1;0<=a;a--)if(this.controls[a].isVisible())return!0;return!1},setControlsEnabled:function(a){var e;for(e=this.controls.length-1;0<=e;e--)this.controls[e].setVisible(a);return this}}})(OpenSeadragon);
(function(a){a.Placement=a.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,
isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})})(OpenSeadragon);
(function(a){function e(b){b=a.getElement(b);return new a.Point(0===b.clientWidth?1:b.clientWidth,0===b.clientHeight?1:b.clientHeight)}function f(b,c,d,e){function f(a,b){a.ready?d(a):(a.addHandler("ready",function(){d(a)}),a.addHandler("open-failed",function(a){e({message:a.message,source:b})}))}"string"==a.type(c)&&(c.match(/\s*<.*/)?c=a.parseXml(c):c.match(/\s*[\{\[].*/)&&(c=a.parseJSON(c)));setTimeout(function(){if("string"==a.type(c))c=new a.TileSource({url:c,crossOriginPolicy:b.crossOriginPolicy,
ajaxWithCredentials:b.ajaxWithCredentials,useCanvas:b.useCanvas,success:function(a){d(a.tileSource)}}),c.addHandler("open-failed",function(a){e(a)});else if(a.isPlainObject(c)||c.nodeType)if(!c.crossOriginPolicy&&b.crossOriginPolicy&&(c.crossOriginPolicy=b.crossOriginPolicy),void 0===c.ajaxWithCredentials&&(c.ajaxWithCredentials=b.ajaxWithCredentials),void 0===c.useCanvas&&(c.useCanvas=b.useCanvas),a.isFunction(c.getTileUrl)){var g=new a.TileSource(c);g.getTileUrl=c.getTileUrl;d(g)}else if(g=a.TileSource.determineType(b,
c)){var h=g.prototype.configure.apply(b,[c]);f(new g(h),c)}else e({message:"Unable to load TileSource",source:c});else f(c,c)})}function g(b,c){if(c instanceof a.Overlay)return c;var d;if(c.element)d=a.getElement(c.element);else{var e=c.id?c.id:"openseadragon-overlay-"+Math.floor(1E7*Math.random());d=a.getElement(c.id);d||(d=document.createElement("a"),d.href="#/overlay/"+e);d.id=e;a.addClass(d,c.className?c.className:"openseadragon-overlay")}var f=c.location,e=c.width,g=c.height;if(!f){var f=c.x,
h=c.y;if(void 0!==c.px)var m=b.viewport.imageToViewportRectangle(new a.Rect(c.px,c.py,e||0,g||0)),f=m.x,h=m.y,e=void 0!==e?m.width:void 0,g=void 0!==g?m.height:void 0;f=new a.Point(f,h)}(h=c.placement)&&"string"===a.type(h)&&(h=a.Placement[c.placement.toUpperCase()]);return new a.Overlay({element:d,location:f,placement:h,onDraw:c.onDraw,checkResize:c.checkResize,width:e,height:g,rotationMode:c.rotationMode})}function d(a,b){var c;for(c=a.length-1;0<=c;c--)if(a[c].element===b)return c;return-1}function b(b,
c){return a.requestAnimationFrame(function(){c(b)})}function c(b){a.requestAnimationFrame(function(){var d,e;if(b.controlsShouldFade){d=a.now();d-=b.controlsFadeBeginTime;d=1-d/b.controlsFadeLength;d=Math.min(1,d);d=Math.max(0,d);for(e=b.controls.length-1;0<=e;e--)b.controls[e].autoFade&&b.controls[e].setOpacity(d);0<d&&c(b)}})}function h(b){b.autoHideControls&&(b.controlsShouldFade=!0,b.controlsFadeBeginTime=a.now()+b.controlsFadeDelay,window.setTimeout(function(){c(b)},b.controlsFadeDelay))}function n(a){var b;
a.controlsShouldFade=!1;for(b=a.controls.length-1;0<=b;b--)a.controls[b].setOpacity(1)}function m(){n(this)}function t(){h(this)}function w(b){if(b.preventDefaultAction||b.ctrl||b.alt||b.meta)return!0;switch(b.keyCode){case 38:return b.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(0,-40))),this.viewport.applyConstraints(),!1;case 40:return b.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(0,40))),
this.viewport.applyConstraints(),!1;case 37:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(-40,0))),this.viewport.applyConstraints(),!1;case 39:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(40,0))),this.viewport.applyConstraints(),!1;default:return!0}}function l(b){if(b.preventDefaultAction||b.ctrl||b.alt||b.meta)return!0;switch(b.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),
this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return b.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(0,-40))),this.viewport.applyConstraints(),!1;case 115:case 83:return b.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(0,40))),this.viewport.applyConstraints(),!1;case 97:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(-40,
0))),this.viewport.applyConstraints(),!1;case 100:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new a.Point(40,0))),this.viewport.applyConstraints(),!1;default:return!0}}function p(a){var b;document.activeElement!=this.canvas&&this.canvas.focus();!a.preventDefaultAction&&this.viewport&&a.quick&&(b=this.gestureSettingsByDeviceType(a.pointerType),b.clickToZoom&&(this.viewport.zoomBy(a.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(a.position,!0)),this.viewport.applyConstraints()));
this.raiseEvent("canvas-click",{tracker:a.eventSource,position:a.position,quick:a.quick,shift:a.shift,originalEvent:a.originalEvent})}function u(a){var b;!a.preventDefaultAction&&this.viewport&&(b=this.gestureSettingsByDeviceType(a.pointerType),b.dblClickToZoom&&(this.viewport.zoomBy(a.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(a.position,!0)),this.viewport.applyConstraints()));this.raiseEvent("canvas-double-click",{tracker:a.eventSource,position:a.position,shift:a.shift,
originalEvent:a.originalEvent})}function k(a){var b;!a.preventDefaultAction&&this.viewport&&(b=this.gestureSettingsByDeviceType(a.pointerType),this.panHorizontal||(a.delta.x=0),this.panVertical||(a.delta.y=0),this.viewport.panBy(this.viewport.deltaPointsFromPixels(a.delta.negate()),b.flickEnabled),this.constrainDuringPan&&this.viewport.applyConstraints());this.raiseEvent("canvas-drag",{tracker:a.eventSource,position:a.position,delta:a.delta,speed:a.speed,direction:a.direction,shift:a.shift,originalEvent:a.originalEvent})}
function q(b){if(!b.preventDefaultAction&&this.viewport){var c=this.gestureSettingsByDeviceType(b.pointerType);if(c.flickEnabled&&b.speed>=c.flickMinSpeed){var d=0;this.panHorizontal&&(d=c.flickMomentum*b.speed*Math.cos(b.direction));var e=0;this.panVertical&&(e=c.flickMomentum*b.speed*Math.sin(b.direction));c=this.viewport.pixelFromPoint(this.viewport.getCenter(!0));d=this.viewport.pointFromPixel(new a.Point(c.x-d,c.y-e));this.viewport.panTo(d,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",
{tracker:b.eventSource,position:b.position,speed:b.speed,direction:b.direction,shift:b.shift,originalEvent:b.originalEvent})}function A(a){this.raiseEvent("canvas-enter",{tracker:a.eventSource,pointerType:a.pointerType,position:a.position,buttons:a.buttons,pointers:a.pointers,insideElementPressed:a.insideElementPressed,buttonDownAny:a.buttonDownAny,originalEvent:a.originalEvent})}function z(a){this.raiseEvent("canvas-exit",{tracker:a.eventSource,pointerType:a.pointerType,position:a.position,buttons:a.buttons,
pointers:a.pointers,insideElementPressed:a.insideElementPressed,buttonDownAny:a.buttonDownAny,originalEvent:a.originalEvent})}function B(a){this.raiseEvent("canvas-press",{tracker:a.eventSource,pointerType:a.pointerType,position:a.position,insideElementPressed:a.insideElementPressed,insideElementReleased:a.insideElementReleased,originalEvent:a.originalEvent})}function E(a){this.raiseEvent("canvas-release",{tracker:a.eventSource,pointerType:a.pointerType,position:a.position,insideElementPressed:a.insideElementPressed,
insideElementReleased:a.insideElementReleased,originalEvent:a.originalEvent})}function D(a){this.raiseEvent("canvas-nonprimary-press",{tracker:a.eventSource,position:a.position,pointerType:a.pointerType,button:a.button,buttons:a.buttons,originalEvent:a.originalEvent})}function F(a){this.raiseEvent("canvas-nonprimary-release",{tracker:a.eventSource,position:a.position,pointerType:a.pointerType,button:a.button,buttons:a.buttons,originalEvent:a.originalEvent})}function G(a){var b,c,d;!a.preventDefaultAction&&
this.viewport&&(b=this.gestureSettingsByDeviceType(a.pointerType),b.pinchToZoom&&(c=this.viewport.pointFromPixel(a.center,!0),d=this.viewport.pointFromPixel(a.lastCenter,!0),d=d.minus(c),this.panHorizontal||(d.x=0),this.panVertical||(d.y=0),this.viewport.zoomBy(a.distance/a.lastDistance,c,!0),this.viewport.panBy(d,!0),this.viewport.applyConstraints()),b.pinchRotate&&(b=Math.atan2(a.gesturePoints[0].currentPos.y-a.gesturePoints[1].currentPos.y,a.gesturePoints[0].currentPos.x-a.gesturePoints[1].currentPos.x),
c=Math.atan2(a.gesturePoints[0].lastPos.y-a.gesturePoints[1].lastPos.y,a.gesturePoints[0].lastPos.x-a.gesturePoints[1].lastPos.x),this.viewport.setRotation(this.viewport.getRotation()+180/Math.PI*(b-c))));this.raiseEvent("canvas-pinch",{tracker:a.eventSource,gesturePoints:a.gesturePoints,lastCenter:a.lastCenter,center:a.center,lastDistance:a.lastDistance,distance:a.distance,shift:a.shift,originalEvent:a.originalEvent});return!1}function P(b){var c,d;d=a.now();d-this._lastScrollTime>this.minScrollDeltaTime?
(this._lastScrollTime=d,!b.preventDefaultAction&&this.viewport&&(c=this.gestureSettingsByDeviceType(b.pointerType),c.scrollToZoom&&(d=Math.pow(this.zoomPerScroll,b.scroll),this.viewport.zoomBy(d,this.viewport.pointFromPixel(b.position,!0)),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:b.eventSource,position:b.position,scroll:b.scroll,shift:b.shift,originalEvent:b.originalEvent})):c=this.gestureSettingsByDeviceType(b.pointerType);if(c&&c.scrollToZoom)return!1}function J(a){N[this.hash].mouseInside=
!0;n(this);this.raiseEvent("container-enter",{tracker:a.eventSource,position:a.position,buttons:a.buttons,pointers:a.pointers,insideElementPressed:a.insideElementPressed,buttonDownAny:a.buttonDownAny,originalEvent:a.originalEvent})}function I(a){1>a.pointers&&(N[this.hash].mouseInside=!1,N[this.hash].animating||h(this));this.raiseEvent("container-exit",{tracker:a.eventSource,position:a.position,buttons:a.buttons,pointers:a.pointers,insideElementPressed:a.insideElementPressed,buttonDownAny:a.buttonDownAny,
originalEvent:a.originalEvent})}function U(a){if(!a._opening){if(a.autoResize){var c=e(a.container),d=N[a.hash].prevContainerSize;if(!c.equals(d)){var f=a.viewport;if(a.preserveImageSizeOnResize){var d=d.x/c.x,d=f.getZoom()*d,g=f.getCenter();f.resize(c,!1);f.zoomTo(d,null,!0);f.panTo(g,!0)}else d=f.getBounds(),f.resize(c,!0),f.fitBoundsWithConstraints(d,!0);N[a.hash].prevContainerSize=c;N[a.hash].forceRedraw=!0}}c=a.viewport.update();f=a.world.update()||c;c&&a.raiseEvent("viewport-change");a.referenceStrip&&
(f=a.referenceStrip.update(a.viewport)||f);!N[a.hash].animating&&f&&(a.raiseEvent("animation-start"),n(a));if(f||N[a.hash].forceRedraw||a.world.needsDraw())a.imageLoader.clear(),a.drawer.clear(),a.world.draw(),a.raiseEvent("update-viewport",{}),a._drawOverlays(),a.navigator&&a.navigator.update(a.viewport),N[a.hash].forceRedraw=!1,f&&a.raiseEvent("animation");N[a.hash].animating&&!f&&(a.raiseEvent("animation-finish"),N[a.hash].mouseInside||h(a));N[a.hash].animating=f}a.isOpen()?a._updateRequestId=
b(a,U):a._updateRequestId=!1}function O(a,b){return a?a+b:b}function aa(){N[this.hash].lastZoomTime=a.now();N[this.hash].zoomFactor=this.zoomPerSecond;N[this.hash].zooming=!0;R(this)}function ia(){N[this.hash].lastZoomTime=a.now();N[this.hash].zoomFactor=1/this.zoomPerSecond;N[this.hash].zooming=!0;R(this)}function X(){N[this.hash].zooming=!1}function R(b){a.requestAnimationFrame(a.delegate(b,L))}function L(){var b,c;N[this.hash].zooming&&this.viewport&&(b=a.now(),c=b-N[this.hash].lastZoomTime,c=
Math.pow(N[this.hash].zoomFactor,c/1E3),this.viewport.zoomBy(c),this.viewport.applyConstraints(),N[this.hash].lastZoomTime=b,R(this))}function ja(){this.viewport&&(N[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function H(){this.viewport&&(N[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function Y(){this.buttons.emulateEnter();this.buttons.emulateExit()}function ka(){this.viewport&&this.viewport.goHome()}
function qa(){this.isFullPage()&&!a.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage());this.buttons&&this.buttons.emulateExit();this.fullPageButton.element.focus();this.viewport&&this.viewport.applyConstraints()}function ua(){if(this.viewport){var a=this.viewport.getRotation();this.viewport.setRotation(0===a?270:a-90)}}function T(){if(this.viewport){var a=this.viewport.getRotation();this.viewport.setRotation(270===a?0:a+90)}}function ba(){var a=this._sequenceIndex-1;this.navPrevNextWrap&&
0>a&&(a+=this.tileSources.length);this.goToPage(a)}function ha(){var a=this._sequenceIndex+1;this.navPrevNextWrap&&a>=this.tileSources.length&&(a=0);this.goToPage(a)}var N={},M=1;a.Viewer=function(c){var d=arguments,f=this;a.isPlainObject(c)||(c={id:d[0],xmlPath:1<d.length?d[1]:void 0,prefixUrl:2<d.length?d[2]:void 0,controls:3<d.length?d[3]:void 0,overlays:4<d.length?d[4]:void 0});c.config&&(a.extend(!0,c,c.config),delete c.config);a.extend(!0,this,{id:c.id,hash:c.hash||M++,element:null,container:null,
canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},a.DEFAULT_SETTINGS,c);if("undefined"===typeof this.hash)throw Error("A hash must be defined, either by specifying options.id or options.hash.");"undefined"!==typeof N[this.hash]&&a.console.warn("Hash "+this.hash+" has already been used.");N[this.hash]={fsBoundsDelta:new a.Point(1,
1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null};this._sequenceIndex=0;this._firstOpen=!0;this._updateRequestId=null;this._loadQueue=[];this.currentOverlays=[];this._lastScrollTime=a.now();a.EventSource.call(this);this.addHandler("open-failed",function(b){b=a.getString("Errors.OpenFailed",b.eventSource,b.message);f._showMessage(b)});a.ControlDock.call(this,c);this.xmlPath&&(this.tileSources=
[this.xmlPath]);this.element=this.element||document.getElementById(this.id);this.canvas=a.makeNeutralElement("div");this.canvas.className="openseadragon-canvas";(function(a){a.width="100%";a.height="100%";a.overflow="hidden";a.position="absolute";a.top="0px";a.left="0px"})(this.canvas.style);a.setElementTouchActionNone(this.canvas);""!==c.tabIndex&&(this.canvas.tabIndex=void 0===c.tabIndex?0:c.tabIndex);this.container.className="openseadragon-container";(function(a){a.width="100%";a.height="100%";
a.position="relative";a.overflow="hidden";a.left="0px";a.top="0px";a.textAlign="left"})(this.container.style);this.container.insertBefore(this.canvas,this.container.firstChild);this.element.appendChild(this.container);this.bodyWidth=document.body.style.width;this.bodyHeight=document.body.style.height;this.bodyOverflow=document.body.style.overflow;this.docOverflow=document.documentElement.style.overflow;this.innerTracker=new a.MouseTracker({element:this.canvas,startDisabled:this.mouseNavEnabled?!1:
!0,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:a.delegate(this,w),keyHandler:a.delegate(this,l),clickHandler:a.delegate(this,p),dblClickHandler:a.delegate(this,u),dragHandler:a.delegate(this,k),dragEndHandler:a.delegate(this,q),enterHandler:a.delegate(this,A),exitHandler:a.delegate(this,z),pressHandler:a.delegate(this,B),releaseHandler:a.delegate(this,
E),nonPrimaryPressHandler:a.delegate(this,D),nonPrimaryReleaseHandler:a.delegate(this,F),scrollHandler:a.delegate(this,P),pinchHandler:a.delegate(this,G)});this.outerTracker=new a.MouseTracker({element:this.container,startDisabled:this.mouseNavEnabled?!1:!0,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:a.delegate(this,J),exitHandler:a.delegate(this,
I)});this.toolbar&&(this.toolbar=new a.ControlDock({element:this.toolbar}));this.bindStandardControls();N[this.hash].prevContainerSize=e(this.container);this.world=new a.World({viewer:this});this.world.addHandler("add-item",function(a){f.source=f.world.getItemAt(0).source;N[f.hash].forceRedraw=!0;f._updateRequestId||(f._updateRequestId=b(f,U))});this.world.addHandler("remove-item",function(a){f.world.getItemCount()?f.source=f.world.getItemAt(0).source:f.source=null;N[f.hash].forceRedraw=!0});this.world.addHandler("metrics-change",
function(a){f.viewport&&f.viewport._setContentBounds(f.world.getHomeBounds(),f.world.getContentFactor())});this.world.addHandler("item-index-change",function(a){f.source=f.world.getItemAt(0).source});this.viewport=new a.Viewport({containerSize:N[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,
defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins});this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor());this.imageLoader=new a.ImageLoader({jobLimit:this.imageLoaderLimit});this.tileCache=new a.TileCache({maxImageCacheCount:this.maxImageCacheCount});this.drawer=new a.Drawer({viewer:this,
viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor});this.overlaysContainer=a.makeNeutralElement("div");this.canvas.appendChild(this.overlaysContainer);this.drawer.canRotate()||(this.rotateLeft&&(d=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(d,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(d=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(d,1),this.buttons.element.removeChild(this.rotateRight.element)));
this.showNavigator&&(this.navigator=new a.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,crossOriginPolicy:this.crossOriginPolicy}));this.sequenceMode&&this.bindSequenceControls();
this.tileSources&&this.open(this.tileSources);for(d=0;d<this.customControls.length;d++)this.addControl(this.customControls[d].id,{anchor:this.customControls[d].anchor});a.requestAnimationFrame(function(){h(f)})};a.extend(a.Viewer.prototype,a.EventSource.prototype,a.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(b){a.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead.");return this.open(b)},openTileSource:function(b){a.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead.");
return this.open(b)},open:function(b){var c=this;this.close();if(b)if(this.sequenceMode&&a.isArray(b))this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this.tileSources=b,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&(this.referenceStrip=new a.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,
scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this}))),this._updateSequenceButtons(this._sequenceIndex);else if(a.isArray(b)||(b=[b]),b.length){this._opening=!0;for(var d=b.length,e=0,f=0,h,m=function(){if(e+f===d)if(e){if(c._firstOpen||!c.preserveViewport)c.viewport.goHome(!0),c.viewport.update();c._firstOpen=!1;var a=b[0];a.tileSource&&(a=a.tileSource);if(c.overlays&&!c.preserveOverlays)for(var m=
0;m<c.overlays.length;m++)c.currentOverlays[m]=g(c,c.overlays[m]);c._drawOverlays();c._opening=!1;c.raiseEvent("open",{source:a})}else c._opening=!1,c.raiseEvent("open-failed",h)},n=function(b){a.isPlainObject(b)&&b.tileSource||(b={tileSource:b});void 0!==b.index&&(a.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete b.index);void 0===b.collectionImmediately&&(b.collectionImmediately=!0);var d=b.success;b.success=function(a){e++;if(b.tileSource.overlays)for(var f=
0;f<b.tileSource.overlays.length;f++)c.addOverlay(b.tileSource.overlays[f]);d&&d(a);m()};var g=b.error;b.error=function(a){f++;h||(h=a);g&&g(a);m()};c.addTiledImage(b)},t=0;t<b.length;t++)n(b[t]);return this}},close:function(){if(!N[this.hash])return this;this._opening=!1;this.navigator&&this.navigator.close();this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML="");N[this.hash].animating=!1;this.world.removeAll();this.imageLoader.clear();this.raiseEvent("close");return this},
destroy:function(){if(N[this.hash]){this.close();this.clearOverlays();this.overlaysContainer.innerHTML="";this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null);null!==this._updateRequestId&&(a.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null);this.drawer&&this.drawer.destroy();this.removeAllHandlers();if(this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy();this.outerTracker&&
this.outerTracker.destroy();N[this.hash]=null;delete N[this.hash];this.element=this.container=this.canvas=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(a){this.innerTracker.setTracking(a);this.outerTracker.setTracking(a);this.raiseEvent("mouse-enabled",{enabled:a});return this},areControlsEnabled:function(){var a=this.controls.length,b;for(b=0;b<this.controls.length;b++)a=a&&this.controls[b].isVisibile();return a},setControlsEnabled:function(a){a?
n(this):h(this);this.raiseEvent("controls-enabled",{enabled:a});return this},isFullPage:function(){return N[this.hash].fullPage},setFullPage:function(b){var c=document.body,d=c.style,e=document.documentElement.style,f=this;if(b==this.isFullPage())return this;var g={fullPage:b,preventDefaultAction:!1};this.raiseEvent("pre-full-page",g);if(g.preventDefaultAction)return this;if(b){this.elementSize=a.getElementSize(this.element);this.pageScroll=a.getPageScroll();this.elementMargin=this.element.style.margin;
this.element.style.margin="0";this.elementPadding=this.element.style.padding;this.element.style.padding="0";this.bodyMargin=d.margin;this.docMargin=e.margin;d.margin="0";e.margin="0";this.bodyPadding=d.padding;this.docPadding=e.padding;d.padding="0";e.padding="0";this.bodyWidth=d.width;this.docWidth=e.width;d.width="100%";e.width="100%";this.bodyHeight=d.height;this.docHeight=e.height;d.height="100%";e.height="100%";this.previousBody=[];N[this.hash].prevElementParent=this.element.parentNode;N[this.hash].prevNextSibling=
this.element.nextSibling;N[this.hash].prevElementWidth=this.element.style.width;N[this.hash].prevElementHeight=this.element.style.height;d=c.childNodes.length;for(e=0;e<d;e++)this.previousBody.push(c.childNodes[0]),c.removeChild(c.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,c.appendChild(this.toolbar.element),a.addClass(this.toolbar.element,"fullpage"));a.addClass(this.element,
"fullpage");c.appendChild(this.element);this.element.style.height=a.getWindowSize().y+"px";this.element.style.width=a.getWindowSize().x+"px";this.toolbar&&this.toolbar.element&&(this.element.style.height=a.getElementSize(this.element).y-a.getElementSize(this.toolbar.element).y+"px");N[this.hash].fullPage=!0;a.delegate(this,J)({})}else{this.element.style.margin=this.elementMargin;this.element.style.padding=this.elementPadding;d.margin=this.bodyMargin;e.margin=this.docMargin;d.padding=this.bodyPadding;
e.padding=this.docPadding;d.width=this.bodyWidth;e.width=this.docWidth;d.height=this.bodyHeight;e.height=this.docHeight;c.removeChild(this.element);d=this.previousBody.length;for(e=0;e<d;e++)c.appendChild(this.previousBody.shift());a.removeClass(this.element,"fullpage");N[this.hash].prevElementParent.insertBefore(this.element,N[this.hash].prevNextSibling);this.toolbar&&this.toolbar.element&&(c.removeChild(this.toolbar.element),a.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,
this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling);this.element.style.width=N[this.hash].prevElementWidth;this.element.style.height=N[this.hash].prevElementHeight;var h=0,m=function(){a.setPageScroll(f.pageScroll);var b=a.getPageScroll();h++;(10>h&&b.x!==f.pageScroll.x||b.y!==f.pageScroll.y)&&a.requestAnimationFrame(m)};a.requestAnimationFrame(m);N[this.hash].fullPage=!1;a.delegate(this,I)({})}this.navigator&&this.viewport&&this.navigator.update(this.viewport);
this.raiseEvent("full-page",{fullPage:b});return this},setFullScreen:function(b){var c=this;if(!a.supportsFullScreen)return this.setFullPage(b);if(a.isFullScreen()===b)return this;var d={fullScreen:b,preventDefaultAction:!1};this.raiseEvent("pre-full-screen",d);if(d.preventDefaultAction)return this;if(b){this.setFullPage(!0);if(!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width;this.fullPageStyleHeight=this.element.style.height;this.element.style.width="100%";this.element.style.height=
"100%";var e=function(){var b=a.isFullScreen();b||(a.removeEvent(document,a.fullScreenEventName,e),a.removeEvent(document,a.fullScreenErrorEventName,e),c.setFullPage(!1),c.isFullPage()&&(c.element.style.width=c.fullPageStyleWidth,c.element.style.height=c.fullPageStyleHeight));c.navigator&&c.viewport&&c.navigator.update(c.viewport);c.raiseEvent("full-screen",{fullScreen:b})};a.addEvent(document,a.fullScreenEventName,e);a.addEvent(document,a.fullScreenErrorEventName,e);a.requestFullScreen(document.body)}else a.exitFullScreen();
return this},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(a){this.container.style.visibility=a?"":"hidden";this.raiseEvent("visible",{visible:a});return this},addTiledImage:function(b){function c(a){for(var c=0;c<e._loadQueue.length;c++)if(e._loadQueue[c]===g){e._loadQueue.splice(c,1);break}0===e._loadQueue.length&&d(g);e.raiseEvent("add-item-failed",a);b.error&&b.error(a)}function d(a){e.collectionMode&&(e.world.arrange({immediately:a.options.collectionImmediately,
rows:e.collectionRows,columns:e.collectionColumns,layout:e.collectionLayout,tileSize:e.collectionTileSize,tileMargin:e.collectionTileMargin}),e.world.setAutoRefigureSizes(!0))}a.console.assert(b,"[Viewer.addTiledImage] options is required");a.console.assert(b.tileSource,"[Viewer.addTiledImage] options.tileSource is required");a.console.assert(!b.replace||-1<b.index&&b.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");
var e=this;b.replace&&(b.replaceItem=e.world.getItemAt(b.index));this._hideMessage();void 0===b.placeholderFillStyle&&(b.placeholderFillStyle=this.placeholderFillStyle);void 0===b.opacity&&(b.opacity=this.opacity);void 0===b.compositeOperation&&(b.compositeOperation=this.compositeOperation);var g={options:b};a.isArray(b.tileSource)?setTimeout(function(){c({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:b.tileSource,options:b})}):(this._loadQueue.push(g),
f(this,b.tileSource,function(b){g.tileSource=b;for(var c,f;e._loadQueue.length;){b=e._loadQueue[0];if(!b.tileSource)break;e._loadQueue.splice(0,1);b.options.replace&&(c=e.world.getIndexOfItem(b.options.replaceItem),-1!=c&&(b.options.index=c),e.world.removeItem(b.options.replaceItem));c=new a.TiledImage({viewer:e,source:b.tileSource,viewport:e.viewport,drawer:e.drawer,tileCache:e.tileCache,imageLoader:e.imageLoader,x:b.options.x,y:b.options.y,width:b.options.width,height:b.options.height,fitBounds:b.options.fitBounds,
fitBoundsPlacement:b.options.fitBoundsPlacement,clip:b.options.clip,placeholderFillStyle:b.options.placeholderFillStyle,opacity:b.options.opacity,compositeOperation:b.options.compositeOperation,springStiffness:e.springStiffness,animationTime:e.animationTime,minZoomImageRatio:e.minZoomImageRatio,wrapHorizontal:e.wrapHorizontal,wrapVertical:e.wrapVertical,immediateRender:e.immediateRender,blendTime:e.blendTime,alwaysBlend:e.alwaysBlend,minPixelRatio:e.minPixelRatio,smoothTileEdgesMinZoom:e.smoothTileEdgesMinZoom,
crossOriginPolicy:e.crossOriginPolicy,debugMode:e.debugMode});e.collectionMode&&e.world.setAutoRefigureSizes(!1);e.world.addItem(c,{index:b.options.index});0===e._loadQueue.length&&d(b);1!==e.world.getItemCount()||e.preserveViewport||e.viewport.goHome(!0);e.navigator&&(f=a.extend({},b.options,{replace:!1,originalTiledImage:c,tileSource:b.tileSource}),e.navigator.addTiledImage(f));b.options.success&&b.options.success({item:c})}},function(a){a.options=b;c(a)}))},addSimpleImage:function(b){a.console.assert(b,
"[Viewer.addSimpleImage] options is required");a.console.assert(b.url,"[Viewer.addSimpleImage] options.url is required");b=a.extend({},b,{tileSource:{type:"image",url:b.url}});delete b.url;this.addTiledImage(b)},addLayer:function(b){var c=this;a.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var d=a.extend({},b,{success:function(a){c.raiseEvent("add-layer",{options:b,drawer:a.item})},error:function(a){c.raiseEvent("add-layer-failed",a)}});this.addTiledImage(d);
return this},getLayerAtLevel:function(b){a.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead.");return this.world.getItemAt(b)},getLevelOfLayer:function(b){a.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead.");return this.world.getIndexOfItem(b)},getLayersCount:function(){a.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead.");return this.world.getItemCount()},
setLayerLevel:function(b,c){a.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead.");return this.world.setItemIndex(b,c)},removeLayer:function(b){a.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead.");return this.world.removeItem(b)},forceRedraw:function(){N[this.hash].forceRedraw=!0;return this},bindSequenceControls:function(){var b=a.delegate(this,m),c=a.delegate(this,t),d=a.delegate(this,ha),e=a.delegate(this,
ba),f=this.navImages,g=!0;if(this.showSequenceControl){if(this.previousButton||this.nextButton)g=!1;this.previousButton=new a.Button({element:this.previousButton?a.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.PreviousPage"),srcRest:O(this.prefixUrl,f.previous.REST),srcGroup:O(this.prefixUrl,f.previous.GROUP),srcHover:O(this.prefixUrl,f.previous.HOVER),srcDown:O(this.prefixUrl,f.previous.DOWN),
onRelease:e,onFocus:b,onBlur:c});this.nextButton=new a.Button({element:this.nextButton?a.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.NextPage"),srcRest:O(this.prefixUrl,f.next.REST),srcGroup:O(this.prefixUrl,f.next.GROUP),srcHover:O(this.prefixUrl,f.next.HOVER),srcDown:O(this.prefixUrl,f.next.DOWN),onRelease:d,onFocus:b,onBlur:c});this.navPrevNextWrap||this.previousButton.disable();this.tileSources&&
this.tileSources.length||this.nextButton.disable();g&&(this.paging=new a.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:a.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||a.ControlAnchor.TOP_LEFT}))}return this},bindStandardControls:function(){var b=
a.delegate(this,aa),c=a.delegate(this,X),d=a.delegate(this,ja),e=a.delegate(this,ia),f=a.delegate(this,H),g=a.delegate(this,ka),h=a.delegate(this,qa),n=a.delegate(this,ua),l=a.delegate(this,T),k=a.delegate(this,m),p=a.delegate(this,t),w=this.navImages,q=[],u=!0;if(this.showNavigationControl){if(this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton)u=!1;this.showZoomControl&&(q.push(this.zoomInButton=new a.Button({element:this.zoomInButton?
a.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.ZoomIn"),srcRest:O(this.prefixUrl,w.zoomIn.REST),srcGroup:O(this.prefixUrl,w.zoomIn.GROUP),srcHover:O(this.prefixUrl,w.zoomIn.HOVER),srcDown:O(this.prefixUrl,w.zoomIn.DOWN),onPress:b,onRelease:c,onClick:d,onEnter:b,onExit:c,onFocus:k,onBlur:p})),q.push(this.zoomOutButton=new a.Button({element:this.zoomOutButton?a.getElement(this.zoomOutButton):null,
clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.ZoomOut"),srcRest:O(this.prefixUrl,w.zoomOut.REST),srcGroup:O(this.prefixUrl,w.zoomOut.GROUP),srcHover:O(this.prefixUrl,w.zoomOut.HOVER),srcDown:O(this.prefixUrl,w.zoomOut.DOWN),onPress:e,onRelease:c,onClick:f,onEnter:e,onExit:c,onFocus:k,onBlur:p})));this.showHomeControl&&q.push(this.homeButton=new a.Button({element:this.homeButton?a.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,
clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.Home"),srcRest:O(this.prefixUrl,w.home.REST),srcGroup:O(this.prefixUrl,w.home.GROUP),srcHover:O(this.prefixUrl,w.home.HOVER),srcDown:O(this.prefixUrl,w.home.DOWN),onRelease:g,onFocus:k,onBlur:p}));this.showFullPageControl&&q.push(this.fullPageButton=new a.Button({element:this.fullPageButton?a.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.FullPage"),
srcRest:O(this.prefixUrl,w.fullpage.REST),srcGroup:O(this.prefixUrl,w.fullpage.GROUP),srcHover:O(this.prefixUrl,w.fullpage.HOVER),srcDown:O(this.prefixUrl,w.fullpage.DOWN),onRelease:h,onFocus:k,onBlur:p}));this.showRotationControl&&(q.push(this.rotateLeftButton=new a.Button({element:this.rotateLeftButton?a.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.RotateLeft"),srcRest:O(this.prefixUrl,
w.rotateleft.REST),srcGroup:O(this.prefixUrl,w.rotateleft.GROUP),srcHover:O(this.prefixUrl,w.rotateleft.HOVER),srcDown:O(this.prefixUrl,w.rotateleft.DOWN),onRelease:n,onFocus:k,onBlur:p})),q.push(this.rotateRightButton=new a.Button({element:this.rotateRightButton?a.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:a.getString("Tooltips.RotateRight"),srcRest:O(this.prefixUrl,w.rotateright.REST),srcGroup:O(this.prefixUrl,
w.rotateright.GROUP),srcHover:O(this.prefixUrl,w.rotateright.HOVER),srcDown:O(this.prefixUrl,w.rotateright.DOWN),onRelease:l,onFocus:k,onBlur:p})));u&&(this.buttons=new a.ButtonGroup({buttons:q,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",a.delegate(this,Y)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:a.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||
a.ControlAnchor.TOP_LEFT}))}return this},currentPage:function(){return this._sequenceIndex},goToPage:function(a){this.tileSources&&0<=a&&a<this.tileSources.length&&(this.raiseEvent("page",{page:a}),this._sequenceIndex=a,this._updateSequenceButtons(a),this.open(this.tileSources[a]),this.referenceStrip&&this.referenceStrip.setFocus(a));return this},addOverlay:function(b,c,e,f){c=a.isPlainObject(b)?b:{element:b,location:c,placement:e,onDraw:f};b=a.getElement(c.element);if(0<=d(this.currentOverlays,b))return this;
e=g(this,c);this.currentOverlays.push(e);e.drawHTML(this.overlaysContainer,this.viewport);this.raiseEvent("add-overlay",{element:b,location:c.location,placement:c.placement});return this},updateOverlay:function(b,c,e){var f;b=a.getElement(b);f=d(this.currentOverlays,b);0<=f&&(this.currentOverlays[f].update(c,e),N[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:b,location:c,placement:e}));return this},removeOverlay:function(b){var c;b=a.getElement(b);c=d(this.currentOverlays,b);
0<=c&&(this.currentOverlays[c].destroy(),this.currentOverlays.splice(c,1),N[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:b}));return this},clearOverlays:function(){for(;0<this.currentOverlays.length;)this.currentOverlays.pop().destroy();N[this.hash].forceRedraw=!0;this.raiseEvent("clear-overlay",{});return this},getOverlayById:function(b){b=a.getElement(b);b=d(this.currentOverlays,b);return 0<=b?this.currentOverlays[b]:null},_updateSequenceButtons:function(a){this.nextButton&&
(this.tileSources&&this.tileSources.length-1!==a?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable());this.previousButton&&(0<a?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(b){this._hideMessage();var c=a.makeNeutralElement("div");c.appendChild(document.createTextNode(b));this.messageDiv=a.makeCenteredNode(c);a.addClass(this.messageDiv,"openseadragon-message");this.container.appendChild(this.messageDiv)},_hideMessage:function(){var a=
this.messageDiv;a&&(a.parentNode.removeChild(a),delete this.messageDiv)},gestureSettingsByDeviceType:function(a){switch(a){case "mouse":return this.gestureSettingsMouse;case "touch":return this.gestureSettingsTouch;case "pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var a,b=this.currentOverlays.length;for(a=0;a<b;a++)this.currentOverlays[a].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]}})})(OpenSeadragon);
(function(a){function e(a){a.quick&&this.viewer.viewport&&(this.viewer.viewport.panTo(this.viewport.pointFromPixel(a.position)),this.viewer.viewport.applyConstraints())}function f(a){this.viewer.viewport&&(this.panHorizontal||(a.delta.x=0),this.panVertical||(a.delta.y=0),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(a.delta)))}function g(a){a.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function d(a){this.viewer.raiseEvent("navigator-scroll",
{tracker:a.eventSource,position:a.position,scroll:a.scroll,shift:a.shift,originalEvent:a.originalEvent});return!1}function b(a,b){a.style.webkitTransform="rotate("+b+"deg)";a.style.mozTransform="rotate("+b+"deg)";a.style.msTransform="rotate("+b+"deg)";a.style.oTransform="rotate("+b+"deg)";a.style.transform="rotate("+b+"deg)"}a.Navigator=function(c){function h(a){b(m.displayRegionContainer,a);b(m.displayRegion,-a);m.viewport.setRotation(a)}var n=c.viewer,m=this,t;c.id?(this.element=document.getElementById(c.id),
c.controlOptions={anchor:a.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(c.id="navigator-"+a.now(),this.element=a.makeNeutralElement("div"),c.controlOptions={anchor:a.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:c.autoFade},c.position&&("BOTTOM_RIGHT"==c.position?c.controlOptions.anchor=a.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"==c.position?c.controlOptions.anchor=a.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"==c.position?c.controlOptions.anchor=a.ControlAnchor.TOP_RIGHT:"TOP_LEFT"==c.position?
c.controlOptions.anchor=a.ControlAnchor.TOP_LEFT:"ABSOLUTE"==c.position&&(c.controlOptions.anchor=a.ControlAnchor.ABSOLUTE,c.controlOptions.top=c.top,c.controlOptions.left=c.left,c.controlOptions.height=c.height,c.controlOptions.width=c.width)));this.element.id=c.id;this.element.className+=" navigator";c=a.extend(!0,{sizeRatio:a.DEFAULT_SETTINGS.navigatorSizeRatio},c,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,
blendTime:0,animationTime:0,autoResize:c.autoResize,minZoomImageRatio:1});c.minPixelRatio=this.minPixelRatio=n.minPixelRatio;a.setElementTouchActionNone(this.element);this.borderWidth=2;this.fudge=new a.Point(1,1);this.totalBorderWidths=(new a.Point(2*this.borderWidth,2*this.borderWidth)).minus(this.fudge);c.controlOptions.anchor!=a.ControlAnchor.NONE&&function(a,b){a.margin="0px";a.border=b+"px solid #555";a.padding="0px";a.background="#000";a.opacity=.8;a.overflow="hidden"}(this.element.style,this.borderWidth);
this.displayRegion=a.makeNeutralElement("div");this.displayRegion.id=this.element.id+"-displayregion";this.displayRegion.className="displayregion";(function(a,b){a.position="relative";a.top="0px";a.left="0px";a.fontSize="0px";a.overflow="hidden";a.border=b+"px solid #900";a.margin="0px";a.padding="0px";a.background="transparent";a["float"]="left";a.cssFloat="left";a.styleFloat="left";a.zIndex=999999999;a.cursor="default"})(this.displayRegion.style,this.borderWidth);this.displayRegionContainer=a.makeNeutralElement("div");
this.displayRegionContainer.id=this.element.id+"-displayregioncontainer";this.displayRegionContainer.className="displayregioncontainer";this.displayRegionContainer.style.width="100%";this.displayRegionContainer.style.height="100%";n.addControl(this.element,c.controlOptions);if(this._resizeWithViewer=c.controlOptions.anchor!=a.ControlAnchor.ABSOLUTE&&c.controlOptions.anchor!=a.ControlAnchor.NONE)c.width&&c.height?(this.element.style.height="number"==typeof c.height?c.height+"px":c.height,this.element.style.width=
"number"==typeof c.width?c.width+"px":c.width):(t=a.getElementSize(n.element),this.element.style.height=Math.round(t.y*c.sizeRatio)+"px",this.element.style.width=Math.round(t.x*c.sizeRatio)+"px",this.oldViewerSize=t),t=a.getElementSize(this.element),this.elementArea=t.x*t.y;this.oldContainerSize=new a.Point(0,0);a.Viewer.apply(this,[c]);this.displayRegionContainer.appendChild(this.displayRegion);this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);c.navigatorRotate&&
(t=c.viewer.viewport?c.viewer.viewport.getRotation():c.viewer.degrees||0,h(t),c.viewer.addHandler("rotate",function(a){h(a.degrees)}));this.innerTracker.destroy();this.innerTracker=new a.MouseTracker({element:this.element,dragHandler:a.delegate(this,f),clickHandler:a.delegate(this,e),releaseHandler:a.delegate(this,g),scrollHandler:a.delegate(this,d)});this.addHandler("reset-size",function(){m.viewport&&m.viewport.goHome(!0)});n.world.addHandler("item-index-change",function(a){var b=m.world.getItemAt(a.previousIndex);
m.world.setItemIndex(b,a.newIndex)});n.world.addHandler("remove-item",function(a){(a=m._getMatchingItem(a.item))&&m.world.removeItem(a)});this.update(n.viewport)};a.extend(a.Navigator.prototype,a.EventSource.prototype,a.Viewer.prototype,{updateSize:function(){if(this.viewport){var b=new a.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);b.equals(this.oldContainerSize)||(this.viewport.resize(b,!0),this.viewport.goHome(!0),
this.oldContainerSize=b,this.drawer.clear(),this.world.draw())}},update:function(b){var c,d;c=a.getElementSize(this.viewer.element);this._resizeWithViewer&&c.x&&c.y&&!c.equals(this.oldViewerSize)&&(this.oldViewerSize=c,this.maintainSizeRatio||!this.elementArea?(d=c.x*this.sizeRatio,c=c.y*this.sizeRatio):(d=Math.sqrt(c.x/c.y*this.elementArea),c=this.elementArea/d),this.element.style.width=Math.round(d)+"px",this.element.style.height=Math.round(c)+"px",this.elementArea||(this.elementArea=d*c),this.updateSize());
if(b&&this.viewport){d=b.getBoundsNoRotate(!0);b=this.viewport.pixelFromPointNoRotate(d.getTopLeft(),!1);d=this.viewport.pixelFromPointNoRotate(d.getBottomRight(),!1).minus(this.totalBorderWidths);c=this.displayRegion.style;c.display=this.world.getItemCount()?"block":"none";c.top=Math.round(b.y)+"px";c.left=Math.round(b.x)+"px";var e=Math.abs(b.y-d.y);c.width=Math.round(Math.max(Math.abs(b.x-d.x),0))+"px";c.height=Math.round(Math.max(e,0))+"px"}},addTiledImage:function(b){var c=this,d=b.originalTiledImage;
delete b.original;b=a.extend({},b,{success:function(a){var b=a.item;b._originalForNavigator=d;c._matchBounds(b,d,!0);d.addHandler("bounds-change",function(){c._matchBounds(b,d)})}});return a.Viewer.prototype.addTiledImage.apply(this,[b])},_getMatchingItem:function(a){for(var b=this.world.getItemCount(),c,d=0;d<b;d++)if(c=this.world.getItemAt(d),c._originalForNavigator===a)return c;return null},_matchBounds:function(a,b,d){b=b.getBounds();a.setPosition(b.getTopLeft(),d);a.setWidth(b.width,d)}})})(OpenSeadragon);
(function(a){var e={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",
ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right"}};a.extend(a,{getString:function(f){var g=f.split("."),d=null,b=arguments,d=e,c;for(c=0;c<g.length-1;c++)d=d[g[c]]||{};d=d[g[c]];"string"!=typeof d&&(a.console.debug("Untranslated source string:",f),d="");return d.replace(/\{\d+\}/g,function(a){a=parseInt(a.match(/\d+/),10)+1;return a<b.length?b[a]:""})},setString:function(a,g){var d=a.split("."),b=e,c;for(c=0;c<
d.length-1;c++)b[d[c]]||(b[d[c]]={}),b=b[d[c]];b[d[c]]=g}})})(OpenSeadragon);
(function(a){a.Point=function(a,f){this.x="number"==typeof a?a:0;this.y="number"==typeof f?f:0};a.Point.prototype={clone:function(){return new a.Point(this.x,this.y)},plus:function(e){return new a.Point(this.x+e.x,this.y+e.y)},minus:function(e){return new a.Point(this.x-e.x,this.y-e.y)},times:function(e){return new a.Point(this.x*e,this.y*e)},divide:function(e){return new a.Point(this.x/e,this.y/e)},negate:function(){return new a.Point(-this.x,-this.y)},distanceTo:function(a){return Math.sqrt(Math.pow(this.x-
a.x,2)+Math.pow(this.y-a.y,2))},apply:function(e){return new a.Point(e(this.x),e(this.y))},equals:function(e){return e instanceof a.Point&&this.x===e.x&&this.y===e.y},rotate:function(e,f){f=f||new a.Point(0,0);var g,d;if(0===e%90){var b=e%360;0>b&&(b+=360);switch(b){case 0:g=1;d=0;break;case 90:g=0;d=1;break;case 180:g=-1;d=0;break;case 270:g=0,d=-1}}else d=e*Math.PI/180,g=Math.cos(d),d=Math.sin(d);return new a.Point(g*(this.x-f.x)-d*(this.y-f.y)+f.x,d*(this.x-f.x)+g*(this.y-f.y)+f.y)},toString:function(){return"("+
Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}})(OpenSeadragon);
(function(a){a.TileSource=function(e,f,g,d,b,c){var h=this,n=arguments,m,n=a.isPlainObject(e)?e:{width:n[0],height:n[1],tileSize:n[2],tileOverlap:n[3],minLevel:n[4],maxLevel:n[5]};a.EventSource.call(this);a.extend(!0,this,n);if(!this.success)for(m=0;m<arguments.length;m++)if(a.isFunction(arguments[m])){this.success=arguments[m];break}this.success&&this.addHandler("ready",function(a){h.success(a)});"string"==a.type(arguments[0])&&(this.url=arguments[0]);this.url?(this.aspectRatio=1,this.dimensions=
new a.Point(10,10),this.maxLevel=this.minLevel=this.tileOverlap=this._tileHeight=this._tileWidth=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=n.width&&n.height?n.width/n.height:1,this.dimensions=new a.Point(n.width,n.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):
this._tileHeight=0),this.tileOverlap=n.tileOverlap?n.tileOverlap:0,this.minLevel=n.minLevel?n.minLevel:0,this.maxLevel=void 0!==n.maxLevel&&null!==n.maxLevel?n.maxLevel:n.width&&n.height?Math.ceil(Math.log(Math.max(n.width,n.height))/Math.log(2)):0,this.success&&a.isFunction(this.success)&&this.success(this))};a.TileSource.prototype={getTileSize:function(e){a.console.error("[TileSource.getTileSize] is deprecated.Use TileSource.getTileWidth() and TileSource.getTileHeight() instead");return this._tileWidth},
getTileWidth:function(a){return this._tileWidth?this._tileWidth:this.getTileSize(a)},getTileHeight:function(a){return this._tileHeight?this._tileHeight:this.getTileSize(a)},getLevelScale:function(a){var e={},g;for(g=0;g<=this.maxLevel;g++)e[g]=1/Math.pow(2,this.maxLevel-g);this.getLevelScale=function(a){return e[a]};return this.getLevelScale(a)},getNumTiles:function(e){var f=this.getLevelScale(e),g=Math.ceil(f*this.dimensions.x/this.getTileWidth(e));e=Math.ceil(f*this.dimensions.y/this.getTileHeight(e));
return new a.Point(g,e)},getPixelRatio:function(e){e=this.dimensions.times(this.getLevelScale(e));return new a.Point(1/e.x,1/e.y)},getClosestLevel:function(e){var f,g,d;for(f=this.minLevel;f<this.maxLevel&&!(d=this.getNumTiles(f),g=new a.Point(Math.floor(e.x/this.getTileWidth(f)),Math.floor(e.y/this.getTileHeight(f))),d.x+1>=g.x&&d.y+1>=g.y);f++);return Math.max(0,f-1)},getTileAtPoint:function(e,f){var g=f.times(this.dimensions.x).times(this.getLevelScale(e)),d=Math.floor(g.x/this.getTileWidth(e)),
g=Math.floor(g.y/this.getTileHeight(e));return new a.Point(d,g)},getTileBounds:function(e,f,g){var d=this.dimensions.times(this.getLevelScale(e)),b=this.getTileWidth(e),c=this.getTileHeight(e);e=0===f?0:b*f-this.tileOverlap;var h=0===g?0:c*g-this.tileOverlap;f=b+(0===f?1:2)*this.tileOverlap;g=c+(0===g?1:2)*this.tileOverlap;b=1/d.x;f=Math.min(f,d.x-e);g=Math.min(g,d.y-h);return new a.Rect(e*b,h*b,f*b,g*b)},getImageInfo:function(e){var f=this,g,d,b,c,h,n;e&&(g=e.split("/"),h=g[g.length-1],n=h.lastIndexOf("."),
-1<n&&(g[g.length-1]=h.slice(0,n)));d=function(d){"string"===typeof d&&(d=a.parseXml(d));var g=a.TileSource.determineType(f,d,e);g?(c=g.prototype.configure.apply(f,[d,e]),void 0===c.ajaxWithCredentials&&(c.ajaxWithCredentials=f.ajaxWithCredentials),b=new g(c),f.ready=!0,f.raiseEvent("ready",{tileSource:b})):f.raiseEvent("open-failed",{message:"Unable to load TileSource",source:e})};e.match(/\.js$/)?(g=e.split("/").pop().replace(".js",""),a.jsonp({url:e,async:!1,callbackName:g,callback:d})):a.makeAjaxRequest({url:e,
withCredentials:this.ajaxWithCredentials,success:function(b){var c=b.responseText,e;if(!b)throw Error(a.getString("Errors.Security"));if(200!==b.status&&0!==b.status)throw c=b.status,b=404==c?"Not Found":b.statusText,Error(a.getString("Errors.Status",c,b));if(c.match(/\s*<.*/))try{e=b.responseXML&&b.responseXML.documentElement?b.responseXML:a.parseXml(c)}catch(l){e=b.responseText}else e=c.match(/\s*[\{\[].*/)?a.parseJSON(c):c;d(e)},error:function(a,b){var c;try{c="HTTP "+a.status+" attempting to load TileSource"}catch(l){c=
("undefined"!=typeof b&&b.toString?b.toString():"Unknown error")+" attempting to load TileSource"}f.raiseEvent("open-failed",{message:c,source:e})}})},supports:function(a,f){return!1},configure:function(a,f){throw Error("Method not implemented.");},getTileUrl:function(a,f,g){throw Error("Method not implemented.");},tileExists:function(a,f,g){var d=this.getNumTiles(a);return a>=this.minLevel&&a<=this.maxLevel&&0<=f&&0<=g&&f<d.x&&g<d.y}};a.extend(!0,a.TileSource.prototype,a.EventSource.prototype);a.TileSource.determineType=
function(e,f,g){for(var d in OpenSeadragon)if(d.match(/.+TileSource$/)&&a.isFunction(OpenSeadragon[d])&&a.isFunction(OpenSeadragon[d].prototype.supports)&&OpenSeadragon[d].prototype.supports.call(e,f,g))return OpenSeadragon[d];a.console.error("No TileSource was able to open %s %s",g,f)}})(OpenSeadragon);
(function(a){function e(e,g){var d=g.Image,b=d.Url,c=d.Format,f=d.Size,n=d.DisplayRect||[],m=parseInt(f.Width,10),f=parseInt(f.Height,10),t=parseInt(d.TileSize,10),d=parseInt(d.Overlap,10),w=[],l,p;for(p=0;p<n.length;p++)l=n[p].Rect,w.push(new a.DisplayRect(parseInt(l.X,10),parseInt(l.Y,10),parseInt(l.Width,10),parseInt(l.Height,10),parseInt(l.MinLevel,10),parseInt(l.MaxLevel,10)));return a.extend(!0,{width:m,height:f,tileSize:t,tileOverlap:d,minLevel:null,maxLevel:null,tilesUrl:b,fileFormat:c,displayRects:w},
g)}a.DziTileSource=function(e,g,d,b,c,h,n,m,t){b=a.isPlainObject(e)?e:{width:e,height:g,tileSize:d,tileOverlap:b,tilesUrl:c,fileFormat:h,displayRects:n,minLevel:m,maxLevel:t};this._levelRects={};this.tilesUrl=b.tilesUrl;this.fileFormat=b.fileFormat;if(this.displayRects=b.displayRects)for(e=this.displayRects.length-1;0<=e;e--)for(g=this.displayRects[e],d=g.minLevel;d<=g.maxLevel;d++)this._levelRects[d]||(this._levelRects[d]=[]),this._levelRects[d].push(g);a.TileSource.apply(this,[b])};a.extend(a.DziTileSource.prototype,
a.TileSource.prototype,{supports:function(a,e){var d;a.Image?d=a.Image.xmlns:!a.documentElement||"Image"!=a.documentElement.localName&&"Image"!=a.documentElement.tagName||(d=a.documentElement.namespaceURI);return"http://schemas.microsoft.com/deepzoom/2008"==d||"http://schemas.microsoft.com/deepzoom/2009"==d},configure:function(f,g){var d;if(a.isPlainObject(f))d=e(this,f);else a:{if(!f||!f.documentElement)throw Error(a.getString("Errors.Xml"));var b=f.documentElement,c=b.localName||b.tagName,h=f.documentElement.namespaceURI,
n=null,m=[],t,w,l,p,u;if("Image"==c)try{p=b.getElementsByTagName("Size")[0];void 0===p&&(p=b.getElementsByTagNameNS(h,"Size")[0]);n={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:b.getAttribute("Url"),Format:b.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(b.getAttribute("Overlap"),10),TileSize:parseInt(b.getAttribute("TileSize"),10),Size:{Height:parseInt(p.getAttribute("Height"),10),Width:parseInt(p.getAttribute("Width"),10)}}};if(!a.imageFormatSupported(n.Image.Format))throw Error(a.getString("Errors.ImageFormat",
n.Image.Format.toUpperCase()));t=b.getElementsByTagName("DisplayRect");void 0===t&&(t=b.getElementsByTagNameNS(h,"DisplayRect")[0]);for(u=0;u<t.length;u++)w=t[u],l=w.getElementsByTagName("Rect")[0],void 0===l&&(l=w.getElementsByTagNameNS(h,"Rect")[0]),m.push({Rect:{X:parseInt(l.getAttribute("X"),10),Y:parseInt(l.getAttribute("Y"),10),Width:parseInt(l.getAttribute("Width"),10),Height:parseInt(l.getAttribute("Height"),10),MinLevel:parseInt(w.getAttribute("MinLevel"),10),MaxLevel:parseInt(w.getAttribute("MaxLevel"),
10)}});m.length&&(n.Image.DisplayRect=m);d=e(this,n);break a}catch(k){throw k instanceof Error?k:Error(a.getString("Errors.Dzi"));}else{if("Collection"==c)throw Error(a.getString("Errors.Dzc"));if("Error"==c)throw d=b.getElementsByTagName("Message")[0].firstChild.nodeValue,Error(d);}throw Error(a.getString("Errors.Dzi"));}g&&!d.tilesUrl&&(d.tilesUrl=g.replace(/([^\/]+?)(\.(dzi|xml|js))?\/?(\?.*)?$/,"$1_files/"),-1!=g.search(/\.(dzi|xml|js)\?/)?d.queryParams=g.match(/\?.*/):d.queryParams="");return d},
getTileUrl:function(a,e,d){return[this.tilesUrl,a,"/",e,"_",d,".",this.fileFormat,this.queryParams].join("")},tileExists:function(a,e,d){var b=this._levelRects[a],c,f,g,m,t,w;if(!b||!b.length)return!0;for(w=b.length-1;0<=w;w--)if(c=b[w],!(a<c.minLevel||a>c.maxLevel)&&(f=this.getLevelScale(a),g=c.x*f,m=c.y*f,t=g+c.width*f,c=m+c.height*f,g=Math.floor(g/this.tileSize),m=Math.floor(m/this.tileSize),t=Math.ceil(t/this.tileSize),c=Math.ceil(c/this.tileSize),g<=e&&e<t&&m<=d&&d<c))return!0;return!1}})})(OpenSeadragon);
(function(a){function e(a){for(var d=[],b=0;b<a.sizes.length;b++)d.push({url:a["@id"]+"/full/"+a.sizes[b].width+",/0/default.jpg",width:a.sizes[b].width,height:a.sizes[b].height});return d.sort(function(a,b){return a.width-b.width})}function f(e,d,b){if(3==e.nodeType&&b)e=e.nodeValue.trim(),e.match(/^\d*$/)&&(e=Number(e)),d[b]?(a.isArray(d[b])||(d[b]=[d[b]]),d[b].push(e)):d[b]=e;else if(1==e.nodeType)for(b=0;b<e.childNodes.length;b++)f(e.childNodes[b],d,e.nodeName)}a.IIIFTileSource=function(f){a.extend(!0,
this,f);if(!(this.height&&this.width&&this["@id"]))throw Error("IIIF required parameters not provided.");f.tileSizePerScaleFactor={};if(this.tile_width&&this.tile_height)f.tileWidth=this.tile_width,f.tileHeight=this.tile_height;else if(this.tile_width)f.tileSize=this.tile_width;else if(this.tile_height)f.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)f.tileWidth=this.tiles[0].width,f.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;
else{this.scale_factors=[];for(var d=0;d<this.tiles.length;d++)for(var b=0;b<this.tiles[d].scaleFactors.length;b++){var c=this.tiles[d].scaleFactors[b];this.scale_factors.push(c);f.tileSizePerScaleFactor[c]={width:this.tiles[d].width,height:this.tiles[d].height||this.tiles[d].width}}}else if(d=f.profile,-1!=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json"].indexOf(d[0])&&
-1==d.indexOf("sizeByW"))this.sizes&&0<this.sizes.length?(this.emulateLegacyImagePyramid=!0,f.levels=e(this),a.extend(!0,f,{width:f.levels[f.levels.length-1].width,height:f.levels[f.levels.length-1].height,tileSize:Math.max(f.height,f.width),tileOverlap:0,minLevel:0,maxLevel:f.levels.length-1}),this.levels=f.levels):a.console.error("Nothing in the info.json to construct image pyramids from");else{for(var d=Math.min(this.height,this.width),b=[256,512,1024],c=[],g=0;g<b.length;g++)b[g]<=d&&c.push(b[g]);
f.tileSize=0<c.length?Math.max.apply(null,c):d}f.maxLevel||this.emulateLegacyImagePyramid||(f.maxLevel=this.scale_factors?Math.floor(Math.pow(Math.max.apply(null,this.scale_factors),.5)):Number(Math.ceil(Math.log(Math.max(this.width,this.height),2))));a.TileSource.apply(this,[f])};a.extend(a.IIIFTileSource.prototype,a.TileSource.prototype,{supports:function(a,d){return a.protocol&&"http://iiif.io/api/image"==a.protocol?!0:!a["@context"]||"http://library.stanford.edu/iiif/image-api/1.1/context.json"!=
a["@context"]&&"http://iiif.io/api/image/1/context.json"!=a["@context"]?a.profile&&0===a.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")?!0:a.identifier&&a.width&&a.height?!0:a.documentElement&&"info"==a.documentElement.tagName&&"http://library.stanford.edu/iiif/image-api/ns/"==a.documentElement.namespaceURI?!0:!1:!0},configure:function(e,d){if(a.isPlainObject(e))return e["@context"]||(e["@context"]="http://iiif.io/api/image/1.0/context.json",e["@id"]=d.replace("/info.json",
"")),e;var b;a:{if(!e||!e.documentElement)throw Error(a.getString("Errors.Xml"));var c=e.documentElement,g=null;if("info"==c.tagName)try{g={};f(c,g);b=g;break a}catch(n){throw n instanceof Error?n:Error(a.getString("Errors.IIIF"));}throw Error(a.getString("Errors.IIIF"));}b["@context"]="http://iiif.io/api/image/1.0/context.json";b["@id"]=d.replace("/info.xml","");return b},getTileWidth:function(e){if(this.emulateLegacyImagePyramid)return a.TileSource.prototype.getTileWidth.call(this,e);e=Math.pow(2,
this.maxLevel-e);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[e]?this.tileSizePerScaleFactor[e].width:this._tileWidth},getTileHeight:function(e){if(this.emulateLegacyImagePyramid)return a.TileSource.prototype.getTileHeight.call(this,e);e=Math.pow(2,this.maxLevel-e);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[e]?this.tileSizePerScaleFactor[e].height:this._tileHeight},getLevelScale:function(e){if(this.emulateLegacyImagePyramid){var d=NaN;0<this.levels.length&&
e>=this.minLevel&&e<=this.maxLevel&&(d=this.levels[e].width/this.levels[this.maxLevel].width);return d}return a.TileSource.prototype.getLevelScale.call(this,e)},getNumTiles:function(e){return this.emulateLegacyImagePyramid?this.getLevelScale(e)?new a.Point(1,1):new a.Point(0,0):a.TileSource.prototype.getNumTiles.call(this,e)},getTileAtPoint:function(e,d){return this.emulateLegacyImagePyramid?new a.Point(0,0):a.TileSource.prototype.getTileAtPoint.call(this,e,d)},getTileUrl:function(a,d,b){if(this.emulateLegacyImagePyramid){var c=
null;0<this.levels.length&&a>=this.minLevel&&a<=this.maxLevel&&(c=this.levels[a].url);return c}var c=Math.pow(.5,this.maxLevel-a),e=Math.ceil(this.width*c),f=Math.ceil(this.height*c),g,t,w,l;g=this.getTileWidth(a);t=this.getTileHeight(a);w=Math.ceil(g/c);l=Math.ceil(t/c);a=-1<this["@context"].indexOf("/1.0/context.json")||-1<this["@context"].indexOf("/1.1/context.json")||-1<this["@context"].indexOf("/1/context.json")?"native.jpg":"default.jpg";e<g&&f<t?(c=e+",",l="full"):(d*=w,b*=l,w=Math.min(w,this.width-
d),l=Math.min(l,this.height-b),c=Math.ceil(w*c)+",",l=[d,b,w,l].join());return[this["@id"],l,c,"0",a].join("/")}})})(OpenSeadragon);
(function(a){a.OsmTileSource=function(e,f,g,d,b){e=a.isPlainObject(e)?e:{width:e,height:f,tileSize:g,tileOverlap:d,tilesUrl:b};e.width&&e.height||(e.width=65572864,e.height=65572864);e.tileSize||(e.tileSize=256,e.tileOverlap=0);e.tilesUrl||(e.tilesUrl="http://tile.openstreetmap.org/");e.minLevel=8;a.TileSource.apply(this,[e])};a.extend(a.OsmTileSource.prototype,a.TileSource.prototype,{supports:function(a,f){return a.type&&"openstreetmaps"==a.type},configure:function(a,f){return a},getTileUrl:function(a,
f,g){return this.tilesUrl+(a-8)+"/"+f+"/"+g+".png"}})})(OpenSeadragon);
(function(a){a.TmsTileSource=function(e,f,g,d,b){e=a.isPlainObject(e)?e:{width:e,height:f,tileSize:g,tileOverlap:d,tilesUrl:b};f=256*Math.ceil(e.width/256);g=256*Math.ceil(e.height/256);e.maxLevel=Math.ceil(Math.log(f>g?f/256:g/256)/Math.log(2))-1;e.tileSize=256;e.width=f;e.height=g;a.TileSource.apply(this,[e])};a.extend(a.TmsTileSource.prototype,a.TileSource.prototype,{supports:function(a,f){return a.type&&"tiledmapservice"==a.type},configure:function(a,f){return a},getTileUrl:function(a,f,g){var d=
this.getNumTiles(a).y-1;return this.tilesUrl+a+"/"+f+"/"+(d-g)+".png"}})})(OpenSeadragon);
(function(a){function e(e){var f=[],d,b;for(b=0;b<e.length;b++)d=e[b],d.height&&d.width&&d.url&&(d.url.toLowerCase().match(/^.*\.(png|jpg|jpeg|gif)(?:\?.*)?$/)||d.mimetype&&d.mimetype.toLowerCase().match(/^.*\/(png|jpg|jpeg|gif)$/))?f.push({url:d.url,width:Number(d.width),height:Number(d.height)}):a.console.error("Unsupported image format: %s",d.url?d.url:"<no URL>");return f.sort(function(a,b){return a.height-b.height})}a.LegacyTileSource=function(f){var g,d;a.isArray(f)&&(g={type:"legacy-image-pyramid",
levels:f});g.levels=e(g.levels);0<g.levels.length?(f=g.levels[g.levels.length-1].width,d=g.levels[g.levels.length-1].height):(d=f=0,a.console.error("No supported image formats found"));a.extend(!0,g,{width:f,height:d,tileSize:Math.max(d,f),tileOverlap:0,minLevel:0,maxLevel:0<g.levels.length?g.levels.length-1:0});a.TileSource.apply(this,[g]);this.levels=g.levels};a.extend(a.LegacyTileSource.prototype,a.TileSource.prototype,{supports:function(a,e){return a.type&&"legacy-image-pyramid"==a.type||a.documentElement&&
"legacy-image-pyramid"==a.documentElement.getAttribute("type")},configure:function(e,g){var d;if(a.isPlainObject(e))d=e.levels;else a:{if(!e||!e.documentElement)throw Error(a.getString("Errors.Xml"));var b=e.documentElement,c=b.tagName,f=null,n=[],m,t;if("image"==c)try{f={type:b.getAttribute("type"),levels:[]};n=b.getElementsByTagName("level");for(t=0;t<n.length;t++)m=n[t],f.levels.push({url:m.getAttribute("url"),width:parseInt(m.getAttribute("width"),10),height:parseInt(m.getAttribute("height"),
10)});d=f.levels;break a}catch(w){throw w instanceof Error?w:Error("Unknown error parsing Legacy Image Pyramid XML.");}else{if("collection"==c)throw Error("Legacy Image Pyramid Collections not yet supported.");if("error"==c)throw Error("Error: "+e);}throw Error("Unknown element "+c);}return d},getLevelScale:function(a){var e=NaN;0<this.levels.length&&a>=this.minLevel&&a<=this.maxLevel&&(e=this.levels[a].width/this.levels[this.maxLevel].width);return e},getNumTiles:function(e){return this.getLevelScale(e)?
new a.Point(1,1):new a.Point(0,0)},getTileAtPoint:function(e,g){return new a.Point(0,0)},getTileUrl:function(a,e,d){e=null;0<this.levels.length&&a>=this.minLevel&&a<=this.maxLevel&&(e=this.levels[a].url);return e}})})(OpenSeadragon);
(function(a){a.ImageTileSource=function(e){e=a.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},e);a.TileSource.apply(this,[e])};a.extend(a.ImageTileSource.prototype,a.TileSource.prototype,{supports:function(a,f){return a.type&&"image"===a.type},configure:function(a,f){return a},getImageInfo:function(e){var f=this._image=new Image,g=this;this.crossOriginPolicy&&(f.crossOrigin=this.crossOriginPolicy);this.ajaxWithCredentials&&(f.useCredentials=this.ajaxWithCredentials);
a.addEvent(f,"load",function(){g.width=f.naturalWidth;g.height=f.naturalHeight;g.aspectRatio=g.width/g.height;g.dimensions=new a.Point(g.width,g.height);g._tileWidth=g.width;g._tileHeight=g.height;g.tileOverlap=0;g.minLevel=0;g.levels=g._buildLevels();g.maxLevel=g.levels.length-1;g.ready=!0;g.raiseEvent("ready",{tileSource:g})});a.addEvent(f,"error",function(){g.raiseEvent("open-failed",{message:"Error loading image at "+e,source:e})});f.src=e},getLevelScale:function(a){var e=NaN;a>=this.minLevel&&
a<=this.maxLevel&&(e=this.levels[a].width/this.levels[this.maxLevel].width);return e},getNumTiles:function(e){return this.getLevelScale(e)?new a.Point(1,1):new a.Point(0,0)},getTileAtPoint:function(e,f){return new a.Point(0,0)},getTileUrl:function(a,f,g){f=null;a>=this.minLevel&&a<=this.maxLevel&&(f=this.levels[a].url);return f},getContext2D:function(a,f,g){f=null;a>=this.minLevel&&a<=this.maxLevel&&(f=this.levels[a].context2D);return f},_buildLevels:function(){var e=[{url:this._image.src,width:this._image.naturalWidth,
height:this._image.naturalHeight}];if(!this.buildPyramid||!a.supportsCanvas||!this.useCanvas)return delete this._image,e;var f=this._image.naturalWidth,g=this._image.naturalHeight,d=document.createElement("canvas"),b=d.getContext("2d");d.width=f;d.height=g;b.drawImage(this._image,0,0,f,g);e[0].context2D=b;delete this._image;if(a.isCanvasTainted(d))return e;for(;2<=f&&2<=g;){var f=Math.floor(f/2),g=Math.floor(g/2),b=document.createElement("canvas"),c=b.getContext("2d");b.width=f;b.height=g;c.drawImage(d,
0,0,f,g);e.splice(0,0,{context2D:c,width:f,height:g});d=b}return e}})})(OpenSeadragon);(function(a){a.TileSourceCollection=function(e,f,g,d){a.console.error("TileSourceCollection is deprecated; use World instead")}})(OpenSeadragon);
(function(a){function e(b){a.requestAnimationFrame(function(){var c;b.shouldFade&&(c=a.now(),c-=b.fadeBeginTime,c=1-c/b.fadeLength,c=Math.min(1,c),c=Math.max(0,c),b.imgGroup&&a.setElementOpacity(b.imgGroup,c,!0),0<c&&e(b))})}function f(b){b.shouldFade=!0;b.fadeBeginTime=a.now()+b.fadeDelay;window.setTimeout(function(){e(b)},b.fadeDelay)}function g(b,c){b.element.disabled||(c>=a.ButtonState.GROUP&&b.currentState==a.ButtonState.REST&&(b.shouldFade=!1,b.imgGroup&&a.setElementOpacity(b.imgGroup,1,!0),
b.currentState=a.ButtonState.GROUP),c>=a.ButtonState.HOVER&&b.currentState==a.ButtonState.GROUP&&(b.imgHover&&(b.imgHover.style.visibility=""),b.currentState=a.ButtonState.HOVER),c>=a.ButtonState.DOWN&&b.currentState==a.ButtonState.HOVER&&(b.imgDown&&(b.imgDown.style.visibility=""),b.currentState=a.ButtonState.DOWN))}function d(b,c){b.element.disabled||(c<=a.ButtonState.HOVER&&b.currentState==a.ButtonState.DOWN&&(b.imgDown&&(b.imgDown.style.visibility="hidden"),b.currentState=a.ButtonState.HOVER),
c<=a.ButtonState.GROUP&&b.currentState==a.ButtonState.HOVER&&(b.imgHover&&(b.imgHover.style.visibility="hidden"),b.currentState=a.ButtonState.GROUP),c<=a.ButtonState.REST&&b.currentState==a.ButtonState.GROUP&&(f(b),b.currentState=a.ButtonState.REST))}a.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3};a.Button=function(b){var c=this;a.EventSource.call(this);a.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:a.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:a.DEFAULT_SETTINGS.clickDistThreshold,
fadeDelay:0,fadeLength:2E3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},b);this.element=b.element||a.makeNeutralElement("div");b.element||(this.imgRest=a.makeTransparentImage(this.srcRest),this.imgGroup=a.makeTransparentImage(this.srcGroup),this.imgHover=a.makeTransparentImage(this.srcHover),this.imgDown=a.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position=
"relative",a.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",a.Browser.vendor==a.BROWSERS.FIREFOX&&3>a.Browser.version&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=
""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown));this.addHandler("press",this.onPress);this.addHandler("release",this.onRelease);this.addHandler("click",this.onClick);this.addHandler("enter",this.onEnter);this.addHandler("exit",this.onExit);this.addHandler("focus",this.onFocus);this.addHandler("blur",this.onBlur);this.currentState=a.ButtonState.GROUP;this.fadeBeginTime=null;this.shouldFade=
!1;this.element.style.display="inline-block";this.element.style.position="relative";this.element.title=this.tooltip;this.tracker=new a.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(b){b.insideElementPressed?(g(c,a.ButtonState.DOWN),c.raiseEvent("enter",{originalEvent:b.originalEvent})):b.buttonDownAny||g(c,a.ButtonState.HOVER)},focusHandler:function(a){this.enterHandler(a);c.raiseEvent("focus",{originalEvent:a.originalEvent})},
exitHandler:function(b){d(c,a.ButtonState.GROUP);b.insideElementPressed&&c.raiseEvent("exit",{originalEvent:b.originalEvent})},blurHandler:function(a){this.exitHandler(a);c.raiseEvent("blur",{originalEvent:a.originalEvent})},pressHandler:function(b){g(c,a.ButtonState.DOWN);c.raiseEvent("press",{originalEvent:b.originalEvent})},releaseHandler:function(b){b.insideElementPressed&&b.insideElementReleased?(d(c,a.ButtonState.HOVER),c.raiseEvent("release",{originalEvent:b.originalEvent})):b.insideElementPressed?
d(c,a.ButtonState.GROUP):g(c,a.ButtonState.HOVER)},clickHandler:function(a){a.quick&&c.raiseEvent("click",{originalEvent:a.originalEvent})},keyHandler:function(a){return 13===a.keyCode?(c.raiseEvent("click",{originalEvent:a.originalEvent}),c.raiseEvent("release",{originalEvent:a.originalEvent}),!1):!0}});d(this,a.ButtonState.REST)};a.extend(a.Button.prototype,a.EventSource.prototype,{notifyGroupEnter:function(){g(this,a.ButtonState.GROUP)},notifyGroupExit:function(){d(this,a.ButtonState.REST)},disable:function(){this.notifyGroupExit();
this.element.disabled=!0;a.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1;a.setElementOpacity(this.element,1,!0);this.notifyGroupEnter()}})})(OpenSeadragon);
(function(a){a.ButtonGroup=function(e){a.extend(!0,this,{buttons:[],clickTimeThreshold:a.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:a.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},e);var f=this.buttons.concat([]),g=this;this.element=e.element||a.makeNeutralElement("div");if(!e.group)for(this.label=a.makeNeutralElement("label"),this.element.style.display="inline-block",this.element.appendChild(this.label),e=0;e<f.length;e++)this.element.appendChild(f[e].element);a.setElementTouchActionNone(this.element);
this.tracker=new a.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(a){for(a=0;a<g.buttons.length;a++)g.buttons[a].notifyGroupEnter()},exitHandler:function(a){if(!a.insideElementPressed)for(a=0;a<g.buttons.length;a++)g.buttons[a].notifyGroupExit()}})};a.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}})(OpenSeadragon);
(function(a){a.Rect=function(a,f,g,d,b){this.x="number"===typeof a?a:0;this.y="number"===typeof f?f:0;this.width="number"===typeof g?g:0;this.height="number"===typeof d?d:0;this.degrees="number"===typeof b?b:0;this.degrees%=360;0>this.degrees&&(this.degrees+=360);270<=this.degrees?(a=this.getTopRight(),this.x=a.x,this.y=a.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=270):180<=this.degrees?(a=this.getBottomRight(),this.x=a.x,this.y=a.y,this.degrees-=180):90<=this.degrees&&(a=this.getBottomLeft(),
this.x=a.x,this.y=a.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=90)};a.Rect.fromSummits=function(e,f,g){var d=e.distanceTo(f);g=e.distanceTo(g);f=f.minus(e);var b=Math.atan(f.y/f.x);0>f.x?b+=Math.PI:0>f.y&&(b+=2*Math.PI);return new a.Rect(e.x,e.y,d,g,b/Math.PI*180)};a.Rect.prototype={clone:function(){return new a.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new a.Point(this.x,this.y)},
getBottomRight:function(){return(new a.Point(this.x+this.width,this.y+this.height)).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return(new a.Point(this.x+this.width,this.y)).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return(new a.Point(this.x,this.y+this.height)).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return(new a.Point(this.x+this.width/2,this.y+this.height/2)).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new a.Point(this.width,
this.height)},equals:function(e){return e instanceof a.Rect&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height&&this.degrees===e.degrees},times:function(e){return new a.Rect(this.x*e,this.y*e,this.width*e,this.height*e,this.degrees)},translate:function(e){return new a.Rect(this.x+e.x,this.y+e.y,this.width,this.height,this.degrees)},union:function(e){var f=this.getBoundingBox();e=e.getBoundingBox();var g=Math.min(f.x,e.x),d=Math.min(f.y,e.y);return new a.Rect(g,d,Math.max(f.x+
f.width,e.x+e.width)-g,Math.max(f.y+f.height,e.y+e.height)-d)},intersection:function(e){var f=[],g=this.getTopLeft();e.containsPoint(g,1E-10)&&f.push(g);g=this.getTopRight();e.containsPoint(g,1E-10)&&f.push(g);g=this.getBottomLeft();e.containsPoint(g,1E-10)&&f.push(g);g=this.getBottomRight();e.containsPoint(g,1E-10)&&f.push(g);g=e.getTopLeft();this.containsPoint(g,1E-10)&&f.push(g);g=e.getTopRight();this.containsPoint(g,1E-10)&&f.push(g);g=e.getBottomLeft();this.containsPoint(g,1E-10)&&f.push(g);
g=e.getBottomRight();this.containsPoint(g,1E-10)&&f.push(g);g=this._getSegments();e=e._getSegments();for(var d=0;d<g.length;d++)for(var b=g[d],c=0;c<e.length;c++){var h=e[c],n;n=b[0];var m=h[0],t=h[1],h=b[1].minus(n),w=t.minus(m),l=-w.x*h.y+h.x*w.y;0===l?n=null:(t=(h.x*(n.y-m.y)-h.y*(n.x-m.x))/l,m=(w.x*(n.y-m.y)-w.y*(n.x-m.x))/l,n=-1E-10<=t&&t<=1-1E-10&&-1E-10<=m&&m<=1-1E-10?new a.Point(n.x+m*h.x,n.y+m*h.y):null);n&&f.push(n)}if(0===f.length)return null;g=f[0].x;e=f[0].x;d=f[0].y;b=f[0].y;for(c=1;c<
f.length;c++)n=f[c],n.x<g&&(g=n.x),n.x>e&&(e=n.x),n.y<d&&(d=n.y),n.y>b&&(b=n.y);return new a.Rect(g,d,e-g,b-d)},_getSegments:function(){var a=this.getTopLeft(),f=this.getTopRight(),g=this.getBottomLeft(),d=this.getBottomRight();return[[a,f],[f,d],[d,g],[g,a]]},rotate:function(e,f){e%=360;if(0===e)return this.clone();0>e&&(e+=360);f=f||this.getCenter();var g=this.getTopLeft().rotate(e,f),d=this.getTopRight().rotate(e,f).minus(g),b=Math.atan(d.y/d.x);0>d.x?b+=Math.PI:0>d.y&&(b+=2*Math.PI);return new a.Rect(g.x,
g.y,this.width,this.height,b/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var e=this.getTopLeft(),f=this.getTopRight(),g=this.getBottomLeft(),d=this.getBottomRight(),b=Math.min(e.x,f.x,g.x,d.x),c=Math.min(e.y,f.y,g.y,d.y);return new a.Rect(b,c,Math.max(e.x,f.x,g.x,d.x)-b,Math.max(e.y,f.y,g.y,d.y)-c)},getIntegerBoundingBox:function(){var e=this.getBoundingBox(),f=Math.floor(e.x),g=Math.floor(e.y);return new a.Rect(f,g,Math.ceil(e.width+e.x-f),Math.ceil(e.height+e.y-
g))},containsPoint:function(a,f){f=f||0;var e=this.getTopLeft(),d=this.getTopRight(),b=this.getBottomLeft(),c=d.minus(e),h=b.minus(e);return(a.x-e.x)*c.x+(a.y-e.y)*c.y>=-f&&(a.x-d.x)*c.x+(a.y-d.y)*c.y<=f&&(a.x-e.x)*h.x+(a.y-e.y)*h.y>=-f&&(a.x-b.x)*h.x+(a.y-b.y)*h.y<=f},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}})(OpenSeadragon);
(function(a){function e(b){var c=Number(this.element.style.marginLeft.replace("px","")),d=Number(this.element.style.marginTop.replace("px","")),e=Number(this.element.style.width.replace("px","")),f=Number(this.element.style.height.replace("px","")),h=a.getElementSize(this.viewer.canvas);this.dragging=!0;this.element&&("horizontal"==this.scroll?0<-b.delta.x?c>-(e-h.x)&&(this.element.style.marginLeft=c+2*b.delta.x+"px",g(this,h.x,c+2*b.delta.x)):0>-b.delta.x&&0>c&&(this.element.style.marginLeft=c+2*
b.delta.x+"px",g(this,h.x,c+2*b.delta.x)):0<-b.delta.y?d>-(f-h.y)&&(this.element.style.marginTop=d+2*b.delta.y+"px",g(this,h.y,d+2*b.delta.y)):0>-b.delta.y&&0>d&&(this.element.style.marginTop=d+2*b.delta.y+"px",g(this,h.y,d+2*b.delta.y)));return!1}function f(b){var c=Number(this.element.style.marginLeft.replace("px","")),d=Number(this.element.style.marginTop.replace("px","")),e=Number(this.element.style.width.replace("px","")),f=Number(this.element.style.height.replace("px","")),h=a.getElementSize(this.viewer.canvas);
this.element&&("horizontal"==this.scroll?0<b.scroll?c>-(e-h.x)&&(this.element.style.marginLeft=c-60*b.scroll+"px",g(this,h.x,c-60*b.scroll)):0>b.scroll&&0>c&&(this.element.style.marginLeft=c-60*b.scroll+"px",g(this,h.x,c-60*b.scroll)):0>b.scroll?d>h.y-f&&(this.element.style.marginTop=d+60*b.scroll+"px",g(this,h.y,d+60*b.scroll)):0<b.scroll&&0>d&&(this.element.style.marginTop=d+60*b.scroll+"px",g(this,h.y,d+60*b.scroll)));return!1}function g(b,c,d){var e,f,g;e="horizontal"==b.scroll?b.panelWidth:b.panelHeight;
f=Math.ceil(c/e)+5;c=Math.ceil((Math.abs(d)+c)/e)+1;f=c-f;for(e=0>f?0:f;e<c&&e<b.panels.length;e++)g=b.panels[e],g.activePanel||(f=new a.Viewer({id:g.id,tileSources:[b.viewer.tileSources[e]],element:g,navigatorSizeRatio:b.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0}),f.displayRegion=a.makeNeutralElement("div"),f.displayRegion.id=g.id+"-displayregion",f.displayRegion.className="displayregion",d=f.displayRegion.style,
d.position="relative",d.top="0px",d.left="0px",d.fontSize="0px",d.overflow="hidden",d["float"]="left",d.cssFloat="left",d.styleFloat="left",d.zIndex=999999999,d.cursor="default",d.width=b.panelWidth-4+"px",d.height=b.panelHeight-4+"px",f.displayRegion.innerTracker=new a.MouseTracker({element:f.displayRegion,startDisabled:!0}),g.getElementsByTagName("div")[0].appendChild(f.displayRegion),g.activePanel=!0)}function d(a){a=a.eventSource.element;"horizontal"==this.scroll?a.style.marginBottom="0px":a.style.marginLeft=
"0px";return!1}function b(b){b=b.eventSource.element;"horizontal"==this.scroll?b.style.marginBottom="-"+a.getElementSize(b).y/2+"px":b.style.marginLeft="-"+a.getElementSize(b).x/2+"px";return!1}function c(a){if(a.preventDefaultAction||a.ctrl||a.alt||a.meta)return!0;switch(a.keyCode){case 38:return f.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:return f.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 37:return f.call(this,{eventSource:this.tracker,
position:null,scroll:-1,shift:null}),!1;case 39:return f.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}function h(a){if(a.preventDefaultAction||a.ctrl||a.alt||a.meta)return!0;switch(a.keyCode){case 61:return f.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return f.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return f.call(this,{eventSource:this.tracker,position:null,
scroll:1,shift:null}),!1;case 115:case 83:return f.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 97:return f.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return f.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}var n={};a.ReferenceStrip=function(m){var t=m.viewer,w=a.getElementSize(t.element),l;m.id||(m.id="referencestrip-"+a.now(),this.element=a.makeNeutralElement("div"),this.element.id=
m.id,this.element.className="referencestrip");m=a.extend(!0,{sizeRatio:a.DEFAULT_SETTINGS.referenceStripSizeRatio,position:a.DEFAULT_SETTINGS.referenceStripPosition,scroll:a.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:a.DEFAULT_SETTINGS.clickTimeThreshold},m,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1});a.extend(this,m);n[this.id]={animating:!1};this.minPixelRatio=this.viewer.minPixelRatio;l=this.element.style;l.marginTop=
"0px";l.marginRight="0px";l.marginBottom="0px";l.marginLeft="0px";l.left="0px";l.bottom="0px";l.border="0px";l.background="#000";l.position="relative";a.setElementTouchActionNone(this.element);a.setElementOpacity(this.element,.8);this.viewer=t;this.innerTracker=new a.MouseTracker({element:this.element,dragHandler:a.delegate(this,e),scrollHandler:a.delegate(this,f),enterHandler:a.delegate(this,d),exitHandler:a.delegate(this,b),keyDownHandler:a.delegate(this,c),keyHandler:a.delegate(this,h)});m.width&&
m.height?(this.element.style.width=m.width+"px",this.element.style.height=m.height+"px",t.addControl(this.element,{anchor:a.ControlAnchor.BOTTOM_LEFT})):"horizontal"==m.scroll?(this.element.style.width=w.x*m.sizeRatio*t.tileSources.length+12*t.tileSources.length+"px",this.element.style.height=w.y*m.sizeRatio+"px",t.addControl(this.element,{anchor:a.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=w.y*m.sizeRatio*t.tileSources.length+12*t.tileSources.length+"px",this.element.style.width=w.x*
m.sizeRatio+"px",t.addControl(this.element,{anchor:a.ControlAnchor.TOP_LEFT}));this.panelWidth=w.x*this.sizeRatio+8;this.panelHeight=w.y*this.sizeRatio+8;this.panels=[];for(l=0;l<t.tileSources.length;l++)m=a.makeNeutralElement("div"),m.id=this.element.id+"-"+l,m.style.width=this.panelWidth+"px",m.style.height=this.panelHeight+"px",m.style.display="inline",m.style["float"]="left",m.style.cssFloat="left",m.style.styleFloat="left",m.style.padding="2px",a.setElementTouchActionNone(m),m.innerTracker=new a.MouseTracker({element:m,
clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(b){b.eventSource.dragging=a.now()},releaseHandler:function(b){var c=b.eventSource,d=Number(c.element.id.split("-")[2]),e=a.now();b.insideElementPressed&&b.insideElementReleased&&c.dragging&&e-c.dragging<c.clickTimeThreshold&&(c.dragging=null,t.goToPage(d))}}),this.element.appendChild(m),m.activePanel=!1,this.panels.push(m);g(this,"vertical"==this.scroll?w.y:w.x,0);this.setFocus(0)};a.extend(a.ReferenceStrip.prototype,
a.EventSource.prototype,a.Viewer.prototype,{setFocus:function(b){var c=a.getElement(this.element.id+"-"+b),e=a.getElementSize(this.viewer.canvas),f=Number(this.element.style.width.replace("px","")),h=Number(this.element.style.height.replace("px","")),m=-Number(this.element.style.marginLeft.replace("px","")),n=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==c&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=c,this.currentSelected.style.background=
"#999","horizontal"==this.scroll?(c=Number(b)*(this.panelWidth+3),c>m+e.x-this.panelWidth?(c=Math.min(c,f-e.x),this.element.style.marginLeft=-c+"px",g(this,e.x,-c)):c<m&&(c=Math.max(0,c-e.x/2),this.element.style.marginLeft=-c+"px",g(this,e.x,-c))):(c=Number(b)*(this.panelHeight+3),c>n+e.y-this.panelHeight?(c=Math.min(c,h-e.y),this.element.style.marginTop=-c+"px",g(this,e.y,-c)):c<n&&(c=Math.max(0,c-e.y/2),this.element.style.marginTop=-c+"px",g(this,e.y,-c))),this.currentPage=b,d.call(this,{eventSource:this.innerTracker}))},
update:function(){return n[this.id].animating?(a.console.log("image reference strip update"),!0):!1},destroy:function(){this.element&&this.element.parentNode.removeChild(this.element)}})})(OpenSeadragon);(function(a){a.DisplayRect=function(e,f,g,d,b,c){a.Rect.apply(this,[e,f,g,d]);this.minLevel=b;this.maxLevel=c};a.extend(a.DisplayRect.prototype,a.Rect.prototype)})(OpenSeadragon);
(function(a){a.Spring=function(e){var f=arguments;"object"!=typeof e&&(e={initial:f.length&&"number"==typeof f[0]?f[0]:void 0,springStiffness:1<f.length?f[1].springStiffness:5,animationTime:1<f.length?f[1].animationTime:1.5});a.console.assert("number"===typeof e.springStiffness&&0!==e.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number");a.console.assert("number"===typeof e.animationTime&&0<=e.animationTime,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0");
e.exponential&&(this._exponential=!0,delete e.exponential);a.extend(!0,this,e);this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:a.now()};a.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs");this.start={value:this.current.value,time:this.current.time};this.target={value:this.current.value,time:this.current.time};this._exponential&&(this.start._logValue=Math.log(this.start.value),
this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))};a.Spring.prototype={resetTo:function(e){a.console.assert(!this._exponential||0!==e,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs");this.start.value=this.target.value=this.current.value=e;this.start.time=this.target.time=this.current.time=a.now();this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),
this.current._logValue=Math.log(this.current.value))},springTo:function(e){a.console.assert(!this._exponential||0!==e,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs");this.start.value=this.current.value;this.start.time=this.current.time;this.target.value=e;this.target.time=this.start.time+1E3*this.animationTime;this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(e){this.start.value+=
e;this.target.value+=e;this._exponential&&(a.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(e){if(this._exponential=e)a.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),
this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value)},update:function(){this.current.time=a.now();var e,f;this._exponential?(e=this.start._logValue,f=this.target._logValue):(e=this.start.value,f=this.target.value);if(this.current.time>=this.target.time)e=f;else{var g=this.springStiffness;e+=(1-Math.exp(g*-((this.current.time-this.start.time)/(this.target.time-this.start.time))))/(1-Math.exp(-g))*(f-e)}this.current.value=
this._exponential?Math.exp(e):e},isAtTargetValue:function(){return this.current.value===this.target.value}}})(OpenSeadragon);
(function(a){function e(e){a.extend(!0,this,{timeout:a.DEFAULT_SETTINGS.timeout,jobId:null},e);this.image=null}e.prototype={errorMsg:null,start:function(){var a=this;this.image=new Image;!1!==this.crossOriginPolicy&&(this.image.crossOrigin=this.crossOriginPolicy);this.image.onload=function(){a.finish(!0)};this.image.onabort=this.image.onerror=function(){a.errorMsg="Image load aborted";a.finish(!1)};this.jobId=window.setTimeout(function(){a.errorMsg="Image load exceeded timeout";a.finish(!1)},this.timeout);
this.image.src=this.src},finish:function(a){this.image.onload=this.image.onerror=this.image.onabort=null;a||(this.image=null);this.jobId&&window.clearTimeout(this.jobId);this.callback(this)}};a.ImageLoader=function(e){a.extend(!0,this,{jobLimit:a.DEFAULT_SETTINGS.imageLoaderLimit,jobQueue:[],jobsInProgress:0},e)};a.ImageLoader.prototype={addJob:function(a){var f=this,d=new e({src:a.src,crossOriginPolicy:a.crossOriginPolicy,callback:function(b){var c=a.callback,d;f.jobsInProgress--;(!f.jobLimit||f.jobsInProgress<
f.jobLimit)&&0<f.jobQueue.length&&(d=f.jobQueue.shift(),d.start(),f.jobsInProgress++);c(b.image,b.errorMsg)},abort:a.abort});!this.jobLimit||this.jobsInProgress<this.jobLimit?(d.start(),this.jobsInProgress++):this.jobQueue.push(d)},clear:function(){for(var a=0;a<this.jobQueue.length;a++){var e=this.jobQueue[a];"function"===typeof e.abort&&e.abort()}this.jobQueue=[]}}})(OpenSeadragon);
(function(a){a.Tile=function(a,f,g,d,b,c,h){this.level=a;this.x=f;this.y=g;this.bounds=d;this.exists=b;this.url=c;this.context2D=h;this.loading=this.loaded=!1;this.visibility=this.distance=this.opacity=this.blendStart=this.size=this.position=this.style=this.image=this.imgElement=this.element=null;this.beingDrawn=!1;this.lastTouchTime=0};a.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},
drawHTML:function(e){this.cacheImageRecord?this.loaded?(this.element||(this.element=a.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=e&&e.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),
this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",a.setElementOpacity(this.element,this.opacity)):a.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):a.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(e,f,g,d){var b=this.position.times(a.pixelDensityRatio),c=this.size.times(a.pixelDensityRatio),h;this.context2D||
this.cacheImageRecord?(h=this.context2D||this.cacheImageRecord.getRenderedContext(),this.loaded&&h?(e.save(),e.globalAlpha=this.opacity,"number"===typeof g&&1!==g&&(b=b.times(g),c=c.times(g)),d instanceof a.Point&&(b=b.plus(d)),1===e.globalAlpha&&this._hasTransparencyChannel()&&e.clearRect(b.x+1,b.y+1,c.x-2,c.y-2),f({context:e,tile:this,rendered:h}),e.drawImage(h.canvas,0,0,h.canvas.width,h.canvas.height,b.x,b.y,c.x,c.y),e.restore()):a.console.warn("Attempting to draw tile %s when it's not yet loaded.",
this.toString())):a.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var e;if(this.cacheImageRecord)e=this.cacheImageRecord.getRenderedContext();else if(this.context2D)e=this.context2D;else return a.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return e.canvas.width/(this.size.x*a.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(e,f,g){return(new a.Point(Math.max(1,
Math.ceil((g.x-f.x)/2)),Math.max(1,Math.ceil((g.y-f.y)/2)))).minus(this.position.times(a.pixelDensityRatio).times(e||1).apply(function(a){return a%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement);this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element);this.imgElement=this.element=null;this.loading=this.loaded=!1}}})(OpenSeadragon);
(function(a){a.OverlayPlacement=a.Placement;a.OverlayRotationMode=a.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3});a.Overlay=function(e,f,g){e=a.isPlainObject(e)?e:{element:e,location:f,placement:g};this.element=e.element;this.style=e.element.style;this._init(e)};a.Overlay.prototype={_init:function(e){this.location=e.location;this.placement=void 0===e.placement?a.Placement.TOP_LEFT:e.placement;this.onDraw=e.onDraw;this.checkResize=void 0===e.checkResize?!0:e.checkResize;this.width=void 0===
e.width?null:e.width;this.height=void 0===e.height?null:e.height;this.rotationMode=e.rotationMode||a.OverlayRotationMode.EXACT;this.location instanceof a.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=a.Placement.TOP_LEFT);this.scales=null!==this.width&&null!==this.height;this.bounds=new a.Rect(this.location.x,this.location.y,this.width,this.height);this.position=this.location},adjust:function(e,f){var g=a.Placement.properties[this.placement];
g&&(g.isHorizontallyCentered?e.x-=f.x/2:g.isRight&&(e.x-=f.x),g.isVerticallyCentered?e.y-=f.y/2:g.isBottom&&(e.y-=f.y))},destroy:function(){var e=this.element,f=this.style;e.parentNode&&(e.parentNode.removeChild(e),e.prevElementParent&&(f.display="none",document.body.appendChild(e)));this.onDraw=null;f.top="";f.left="";f.position="";null!==this.width&&(f.width="");null!==this.height&&(f.height="");var e=a.getCssPropertyWithVendorPrefix("transformOrigin"),g=a.getCssPropertyWithVendorPrefix("transform");
e&&g&&(f[e]="",f[g]="")},drawHTML:function(e,f){var g=this.element;g.parentNode!==e&&(g.prevElementParent=g.parentNode,g.prevNextSibling=g.nextSibling,e.appendChild(g),this.size=a.getElementSize(g));var g=this._getOverlayPositionAndSize(f),d=g.position,b=this.size=g.size,g=g.rotate;if(this.onDraw)this.onDraw(d,b,this.element);else{var c=this.style;c.left=d.x+"px";c.top=d.y+"px";null!==this.width&&(c.width=b.x+"px");null!==this.height&&(c.height=b.y+"px");d=a.getCssPropertyWithVendorPrefix("transformOrigin");
b=a.getCssPropertyWithVendorPrefix("transform");d&&b&&(g?(c[d]=this._getTransformOrigin(),c[b]="rotate("+g+"deg)"):(c[d]="",c[b]=""));c.position="absolute";"none"!==c.display&&(c.display="block")}},_getOverlayPositionAndSize:function(e){var f=e.pixelFromPoint(this.location,!0),g=this._getSizeInPixels(e);this.adjust(f,g);var d=0;e.degrees&&this.rotationMode!==a.OverlayRotationMode.NO_ROTATION&&(this.rotationMode===a.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height?(f=new a.Rect(f.x,
f.y,g.x,g.y),e=this._getBoundingBox(f,e.degrees),f=e.getTopLeft(),g=e.getSize()):d=e.degrees);return{position:f,size:g,rotate:d}},_getSizeInPixels:function(e){var f=this.size.x,g=this.size.y;if(null!==this.width||null!==this.height)e=e.deltaPixelsFromPointsNoRotate(new a.Point(this.width||0,this.height||0),!0),null!==this.width&&(f=e.x),null!==this.height&&(g=e.y);!this.checkResize||null!==this.width&&null!==this.height||(e=this.size=a.getElementSize(this.element),null===this.width&&(f=e.x),null===
this.height&&(g=e.y));return new a.Point(f,g)},_getBoundingBox:function(a,f){var e=this._getPlacementPoint(a);return a.rotate(f,e).getBoundingBox()},_getPlacementPoint:function(e){var f=new a.Point(e.x,e.y),g=a.Placement.properties[this.placement];g&&(g.isHorizontallyCentered?f.x+=e.width/2:g.isRight&&(f.x+=e.width),g.isVerticallyCentered?f.y+=e.height/2:g.isBottom&&(f.y+=e.height));return f},_getTransformOrigin:function(){var e="",f=a.Placement.properties[this.placement];if(!f)return e;f.isLeft?
e="left":f.isRight&&(e="right");f.isTop?e+=" top":f.isBottom&&(e+=" bottom");return e},update:function(e,f){var g=a.isPlainObject(e)?e:{location:e,placement:f};this._init({location:g.location||this.location,placement:void 0!==g.placement?g.placement:this.placement,onDraw:g.onDraw||this.onDraw,checkResize:g.checkResize||this.checkResize,width:void 0!==g.width?g.width:this.width,height:void 0!==g.height?g.height:this.height,rotationMode:g.rotationMode||this.rotationMode})},getBounds:function(e){a.console.assert(e,
"A viewport must now be passed to Overlay.getBounds.");var f=this.width,g=this.height;if(null===f||null===g){var d=e.deltaPointsFromPixelsNoRotate(this.size,!0);null===f&&(f=d.x);null===g&&(g=d.y)}d=this.location.clone();this.adjust(d,new a.Point(f,g));return this._adjustBoundsForRotation(e,new a.Rect(d.x,d.y,f,g))},_adjustBoundsForRotation:function(e,f){if(!e||0===e.degrees||this.rotationMode===a.OverlayRotationMode.EXACT)return f;if(this.rotationMode===a.OverlayRotationMode.BOUNDING_BOX){if(null===
this.width||null===this.height)return f;var g=this._getOverlayPositionAndSize(e);return e.viewerElementToViewportRectangle(new a.Rect(g.position.x,g.position.y,g.size.x,g.size.y))}return f.rotate(-e.degrees,this._getPlacementPoint(f))}}})(OpenSeadragon);
(function(a){a.Drawer=function(e){a.console.assert(e.viewer,"[Drawer] options.viewer is required");var f=arguments;a.isPlainObject(e)||(e={source:f[0],viewport:f[1],element:f[2]});a.console.assert(e.viewport,"[Drawer] options.viewport is required");a.console.assert(e.element,"[Drawer] options.element is required");e.source&&a.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead");this.viewer=e.viewer;this.viewport=e.viewport;this.debugGridColor=e.debugGridColor||a.DEFAULT_SETTINGS.debugGridColor;
e.opacity&&a.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead");this.useCanvas=a.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0);this.container=a.getElement(e.element);this.canvas=a.makeNeutralElement(this.useCanvas?"canvas":"div");this.context=this.useCanvas?this.canvas.getContext("2d"):null;this.sketchContext=this.sketchCanvas=null;this.element=this.container;this.container.dir="ltr";this.useCanvas&&(f=this._calculateCanvasSize(),this.canvas.width=
f.x,this.canvas.height=f.y);this.canvas.style.width="100%";this.canvas.style.height="100%";this.canvas.style.position="absolute";a.setElementOpacity(this.canvas,this.opacity,!0);this.container.style.textAlign="left";this.container.appendChild(this.canvas)};a.Drawer.prototype={addOverlay:function(e,f,g,d){a.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead.");this.viewer.addOverlay(e,f,g,d);return this},updateOverlay:function(e,f,g){a.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead.");
this.viewer.updateOverlay(e,f,g);return this},removeOverlay:function(e){a.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead.");this.viewer.removeOverlay(e);return this},clearOverlays:function(){a.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead.");this.viewer.clearOverlays();return this},setOpacity:function(e){a.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var f=this.viewer.world,g=0;g<
f.getItemCount();g++)f.getItemAt(g).setOpacity(e);return this},getOpacity:function(){a.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var e=this.viewer.world,f=0,g=0;g<e.getItemCount();g++){var d=e.getItemAt(g).getOpacity();d>f&&(f=d)}return f},needsUpdate:function(){a.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead.");return this.viewer.world.needsDraw()},numTilesLoaded:function(){a.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead.");
return this.viewer.tileCache.numTilesLoaded()},reset:function(){a.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead.");this.viewer.world.resetItems();return this},update:function(){a.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead.");this.clear();this.viewer.world.draw();return this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1;this.canvas.height=1;this.sketchContext=this.sketchCanvas=
null},clear:function(){this.canvas.innerHTML="";if(this.useCanvas){var a=this._calculateCanvasSize();if(this.canvas.width!=a.x||this.canvas.height!=a.y)this.canvas.width=a.x,this.canvas.height=a.y,null!==this.sketchCanvas&&(a=this._calculateSketchCanvasSize(),this.sketchCanvas.width=a.x,this.sketchCanvas.height=a.y);this._clear()}},_clear:function(a,f){if(this.useCanvas){var e=this._getContext(a);if(f)e.clearRect(f.x,f.y,f.width,f.height);else{var d=e.canvas;e.clearRect(0,0,d.width,d.height)}}},viewportToDrawerRectangle:function(e){var f=
this.viewport.pixelFromPointNoRotate(e.getTopLeft(),!0);e=this.viewport.deltaPixelsFromPointsNoRotate(e.getSize(),!0);return new a.Rect(f.x*a.pixelDensityRatio,f.y*a.pixelDensityRatio,e.x*a.pixelDensityRatio,e.y*a.pixelDensityRatio)},drawTile:function(e,f,g,d,b){a.console.assert(e,"[Drawer.drawTile] tile is required");a.console.assert(f,"[Drawer.drawTile] drawingHandler is required");this.useCanvas?(g=this._getContext(g),e.drawCanvas(g,f,d||1,b)):e.drawHTML(this.canvas)},_getContext:function(a){var e=
this.context;if(a){if(null===this.sketchCanvas&&(this.sketchCanvas=document.createElement("canvas"),a=this._calculateSketchCanvasSize(),this.sketchCanvas.width=a.x,this.sketchCanvas.height=a.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation())){var g=this;this.viewer.addHandler("rotate",function b(){g.viewer.removeHandler("rotate",b);var a=g._calculateSketchCanvasSize();g.sketchCanvas.width=a.x;g.sketchCanvas.height=a.y})}e=this.sketchContext}return e},saveContext:function(a){this.useCanvas&&
this._getContext(a).save()},restoreContext:function(a){this.useCanvas&&this._getContext(a).restore()},setClip:function(a,f){if(this.useCanvas){var e=this._getContext(f);e.beginPath();e.rect(a.x,a.y,a.width,a.height);e.clip()}},drawRectangle:function(a,f,g){this.useCanvas&&(g=this._getContext(g),g.save(),g.fillStyle=f,g.fillRect(a.x,a.y,a.width,a.height),g.restore())},blendSketch:function(e,f,g,d){var b=e;a.isPlainObject(b)||(b={opacity:e,scale:f,translate:g,compositeOperation:d});this.useCanvas&&
this.sketchCanvas&&(e=b.opacity,d=b.compositeOperation,f=b.bounds,this.context.save(),this.context.globalAlpha=e,d&&(this.context.globalCompositeOperation=d),f?this.context.drawImage(this.sketchCanvas,f.x,f.y,f.width,f.height,f.x,f.y,f.width,f.height):(f=b.scale||1,g=b.translate,e=g instanceof a.Point?g:new a.Point(0,0),b=d=0,g&&(g=this.sketchCanvas.height-this.canvas.height,d=Math.round((this.sketchCanvas.width-this.canvas.width)/2),b=Math.round(g/2)),this.context.drawImage(this.sketchCanvas,e.x-
d*f,e.y-b*f,(this.canvas.width+2*d)*f,(this.canvas.height+2*b)*f,-d,-b,this.canvas.width+2*d,this.canvas.height+2*b)),this.context.restore())},drawDebugInfo:function(e,f,g){if(this.useCanvas){var d=this.context;d.save();d.lineWidth=2*a.pixelDensityRatio;d.font="small-caps bold "+13*a.pixelDensityRatio+"px arial";d.strokeStyle=this.debugGridColor;d.fillStyle=this.debugGridColor;0!==this.viewport.degrees&&this._offsetForRotation(this.viewport.degrees);d.strokeRect(e.position.x*a.pixelDensityRatio,e.position.y*
a.pixelDensityRatio,e.size.x*a.pixelDensityRatio,e.size.y*a.pixelDensityRatio);var b=(e.position.x+e.size.x/2)*a.pixelDensityRatio,c=(e.position.y+e.size.y/2)*a.pixelDensityRatio;d.translate(b,c);d.rotate(Math.PI/180*-this.viewport.degrees);d.translate(-b,-c);0===e.x&&0===e.y&&(d.fillText("Zoom: "+this.viewport.getZoom(),e.position.x*a.pixelDensityRatio,(e.position.y-30)*a.pixelDensityRatio),d.fillText("Pan: "+this.viewport.getBounds().toString(),e.position.x*a.pixelDensityRatio,(e.position.y-20)*
a.pixelDensityRatio));d.fillText("Level: "+e.level,(e.position.x+10)*a.pixelDensityRatio,(e.position.y+20)*a.pixelDensityRatio);d.fillText("Column: "+e.x,(e.position.x+10)*a.pixelDensityRatio,(e.position.y+30)*a.pixelDensityRatio);d.fillText("Row: "+e.y,(e.position.x+10)*a.pixelDensityRatio,(e.position.y+40)*a.pixelDensityRatio);d.fillText("Order: "+g+" of "+f,(e.position.x+10)*a.pixelDensityRatio,(e.position.y+50)*a.pixelDensityRatio);d.fillText("Size: "+e.size.toString(),(e.position.x+10)*a.pixelDensityRatio,
(e.position.y+60)*a.pixelDensityRatio);d.fillText("Position: "+e.position.toString(),(e.position.x+10)*a.pixelDensityRatio,(e.position.y+70)*a.pixelDensityRatio);0!==this.viewport.degrees&&this._restoreRotationChanges();d.restore()}},debugRect:function(e){if(this.useCanvas){var f=this.context;f.save();f.lineWidth=2*a.pixelDensityRatio;f.strokeStyle=this.debugGridColor;f.fillStyle=this.debugGridColor;f.strokeRect(e.x*a.pixelDensityRatio,e.y*a.pixelDensityRatio,e.width*a.pixelDensityRatio,e.height*
a.pixelDensityRatio);f.restore()}},getCanvasSize:function(e){e=this._getContext(e).canvas;return new a.Point(e.width,e.height)},_offsetForRotation:function(a,f){var e=this.canvas.width/2,d=this.canvas.height/2,b=this._getContext(f);b.save();b.translate(e,d);b.rotate(Math.PI/180*a);b.translate(-e,-d)},_restoreRotationChanges:function(a){this._getContext(a).restore()},_calculateCanvasSize:function(){var e=a.pixelDensityRatio,f=this.viewport.getContainerSize();return{x:f.x*e,y:f.y*e}},_calculateSketchCanvasSize:function(){var a=
this._calculateCanvasSize();if(0===this.viewport.getRotation())return a;a=Math.ceil(Math.sqrt(a.x*a.x+a.y*a.y));return{x:a,y:a}}}})(OpenSeadragon);
(function(a){a.Viewport=function(e){var f=arguments;f.length&&f[0]instanceof a.Point&&(e={containerSize:f[0],contentSize:f[1],config:f[2]});e.config&&(a.extend(!0,e,e.config),delete e.config);this._margins=a.extend({left:0,top:0,right:0,bottom:0},e.margins||{});delete e.margins;a.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:a.DEFAULT_SETTINGS.springStiffness,animationTime:a.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:a.DEFAULT_SETTINGS.minZoomImageRatio,
maxZoomPixelRatio:a.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:a.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:a.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:a.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:a.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:a.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:a.DEFAULT_SETTINGS.maxZoomLevel,degrees:a.DEFAULT_SETTINGS.degrees,homeFillsViewer:a.DEFAULT_SETTINGS.homeFillsViewer},e);this._updateContainerInnerSize();this.centerSpringX=new a.Spring({initial:0,
springStiffness:this.springStiffness,animationTime:this.animationTime});this.centerSpringY=new a.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime});this.zoomSpring=new a.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime});this._oldCenterX=this.centerSpringX.current.value;this._oldCenterY=this.centerSpringY.current.value;this._oldZoom=this.zoomSpring.current.value;this._setContentBounds(new a.Rect(0,0,1,1),
1);this.goHome(!0);this.update()};a.Viewport.prototype={resetContentSize:function(e){a.console.assert(e,"[Viewport.resetContentSize] contentSize is required");a.console.assert(e instanceof a.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point");a.console.assert(0<e.x,"[Viewport.resetContentSize] contentSize.x must be greater than 0");a.console.assert(0<e.y,"[Viewport.resetContentSize] contentSize.y must be greater than 0");this._setContentBounds(new a.Rect(0,0,1,e.y/e.x),
e.x);return this},setHomeBounds:function(e,f){a.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually.");this._setContentBounds(e,f)},_setContentBounds:function(e,f){a.console.assert(e,"[Viewport._setContentBounds] bounds is required");a.console.assert(e instanceof a.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect");a.console.assert(0<e.width,"[Viewport._setContentBounds] bounds.width must be greater than 0");a.console.assert(0<
e.height,"[Viewport._setContentBounds] bounds.height must be greater than 0");this._contentBoundsNoRotate=e.clone();this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(f);this._contentBounds=e.rotate(this.degrees).getBoundingBox();this._contentSize=this._contentBounds.getSize().times(f);this._contentAspectRatio=this._contentSize.x/this._contentSize.y;this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:f,homeBounds:this._contentBoundsNoRotate.clone(),
contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var a=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?1<=a?a:1:1<=a?1:a)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var e=this._contentBounds.getCenter(),f=1/this.getHomeZoom(),g=f/this.getAspectRatio();return new a.Rect(e.x-f/2,e.y-g/2,f,g)},goHome:function(a){this.viewer&&
this.viewer.raiseEvent("home",{immediately:a});return this.fitBounds(this.getHomeBounds(),a)},getMinZoom:function(){var a=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*a},getMaxZoom:function(){var a=this.maxZoomLevel;a||(a=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,a/=this._contentBounds.width);return Math.max(a,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new a.Point(this.containerSize.x,
this.containerSize.y)},getMargins:function(){return a.extend({},this._margins)},setMargins:function(e){a.console.assert("object"===a.type(e),"[Viewport.setMargins] margins must be an object");this._margins=a.extend({left:0,top:0,right:0,bottom:0},e);this._updateContainerInnerSize();this.viewer&&this.viewer.forceRedraw()},getBounds:function(a){return this.getBoundsNoRotate(a).rotate(-this.getRotation())},getBoundsNoRotate:function(e){var f=this.getCenter(e);e=1/this.getZoom(e);var g=e/this.getAspectRatio();
return new a.Rect(f.x-e/2,f.y-g/2,e,g)},getBoundsWithMargins:function(a){return this.getBoundsNoRotateWithMargins(a).rotate(-this.getRotation(),this.getCenter(a))},getBoundsNoRotateWithMargins:function(a){var e=this.getBoundsNoRotate(a);a=this._containerInnerSize.x*this.getZoom(a);e.x-=this._margins.left/a;e.y-=this._margins.top/a;e.width+=(this._margins.left+this._margins.right)/a;e.height+=(this._margins.top+this._margins.bottom)/a;return e},getCenter:function(e){var f=new a.Point(this.centerSpringX.current.value,
this.centerSpringY.current.value),g=new a.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),d,b,c;if(e)return f;if(!this.zoomPoint)return g;e=this.pixelFromPoint(this.zoomPoint,!0);d=this.getZoom();b=1/d;c=b/this.getAspectRatio();f=new a.Rect(f.x-b/2,f.y-c/2,b,c);f=this._pixelFromPoint(this.zoomPoint,f).minus(e).divide(this._containerInnerSize.x*d);return g.plus(f)},getZoom:function(a){return a?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(a){return Math.max(Math.min(a,
this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(e,f){var g=new a.Rect(e.x,e.y,e.width,e.height),d=this.visibilityRatio*g.width,b=this.visibilityRatio*g.height;if(!this.wrapHorizontal){var c=0,h=g.x+(g.width-d);this._contentBoundsNoRotate.x>h&&(c=this._contentBoundsNoRotate.x-h);h=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width;d=g.x+d;h<d&&(d=h-d,c=c?(c+d)/2:d);g.x+=c}this.wrapVertical||(c=0,d=g.y+(g.height-b),this._contentBoundsNoRotate.y>d&&(c=this._contentBoundsNoRotate.y-
d),d=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,b=g.y+b,d<b&&(b=d-b,c=c?(c+b)/2:b),g.y+=c);this.viewer&&this.viewer.raiseEvent("constrain",{immediately:f});return g},applyConstraints:function(a){var e=this.getZoom(),g=this._applyZoomConstraints(e);e!==g&&this.zoomTo(g,this.zoomPoint,a);e=this.getBoundsNoRotate();g=this._applyBoundaryConstraints(e,a);(e.x!==g.x||e.y!==g.y||a)&&this.fitBounds(g.rotate(-this.getRotation()),a);return this},ensureVisible:function(a){return this.applyConstraints(a)},
_fitBounds:function(e,f){f=f||{};var g=f.immediately||!1,d=f.constraints||!1,b=this.getAspectRatio(),c=e.getCenter(),h=(new a.Rect(e.x,e.y,e.width,e.height,e.degrees+this.getRotation())).getBoundingBox();h.getAspectRatio()>=b?h.height=h.width/b:h.width=h.height*b;h.x=c.x-h.width/2;h.y=c.y-h.height/2;b=1/h.width;if(d){var d=h.getAspectRatio(),n=this._applyZoomConstraints(b);b!==n&&(b=n,h.width=1/b,h.x=c.x-h.width/2,h.height=h.width/d,h.y=c.y-h.height/2);h=this._applyBoundaryConstraints(h,g);c=h.getCenter()}if(g)return this.panTo(c,
!0),this.zoomTo(b,null,!0);this.panTo(this.getCenter(!0),!0);this.zoomTo(this.getZoom(!0),null,!0);d=this.getBounds();n=this.getZoom();if(0===n||1E-8>Math.abs(b/n-1))return this.zoomTo(b,!0),this.panTo(c,g);h=h.rotate(-this.getRotation());c=h.getTopLeft().times(b).minus(d.getTopLeft().times(n)).divide(b-n);return this.zoomTo(b,c,g)},fitBounds:function(a,f){return this._fitBounds(a,{immediately:f,constraints:!1})},fitBoundsWithConstraints:function(a,f){return this._fitBounds(a,{immediately:f,constraints:!0})},
fitVertically:function(e){var f=new a.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(f,e)},fitHorizontally:function(e){var f=new a.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(f,e)},panBy:function(e,f){var g=new a.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(g.plus(e),f)},panTo:function(a,f){f?
(this.centerSpringX.resetTo(a.x),this.centerSpringY.resetTo(a.y)):(this.centerSpringX.springTo(a.x),this.centerSpringY.springTo(a.y));this.viewer&&this.viewer.raiseEvent("pan",{center:a,immediately:f});return this},zoomBy:function(a,f,g){return this.zoomTo(this.zoomSpring.target.value*a,f,g)},zoomTo:function(e,f,g){this.zoomPoint=f instanceof a.Point&&!isNaN(f.x)&&!isNaN(f.y)?f:null;g?this.zoomSpring.resetTo(e):this.zoomSpring.springTo(e);this.viewer&&this.viewer.raiseEvent("zoom",{zoom:e,refPoint:f,
immediately:g});return this},setRotation:function(a){if(!this.viewer||!this.viewer.drawer.canRotate())return this;a%=360;0>a&&(a+=360);this.degrees=a;this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor());this.viewer.forceRedraw();this.viewer.raiseEvent("rotate",{degrees:a});return this},getRotation:function(){return this.degrees},resize:function(a,f){var e=this.getBoundsNoRotate(),d;this.containerSize.x=a.x;this.containerSize.y=a.y;this._updateContainerInnerSize();
f&&(d=a.x/this.containerSize.x,e.width*=d,e.height=e.width/this.getAspectRatio());this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:a,maintain:f});return this.fitBounds(e,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new a.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){if(this.zoomPoint){var a=this.pixelFromPoint(this.zoomPoint,!0);this.zoomSpring.update();
a=this.pixelFromPoint(this.zoomPoint,!0).minus(a);a=this.deltaPointsFromPixels(a,!0);this.centerSpringX.shiftBy(a.x);this.centerSpringY.shiftBy(a.y);this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else this.zoomSpring.update();this.centerSpringX.update();this.centerSpringY.update();a=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;this._oldCenterX=this.centerSpringX.current.value;this._oldCenterY=
this.centerSpringY.current.value;this._oldZoom=this.zoomSpring.current.value;return a},deltaPixelsFromPointsNoRotate:function(a,f){return a.times(this._containerInnerSize.x*this.getZoom(f))},deltaPixelsFromPoints:function(a,f){return this.deltaPixelsFromPointsNoRotate(a.rotate(this.getRotation()),f)},deltaPointsFromPixelsNoRotate:function(a,f){return a.divide(this._containerInnerSize.x*this.getZoom(f))},deltaPointsFromPixels:function(a,f){return this.deltaPointsFromPixelsNoRotate(a,f).rotate(-this.getRotation())},
pixelFromPointNoRotate:function(a,f){return this._pixelFromPointNoRotate(a,this.getBoundsNoRotate(f))},pixelFromPoint:function(a,f){return this._pixelFromPoint(a,this.getBoundsNoRotate(f))},_pixelFromPointNoRotate:function(e,f){return e.minus(f.getTopLeft()).times(this._containerInnerSize.x/f.width).plus(new a.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(a,f){return this._pixelFromPointNoRotate(a.rotate(this.getRotation(),this.getCenter(!0)),f)},pointFromPixelNoRotate:function(e,
f){var g=this.getBoundsNoRotate(f);return e.minus(new a.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/g.width).plus(g.getTopLeft())},pointFromPixel:function(a,f){return this.pointFromPixelNoRotate(a,f).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(e,f){var g=this._contentBoundsNoRotate.width;return new a.Point(e*this._contentSizeNoRotate.x/g,f*this._contentSizeNoRotate.x/g)},viewportToImageCoordinates:function(e,f){if(e instanceof a.Point)return this.viewportToImageCoordinates(e.x,
e.y);if(this.viewer){var g=this.viewer.world.getItemCount();if(1<g)a.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===g)return this.viewer.world.getItemAt(0).viewportToImageCoordinates(e,f,!0)}return this._viewportToImageDelta(e-this._contentBoundsNoRotate.x,f-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(e,f){var g=this._contentBoundsNoRotate.width;return new a.Point(e/this._contentSizeNoRotate.x*
g,f/this._contentSizeNoRotate.x*g)},imageToViewportCoordinates:function(e,f){if(e instanceof a.Point)return this.imageToViewportCoordinates(e.x,e.y);if(this.viewer){var g=this.viewer.world.getItemCount();if(1<g)a.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===g)return this.viewer.world.getItemAt(0).imageToViewportCoordinates(e,f,!0)}g=this._imageToViewportDelta(e,f);g.x+=this._contentBoundsNoRotate.x;
g.y+=this._contentBoundsNoRotate.y;return g},imageToViewportRectangle:function(e,f,g,d){var b=e;b instanceof a.Rect||(b=new a.Rect(e,f,g,d));if(this.viewer){var c=this.viewer.world.getItemCount();if(1<c)a.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===c)return this.viewer.world.getItemAt(0).imageToViewportRectangle(e,f,g,d,!0)}e=this.imageToViewportCoordinates(b.x,b.y);f=this._imageToViewportDelta(b.width,
b.height);return new a.Rect(e.x,e.y,f.x,f.y,b.degrees)},viewportToImageRectangle:function(e,f,g,d){var b=e;b instanceof a.Rect||(b=new a.Rect(e,f,g,d));if(this.viewer){var c=this.viewer.world.getItemCount();if(1<c)a.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===c)return this.viewer.world.getItemAt(0).viewportToImageRectangle(e,f,g,d,!0)}e=this.viewportToImageCoordinates(b.x,b.y);f=this._viewportToImageDelta(b.width,
b.height);return new a.Rect(e.x,e.y,f.x,f.y,b.degrees)},viewerElementToImageCoordinates:function(a){a=this.pointFromPixel(a,!0);return this.viewportToImageCoordinates(a)},imageToViewerElementCoordinates:function(a){a=this.imageToViewportCoordinates(a);return this.pixelFromPoint(a,!0)},windowToImageCoordinates:function(e){a.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");e=e.minus(a.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(e)},
imageToWindowCoordinates:function(e){a.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");return this.imageToViewerElementCoordinates(e).plus(a.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(a){return this.pointFromPixel(a,!0)},viewportToViewerElementCoordinates:function(a){return this.pixelFromPoint(a,!0)},viewerElementToViewportRectangle:function(e){return a.Rect.fromSummits(this.pointFromPixel(e.getTopLeft(),
!0),this.pointFromPixel(e.getTopRight(),!0),this.pointFromPixel(e.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(e){return a.Rect.fromSummits(this.pixelFromPoint(e.getTopLeft(),!0),this.pixelFromPoint(e.getTopRight(),!0),this.pixelFromPoint(e.getBottomLeft(),!0))},windowToViewportCoordinates:function(e){a.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");e=e.minus(a.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(e)},
viewportToWindowCoordinates:function(e){a.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");return this.viewportToViewerElementCoordinates(e).plus(a.getElementPosition(this.viewer.element))},viewportToImageZoom:function(e){if(this.viewer){var f=this.viewer.world.getItemCount();if(1<f)a.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===f)return this.viewer.world.getItemAt(0).viewportToImageZoom(e)}return this._containerInnerSize.x/
this._contentSizeNoRotate.x*e*this._contentBoundsNoRotate.width},imageToViewportZoom:function(e){if(this.viewer){var f=this.viewer.world.getItemCount();if(1<f)a.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===f)return this.viewer.world.getItemAt(0).imageToViewportZoom(e)}return this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width*e}}})(OpenSeadragon);
(function(a){function e(a,b,d){b.loading=!0;a._imageLoader.addJob({src:b.url,crossOriginPolicy:a.crossOriginPolicy,callback:function(c,e){f(a,b,d,c,e)},abort:function(){b.loading=!1}})}function f(b,d,e,f,t){f?e<b.lastResetTime?(a.console.log("Ignoring tile %s loaded before reset: %s",d,d.url),d.loading=!1):(e=function(){var a=Math.ceil(Math.log(b.source.getTileWidth(d.level))/Math.log(2));g(b,d,f,a)},b._midDraw?window.setTimeout(e,1):e()):(a.console.log("Tile %s failed to load: %s - error: %s",d,
d.url,t),b.viewer.raiseEvent("tile-load-failed",{tile:d,tiledImage:b,time:e,message:t}),d.loading=!1,d.exists=!1)}function g(a,b,d,e){function c(){g++;return f}function f(){g--;0===g&&(b.loading=!1,b.loaded=!0,b.context2D||a._tileCache.cacheTile({image:d,tile:b,cutoff:e,tiledImage:a}),a._needsDraw=!0)}var g=0;a.viewer.raiseEvent("tile-loaded",{tile:b,tiledImage:a,image:d,getCompletionCallback:c});c()()}function d(a,b,d,e){var c,f;if(!a[b])return!1;if(void 0===d||void 0===e){a=a[b];for(c in a)if(a.hasOwnProperty(c))for(f in b=
a[c],b)if(b.hasOwnProperty(f)&&!b[f])return!1;return!0}return void 0===a[b][d]||void 0===a[b][d][e]||!0===a[b][d][e]}function b(b,d,e,f,g){b[d]?(b[d][e]||(b[d][e]={}),b[d][e][f]=g):a.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",d)}a.TiledImage=function(b){var c=this;a.console.assert(b.tileCache,"[TiledImage] options.tileCache is required");a.console.assert(b.drawer,"[TiledImage] options.drawer is required");a.console.assert(b.viewer,"[TiledImage] options.viewer is required");
a.console.assert(b.imageLoader,"[TiledImage] options.imageLoader is required");a.console.assert(b.source,"[TiledImage] options.source is required");a.console.assert(!b.clip||b.clip instanceof a.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present");a.EventSource.call(this);this._tileCache=b.tileCache;delete b.tileCache;this._drawer=b.drawer;delete b.drawer;this._imageLoader=b.imageLoader;delete b.imageLoader;b.clip instanceof a.Rect&&(this._clip=b.clip.clone());delete b.clip;var d=
b.x||0;delete b.x;var e=b.y||0;delete b.y;this.normHeight=b.source.dimensions.y/b.source.dimensions.x;this.contentAspectX=b.source.dimensions.x/b.source.dimensions.y;var f=1;b.width?(f=b.width,delete b.width,b.height&&(a.console.error("specifying both width and height to a tiledImage is not supported"),delete b.height)):b.height&&(f=b.height/this.normHeight,delete b.height);var g=b.fitBounds;delete b.fitBounds;var l=b.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete b.fitBoundsPlacement;
a.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,springStiffness:a.DEFAULT_SETTINGS.springStiffness,animationTime:a.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:a.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:a.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:a.DEFAULT_SETTINGS.wrapVertical,immediateRender:a.DEFAULT_SETTINGS.immediateRender,blendTime:a.DEFAULT_SETTINGS.blendTime,alwaysBlend:a.DEFAULT_SETTINGS.alwaysBlend,
minPixelRatio:a.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:a.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,debugMode:a.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:a.DEFAULT_SETTINGS.crossOriginPolicy,placeholderFillStyle:a.DEFAULT_SETTINGS.placeholderFillStyle,opacity:a.DEFAULT_SETTINGS.opacity,compositeOperation:a.DEFAULT_SETTINGS.compositeOperation},b);this._xSpring=new a.Spring({initial:d,springStiffness:this.springStiffness,animationTime:this.animationTime});this._ySpring=new a.Spring({initial:e,
springStiffness:this.springStiffness,animationTime:this.animationTime});this._scaleSpring=new a.Spring({initial:f,springStiffness:this.springStiffness,animationTime:this.animationTime});this._updateForScale();g&&this.fitBounds(g,l,!0);this._drawingHandler=function(b){c.viewer.raiseEvent("tile-drawing",a.extend({tiledImage:c},b))}};a.extend(a.TiledImage.prototype,a.EventSource.prototype,{needsDraw:function(){return this._needsDraw},reset:function(){this._tileCache.clearTilesFor(this);this.lastResetTime=
a.now();this._needsDraw=!0},update:function(){var a=this._xSpring.current.value,b=this._ySpring.current.value,d=this._scaleSpring.current.value;this._xSpring.update();this._ySpring.update();this._scaleSpring.update();return this._xSpring.current.value!==a||this._ySpring.current.value!==b||this._scaleSpring.current.value!==d?(this._updateForScale(),this._needsDraw=!0):!1},draw:function(){if(0!==this.opacity){this._midDraw=!0;a:{this._needsDraw=!1;for(var c,f,n=null,m=!1,t=a.now(),w=this.viewport.getBoundsWithMargins(!0),
l=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,p=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),u=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(l/this.minPixelRatio)/Math.log(2)))),k,q,A,z,B,E;0<this.lastDrawn.length;)c=this.lastDrawn.pop(),c.beingDrawn=!1;if(!this.wrapHorizontal&&!this.wrapVertical){var D=this.getClippedBounds(!0),F=w.intersection(D);if(null===F)break a;
w=F}w=w.getBoundingBox();w.x-=this._xSpring.current.value;w.y-=this._ySpring.current.value;var G=w.getTopLeft(),P=w.getBottomRight();if(this.wrapHorizontal||!(0>P.x||G.x>this._worldWidthCurrent))if(this.wrapVertical||!(0>P.y||G.y>this._worldHeightCurrent)){this.wrapHorizontal||(G.x=Math.max(G.x,0),P.x=Math.min(P.x,this._worldWidthCurrent));this.wrapVertical||(G.y=Math.max(G.y,0),P.y=Math.min(P.y,this._worldHeightCurrent));var p=Math.min(p,u),J;for(f=u;f>=p;f--){J=!1;k=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(f),
!0).x*this._scaleSpring.current.value;if(!m&&k>=this.minPixelRatio||f==p)m=J=!0;else if(!m)continue;q=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(f),!1).x*this._scaleSpring.current.value;A=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(this.viewport.containerSize)-1,0)),!1).x*this._scaleSpring.current.value;z=this.immediateRender?1:A;B=Math.min(1,(k-.5)/.5);E=z/Math.abs(z-q);var I,U,O,aa,ia,X=m,R=J,L=f,ja=B,H=E,
Y=G,ka=P,qa=t,ua=n,T=this.viewport.pixelFromPoint(this.viewport.getCenter());this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:X,level:L,opacity:ja,visibility:H,topleft:Y,bottomright:ka,currenttime:qa,best:ua});O=this.source.getTileAtPoint(L,Y.divide(this._scaleSpring.current.value));U=this.source.getTileAtPoint(L,ka.divide(this._scaleSpring.current.value));I=this.source.getNumTiles(L);this.coverage[L]={};this.wrapHorizontal||(U.x=Math.min(U.x,I.x-1));this.wrapVertical||
(U.y=Math.min(U.y,I.y-1));for(ia=O.x;ia<=U.x;ia++)for(aa=O.y;aa<=U.y;aa++){var ba=R,ha=X,N=ia,M=aa,Q=L,Z=ja,Na=H,xa=T,Ja=qa,La=ua,Ca,Za=void 0,la=void 0,r=void 0,Ma=void 0,fb=void 0,Ea=void 0,mb=void 0,Ha=N,Oa=M,Ta=Q,qb=this.source,Da=this.tilesMatrix,Ub=Ja,db=I,rc=this._worldWidthCurrent,ra=this._worldHeightCurrent;Da[Ta]||(Da[Ta]={});Da[Ta][Ha]||(Da[Ta][Ha]={});Da[Ta][Ha][Oa]||(mb=(db.x+Ha%db.x)%db.x,Ea=(db.y+Oa%db.y)%db.y,fb=qb.getTileBounds(Ta,mb,Ea),Ma=qb.tileExists(Ta,mb,Ea),r=qb.getTileUrl(Ta,
mb,Ea),la=qb.getContext2D?qb.getContext2D(Ta,mb,Ea):void 0,fb.x+=(Ha-mb)/db.x,fb.y+=ra/rc*((Oa-Ea)/db.y),Da[Ta][Ha][Oa]=new a.Tile(Ta,Ha,Oa,fb,Ma,r,la));Za=Da[Ta][Ha][Oa];Za.lastTouchTime=Ub;Ca=Za;var Yb=ba;this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:Ca});b(this.coverage,Q,N,M,!1);if(Ca.exists){if(ha&&!Yb){var Ga=this.coverage,kb=Q,da=N,gb=M;(void 0===da||void 0===gb?d(Ga,kb+1):d(Ga,kb+1,2*da,2*gb)&&d(Ga,kb+1,2*da,2*gb+1)&&d(Ga,kb+1,2*da+1,2*gb)&&d(Ga,kb+1,2*da+1,2*gb+
1))?b(this.coverage,Q,N,M,!0):Yb=!0}if(Yb){var ca=Ca,Ka=this.source.tileOverlap,cb=this.viewport,pb=xa,gc=Na,Wa=ca.bounds.getTopLeft();Wa.x*=this._scaleSpring.current.value;Wa.y*=this._scaleSpring.current.value;Wa.x+=this._xSpring.current.value;Wa.y+=this._ySpring.current.value;var Ya=ca.bounds.getSize();Ya.x*=this._scaleSpring.current.value;Ya.y*=this._scaleSpring.current.value;var Mb=cb.pixelFromPointNoRotate(Wa,!0),sc=cb.pixelFromPointNoRotate(Wa,!1),eb=cb.deltaPixelsFromPointsNoRotate(Ya,!0),
lb=cb.deltaPixelsFromPointsNoRotate(Ya,!1),Xa=sc.plus(lb.divide(2)),Pc=pb.distanceTo(Xa);Ka||(eb=eb.plus(new a.Point(1,1)));ca.position=Mb;ca.size=eb;ca.distance=Pc;ca.visibility=gc;if(!Ca.loaded)if(Ca.context2D)g(this,Ca);else{var Pa=this._tileCache.getImageRecord(Ca.url);if(Pa){var Nb=Pa.getImage();g(this,Ca,Nb)}}if(Ca.loaded){var Bb;c:{var Zb=void 0,tc=void 0,Ib=Ca,fc=N,Bc=M,Jb=Q,oc=Z,Vb=Ja,jb=1E3*this.blendTime;Ib.blendStart||(Ib.blendStart=Vb);tc=Vb-Ib.blendStart;Zb=jb?Math.min(1,tc/jb):1;this.alwaysBlend&&
(Zb*=oc);Ib.opacity=Zb;this.lastDrawn.push(Ib);if(1==Zb)b(this.coverage,Jb,fc,Bc,!0),this._hasOpaqueTile=!0;else if(tc<jb){Bb=!0;break c}Bb=!1}Bb&&(this._needsDraw=!0)}else Ca.loading||(La=!La||Ca.visibility>La.visibility||Ca.visibility==La.visibility&&Ca.distance<La.distance?Ca:La)}}ua=La}n=ua;if(d(this.coverage,f))break}var Sa=this.lastDrawn;if(0!==Sa.length){var vb=Sa[0],Ua=1>this.opacity||this.compositeOperation&&"source-over"!==this.compositeOperation||!this._isBottomItem()&&vb._hasTransparencyChannel(),
hb,Cb,hc=this.viewport.getZoom(!0);this.viewportToImageZoom(hc)>this.smoothTileEdgesMinZoom&&(Ua=!0,hb=vb.getScaleForEdgeSmoothing(),Cb=vb.getTranslationForEdgeSmoothing(hb,this._drawer.getCanvasSize(!1),this._drawer.getCanvasSize(!0)));var Lb;Ua&&(hb||(Lb=this.viewport.viewportToViewerElementRectangle(this.getClippedBounds(!0)).getIntegerBoundingBox().times(a.pixelDensityRatio)),this._drawer._clear(!0,Lb));0===this.viewport.degrees||hb||this._drawer._offsetForRotation(this.viewport.degrees,Ua);var Kb=
!1;if(this._clip){this._drawer.saveContext(Ua);var Ab=this.imageToViewportRectangle(this._clip,!0),sa=this._drawer.viewportToDrawerRectangle(Ab);hb&&(sa=sa.times(hb));Cb&&(sa=sa.translate(Cb));this._drawer.setClip(sa,Ua);Kb=!0}if(this.placeholderFillStyle&&!1===this._hasOpaqueTile){var rb=this._drawer.viewportToDrawerRectangle(this.getBounds(!0));hb&&(rb=rb.times(hb));Cb&&(rb=rb.translate(Cb));var Db;Db="function"===typeof this.placeholderFillStyle?this.placeholderFillStyle(this,this._drawer.context):
this.placeholderFillStyle;this._drawer.drawRectangle(rb,Db,Ua)}for(var $b=Sa.length-1;0<=$b;$b--)vb=Sa[$b],this._drawer.drawTile(vb,this._drawingHandler,Ua,hb,Cb),vb.beingDrawn=!0,this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:this,tile:vb});Kb&&this._drawer.restoreContext(Ua);0===this.viewport.degrees||hb||this._drawer._restoreRotationChanges(Ua);if(Ua){var $a=0!==this.viewport.degrees&&hb;$a&&this._drawer._offsetForRotation(this.viewport.degrees,!1);this._drawer.blendSketch({opacity:this.opacity,
scale:hb,translate:Cb,compositeOperation:this.compositeOperation,bounds:Lb});$a&&this._drawer._restoreRotationChanges(!1)}if(this.debugMode)for(var wb=Sa.length-1;0<=wb;wb--){var nb=Sa[wb];try{this._drawer.drawDebugInfo(nb,Sa.length,wb)}catch(Ob){a.console.error(Ob)}}}n&&!n.context2D&&e(this,n,t)}}this._midDraw=!1}},destroy:function(){this.reset()},getBounds:function(b){return b?new a.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new a.Rect(this._xSpring.target.value,
this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){a.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead");return this.getBounds()},getClippedBounds:function(b){b=this.getBounds(b);if(this._clip){var c=this._clip.times(this._worldWidthCurrent/this.source.dimensions.x);b=new a.Rect(b.x+c.x,b.y+c.y,c.width,c.height)}return b},getContentSize:function(){return new a.Point(this.source.dimensions.x,this.source.dimensions.y)},
_viewportToImageDelta:function(b,d,e){e=e?this._scaleSpring.current.value:this._scaleSpring.target.value;return new a.Point(this.source.dimensions.x/e*b,this.source.dimensions.y*this.contentAspectX/e*d)},viewportToImageCoordinates:function(b,d,e){b instanceof a.Point&&(e=d,d=b.y,b=b.x);return e?this._viewportToImageDelta(b-this._xSpring.current.value,d-this._ySpring.current.value):this._viewportToImageDelta(b-this._xSpring.target.value,d-this._ySpring.target.value)},_imageToViewportDelta:function(b,
d,e){e=e?this._scaleSpring.current.value:this._scaleSpring.target.value;return new a.Point(b/this.source.dimensions.x*e,d/this.source.dimensions.y/this.contentAspectX*e)},imageToViewportCoordinates:function(b,d,e){b instanceof a.Point&&(e=d,d=b.y,b=b.x);b=this._imageToViewportDelta(b,d);e?(b.x+=this._xSpring.current.value,b.y+=this._ySpring.current.value):(b.x+=this._xSpring.target.value,b.y+=this._ySpring.target.value);return b},imageToViewportRectangle:function(b,d,e,f,g){var c=b;c instanceof a.Rect?
g=d:c=new a.Rect(b,d,e,f);b=this.imageToViewportCoordinates(c.getTopLeft(),g);g=this._imageToViewportDelta(c.width,c.height,g);return new a.Rect(b.x,b.y,g.x,g.y,c.degrees)},viewportToImageRectangle:function(b,d,e,f,g){var c=b;b instanceof a.Rect?g=d:c=new a.Rect(b,d,e,f);b=this.viewportToImageCoordinates(c.getTopLeft(),g);g=this._viewportToImageDelta(c.width,c.height,g);return new a.Rect(b.x,b.y,g.x,g.y,c.degrees)},viewerElementToImageCoordinates:function(a){a=this.viewport.pointFromPixel(a,!0);return this.viewportToImageCoordinates(a)},
imageToViewerElementCoordinates:function(a){a=this.imageToViewportCoordinates(a);return this.viewport.pixelFromPoint(a,!0)},windowToImageCoordinates:function(a){a=a.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(a)},imageToWindowCoordinates:function(a){return this.imageToViewerElementCoordinates(a).plus(OpenSeadragon.getElementPosition(this.viewer.element))},viewportToImageZoom:function(a){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/
this.source.dimensions.x*a},imageToViewportZoom:function(a){return a/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(a,b){var c=this._xSpring.target.value===a.x&&this._ySpring.target.value===a.y;if(b){if(c&&this._xSpring.current.value===a.x&&this._ySpring.current.value===a.y)return;this._xSpring.resetTo(a.x);this._ySpring.resetTo(a.y)}else{if(c)return;this._xSpring.springTo(a.x);this._ySpring.springTo(a.y)}this._needsDraw=!0;c||
this._raiseBoundsChange()},setWidth:function(a,b){this._setScale(a,b)},setHeight:function(a,b){this._setScale(a/this.normHeight,b)},fitBounds:function(b,d,e){d=d||a.Placement.CENTER;d=a.Placement.properties[d];var c=this.contentAspectX,f=0,g=0,h=1,n=1;this._clip&&(c=this._clip.getAspectRatio(),h=this._clip.width/this.source.dimensions.x,n=this._clip.height/this.source.dimensions.y,b.getAspectRatio()>c?(f=this._clip.x/this._clip.height*b.height,g=this._clip.y/this._clip.height*b.height):(f=this._clip.x/
this._clip.width*b.width,g=this._clip.y/this._clip.width*b.width));b.getAspectRatio()>c?(h=b.height/n,n=0,d.isHorizontallyCentered?n=(b.width-b.height*c)/2:d.isRight&&(n=b.width-b.height*c),this.setPosition(new a.Point(b.x-f+n,b.y-g),e),this.setHeight(h,e)):(h=b.width/h,n=0,d.isVerticallyCentered?n=(b.height-b.width/c)/2:d.isBottom&&(n=b.height-b.width/c),this.setPosition(new a.Point(b.x-f,b.y-g+n),e),this.setWidth(h,e))},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(b){a.console.assert(!b||
b instanceof a.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null");this._clip=b instanceof a.Rect?b.clone():null;this._needsDraw=!0},getOpacity:function(){return this.opacity},setOpacity:function(a){this.opacity=a;this._needsDraw=!0},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(a){this.compositeOperation=a;this._needsDraw=!0},_setScale:function(a,b){var c=this._scaleSpring.target.value===a;if(b){if(c&&this._scaleSpring.current.value===
a)return;this._scaleSpring.resetTo(a)}else{if(c)return;this._scaleSpring.springTo(a)}this._updateForScale();this._needsDraw=!0;c||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value;this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value;this._worldWidthCurrent=this._scaleSpring.current.value;this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},
_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this}})})(OpenSeadragon);
(function(a){var e=function(e){a.console.assert(e,"[TileCache.cacheTile] options is required");a.console.assert(e.tile,"[TileCache.cacheTile] options.tile is required");a.console.assert(e.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");this.tile=e.tile;this.tiledImage=e.tiledImage},f=function(e){a.console.assert(e,"[ImageRecord] options is required");a.console.assert(e.image,"[ImageRecord] options.image is required");this._image=e.image;this._tiles=[]};f.prototype={destroy:function(){this._tiles=
this._renderedContext=this._image=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var a=document.createElement("canvas");a.width=this._image.width;a.height=this._image.height;this._renderedContext=a.getContext("2d");this._renderedContext.drawImage(this._image,0,0);this._image=null}return this._renderedContext},setRenderedContext:function(e){a.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext.");
this._renderedContext=e},addTile:function(e){a.console.assert(e,"[ImageRecord.addTile] tile is required");this._tiles.push(e)},removeTile:function(e){for(var d=0;d<this._tiles.length;d++)if(this._tiles[d]===e){this._tiles.splice(d,1);return}a.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",e)},getTileCount:function(){return this._tiles.length}};a.TileCache=function(e){e=e||{};this._maxImageCacheCount=e.maxImageCacheCount||a.DEFAULT_SETTINGS.maxImageCacheCount;this._tilesLoaded=
[];this._imagesLoaded=[];this._imagesLoadedCount=0};a.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(g){a.console.assert(g,"[TileCache.cacheTile] options is required");a.console.assert(g.tile,"[TileCache.cacheTile] options.tile is required");a.console.assert(g.tile.url,"[TileCache.cacheTile] options.tile.url is required");a.console.assert(g.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var d=g.cutoff||0,b=this._tilesLoaded.length,
c=this._imagesLoaded[g.tile.url];c||(a.console.assert(g.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),c=this._imagesLoaded[g.tile.url]=new f({image:g.image}),this._imagesLoadedCount++);c.addTile(g.tile);g.tile.cacheImageRecord=c;if(this._imagesLoadedCount>this._maxImageCacheCount){for(var c=null,h=-1,n=null,m,t,w,l,p,u,k=this._tilesLoaded.length-1;0<=k;k--)if(u=this._tilesLoaded[k],m=u.tile,!(m.level<=d||m.beingDrawn))if(c){if(l=m.lastTouchTime,t=c.lastTouchTime,
p=m.level,w=c.level,l<t||l==t&&p>w)c=m,h=k,n=u}else c=m,h=k,n=u;c&&0<=h&&(this._unloadTile(n),b=h)}this._tilesLoaded[b]=new e({tile:g.tile,tiledImage:g.tiledImage})},clearTilesFor:function(e){a.console.assert(e,"[TileCache.clearTilesFor] tiledImage is required");for(var d,b=0;b<this._tilesLoaded.length;++b)d=this._tilesLoaded[b],d.tiledImage===e&&(this._unloadTile(d),this._tilesLoaded.splice(b,1),b--)},getImageRecord:function(e){a.console.assert(e,"[TileCache.getImageRecord] url is required");return this._imagesLoaded[e]},
_unloadTile:function(e){a.console.assert(e,"[TileCache._unloadTile] tileRecord is required");var d=e.tile;e=e.tiledImage;d.unload();d.cacheImageRecord=null;var b=this._imagesLoaded[d.url];b.removeTile(d);b.getTileCount()||(b.destroy(),delete this._imagesLoaded[d.url],this._imagesLoadedCount--);e.viewer.raiseEvent("tile-unloaded",{tile:d,tiledImage:e})}}})(OpenSeadragon);
(function(a){a.World=function(e){var f=this;a.console.assert(e.viewer,"[World] options.viewer is required");a.EventSource.call(this);this.viewer=e.viewer;this._items=[];this._needsDraw=!1;this._autoRefigureSizes=!0;this._needsSizesFigured=!1;this._delegatedFigureSizes=function(a){f._autoRefigureSizes?f._figureSizes():f._needsSizesFigured=!0};this._figureSizes()};a.extend(a.World.prototype,a.EventSource.prototype,{addItem:function(e,f){a.console.assert(e,"[World.addItem] item is required");a.console.assert(e instanceof
a.TiledImage,"[World.addItem] only TiledImages supported at this time");f=f||{};void 0!==f.index?this._items.splice(Math.max(0,Math.min(this._items.length,f.index)),0,e):this._items.push(e);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0;this._needsDraw=!0;e.addHandler("bounds-change",this._delegatedFigureSizes);this.raiseEvent("add-item",{item:e})},getItemAt:function(e){a.console.assert(void 0!==e,"[World.getItemAt] index is required");return this._items[e]},getIndexOfItem:function(e){a.console.assert(e,
"[World.getIndexOfItem] item is required");return a.indexOf(this._items,e)},getItemCount:function(){return this._items.length},setItemIndex:function(e,f){a.console.assert(e,"[World.setItemIndex] item is required");a.console.assert(void 0!==f,"[World.setItemIndex] index is required");var g=this.getIndexOfItem(e);if(f>=this._items.length)throw Error("Index bigger than number of layers.");f!==g&&-1!==g&&(this._items.splice(g,1),this._items.splice(f,0,e),this._needsDraw=!0,this.raiseEvent("item-index-change",
{item:e,previousIndex:g,newIndex:f}))},removeItem:function(e){a.console.assert(e,"[World.removeItem] item is required");var f=a.indexOf(this._items,e);-1!==f&&(e.removeHandler("bounds-change",this._delegatedFigureSizes),e.destroy(),this._items.splice(f,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(e))},removeAll:function(){this.viewer._cancelPendingImages();for(var a,f=0;f<this._items.length;f++)a=this._items[f],a.removeHandler("bounds-change",this._delegatedFigureSizes),a.destroy();
var g=this._items;this._items=[];this._figureSizes();this._needsDraw=!0;for(f=0;f<g.length;f++)a=g[f],this._raiseRemoveItem(a)},resetItems:function(){for(var a=0;a<this._items.length;a++)this._items[a].reset()},update:function(){for(var a=!1,f=0;f<this._items.length;f++)a=this._items[f].update()||a;return a},draw:function(){for(var a=0;a<this._items.length;a++)this._items[a].draw();this._needsDraw=!1},needsDraw:function(){for(var a=0;a<this._items.length;a++)if(this._items[a].needsDraw())return!0;
return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(a){this._autoRefigureSizes=a;a&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(e){e=e||{};var f=e.immediately||!1,g=e.layout||a.DEFAULT_SETTINGS.collectionLayout,d=e.rows||a.DEFAULT_SETTINGS.collectionRows,b=e.columns||a.DEFAULT_SETTINGS.collectionColumns,c=e.tileSize||a.DEFAULT_SETTINGS.collectionTileSize,
h=c+(e.tileMargin||a.DEFAULT_SETTINGS.collectionTileMargin);e=!e.rows&&b?b:Math.ceil(this._items.length/d);var b=d=0,n,m,t;this.setAutoRefigureSizes(!1);for(var w=0;w<this._items.length;w++)w&&0===w%e&&("horizontal"===g?(b+=h,d=0):(d+=h,b=0)),n=this._items[w],m=n.getBounds(),t=m.width>m.height?c:m.width/m.height*c,m=m.height/m.width*t,m=new a.Point(d+(c-t)/2,b+(c-m)/2),n.setPosition(m,f),n.setWidth(t,f),"horizontal"===g?d+=h:b+=h;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var e=this._homeBounds?
this._homeBounds.clone():null,f=this._contentSize?this._contentSize.clone():null,g=this._contentFactor||0;if(this._items.length){var d=this._items[0],b=d.getBounds();this._contentFactor=d.getContentSize().x/b.width;for(var d=d.getClippedBounds(),c=d.x,h=d.y,n=d.x+d.width,m=d.y+d.height,t=1;t<this._items.length;t++)d=this._items[t],b=d.getBounds(),this._contentFactor=Math.max(this._contentFactor,d.getContentSize().x/b.width),d=d.getClippedBounds(),c=Math.min(c,d.x),h=Math.min(h,d.y),n=Math.max(n,d.x+
d.width),m=Math.max(m,d.y+d.height);this._homeBounds=new a.Rect(c,h,n-c,m-h);this._contentSize=new a.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new a.Rect(0,0,1,1),this._contentSize=new a.Point(1,1),this._contentFactor=1;this._contentFactor===g&&this._homeBounds.equals(e)&&this._contentSize.equals(f)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(a){this.raiseEvent("remove-item",{item:a})}})})(OpenSeadragon);WebGLUtils=function(){var a=function(a,f){for(var e=["webgl","experimental-webgl","webkit-3d","moz-webgl"],d=null,b=0;b<e.length;++b){try{d=a.getContext(e[b],f)}catch(c){}if(d)break}return d};return{create3DContext:a,setupWebGL:function(e,f,g){function d(a){var b=e.parentNode;if(b){var d=window.WebGLRenderingContext?'It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>':'This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>';
a&&(d+="<br/><br/>Status: "+a);b.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+d+"</div></div></td></tr></table>"}}g=g||d;e.addEventListener&&e.addEventListener("webglcontextcreationerror",function(a){g(a.statusMessage)},!1);(f=a(e,f))||window.WebGLRenderingContext||g("");return f}}}();
window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,e){window.setTimeout(a,1E3/60)}}();(function(a,e){if("object"===typeof exports&&"object"===typeof module)module.exports=e();else if("function"===typeof define&&define.amd)define([],e);else{var f=e(),g;for(g in f)("object"===typeof exports?exports:a)[g]=f[g]}})(this,function(){return function(a){function e(g){if(f[g])return f[g].exports;var d=f[g]={exports:{},id:g,loaded:!1};a[g].call(d.exports,d,d.exports,e);d.loaded=!0;return d.exports}var f={};e.m=a;e.c=f;e.p="";return e(0)}([function(a,e,f){e.glMatrix=f(1);e.mat2=f(2);e.mat2d=f(3);
e.mat3=f(4);e.mat4=f(5);e.quat=f(6);e.vec2=f(9);e.vec3=f(7);e.vec4=f(8)},function(a,e){var f={EPSILON:1E-6};f.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;f.RANDOM=Math.random;f.ENABLE_SIMD=!1;f.SIMD_AVAILABLE=f.ARRAY_TYPE===this.Float32Array&&"SIMD"in this;f.USE_SIMD=f.ENABLE_SIMD&&f.SIMD_AVAILABLE;f.setMatrixArrayType=function(a){f.ARRAY_TYPE=a};var g=Math.PI/180;f.toRadian=function(a){return a*g};f.equals=function(a,b){return Math.abs(a-b)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};
a.exports=f},function(a,e,f){var g=f(1);e={create:function(){var a=new g.ARRAY_TYPE(4);a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},clone:function(a){var b=new g.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},fromValues:function(a,b,c,e){var d=new g.ARRAY_TYPE(4);d[0]=a;d[1]=b;d[2]=c;d[3]=e;return d},set:function(a,b,c,e,f){a[0]=b;a[1]=c;a[2]=e;a[3]=f;return a},
transpose:function(a,b){if(a===b){var c=b[1];a[1]=b[2];a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;if(!g)return null;g=1/g;a[0]=f*g;a[1]=-d*g;a[2]=-e*g;a[3]=c*g;return a},adjoint:function(a,b){var c=b[0];a[0]=b[3];a[1]=-b[1];a[2]=-b[2];a[3]=c;return a},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},multiply:function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=c[0],w=c[1],l=c[2];c=c[3];a[0]=d*g+f*w;a[1]=e*g+b*w;
a[2]=d*l+f*c;a[3]=e*l+b*c;return a}};e.mul=e.multiply;e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+f*g;a[1]=e*c+b*g;a[2]=d*-g+f*c;a[3]=e*-g+b*c;return a};e.scale=function(a,b,c){var d=b[1],e=b[2],f=b[3],g=c[0];c=c[1];a[0]=b[0]*g;a[1]=d*g;a[2]=e*c;a[3]=f*c;return a};e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);a[0]=d;a[1]=c;a[2]=-c;a[3]=d;return a};e.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];return a};e.str=function(a){return"mat2("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};e.LDU=function(a,b,c,e){a[2]=e[2]/e[0];c[0]=e[0];c[1]=e[1];c[3]=e[3]-a[2]*c[1];return[a,b,c]};e.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];return a};e.subtract=function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];return a};e.sub=e.subtract;e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===
b[1]&&a[2]===b[2]&&a[3]===b[3]};e.equals=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],t=b[0],w=b[1],l=b[2],p=b[3];return Math.abs(c-t)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(t))&&Math.abs(d-w)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(e-l)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(f-p)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(p))};e.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;return a};e.multiplyScalarAndAdd=function(a,b,c,e){a[0]=
b[0]+c[0]*e;a[1]=b[1]+c[1]*e;a[2]=b[2]+c[2]*e;a[3]=b[3]+c[3]*e;return a};a.exports=e},function(a,e,f){var g=f(1);e={create:function(){var a=new g.ARRAY_TYPE(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new g.ARRAY_TYPE(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},fromValues:function(a,
b,c,e,f,m){var d=new g.ARRAY_TYPE(6);d[0]=a;d[1]=b;d[2]=c;d[3]=e;d[4]=f;d[5]=m;return d},set:function(a,b,c,e,f,g,t){a[0]=b;a[1]=c;a[2]=e;a[3]=f;a[4]=g;a[5]=t;return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],w=b[5],l=c*f-d*e;if(!l)return null;l=1/l;a[0]=f*l;a[1]=-d*l;a[2]=-e*l;a[3]=c*l;a[4]=(e*w-f*g)*l;a[5]=(d*g-c*w)*l;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],w=b[4];b=b[5];var l=c[0],p=c[1],u=c[2],k=
c[3],q=c[4];c=c[5];a[0]=d*l+f*p;a[1]=e*l+g*p;a[2]=d*u+f*k;a[3]=e*u+g*k;a[4]=d*q+f*c+w;a[5]=e*q+g*c+b;return a}};e.mul=e.multiply;e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],w=b[4];b=b[5];var l=Math.sin(c);c=Math.cos(c);a[0]=d*c+f*l;a[1]=e*c+g*l;a[2]=d*-l+f*c;a[3]=e*-l+g*c;a[4]=w;a[5]=b;return a};e.scale=function(a,b,c){var d=b[1],e=b[2],f=b[3],g=b[4],w=b[5],l=c[0];c=c[1];a[0]=b[0]*l;a[1]=d*l;a[2]=e*c;a[3]=f*c;a[4]=g;a[5]=w;return a};e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],
g=b[3],w=b[4];b=b[5];var l=c[0];c=c[1];a[0]=d;a[1]=e;a[2]=f;a[3]=g;a[4]=d*l+f*c+w;a[5]=e*l+g*c+b;return a};e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);a[0]=d;a[1]=c;a[2]=-c;a[3]=d;a[4]=0;a[5]=0;return a};e.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];a[4]=0;a[5]=0;return a};e.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};e.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};e.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};e.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];return a};e.subtract=function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];return a};e.sub=e.subtract;e.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;return a};e.multiplyScalarAndAdd=function(a,
b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;a[2]=b[2]+c[2]*e;a[3]=b[3]+c[3]*e;a[4]=b[4]+c[4]*e;a[5]=b[5]+c[5]*e;return a};e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]};e.equals=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],t=a[4],w=a[5],l=b[0],p=b[1],u=b[2],k=b[3],q=b[4],A=b[5];return Math.abs(c-l)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(l))&&Math.abs(d-p)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(p))&&Math.abs(e-u)<=g.EPSILON*Math.max(1,
Math.abs(e),Math.abs(u))&&Math.abs(f-k)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(t-q)<=g.EPSILON*Math.max(1,Math.abs(t),Math.abs(q))&&Math.abs(w-A)<=g.EPSILON*Math.max(1,Math.abs(w),Math.abs(A))};a.exports=e},function(a,e,f){var g=f(1);e={create:function(){var a=new g.ARRAY_TYPE(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a},clone:function(a){var b=
new g.ARRAY_TYPE(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a},fromValues:function(a,b,c,e,f,m,t,w,l){var d=new g.ARRAY_TYPE(9);d[0]=a;d[1]=b;d[2]=c;d[3]=e;d[4]=f;d[5]=m;d[6]=t;d[7]=w;d[8]=l;return d},set:function(a,b,c,e,f,g,t,w,l,p){a[0]=b;a[1]=c;a[2]=e;a[3]=f;a[4]=g;a[5]=t;a[6]=w;a[7]=l;a[8]=p;return a},identity:function(a){a[0]=
1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3];a[2]=b[6];a[3]=c;a[5]=b[7];a[6]=d;a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],w=b[5],l=b[6],p=b[7],u=b[8],k=u*g-w*p,q=-u*f+w*l,A=p*f-g*l,z=c*k+d*q+e*A;if(!z)return null;z=1/z;a[0]=k*z;a[1]=(-u*d+e*p)*z;a[2]=(w*d-e*g)*z;a[3]=q*z;a[4]=(u*
c-e*l)*z;a[5]=(-w*c+e*f)*z;a[6]=A*z;a[7]=(-p*c+d*l)*z;a[8]=(g*c-d*f)*z;return a},adjoint:function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],w=b[5],l=b[6],p=b[7],u=b[8];a[0]=g*u-w*p;a[1]=e*p-d*u;a[2]=d*w-e*g;a[3]=w*l-f*u;a[4]=c*u-e*l;a[5]=e*f-c*w;a[6]=f*p-g*l;a[7]=d*l-c*p;a[8]=c*g-d*f;return a},determinant:function(a){var b=a[3],c=a[4],d=a[5],e=a[6],f=a[7],g=a[8];return a[0]*(g*c-d*f)+a[1]*(-g*b+d*e)+a[2]*(f*b-c*e)},multiply:function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],w=b[4],l=b[5],p=b[6],u=
b[7];b=b[8];var k=c[0],q=c[1],A=c[2],z=c[3],B=c[4],E=c[5],D=c[6],F=c[7];c=c[8];a[0]=k*d+q*g+A*p;a[1]=k*e+q*w+A*u;a[2]=k*f+q*l+A*b;a[3]=z*d+B*g+E*p;a[4]=z*e+B*w+E*u;a[5]=z*f+B*l+E*b;a[6]=D*d+F*g+c*p;a[7]=D*e+F*w+c*u;a[8]=D*f+F*l+c*b;return a}};e.mul=e.multiply;e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],w=b[4],l=b[5],p=b[6],u=b[7];b=b[8];var k=c[0];c=c[1];a[0]=d;a[1]=e;a[2]=f;a[3]=g;a[4]=w;a[5]=l;a[6]=k*d+c*g+p;a[7]=k*e+c*w+u;a[8]=k*f+c*l+b;return a};e.rotate=function(a,b,c){var d=
b[0],e=b[1],f=b[2],g=b[3],w=b[4],l=b[5],p=b[6],u=b[7];b=b[8];var k=Math.sin(c);c=Math.cos(c);a[0]=c*d+k*g;a[1]=c*e+k*w;a[2]=c*f+k*l;a[3]=c*g-k*d;a[4]=c*w-k*e;a[5]=c*l-k*f;a[6]=p;a[7]=u;a[8]=b;return a};e.scale=function(a,b,c){var d=c[0];c=c[1];a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};e.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a};e.fromRotation=function(a,b){var c=
Math.sin(b),d=Math.cos(b);a[0]=d;a[1]=c;a[2]=0;a[3]=-c;a[4]=d;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};e.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};e.fromMat2d=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,w=d+d,l=e+e,c=c*g,p=d*g,d=d*w,u=e*g,k=e*w,e=e*l,g=f*g,w=f*w,f=f*l;a[0]=1-d-e;a[3]=p-f;a[6]=u+w;a[1]=p+f;a[4]=1-c-e;
a[7]=k-g;a[2]=u-w;a[5]=k+g;a[8]=1-c-d;return a};e.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],w=b[5],l=b[6],p=b[7],u=b[8],k=b[9],q=b[10],A=b[11],z=b[12],B=b[13],E=b[14],D=b[15],F=c*w-d*g,G=c*l-e*g,P=c*p-f*g,J=d*l-e*w,I=d*p-f*w,U=e*p-f*l,O=u*B-k*z,aa=u*E-q*z,u=u*D-A*z,ia=k*E-q*B,k=k*D-A*B,q=q*D-A*E,A=F*q-G*k+P*ia+J*u-I*aa+U*O;if(!A)return null;A=1/A;a[0]=(w*q-l*k+p*ia)*A;a[1]=(l*u-g*q-p*aa)*A;a[2]=(g*k-w*u+p*O)*A;a[3]=(e*k-d*q-f*ia)*A;a[4]=(c*q-e*u+f*aa)*A;a[5]=(d*u-c*k-f*O)*
A;a[6]=(B*U-E*I+D*J)*A;a[7]=(E*P-z*U-D*G)*A;a[8]=(z*I-B*P+D*F)*A;return a};e.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};e.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=
b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];return a};e.subtract=function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];return a};e.sub=e.subtract;e.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;return a};e.multiplyScalarAndAdd=function(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;a[2]=b[2]+c[2]*e;a[3]=b[3]+c[3]*e;a[4]=
b[4]+c[4]*e;a[5]=b[5]+c[5]*e;a[6]=b[6]+c[6]*e;a[7]=b[7]+c[7]*e;a[8]=b[8]+c[8]*e;return a};e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};e.equals=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],t=a[4],w=a[5],l=a[6],p=a[7],u=a[8],k=b[0],q=b[1],A=b[2],z=b[3],B=b[4],E=b[5],D=a[6],F=b[7],G=b[8];return Math.abs(c-k)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(d-q)<=g.EPSILON*Math.max(1,Math.abs(d),
Math.abs(q))&&Math.abs(e-A)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(A))&&Math.abs(f-z)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(z))&&Math.abs(t-B)<=g.EPSILON*Math.max(1,Math.abs(t),Math.abs(B))&&Math.abs(w-E)<=g.EPSILON*Math.max(1,Math.abs(w),Math.abs(E))&&Math.abs(l-D)<=g.EPSILON*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(p-F)<=g.EPSILON*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(u-G)<=g.EPSILON*Math.max(1,Math.abs(u),Math.abs(G))};a.exports=e},function(a,e,f){var g=f(1),d={scalar:{},
SIMD:{},create:function(){var a=new g.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new g.ARRAY_TYPE(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=
c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a},fromValues:function(a,c,d,e,f,t,w,l,p,u,k,q,A,z,B,E){var b=new g.ARRAY_TYPE(16);b[0]=a;b[1]=c;b[2]=d;b[3]=e;b[4]=f;b[5]=t;b[6]=w;b[7]=l;b[8]=p;b[9]=u;b[10]=k;b[11]=q;b[12]=A;b[13]=z;b[14]=B;b[15]=E;return b},set:function(a,c,d,e,f,g,w,l,p,u,k,q,A,z,B,E,D){a[0]=c;a[1]=d;a[2]=e;a[3]=f;a[4]=g;a[5]=w;a[6]=l;a[7]=p;a[8]=u;a[9]=k;a[10]=q;a[11]=A;a[12]=z;a[13]=B;a[14]=E;a[15]=D;return a},identity:function(a){a[0]=
1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}};d.scalar.transpose=function(a,c){if(a===c){var b=c[1],d=c[2],e=c[3],f=c[6],g=c[7],l=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=b;a[6]=c[9];a[7]=c[13];a[8]=d;a[9]=f;a[11]=c[14];a[12]=e;a[13]=g;a[14]=l}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a};
d.SIMD.transpose=function(a,c){var b,d,e,f,g,l,p;b=SIMD.Float32x4.load(c,0);d=SIMD.Float32x4.load(c,4);e=SIMD.Float32x4.load(c,8);f=SIMD.Float32x4.load(c,12);g=SIMD.Float32x4.shuffle(b,d,0,1,4,5);l=SIMD.Float32x4.shuffle(e,f,0,1,4,5);p=SIMD.Float32x4.shuffle(g,l,0,2,4,6);g=SIMD.Float32x4.shuffle(g,l,1,3,5,7);SIMD.Float32x4.store(a,0,p);SIMD.Float32x4.store(a,4,g);g=SIMD.Float32x4.shuffle(b,d,2,3,6,7);l=SIMD.Float32x4.shuffle(e,f,2,3,6,7);b=SIMD.Float32x4.shuffle(g,l,0,2,4,6);d=SIMD.Float32x4.shuffle(g,
l,1,3,5,7);SIMD.Float32x4.store(a,8,b);SIMD.Float32x4.store(a,12,d);return a};d.transpose=g.USE_SIMD?d.SIMD.transpose:d.scalar.transpose;d.scalar.invert=function(a,c){var b=c[0],d=c[1],e=c[2],f=c[3],g=c[4],l=c[5],p=c[6],u=c[7],k=c[8],q=c[9],A=c[10],z=c[11],B=c[12],E=c[13],D=c[14],F=c[15],G=b*l-d*g,P=b*p-e*g,J=b*u-f*g,I=d*p-e*l,U=d*u-f*l,O=e*u-f*p,aa=k*E-q*B,ia=k*D-A*B,X=k*F-z*B,R=q*D-A*E,L=q*F-z*E,ja=A*F-z*D,H=G*ja-P*L+J*R+I*X-U*ia+O*aa;if(!H)return null;H=1/H;a[0]=(l*ja-p*L+u*R)*H;a[1]=(e*L-d*ja-
f*R)*H;a[2]=(E*O-D*U+F*I)*H;a[3]=(A*U-q*O-z*I)*H;a[4]=(p*X-g*ja-u*ia)*H;a[5]=(b*ja-e*X+f*ia)*H;a[6]=(D*J-B*O-F*P)*H;a[7]=(k*O-A*J+z*P)*H;a[8]=(g*L-l*X+u*aa)*H;a[9]=(d*X-b*L-f*aa)*H;a[10]=(B*U-E*J+F*G)*H;a[11]=(q*J-k*U-z*G)*H;a[12]=(l*ia-g*R-p*aa)*H;a[13]=(b*R-d*ia+e*aa)*H;a[14]=(E*P-B*I-D*G)*H;a[15]=(k*I-q*P+A*G)*H;return a};d.SIMD.invert=function(a,c){var b,d,e,f,g,l,p,u,k;l=SIMD.Float32x4.load(c,0);p=SIMD.Float32x4.load(c,4);u=SIMD.Float32x4.load(c,8);k=SIMD.Float32x4.load(c,12);g=SIMD.Float32x4.shuffle(l,
p,0,1,4,5);d=SIMD.Float32x4.shuffle(u,k,0,1,4,5);b=SIMD.Float32x4.shuffle(g,d,0,2,4,6);d=SIMD.Float32x4.shuffle(d,g,1,3,5,7);g=SIMD.Float32x4.shuffle(l,p,2,3,6,7);f=SIMD.Float32x4.shuffle(u,k,2,3,6,7);e=SIMD.Float32x4.shuffle(g,f,0,2,4,6);f=SIMD.Float32x4.shuffle(f,g,1,3,5,7);g=SIMD.Float32x4.mul(e,f);g=SIMD.Float32x4.swizzle(g,1,0,3,2);l=SIMD.Float32x4.mul(d,g);p=SIMD.Float32x4.mul(b,g);g=SIMD.Float32x4.swizzle(g,2,3,0,1);l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,g),l);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,
g),p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);g=SIMD.Float32x4.mul(d,e);g=SIMD.Float32x4.swizzle(g,1,0,3,2);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),l);k=SIMD.Float32x4.mul(b,g);g=SIMD.Float32x4.swizzle(g,2,3,0,1);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(f,g));k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,g),k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);g=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,3,0,1),f);g=SIMD.Float32x4.swizzle(g,1,0,3,2);e=SIMD.Float32x4.swizzle(e,2,3,0,1);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,
g),l);u=SIMD.Float32x4.mul(b,g);g=SIMD.Float32x4.swizzle(g,2,3,0,1);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(e,g));u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,g),u);u=SIMD.Float32x4.swizzle(u,2,3,0,1);g=SIMD.Float32x4.mul(b,d);g=SIMD.Float32x4.swizzle(g,1,0,3,2);u=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),u);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,g),k);g=SIMD.Float32x4.swizzle(g,2,3,0,1);u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,g),u);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(e,g));g=SIMD.Float32x4.mul(b,
f);g=SIMD.Float32x4.swizzle(g,1,0,3,2);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(e,g));u=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,g),u);g=SIMD.Float32x4.swizzle(g,2,3,0,1);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,g),p);u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(d,g));g=SIMD.Float32x4.mul(b,e);g=SIMD.Float32x4.swizzle(g,1,0,3,2);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),p);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(d,g));g=SIMD.Float32x4.swizzle(g,2,3,0,1);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(f,
g));k=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,g),k);b=SIMD.Float32x4.mul(b,l);b=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(b,2,3,0,1),b);b=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(b,1,0,3,2),b);g=SIMD.Float32x4.reciprocalApproximation(b);b=SIMD.Float32x4.sub(SIMD.Float32x4.add(g,g),SIMD.Float32x4.mul(b,SIMD.Float32x4.mul(g,g)));b=SIMD.Float32x4.swizzle(b,0,0,0,0);if(!b)return null;SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(b,l));SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(b,p));SIMD.Float32x4.store(a,
8,SIMD.Float32x4.mul(b,u));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(b,k));return a};d.invert=g.USE_SIMD?d.SIMD.invert:d.scalar.invert;d.scalar.adjoint=function(a,c){var b=c[0],d=c[1],e=c[2],f=c[3],g=c[4],l=c[5],p=c[6],u=c[7],k=c[8],q=c[9],A=c[10],z=c[11],B=c[12],E=c[13],D=c[14],F=c[15];a[0]=l*(A*F-z*D)-q*(p*F-u*D)+E*(p*z-u*A);a[1]=-(d*(A*F-z*D)-q*(e*F-f*D)+E*(e*z-f*A));a[2]=d*(p*F-u*D)-l*(e*F-f*D)+E*(e*u-f*p);a[3]=-(d*(p*z-u*A)-l*(e*z-f*A)+q*(e*u-f*p));a[4]=-(g*(A*F-z*D)-k*(p*F-u*D)+B*(p*z-u*
A));a[5]=b*(A*F-z*D)-k*(e*F-f*D)+B*(e*z-f*A);a[6]=-(b*(p*F-u*D)-g*(e*F-f*D)+B*(e*u-f*p));a[7]=b*(p*z-u*A)-g*(e*z-f*A)+k*(e*u-f*p);a[8]=g*(q*F-z*E)-k*(l*F-u*E)+B*(l*z-u*q);a[9]=-(b*(q*F-z*E)-k*(d*F-f*E)+B*(d*z-f*q));a[10]=b*(l*F-u*E)-g*(d*F-f*E)+B*(d*u-f*l);a[11]=-(b*(l*z-u*q)-g*(d*z-f*q)+k*(d*u-f*l));a[12]=-(g*(q*D-A*E)-k*(l*D-p*E)+B*(l*A-p*q));a[13]=b*(q*D-A*E)-k*(d*D-e*E)+B*(d*A-e*q);a[14]=-(b*(l*D-p*E)-g*(d*D-e*E)+B*(d*p-e*l));a[15]=b*(l*A-p*q)-g*(d*A-e*q)+k*(d*p-e*l);return a};d.SIMD.adjoint=
function(a,c){var b,d,e,f,g,l,p,u,k;b=SIMD.Float32x4.load(c,0);d=SIMD.Float32x4.load(c,4);e=SIMD.Float32x4.load(c,8);f=SIMD.Float32x4.load(c,12);p=SIMD.Float32x4.shuffle(b,d,0,1,4,5);l=SIMD.Float32x4.shuffle(e,f,0,1,4,5);g=SIMD.Float32x4.shuffle(p,l,0,2,4,6);l=SIMD.Float32x4.shuffle(l,p,1,3,5,7);p=SIMD.Float32x4.shuffle(b,d,2,3,6,7);d=SIMD.Float32x4.shuffle(e,f,2,3,6,7);b=SIMD.Float32x4.shuffle(p,d,0,2,4,6);d=SIMD.Float32x4.shuffle(d,p,1,3,5,7);p=SIMD.Float32x4.mul(b,d);p=SIMD.Float32x4.swizzle(p,
1,0,3,2);e=SIMD.Float32x4.mul(l,p);f=SIMD.Float32x4.mul(g,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,p),e);f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,p),f);f=SIMD.Float32x4.swizzle(f,2,3,0,1);p=SIMD.Float32x4.mul(l,b);p=SIMD.Float32x4.swizzle(p,1,0,3,2);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,p),e);k=SIMD.Float32x4.mul(g,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(d,p));k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,p),k);k=SIMD.Float32x4.swizzle(k,
2,3,0,1);p=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,3,0,1),d);p=SIMD.Float32x4.swizzle(p,1,0,3,2);b=SIMD.Float32x4.swizzle(b,2,3,0,1);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(b,p),e);u=SIMD.Float32x4.mul(g,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(b,p));u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,p),u);u=SIMD.Float32x4.swizzle(u,2,3,0,1);p=SIMD.Float32x4.mul(g,l);p=SIMD.Float32x4.swizzle(p,1,0,3,2);u=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,p),u);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,
p),k);p=SIMD.Float32x4.swizzle(p,2,3,0,1);u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,p),u);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(b,p));p=SIMD.Float32x4.mul(g,d);p=SIMD.Float32x4.swizzle(p,1,0,3,2);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(b,p));u=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,p),u);p=SIMD.Float32x4.swizzle(p,2,3,0,1);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(b,p),f);u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(l,p));p=SIMD.Float32x4.mul(g,b);p=SIMD.Float32x4.swizzle(p,1,0,3,2);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,
p),f);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(l,p));p=SIMD.Float32x4.swizzle(p,2,3,0,1);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(d,p));k=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,p),k);SIMD.Float32x4.store(a,0,e);SIMD.Float32x4.store(a,4,f);SIMD.Float32x4.store(a,8,u);SIMD.Float32x4.store(a,12,k);return a};d.adjoint=g.USE_SIMD?d.SIMD.adjoint:d.scalar.adjoint;d.determinant=function(a){var b=a[0],d=a[1],e=a[2],f=a[3],g=a[4],w=a[5],l=a[6],p=a[7],u=a[8],k=a[9],q=a[10],A=a[11],z=a[12],B=a[13],E=a[14];
a=a[15];return(b*w-d*g)*(q*a-A*E)-(b*l-e*g)*(k*a-A*B)+(b*p-f*g)*(k*E-q*B)+(d*l-e*w)*(u*a-A*z)-(d*p-f*w)*(u*E-q*z)+(e*p-f*l)*(u*B-k*z)};d.SIMD.multiply=function(a,c,d){var b=SIMD.Float32x4.load(c,0),e=SIMD.Float32x4.load(c,4),f=SIMD.Float32x4.load(c,8);c=SIMD.Float32x4.load(c,12);var g=SIMD.Float32x4.load(d,0),g=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,0,0,0,0),b),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,
2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,3,3,3,3),c))));SIMD.Float32x4.store(a,0,g);g=SIMD.Float32x4.load(d,4);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,0,0,0,0),b),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,3,3,3,3),c))));SIMD.Float32x4.store(a,4,g);g=SIMD.Float32x4.load(d,8);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,
0,0,0,0),b),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,3,3,3,3),c))));SIMD.Float32x4.store(a,8,g);d=SIMD.Float32x4.load(d,12);b=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),b),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),
f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),c))));SIMD.Float32x4.store(a,12,b);return a};d.scalar.multiply=function(a,c,d){var b=c[0],e=c[1],f=c[2],g=c[3],h=c[4],p=c[5],u=c[6],k=c[7],q=c[8],A=c[9],z=c[10],B=c[11],E=c[12],D=c[13],F=c[14];c=c[15];var G=d[0],P=d[1],J=d[2],I=d[3];a[0]=G*b+P*h+J*q+I*E;a[1]=G*e+P*p+J*A+I*D;a[2]=G*f+P*u+J*z+I*F;a[3]=G*g+P*k+J*B+I*c;G=d[4];P=d[5];J=d[6];I=d[7];a[4]=G*b+P*h+J*q+I*E;a[5]=G*e+P*p+J*A+I*D;a[6]=G*f+P*u+J*z+I*F;a[7]=G*g+P*k+J*B+I*c;G=d[8];P=d[9];J=
d[10];I=d[11];a[8]=G*b+P*h+J*q+I*E;a[9]=G*e+P*p+J*A+I*D;a[10]=G*f+P*u+J*z+I*F;a[11]=G*g+P*k+J*B+I*c;G=d[12];P=d[13];J=d[14];I=d[15];a[12]=G*b+P*h+J*q+I*E;a[13]=G*e+P*p+J*A+I*D;a[14]=G*f+P*u+J*z+I*F;a[15]=G*g+P*k+J*B+I*c;return a};d.multiply=g.USE_SIMD?d.SIMD.multiply:d.scalar.multiply;d.mul=d.multiply;d.scalar.translate=function(a,c,d){var b=d[0],e=d[1];d=d[2];var f,g,h,p,u,k,q,A,z,B,E,D;c===a?(a[12]=c[0]*b+c[4]*e+c[8]*d+c[12],a[13]=c[1]*b+c[5]*e+c[9]*d+c[13],a[14]=c[2]*b+c[6]*e+c[10]*d+c[14],a[15]=
c[3]*b+c[7]*e+c[11]*d+c[15]):(f=c[0],g=c[1],h=c[2],p=c[3],u=c[4],k=c[5],q=c[6],A=c[7],z=c[8],B=c[9],E=c[10],D=c[11],a[0]=f,a[1]=g,a[2]=h,a[3]=p,a[4]=u,a[5]=k,a[6]=q,a[7]=A,a[8]=z,a[9]=B,a[10]=E,a[11]=D,a[12]=f*b+u*e+z*d+c[12],a[13]=g*b+k*e+B*d+c[13],a[14]=h*b+q*e+E*d+c[14],a[15]=p*b+A*e+D*d+c[15]);return a};d.SIMD.translate=function(a,c,d){var b=SIMD.Float32x4.load(c,0),e=SIMD.Float32x4.load(c,4),f=SIMD.Float32x4.load(c,8),g=SIMD.Float32x4.load(c,12);d=SIMD.Float32x4(d[0],d[1],d[2],0);c!==a&&(a[0]=
c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11]);b=SIMD.Float32x4.mul(b,SIMD.Float32x4.swizzle(d,0,0,0,0));e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(d,1,1,1,1));f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(d,2,2,2,2));c=SIMD.Float32x4.add(b,SIMD.Float32x4.add(e,SIMD.Float32x4.add(f,g)));SIMD.Float32x4.store(a,12,c);return a};d.translate=g.USE_SIMD?d.SIMD.translate:d.scalar.translate;d.scalar.scale=function(a,c,d){var b=d[0],
e=d[1];d=d[2];a[0]=c[0]*b;a[1]=c[1]*b;a[2]=c[2]*b;a[3]=c[3]*b;a[4]=c[4]*e;a[5]=c[5]*e;a[6]=c[6]*e;a[7]=c[7]*e;a[8]=c[8]*d;a[9]=c[9]*d;a[10]=c[10]*d;a[11]=c[11]*d;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};d.SIMD.scale=function(a,c,d){var b;d=SIMD.Float32x4(d[0],d[1],d[2],0);b=SIMD.Float32x4.load(c,0);SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(b,SIMD.Float32x4.swizzle(d,0,0,0,0)));b=SIMD.Float32x4.load(c,4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(b,SIMD.Float32x4.swizzle(d,1,1,
1,1)));b=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(b,SIMD.Float32x4.swizzle(d,2,2,2,2)));a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};d.scale=g.USE_SIMD?d.SIMD.scale:d.scalar.scale;d.rotate=function(a,c,d,e){var b=e[0],f=e[1];e=e[2];var h=Math.sqrt(b*b+f*f+e*e),l,n,u,k,q,A,z,B,E,D,F,G,P,J,I,U,O,aa,ia,X;if(Math.abs(h)<g.EPSILON)return null;h=1/h;b*=h;f*=h;e*=h;l=Math.sin(d);n=Math.cos(d);u=1-n;d=c[0];h=c[1];k=c[2];q=c[3];A=c[4];z=c[5];B=c[6];E=c[7];D=c[8];F=
c[9];G=c[10];P=c[11];J=b*b*u+n;I=f*b*u+e*l;U=e*b*u-f*l;O=b*f*u-e*l;aa=f*f*u+n;ia=e*f*u+b*l;X=b*e*u+f*l;b=f*e*u-b*l;f=e*e*u+n;a[0]=d*J+A*I+D*U;a[1]=h*J+z*I+F*U;a[2]=k*J+B*I+G*U;a[3]=q*J+E*I+P*U;a[4]=d*O+A*aa+D*ia;a[5]=h*O+z*aa+F*ia;a[6]=k*O+B*aa+G*ia;a[7]=q*O+E*aa+P*ia;a[8]=d*X+A*b+D*f;a[9]=h*X+z*b+F*f;a[10]=k*X+B*b+G*f;a[11]=q*X+E*b+P*f;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a};d.scalar.rotateX=function(a,c,d){var b=Math.sin(d);d=Math.cos(d);var e=c[4],f=c[5],g=c[6],h=c[7],
p=c[8],u=c[9],k=c[10],q=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=e*d+p*b;a[5]=f*d+u*b;a[6]=g*d+k*b;a[7]=h*d+q*b;a[8]=p*d-e*b;a[9]=u*d-f*b;a[10]=k*d-g*b;a[11]=q*d-h*b;return a};d.SIMD.rotateX=function(a,c,d){var b=SIMD.Float32x4.splat(Math.sin(d));d=SIMD.Float32x4.splat(Math.cos(d));c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var e=SIMD.Float32x4.load(c,4);c=SIMD.Float32x4.load(c,
8);SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,d),SIMD.Float32x4.mul(c,b)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,d),SIMD.Float32x4.mul(e,b)));return a};d.rotateX=g.USE_SIMD?d.SIMD.rotateX:d.scalar.rotateX;d.scalar.rotateY=function(a,c,d){var b=Math.sin(d);d=Math.cos(d);var e=c[0],f=c[1],g=c[2],h=c[3],p=c[8],u=c[9],k=c[10],q=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=e*d-p*b;a[1]=f*d-u*
b;a[2]=g*d-k*b;a[3]=h*d-q*b;a[8]=e*b+p*d;a[9]=f*b+u*d;a[10]=g*b+k*d;a[11]=h*b+q*d;return a};d.SIMD.rotateY=function(a,c,d){var b=SIMD.Float32x4.splat(Math.sin(d));d=SIMD.Float32x4.splat(Math.cos(d));c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var e=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,d),SIMD.Float32x4.mul(c,b)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,
b),SIMD.Float32x4.mul(c,d)));return a};d.rotateY=g.USE_SIMD?d.SIMD.rotateY:d.scalar.rotateY;d.scalar.rotateZ=function(a,c,d){var b=Math.sin(d);d=Math.cos(d);var e=c[0],f=c[1],g=c[2],h=c[3],p=c[4],u=c[5],k=c[6],q=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=e*d+p*b;a[1]=f*d+u*b;a[2]=g*d+k*b;a[3]=h*d+q*b;a[4]=p*d-e*b;a[5]=u*d-f*b;a[6]=k*d-g*b;a[7]=q*d-h*b;return a};d.SIMD.rotateZ=function(a,c,d){var b=SIMD.Float32x4.splat(Math.sin(d));
d=SIMD.Float32x4.splat(Math.cos(d));c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);var e=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,d),SIMD.Float32x4.mul(c,b)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,d),SIMD.Float32x4.mul(e,b)));return a};d.rotateZ=g.USE_SIMD?d.SIMD.rotateZ:d.scalar.rotateZ;d.fromTranslation=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=
0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};d.fromScaling=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromRotation=function(a,c,d){var b=d[0],e=d[1];d=d[2];var f=Math.sqrt(b*b+e*e+d*d),h;if(Math.abs(f)<g.EPSILON)return null;f=1/f;b*=f;e*=f;d*=f;f=Math.sin(c);c=Math.cos(c);h=1-c;a[0]=b*b*h+c;a[1]=e*b*h+d*f;a[2]=d*b*h-e*f;a[3]=
0;a[4]=b*e*h-d*f;a[5]=e*e*h+c;a[6]=d*e*h+b*f;a[7]=0;a[8]=b*d*h+e*f;a[9]=e*d*h-b*f;a[10]=d*d*h+c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromXRotation=function(a,c){var b=Math.sin(c),d=Math.cos(c);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d;a[6]=b;a[7]=0;a[8]=0;a[9]=-b;a[10]=d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromYRotation=function(a,c){var b=Math.sin(c),d=Math.cos(c);a[0]=d;a[1]=0;a[2]=-b;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=b;a[9]=0;a[10]=d;a[11]=0;a[12]=0;a[13]=0;
a[14]=0;a[15]=1;return a};d.fromZRotation=function(a,c){var b=Math.sin(c),d=Math.cos(c);a[0]=d;a[1]=b;a[2]=0;a[3]=0;a[4]=-b;a[5]=d;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromRotationTranslation=function(a,c,d){var b=c[0],e=c[1],f=c[2],g=c[3],h=b+b,p=e+e,u=f+f;c=b*h;var k=b*p,b=b*u,q=e*p,e=e*u,f=f*u,h=g*h,p=g*p,g=g*u;a[0]=1-(q+f);a[1]=k+g;a[2]=b-p;a[3]=0;a[4]=k-g;a[5]=1-(c+f);a[6]=e+h;a[7]=0;a[8]=b+p;a[9]=e-h;a[10]=1-(c+q);a[11]=0;a[12]=d[0];a[13]=d[1];
a[14]=d[2];a[15]=1;return a};d.getTranslation=function(a,c){a[0]=c[12];a[1]=c[13];a[2]=c[14];return a};d.getRotation=function(a,c){var b=c[0]+c[5]+c[10];0<b?(b=2*Math.sqrt(b+1),a[3]=.25*b,a[0]=(c[6]-c[9])/b,a[1]=(c[8]-c[2])/b,a[2]=(c[1]-c[4])/b):c[0]>c[5]&c[0]>c[10]?(b=2*Math.sqrt(1+c[0]-c[5]-c[10]),a[3]=(c[6]-c[9])/b,a[0]=.25*b,a[1]=(c[1]+c[4])/b,a[2]=(c[8]+c[2])/b):c[5]>c[10]?(b=2*Math.sqrt(1+c[5]-c[0]-c[10]),a[3]=(c[8]-c[2])/b,a[0]=(c[1]+c[4])/b,a[1]=.25*b,a[2]=(c[6]+c[9])/b):(b=2*Math.sqrt(1+
c[10]-c[0]-c[5]),a[3]=(c[1]-c[4])/b,a[0]=(c[8]+c[2])/b,a[1]=(c[6]+c[9])/b,a[2]=.25*b);return a};d.fromRotationTranslationScale=function(a,c,d,e){var b=c[0],f=c[1],g=c[2],h=c[3],n=b+b,u=f+f,k=g+g;c=b*n;var q=b*u,b=b*k,A=f*u,f=f*k,g=g*k,n=h*n,u=h*u,h=h*k,k=e[0],z=e[1];e=e[2];a[0]=(1-(A+g))*k;a[1]=(q+h)*k;a[2]=(b-u)*k;a[3]=0;a[4]=(q-h)*z;a[5]=(1-(c+g))*z;a[6]=(f+n)*z;a[7]=0;a[8]=(b+u)*e;a[9]=(f-n)*e;a[10]=(1-(c+A))*e;a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a};d.fromRotationTranslationScaleOrigin=
function(a,c,d,e,f){var b=c[0],g=c[1],h=c[2],m=c[3],n=b+b,k=g+g,q=h+h;c=b*n;var A=b*k,b=b*q,z=g*k,g=g*q,h=h*q,n=m*n,k=m*k,m=m*q,q=e[0],B=e[1];e=e[2];var E=f[0],D=f[1];f=f[2];a[0]=(1-(z+h))*q;a[1]=(A+m)*q;a[2]=(b-k)*q;a[3]=0;a[4]=(A-m)*B;a[5]=(1-(c+h))*B;a[6]=(g+n)*B;a[7]=0;a[8]=(b+k)*e;a[9]=(g-n)*e;a[10]=(1-(c+z))*e;a[11]=0;a[12]=d[0]+E-(a[0]*E+a[4]*D+a[8]*f);a[13]=d[1]+D-(a[1]*E+a[5]*D+a[9]*f);a[14]=d[2]+f-(a[2]*E+a[6]*D+a[10]*f);a[15]=1;return a};d.fromQuat=function(a,c){var b=c[0],d=c[1],e=c[2],
f=c[3],g=b+b,l=d+d,p=e+e,b=b*g,u=d*g,d=d*l,k=e*g,q=e*l,e=e*p,g=f*g,l=f*l,f=f*p;a[0]=1-d-e;a[1]=u+f;a[2]=k-l;a[3]=0;a[4]=u-f;a[5]=1-b-e;a[6]=q+g;a[7]=0;a[8]=k+l;a[9]=q-g;a[10]=1-b-d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.frustum=function(a,c,d,e,f,g,w){var b=1/(d-c),h=1/(f-e),m=1/(g-w);a[0]=2*g*b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*h;a[6]=0;a[7]=0;a[8]=(d+c)*b;a[9]=(f+e)*h;a[10]=(w+g)*m;a[11]=-1;a[12]=0;a[13]=0;a[14]=w*g*2*m;a[15]=0;return a};d.perspective=function(a,c,d,e,f){c=1/Math.tan(c/
2);var b=1/(e-f);a[0]=c/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(f+e)*b;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*f*e*b;a[15]=0;return a};d.perspectiveFromFieldOfView=function(a,c,d,e){var b=Math.tan(c.upDegrees*Math.PI/180),f=Math.tan(c.downDegrees*Math.PI/180),g=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);var h=2/(g+c),n=2/(b+f);a[0]=h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=n;a[6]=0;a[7]=0;a[8]=-((g-c)*h*.5);a[9]=(b-f)*n*.5;a[10]=e/(d-e);a[11]=-1;a[12]=
0;a[13]=0;a[14]=e*d/(d-e);a[15]=0;return a};d.ortho=function(a,c,d,e,f,g,w){var b=1/(c-d),h=1/(e-f),m=1/(g-w);a[0]=-2*b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*h;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*m;a[11]=0;a[12]=(c+d)*b;a[13]=(f+e)*h;a[14]=(w+g)*m;a[15]=1;return a};d.lookAt=function(a,c,e,f){var b,h,n,l,p,u,k,q,A=c[0],z=c[1];c=c[2];n=f[0];l=f[1];h=f[2];k=e[0];f=e[1];b=e[2];if(Math.abs(A-k)<g.EPSILON&&Math.abs(z-f)<g.EPSILON&&Math.abs(c-b)<g.EPSILON)return d.identity(a);e=A-k;f=z-f;k=c-b;q=1/Math.sqrt(e*
e+f*f+k*k);e*=q;f*=q;k*=q;b=l*k-h*f;h=h*e-n*k;n=n*f-l*e;(q=Math.sqrt(b*b+h*h+n*n))?(q=1/q,b*=q,h*=q,n*=q):n=h=b=0;l=f*n-k*h;p=k*b-e*n;u=e*h-f*b;(q=Math.sqrt(l*l+p*p+u*u))?(q=1/q,l*=q,p*=q,u*=q):u=p=l=0;a[0]=b;a[1]=l;a[2]=e;a[3]=0;a[4]=h;a[5]=p;a[6]=f;a[7]=0;a[8]=n;a[9]=u;a[10]=k;a[11]=0;a[12]=-(b*A+h*z+n*c);a[13]=-(l*A+p*z+u*c);a[14]=-(e*A+f*z+k*c);a[15]=1;return a};d.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+
a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};d.add=function(a,c,d){a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];a[3]=c[3]+d[3];a[4]=c[4]+d[4];a[5]=c[5]+d[5];a[6]=c[6]+
d[6];a[7]=c[7]+d[7];a[8]=c[8]+d[8];a[9]=c[9]+d[9];a[10]=c[10]+d[10];a[11]=c[11]+d[11];a[12]=c[12]+d[12];a[13]=c[13]+d[13];a[14]=c[14]+d[14];a[15]=c[15]+d[15];return a};d.subtract=function(a,c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];a[2]=c[2]-d[2];a[3]=c[3]-d[3];a[4]=c[4]-d[4];a[5]=c[5]-d[5];a[6]=c[6]-d[6];a[7]=c[7]-d[7];a[8]=c[8]-d[8];a[9]=c[9]-d[9];a[10]=c[10]-d[10];a[11]=c[11]-d[11];a[12]=c[12]-d[12];a[13]=c[13]-d[13];a[14]=c[14]-d[14];a[15]=c[15]-d[15];return a};d.sub=d.subtract;d.multiplyScalar=function(a,
c,d){a[0]=c[0]*d;a[1]=c[1]*d;a[2]=c[2]*d;a[3]=c[3]*d;a[4]=c[4]*d;a[5]=c[5]*d;a[6]=c[6]*d;a[7]=c[7]*d;a[8]=c[8]*d;a[9]=c[9]*d;a[10]=c[10]*d;a[11]=c[11]*d;a[12]=c[12]*d;a[13]=c[13]*d;a[14]=c[14]*d;a[15]=c[15]*d;return a};d.multiplyScalarAndAdd=function(a,c,d,e){a[0]=c[0]+d[0]*e;a[1]=c[1]+d[1]*e;a[2]=c[2]+d[2]*e;a[3]=c[3]+d[3]*e;a[4]=c[4]+d[4]*e;a[5]=c[5]+d[5]*e;a[6]=c[6]+d[6]*e;a[7]=c[7]+d[7]*e;a[8]=c[8]+d[8]*e;a[9]=c[9]+d[9]*e;a[10]=c[10]+d[10]*e;a[11]=c[11]+d[11]*e;a[12]=c[12]+d[12]*e;a[13]=c[13]+
d[13]*e;a[14]=c[14]+d[14]*e;a[15]=c[15]+d[15]*e;return a};d.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]&&a[9]===c[9]&&a[10]===c[10]&&a[11]===c[11]&&a[12]===c[12]&&a[13]===c[13]&&a[14]===c[14]&&a[15]===c[15]};d.equals=function(a,c){var b=a[0],d=a[1],e=a[2],f=a[3],w=a[4],l=a[5],p=a[6],u=a[7],k=a[8],q=a[9],A=a[10],z=a[11],B=a[12],E=a[13],D=a[14],F=a[15],G=c[0],P=c[1],J=c[2],I=c[3],U=c[4],O=c[5],aa=
c[6],ia=c[7],X=c[8],R=c[9],L=c[10],ja=c[11],H=c[12],Y=c[13],ka=c[14],qa=c[15];return Math.abs(b-G)<=g.EPSILON*Math.max(1,Math.abs(b),Math.abs(G))&&Math.abs(d-P)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(e-J)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(J))&&Math.abs(f-I)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(w-U)<=g.EPSILON*Math.max(1,Math.abs(w),Math.abs(U))&&Math.abs(l-O)<=g.EPSILON*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(p-aa)<=g.EPSILON*Math.max(1,Math.abs(p),
Math.abs(aa))&&Math.abs(u-ia)<=g.EPSILON*Math.max(1,Math.abs(u),Math.abs(ia))&&Math.abs(k-X)<=g.EPSILON*Math.max(1,Math.abs(k),Math.abs(X))&&Math.abs(q-R)<=g.EPSILON*Math.max(1,Math.abs(q),Math.abs(R))&&Math.abs(A-L)<=g.EPSILON*Math.max(1,Math.abs(A),Math.abs(L))&&Math.abs(z-ja)<=g.EPSILON*Math.max(1,Math.abs(z),Math.abs(ja))&&Math.abs(B-H)<=g.EPSILON*Math.max(1,Math.abs(B),Math.abs(H))&&Math.abs(E-Y)<=g.EPSILON*Math.max(1,Math.abs(E),Math.abs(Y))&&Math.abs(D-ka)<=g.EPSILON*Math.max(1,Math.abs(D),
Math.abs(ka))&&Math.abs(F-qa)<=g.EPSILON*Math.max(1,Math.abs(F),Math.abs(qa))};a.exports=d},function(a,e,f){var g=f(1),d=f(4),b=f(7);e=f(8);var c={create:function(){var a=new g.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}};c.rotationTo=function(){var a=b.create(),d=b.fromValues(1,0,0),e=b.fromValues(0,1,0);return function(f,g,h){var l=b.dot(g,h);if(-.999999>l)return b.cross(a,d,g),1E-6>b.length(a)&&b.cross(a,e,g),b.normalize(a,a),c.setAxisAngle(f,a,Math.PI),f;if(.999999<l)return f[0]=0,f[1]=
0,f[2]=0,f[3]=1,f;b.cross(a,g,h);f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=1+l;return c.normalize(f,f)}}();c.setAxes=function(){var a=d.create();return function(b,d,e,f){a[0]=e[0];a[3]=e[1];a[6]=e[2];a[1]=f[0];a[4]=f[1];a[7]=f[2];a[2]=-d[0];a[5]=-d[1];a[8]=-d[2];return c.normalize(b,c.fromMat3(b,a))}}();c.clone=e.clone;c.fromValues=e.fromValues;c.copy=e.copy;c.set=e.set;c.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};c.setAxisAngle=function(a,b,c){c*=.5;var d=Math.sin(c);a[0]=d*b[0];a[1]=d*
b[1];a[2]=d*b[2];a[3]=Math.cos(c);return a};c.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),d=Math.sin(c/2);0!=d?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0);return c};c.add=e.add;c.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var g=c[0],h=c[1],k=c[2];c=c[3];a[0]=d*c+b*g+e*k-f*h;a[1]=e*c+b*h+f*g-d*k;a[2]=f*c+b*k+d*h-e*g;a[3]=b*c-d*g-e*h-f*k;return a};c.mul=c.multiply;c.scale=e.scale;c.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);
c=Math.cos(c);a[0]=d*c+b*g;a[1]=e*c+f*g;a[2]=f*c-e*g;a[3]=b*c-d*g;return a};c.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c-f*g;a[1]=e*c+b*g;a[2]=f*c+d*g;a[3]=b*c-e*g;return a};c.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+e*g;a[1]=e*c-d*g;a[2]=f*c+b*g;a[3]=b*c-f*g;return a};c.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];a[0]=c;a[1]=d;a[2]=e;a[3]=Math.sqrt(Math.abs(1-c*c-d*d-e*
e));return a};c.dot=e.dot;c.lerp=e.lerp;c.slerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];b=b[3];var h=c[0],k=c[1],m=c[2];c=c[3];var n,t,B;t=e*h+f*k+g*m+b*c;0>t&&(t=-t,h=-h,k=-k,m=-m,c=-c);1E-6<1-t?(n=Math.acos(t),B=Math.sin(n),t=Math.sin((1-d)*n)/B,d=Math.sin(d*n)/B):t=1-d;a[0]=t*e+d*h;a[1]=t*f+d*k;a[2]=t*g+d*m;a[3]=t*b+d*c;return a};c.sqlerp=function(){var a=c.create(),b=c.create();return function(d,e,f,g,h,n){c.slerp(a,e,h,n);c.slerp(b,f,g,n);c.slerp(d,a,b,2*n*(1-n));return d}}();c.invert=function(a,
b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,g=g?1/g:0;a[0]=-c*g;a[1]=-d*g;a[2]=-e*g;a[3]=f*g;return a};c.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};c.length=e.length;c.len=c.length;c.squaredLength=e.squaredLength;c.sqrLen=c.squaredLength;c.normalize=e.normalize;c.fromMat3=function(a,b){var c=b[0]+b[4]+b[8];if(0<c)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var d=0;b[4]>b[0]&&(d=1);b[8]>b[3*d+d]&&(d=2);var e=
(d+1)%3,f=(d+2)%3,c=Math.sqrt(b[3*d+d]-b[3*e+e]-b[3*f+f]+1);a[d]=.5*c;c=.5/c;a[3]=(b[3*e+f]-b[3*f+e])*c;a[e]=(b[3*e+d]+b[3*d+e])*c;a[f]=(b[3*f+d]+b[3*d+f])*c}return a};c.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};c.exactEquals=e.exactEquals;c.equals=e.equals;a.exports=c},function(a,e,f){var g=f(1),d={create:function(){var a=new g.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new g.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},fromValues:function(a,
c,d){var b=new g.ARRAY_TYPE(3);b[0]=a;b[1]=c;b[2]=d;return b},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];return a},set:function(a,c,d,e){a[0]=c;a[1]=d;a[2]=e;return a},add:function(a,c,d){a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];return a},subtract:function(a,c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];a[2]=c[2]-d[2];return a}};d.sub=d.subtract;d.multiply=function(a,c,d){a[0]=c[0]*d[0];a[1]=c[1]*d[1];a[2]=c[2]*d[2];return a};d.mul=d.multiply;d.divide=function(a,c,d){a[0]=c[0]/d[0];a[1]=c[1]/d[1];
a[2]=c[2]/d[2];return a};d.div=d.divide;d.ceil=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);a[2]=Math.ceil(c[2]);return a};d.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);a[2]=Math.floor(c[2]);return a};d.min=function(a,c,d){a[0]=Math.min(c[0],d[0]);a[1]=Math.min(c[1],d[1]);a[2]=Math.min(c[2],d[2]);return a};d.max=function(a,c,d){a[0]=Math.max(c[0],d[0]);a[1]=Math.max(c[1],d[1]);a[2]=Math.max(c[2],d[2]);return a};d.round=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);
a[2]=Math.round(c[2]);return a};d.scale=function(a,c,d){a[0]=c[0]*d;a[1]=c[1]*d;a[2]=c[2]*d;return a};d.scaleAndAdd=function(a,c,d,e){a[0]=c[0]+d[0]*e;a[1]=c[1]+d[1]*e;a[2]=c[2]+d[2]*e;return a};d.distance=function(a,c){var b=c[0]-a[0],d=c[1]-a[1],e=c[2]-a[2];return Math.sqrt(b*b+d*d+e*e)};d.dist=d.distance;d.squaredDistance=function(a,c){var b=c[0]-a[0],d=c[1]-a[1],e=c[2]-a[2];return b*b+d*d+e*e};d.sqrDist=d.squaredDistance;d.length=function(a){var b=a[0],d=a[1];a=a[2];return Math.sqrt(b*b+d*d+a*
a)};d.len=d.length;d.squaredLength=function(a){var b=a[0],d=a[1];a=a[2];return b*b+d*d+a*a};d.sqrLen=d.squaredLength;d.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];return a};d.inverse=function(a,c){a[0]=1/c[0];a[1]=1/c[1];a[2]=1/c[2];return a};d.normalize=function(a,c){var b=c[0],d=c[1],e=c[2],b=b*b+d*d+e*e;0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b);return a};d.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]};d.cross=function(a,c,d){var b=c[0],e=c[1];c=c[2];var f=
d[0],g=d[1];d=d[2];a[0]=e*d-c*g;a[1]=c*f-b*d;a[2]=b*g-e*f;return a};d.lerp=function(a,c,d,e){var b=c[0],f=c[1];c=c[2];a[0]=b+e*(d[0]-b);a[1]=f+e*(d[1]-f);a[2]=c+e*(d[2]-c);return a};d.hermite=function(a,c,d,e,f,g){var b=g*g,h=b*(2*g-3)+1,m=b*(g-2)+g,n=b*(g-1);g=b*(3-2*g);a[0]=c[0]*h+d[0]*m+e[0]*n+f[0]*g;a[1]=c[1]*h+d[1]*m+e[1]*n+f[1]*g;a[2]=c[2]*h+d[2]*m+e[2]*n+f[2]*g;return a};d.bezier=function(a,c,d,e,f,g){var b=1-g,h=b*b,m=g*g,n=h*b,h=3*g*h,b=3*m*b;g*=m;a[0]=c[0]*n+d[0]*h+e[0]*b+f[0]*g;a[1]=c[1]*
n+d[1]*h+e[1]*b+f[1]*g;a[2]=c[2]*n+d[2]*h+e[2]*b+f[2]*g;return a};d.random=function(a,c){c=c||1;var b=2*g.RANDOM()*Math.PI,d=2*g.RANDOM()-1,e=Math.sqrt(1-d*d)*c;a[0]=Math.cos(b)*e;a[1]=Math.sin(b)*e;a[2]=d*c;return a};d.transformMat4=function(a,c,d){var b=c[0],e=c[1];c=c[2];var f=d[3]*b+d[7]*e+d[11]*c+d[15],f=f||1;a[0]=(d[0]*b+d[4]*e+d[8]*c+d[12])/f;a[1]=(d[1]*b+d[5]*e+d[9]*c+d[13])/f;a[2]=(d[2]*b+d[6]*e+d[10]*c+d[14])/f;return a};d.transformMat3=function(a,c,d){var b=c[0],e=c[1];c=c[2];a[0]=b*d[0]+
e*d[3]+c*d[6];a[1]=b*d[1]+e*d[4]+c*d[7];a[2]=b*d[2]+e*d[5]+c*d[8];return a};d.transformQuat=function(a,c,d){var b=c[0],e=c[1],f=c[2];c=d[0];var g=d[1],h=d[2];d=d[3];var p=d*b+g*f-h*e,u=d*e+h*b-c*f,k=d*f+c*e-g*b,b=-c*b-g*e-h*f;a[0]=p*d+b*-c+u*-h-k*-g;a[1]=u*d+b*-g+k*-c-p*-h;a[2]=k*d+b*-h+p*-g-u*-c;return a};d.rotateX=function(a,c,d,e){var b=[],f=[];b[0]=c[0]-d[0];b[1]=c[1]-d[1];b[2]=c[2]-d[2];f[0]=b[0];f[1]=b[1]*Math.cos(e)-b[2]*Math.sin(e);f[2]=b[1]*Math.sin(e)+b[2]*Math.cos(e);a[0]=f[0]+d[0];a[1]=
f[1]+d[1];a[2]=f[2]+d[2];return a};d.rotateY=function(a,c,d,e){var b=[],f=[];b[0]=c[0]-d[0];b[1]=c[1]-d[1];b[2]=c[2]-d[2];f[0]=b[2]*Math.sin(e)+b[0]*Math.cos(e);f[1]=b[1];f[2]=b[2]*Math.cos(e)-b[0]*Math.sin(e);a[0]=f[0]+d[0];a[1]=f[1]+d[1];a[2]=f[2]+d[2];return a};d.rotateZ=function(a,c,d,e){var b=[],f=[];b[0]=c[0]-d[0];b[1]=c[1]-d[1];b[2]=c[2]-d[2];f[0]=b[0]*Math.cos(e)-b[1]*Math.sin(e);f[1]=b[0]*Math.sin(e)+b[1]*Math.cos(e);f[2]=b[2];a[0]=f[0]+d[0];a[1]=f[1]+d[1];a[2]=f[2]+d[2];return a};d.forEach=
function(){var a=d.create();return function(b,d,e,f,g,w){d||(d=3);e||(e=0);for(f=f?Math.min(f*d+e,b.length):b.length;e<f;e+=d)a[0]=b[e],a[1]=b[e+1],a[2]=b[e+2],g(a,a,w),b[e]=a[0],b[e+1]=a[1],b[e+2]=a[2];return b}}();d.angle=function(a,c){var b=d.fromValues(a[0],a[1],a[2]),e=d.fromValues(c[0],c[1],c[2]);d.normalize(b,b);d.normalize(e,e);b=d.dot(b,e);return 1<b?0:Math.acos(b)};d.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};d.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&
a[2]===c[2]};d.equals=function(a,c){var b=a[0],d=a[1],e=a[2],f=c[0],w=c[1],l=c[2];return Math.abs(b-f)<=g.EPSILON*Math.max(1,Math.abs(b),Math.abs(f))&&Math.abs(d-w)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(e-l)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))};a.exports=d},function(a,e,f){var g=f(1),d={create:function(){var a=new g.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new g.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,
c,d,e){var b=new g.ARRAY_TYPE(4);b[0]=a;b[1]=c;b[2]=d;b[3]=e;return b},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];return a},set:function(a,c,d,e,f){a[0]=c;a[1]=d;a[2]=e;a[3]=f;return a},add:function(a,c,d){a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];a[3]=c[3]+d[3];return a},subtract:function(a,c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];a[2]=c[2]-d[2];a[3]=c[3]-d[3];return a}};d.sub=d.subtract;d.multiply=function(a,c,d){a[0]=c[0]*d[0];a[1]=c[1]*d[1];a[2]=c[2]*d[2];a[3]=c[3]*d[3];return a};
d.mul=d.multiply;d.divide=function(a,c,d){a[0]=c[0]/d[0];a[1]=c[1]/d[1];a[2]=c[2]/d[2];a[3]=c[3]/d[3];return a};d.div=d.divide;d.ceil=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);a[2]=Math.ceil(c[2]);a[3]=Math.ceil(c[3]);return a};d.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);a[2]=Math.floor(c[2]);a[3]=Math.floor(c[3]);return a};d.min=function(a,c,d){a[0]=Math.min(c[0],d[0]);a[1]=Math.min(c[1],d[1]);a[2]=Math.min(c[2],d[2]);a[3]=Math.min(c[3],d[3]);return a};d.max=function(a,
c,d){a[0]=Math.max(c[0],d[0]);a[1]=Math.max(c[1],d[1]);a[2]=Math.max(c[2],d[2]);a[3]=Math.max(c[3],d[3]);return a};d.round=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);a[2]=Math.round(c[2]);a[3]=Math.round(c[3]);return a};d.scale=function(a,c,d){a[0]=c[0]*d;a[1]=c[1]*d;a[2]=c[2]*d;a[3]=c[3]*d;return a};d.scaleAndAdd=function(a,c,d,e){a[0]=c[0]+d[0]*e;a[1]=c[1]+d[1]*e;a[2]=c[2]+d[2]*e;a[3]=c[3]+d[3]*e;return a};d.distance=function(a,c){var b=c[0]-a[0],d=c[1]-a[1],e=c[2]-a[2],f=c[3]-a[3];
return Math.sqrt(b*b+d*d+e*e+f*f)};d.dist=d.distance;d.squaredDistance=function(a,c){var b=c[0]-a[0],d=c[1]-a[1],e=c[2]-a[2],f=c[3]-a[3];return b*b+d*d+e*e+f*f};d.sqrDist=d.squaredDistance;d.length=function(a){var b=a[0],d=a[1],e=a[2];a=a[3];return Math.sqrt(b*b+d*d+e*e+a*a)};d.len=d.length;d.squaredLength=function(a){var b=a[0],d=a[1],e=a[2];a=a[3];return b*b+d*d+e*e+a*a};d.sqrLen=d.squaredLength;d.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];a[3]=-c[3];return a};d.inverse=function(a,c){a[0]=
1/c[0];a[1]=1/c[1];a[2]=1/c[2];a[3]=1/c[3];return a};d.normalize=function(a,c){var b=c[0],d=c[1],e=c[2],f=c[3],g=b*b+d*d+e*e+f*f;0<g&&(g=1/Math.sqrt(g),a[0]=b*g,a[1]=d*g,a[2]=e*g,a[3]=f*g);return a};d.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]};d.lerp=function(a,c,d,e){var b=c[0],f=c[1],g=c[2];c=c[3];a[0]=b+e*(d[0]-b);a[1]=f+e*(d[1]-f);a[2]=g+e*(d[2]-g);a[3]=c+e*(d[3]-c);return a};d.random=function(a,c){c=c||1;a[0]=g.RANDOM();a[1]=g.RANDOM();a[2]=g.RANDOM();a[3]=g.RANDOM();d.normalize(a,
a);d.scale(a,a,c);return a};d.transformMat4=function(a,c,d){var b=c[0],e=c[1],f=c[2];c=c[3];a[0]=d[0]*b+d[4]*e+d[8]*f+d[12]*c;a[1]=d[1]*b+d[5]*e+d[9]*f+d[13]*c;a[2]=d[2]*b+d[6]*e+d[10]*f+d[14]*c;a[3]=d[3]*b+d[7]*e+d[11]*f+d[15]*c;return a};d.transformQuat=function(a,c,d){var b=c[0],e=c[1],f=c[2],g=d[0],h=d[1],p=d[2];d=d[3];var u=d*b+h*f-p*e,k=d*e+p*b-g*f,q=d*f+g*e-h*b,b=-g*b-h*e-p*f;a[0]=u*d+b*-g+k*-p-q*-h;a[1]=k*d+b*-h+q*-g-u*-p;a[2]=q*d+b*-p+u*-h-k*-g;a[3]=c[3];return a};d.forEach=function(){var a=
d.create();return function(b,d,e,f,g,w){d||(d=4);e||(e=0);for(f=f?Math.min(f*d+e,b.length):b.length;e<f;e+=d)a[0]=b[e],a[1]=b[e+1],a[2]=b[e+2],a[3]=b[e+3],g(a,a,w),b[e]=a[0],b[e+1]=a[1],b[e+2]=a[2],b[e+3]=a[3];return b}}();d.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};d.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]};d.equals=function(a,c){var b=a[0],d=a[1],e=a[2],f=a[3],w=c[0],l=c[1],p=c[2],u=c[3];return Math.abs(b-w)<=g.EPSILON*Math.max(1,
Math.abs(b),Math.abs(w))&&Math.abs(d-l)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(l))&&Math.abs(e-p)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(f-u)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(u))};a.exports=d},function(a,e,f){var g=f(1),d={create:function(){var a=new g.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new g.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,c){var b=new g.ARRAY_TYPE(2);b[0]=a;b[1]=c;return b},copy:function(a,c){a[0]=c[0];
a[1]=c[1];return a},set:function(a,c,d){a[0]=c;a[1]=d;return a},add:function(a,c,d){a[0]=c[0]+d[0];a[1]=c[1]+d[1];return a},subtract:function(a,c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];return a}};d.sub=d.subtract;d.multiply=function(a,c,d){a[0]=c[0]*d[0];a[1]=c[1]*d[1];return a};d.mul=d.multiply;d.divide=function(a,c,d){a[0]=c[0]/d[0];a[1]=c[1]/d[1];return a};d.div=d.divide;d.ceil=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);return a};d.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);
return a};d.min=function(a,c,d){a[0]=Math.min(c[0],d[0]);a[1]=Math.min(c[1],d[1]);return a};d.max=function(a,c,d){a[0]=Math.max(c[0],d[0]);a[1]=Math.max(c[1],d[1]);return a};d.round=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);return a};d.scale=function(a,c,d){a[0]=c[0]*d;a[1]=c[1]*d;return a};d.scaleAndAdd=function(a,c,d,e){a[0]=c[0]+d[0]*e;a[1]=c[1]+d[1]*e;return a};d.distance=function(a,c){var b=c[0]-a[0],d=c[1]-a[1];return Math.sqrt(b*b+d*d)};d.dist=d.distance;d.squaredDistance=function(a,
c){var b=c[0]-a[0],d=c[1]-a[1];return b*b+d*d};d.sqrDist=d.squaredDistance;d.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};d.len=d.length;d.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};d.sqrLen=d.squaredLength;d.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];return a};d.inverse=function(a,c){a[0]=1/c[0];a[1]=1/c[1];return a};d.normalize=function(a,c){var b=c[0],d=c[1],b=b*b+d*d;0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b);return a};d.dot=function(a,c){return a[0]*c[0]+
a[1]*c[1]};d.cross=function(a,c,d){c=c[0]*d[1]-c[1]*d[0];a[0]=a[1]=0;a[2]=c;return a};d.lerp=function(a,c,d,e){var b=c[0];c=c[1];a[0]=b+e*(d[0]-b);a[1]=c+e*(d[1]-c);return a};d.random=function(a,c){c=c||1;var b=2*g.RANDOM()*Math.PI;a[0]=Math.cos(b)*c;a[1]=Math.sin(b)*c;return a};d.transformMat2=function(a,c,d){var b=c[0];c=c[1];a[0]=d[0]*b+d[2]*c;a[1]=d[1]*b+d[3]*c;return a};d.transformMat2d=function(a,c,d){var b=c[0];c=c[1];a[0]=d[0]*b+d[2]*c+d[4];a[1]=d[1]*b+d[3]*c+d[5];return a};d.transformMat3=
function(a,c,d){var b=c[0];c=c[1];a[0]=d[0]*b+d[3]*c+d[6];a[1]=d[1]*b+d[4]*c+d[7];return a};d.transformMat4=function(a,c,d){var b=c[0];c=c[1];a[0]=d[0]*b+d[4]*c+d[12];a[1]=d[1]*b+d[5]*c+d[13];return a};d.forEach=function(){var a=d.create();return function(b,d,e,f,g,w){d||(d=2);e||(e=0);for(f=f?Math.min(f*d+e,b.length):b.length;e<f;e+=d)a[0]=b[e],a[1]=b[e+1],g(a,a,w),b[e]=a[0],b[e+1]=a[1];return b}}();d.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};d.exactEquals=function(a,c){return a[0]===c[0]&&
a[1]===c[1]};d.equals=function(a,c){var b=a[0],d=a[1],e=c[0],f=c[1];return Math.abs(b-e)<=g.EPSILON*Math.max(1,Math.abs(b),Math.abs(e))&&Math.abs(d-f)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(f))};a.exports=d}])});!function(){function a(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function e(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function f(a){return null===a?NaN:+a}function g(a){return!isNaN(a)}function d(a){return{left:function(b,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var f=d+e>>>1;0>a(b[f],c)?d=f+1:e=f}return d},right:function(b,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var f=d+e>>>1;0<a(b[f],
c)?e=f:d=f+1}return d}}}function b(a){return a.length}function c(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function h(){this._=Object.create(null)}function n(a){return"__proto__"===(a+="")||"\x00"===a[0]?"\x00"+a:a}function m(a){return"\x00"===(a+="")[0]?a.slice(1):a}function t(a){return n(a)in this._}function w(a){return(a=n(a))in this._&&delete this._[a]}function l(){var a=[],b;for(b in this._)a.push(m(b));return a}function p(){var a=0,b;for(b in this._)++a;
return a}function u(){for(var a in this._)return!1;return!0}function k(){this._=Object.create(null)}function q(a){return a}function A(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function z(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=Hf.length;c<d;++c){var e=Hf[c]+b;if(e in a)return e}}function B(){}function E(){}function D(a){function b(){for(var b=c,d=-1,e=b.length,f;++d<e;)(f=b[d].on)&&f.apply(this,arguments);return a}var c=[],d=new h;b.on=
function(b,e){var f=d.get(b),v;if(2>arguments.length)return f&&f.on;f&&(f.on=null,c=c.slice(0,v=c.indexOf(f)).concat(c.slice(v+1)),d.remove(b));e&&c.push(d.set(b,{on:e}));return a};return b}function F(){y.event.preventDefault()}function G(){for(var a=y.event,b;b=a.sourceEvent;)a=b;return a}function P(a){for(var b=new E,c=0,d=arguments.length;++c<d;)b[arguments[c]]=D(b);b.of=function(c,d){return function(e){try{var f=e.sourceEvent=y.event;e.target=a;y.event=e;b[e.type].apply(c,d)}finally{y.event=f}}};
return b}function J(a){Zd(a,wa);return a}function I(a){return"function"===typeof a?a:function(){return Ne(a,this)}}function U(a){return"function"===typeof a?a:function(){return Oe(a,this)}}function O(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function v(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function g(){var c=b.apply(this,
arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}a=y.ns.qualify(a);return null==b?a.local?d:c:"function"===typeof b?a.local?g:v:a.local?f:e}function aa(a){return new RegExp("(?:^|\\s+)"+y.requote(a)+"(?:\\s+|$)","g")}function ia(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=(a+"").trim().split(/^|\s+/).map(X);var e=a.length;return"function"===typeof b?d:c}function X(a){var b=
aa(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",(e+" "+a).trim().replace(/\s+/g," "))):c.setAttribute("class",e.replace(b," ").trim().replace(/\s+/g," "))}}function R(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"===
typeof b?f:e}function L(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"===typeof b?e:d}function ja(a){function b(){var b=this.ownerDocument,c=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===c&&"http://www.w3.org/1999/xhtml"===b.documentElement.namespaceURI?b.createElement(a):b.createElementNS(c,a)}function c(){return this.ownerDocument.createElementNS(a.space,a.local)}return"function"===
typeof a?a:(a=y.ns.qualify(a)).local?c:b}function H(){var a=this.parentNode;a&&a.removeChild(this)}function Y(a){return function(){return $d(this,a)}}function ka(a){arguments.length||(a=e);return function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function qa(a,b){for(var c=0,d=a.length;c<d;c++)for(var e=a[c],f=0,g=e.length,v;f<g;f++)(v=e[f])&&b(v,f,c);return a}function ua(a){Zd(a,xc);return a}function T(a){var b,c;return function(d,e,f){d=a[f].update;var g=d.length;f!=c&&(c=f,b=0);for(e>=b&&
(b=e+1);!(e=d[b])&&++b<g;);return e}}function ba(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=C(b,kc(arguments));d.call(this);this.addEventListener(a,this[g]=e,e.$=c);e._=b}function f(){var b=new RegExp("^__on([^.]+)"+y.requote(a)+"$"),c,d;for(d in this)if(c=d.match(b)){var e=this[d];this.removeEventListener(c[1],e,e.$);delete this[d]}}var g="__on"+a,v=a.indexOf("."),C=ha;0<v&&(a=a.slice(0,v));var W=Pe.get(a);W&&(a=W,C=N);return v?b?e:
d:b?B:f}function ha(a,b){return function(c){var d=y.event;y.event=c;b[0]=this.__data__;try{a.apply(this,b)}finally{y.event=d}}}function N(a,b){var c=ha(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||b.compareDocumentPosition(this)&8)||c.call(this,a)}}function M(b){var c=".dragsuppress-"+ ++mh,d="click"+c,e=y.select(a(b)).on("touchmove"+c,F).on("dragstart"+c,F).on("selectstart"+c,F);null==Wc&&(Wc="onselectstart"in b?!1:z(b.style,"userSelect"));if(Wc){var f=(b&&(b.ownerDocument||b.document||
b).documentElement).style,g=f[Wc];f[Wc]="none"}return function(a){e.on(c,null);Wc&&(f[Wc]=g);if(a){var b=function(){e.on(d,null)};e.on(d,function(){F();b()},!0);setTimeout(b,0)}}}function Q(b,c){c.changedTouches&&(c=c.changedTouches[0]);var d=b.ownerSVGElement||b;if(d.createSVGPoint){var e=d.createSVGPoint();if(0>Qe&&(d=a(b),d.scrollX||d.scrollY)){var d=y.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),f=d[0][0].getScreenCTM();Qe=
!(f.f||f.e);d.remove()}Qe?(e.x=c.pageX,e.y=c.pageY):(e.x=c.clientX,e.y=c.clientY);e=e.matrixTransform(b.getScreenCTM().inverse());return[e.x,e.y]}e=b.getBoundingClientRect();return[c.clientX-e.left-b.clientLeft,c.clientY-e.top-b.clientTop]}function Z(){return y.event.changedTouches[0].identifier}function Na(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function xa(a){return 1<a?0:-1>a?ea:Math.acos(a)}function Ja(a){return 1<a?Qa:-1>a?-Qa:Math.asin(a)}function La(a){return((a=Math.exp(a))+
1/a)/2}function Ca(a){return(a=Math.sin(a/2))*a}function Za(){}function la(a,b,c){return this instanceof la?void(this.h=+a,this.s=+b,this.l=+c):2>arguments.length?a instanceof la?new la(a.h,a.s,a.l):rc(""+a,ra,la):new la(a,b,c)}function r(a,b,c){function d(a){360<a?a-=360:0>a&&(a+=360);return 60>a?e+(f-e)*a/60:180>a?f:240>a?e+(f-e)*(240-a)/60:e}var e,f;a=isNaN(a)?0:0>(a%=360)?a+360:a;b=isNaN(b)?0:0>b?0:1<b?1:b;c=0>c?0:1<c?1:c;f=.5>=c?c*(1+b):c+b-c*b;e=2*c-f;return new Da(Math.round(255*d(a+120)),
Math.round(255*d(a)),Math.round(255*d(a-120)))}function Ma(a,b,c){return this instanceof Ma?void(this.h=+a,this.c=+b,this.l=+c):2>arguments.length?a instanceof Ma?new Ma(a.h,a.c,a.l):a instanceof Ea?Ha(a.l,a.a,a.b):Ha((a=Yb((a=y.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new Ma(a,b,c)}function fb(a,b,c){isNaN(a)&&(a=0);isNaN(b)&&(b=0);return new Ea(c,Math.cos(a*=fa)*b,Math.sin(a)*b)}function Ea(a,b,c){return this instanceof Ea?void(this.l=+a,this.a=+b,this.b=+c):2>arguments.length?a instanceof Ea?new Ea(a.l,
a.a,a.b):a instanceof Ma?fb(a.h,a.c,a.l):Yb((a=Da(a)).r,a.g,a.b):new Ea(a,b,c)}function mb(a,b,c){a=(a+16)/116;c=a-c/200;b=Oa(a+b/500)*If;a=Oa(a)*Jf;c=Oa(c)*Kf;return new Da(qb(3.2404542*b-1.5371385*a-.4985314*c),qb(-.969266*b+1.8760108*a+.041556*c),qb(.0556434*b-.2040259*a+1.0572252*c))}function Ha(a,b,c){return 0<a?new Ma(Math.atan2(c,b)*Fa,Math.sqrt(b*b+c*c),a):new Ma(NaN,NaN,a)}function Oa(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function Ta(a){return.008856<a?Math.pow(a,1/3):7.787037*a+
4/29}function qb(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function Da(a,b,c){return this instanceof Da?void(this.r=~~a,this.g=~~b,this.b=~~c):2>arguments.length?a instanceof Da?new Da(a.r,a.g,a.b):rc(""+a,Da,r):new Da(a,b,c)}function Ub(a){return new Da(a>>16,a>>8&255,a&255)+""}function db(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function rc(a,b,c){var d=0,e=0,f=0,g,v;if(g=/([a-z]+)\((.*)\)/.exec(a=a.toLowerCase()))switch(v=g[2].split(","),
g[1]){case "hsl":return c(parseFloat(v[0]),parseFloat(v[1])/100,parseFloat(v[2])/100);case "rgb":return b(kb(v[0]),kb(v[1]),kb(v[2]))}if(c=ae.get(a))return b(c.r,c.g,c.b);null==a||"#"!==a.charAt(0)||isNaN(c=parseInt(a.slice(1),16))||(4===a.length?(d=(c&3840)>>4,d|=d>>4,e=c&240,e|=e>>4,f=c&15,f|=f<<4):7===a.length&&(d=(c&16711680)>>16,e=(c&65280)>>8,f=c&255));return b(d,e,f)}function ra(a,b,c){var d=Math.min(a/=255,b/=255,c/=255),e=Math.max(a,b,c),f=e-d,g=(e+d)/2;f?(d=.5>g?f/(e+d):f/(2-e-d),a=60*(a==
e?(b-c)/f+(b<c?6:0):b==e?(c-a)/f+2:(a-b)/f+4)):(a=NaN,d=0<g&&1>g?0:a);return new la(a,d,g)}function Yb(a,b,c){a=Ga(a);b=Ga(b);c=Ga(c);var d=Ta((.4124564*a+.3575761*b+.1804375*c)/If),e=Ta((.2126729*a+.7151522*b+.072175*c)/Jf);a=Ta((.0193339*a+.119192*b+.9503041*c)/Kf);return Ea(116*e-16,500*(d-e),200*(e-a))}function Ga(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function kb(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function da(a){return"function"===
typeof a?a:function(){return a}}function gb(a){return function(b,c,d){2===arguments.length&&"function"===typeof c&&(d=c,c=null);return ca(b,c,a,d)}}function ca(a,b,c,d){function e(){var a=C.status,b,d;if(d=!a)d=(d=C.responseType)&&"text"!==d?C.response:C.responseText;if(d||200<=a&&300>a||304===a){try{b=c.call(f,C)}catch(lh){g.error.call(f,lh);return}g.load.call(f,b)}else g.error.call(f,C)}var f={},g=y.dispatch("beforesend","progress","load","error"),v={},C=new XMLHttpRequest,W=null;!this.XDomainRequest||
"withCredentials"in C||!/^(http(s)?:)?\/\//.test(a)||(C=new XDomainRequest);"onload"in C?C.onload=C.onerror=e:C.onreadystatechange=function(){3<C.readyState&&e()};C.onprogress=function(a){var b=y.event;y.event=a;try{g.progress.call(f,C)}finally{y.event=b}};f.header=function(a,b){a=(a+"").toLowerCase();if(2>arguments.length)return v[a];null==b?delete v[a]:v[a]=b+"";return f};f.mimeType=function(a){if(!arguments.length)return b;b=null==a?null:a+"";return f};f.responseType=function(a){if(!arguments.length)return W;
W=a;return f};f.response=function(a){c=a;return f};["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(kc(arguments)))}});f.send=function(c,d,e){2===arguments.length&&"function"===typeof d&&(e=d,d=null);C.open(c,a,!0);null==b||"accept"in v||(v.accept=b+",*/*");if(C.setRequestHeader)for(var h in v)C.setRequestHeader(h,v[h]);null!=b&&C.overrideMimeType&&C.overrideMimeType(b);null!=W&&(C.responseType=W);if(null!=e)f.on("error",e).on("load",function(a){e(null,a)});g.beforesend.call(f,
C);C.send(null==d?null:d);return f};f.abort=function(){C.abort();return f};y.rebind(f,g,"on");return null==d?f:f.get(Ka(d))}function Ka(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function cb(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());d={c:a,t:c+b,n:null};be?be.n=d:ce=d;be=d;de||(ee=clearTimeout(ee),de=1,Lf(pb));return d}function pb(){var a=gc(),a=Wa()-a;24<a?(isFinite(a)&&(clearTimeout(ee),ee=setTimeout(pb,a)),de=0):(de=1,Lf(pb))}function gc(){for(var a=Date.now(),
b=ce;b;)a>=b.t&&b.c(a-b.t)&&(b.c=null),b=b.n;return a}function Wa(){for(var a,b=ce,c=Infinity;b;)b.c?(b.t<c&&(c=b.t),b=(a=b).n):b=a?a.n=b.n:ce=b.n;be=a;return c}function Ya(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Mb(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,v=d[0],C=0;0<e&&0<v;){C+v+1>b&&(v=Math.max(1,b-C));f.push(a.substring(e-=v,e+v));if((C+=v+1)>b)break;v=d[g=(g+1)%d.length]}return f.reverse().join(c)}:q;return function(a){a=
Mf.exec(a);var c=a[1]||" ",d=a[2]||">",g=a[3]||"-",v=a[4]||"",C=a[5],W=+a[6],h=a[7],k=a[8],l=a[9],ta=1,x="",va="",q=!1,p=!0;k&&(k=+k.substring(1));if(C||"0"===c&&"="===d)C=c="0",d="=";switch(l){case "n":h=!0;l="g";break;case "%":ta=100;va="%";l="f";break;case "p":ta=100;va="%";l="r";break;case "b":case "o":case "x":case "X":"#"===v&&(x="0"+l.toLowerCase());case "c":p=!1;case "d":q=!0;k=0;break;case "s":ta=-1,l="r"}"$"===v&&(x=e[0],va=e[1]);"r"!=l||k||(l="g");if(null!=k)if("g"==l)k=Math.max(1,Math.min(21,
k));else if("e"==l||"f"==l)k=Math.max(0,Math.min(20,k));var l=nh.get(l)||sc,Ia=C&&h;return function(a){var e=va;if(q&&a%1)return"";var v=0>a||0===a&&0>1/a?(a=-a,"-"):"-"===g?"":g;0>ta?(e=y.formatPrefix(a,k),a=e.scale(a),e=e.symbol+va):a*=ta;a=l(a,k);var m=a.lastIndexOf("."),oa;0>m?(m=p?a.lastIndexOf("e"):-1,0>m?(oa=a,a=""):(oa=a.substring(0,m),a=a.substring(m))):(oa=a.substring(0,m),a=b+a.substring(m+1));!C&&h&&(oa=f(oa,Infinity));var m=x.length+oa.length+a.length+(Ia?0:v.length),u=m<W?Array(m=W-
m+1).join(c):"";Ia&&(oa=f(u+oa,u.length?W-a.length:Infinity));v+=x;a=oa+a;return("<"===d?v+a+u:">"===d?u+v+a:"^"===d?u.substring(0,m>>=1)+v+a+u.substring(m):v+(Ia?a:u+a))+e}}}function sc(a){return a+""}function eb(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function lb(a,b,c){function d(b){var c=a(b),d=f(c,1);return b-c<d-b?c:d}function e(c){b(c=a(new ob(c-1)),1);return c}function f(a,c){b(a=new ob(+a),c);return a}function g(a,d,f){a=e(a);var g=[];if(1<f)for(;a<
d;)c(a)%f||g.push(new Date(+a)),b(a,1);else for(;a<d;)g.push(new Date(+a)),b(a,1);return g}a.floor=a;a.round=d;a.ceil=e;a.offset=f;a.range=g;var v=a.utc=Xa(a);v.floor=v;v.round=Xa(d);v.ceil=Xa(e);v.offset=Xa(f);v.range=function(a,b,c){try{ob=eb;var d=new eb;d._=a;return g(d,b,c)}finally{ob=Date}};return a}function Xa(a){return function(b,c){try{ob=eb;var d=new eb;d._=b;return a(d,c)._}finally{ob=Date}}}function Pc(a){function b(a){function b(b){for(var c=[],e=-1,f=0,g,v;++e<d;)if(37===a.charCodeAt(e)){c.push(a.slice(f,
e));null!=(g=Nf[f=a.charAt(++e)])&&(f=a.charAt(++e));if(v=w[f])f=v(b,null==g?"e"===f?" ":"0":g);c.push(f);f=e+1}c.push(a.slice(f,e));return c.join("")}var d=a.length;b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(d,a,b,0)!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);b=null!=d.Z&&ob!==eb;var e=new (b?eb:ob);"j"in d?e.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),e.setFullYear(d.y,0,1),e.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(e.getDay()+5)%7:d.w+
7*d.U-(e.getDay()+6)%7)):e.setFullYear(d.y,d.m,d.d);e.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L);return b?e._:e};b.toString=function(){return a};return b}function c(a,b,c,d){for(var e,f=0,g=b.length,v=c.length;f<g;){if(d>=v)return-1;e=b.charCodeAt(f++);if(37===e){if(e=b.charAt(f++),e=A[e in Nf?b.charAt(f++):e],!e||0>(d=e(a,c,d)))return-1}else if(e!=c.charCodeAt(d++))return-1}return d}var d=a.dateTime,e=a.date,f=a.time,g=a.periods,v=a.days,h=a.shortDays,k=a.months,l=a.shortMonths;b.utc=function(a){function c(a){try{ob=
eb;var b=new ob;b._=a;return d(b)}finally{ob=Date}}var d=b(a);c.parse=function(a){try{ob=eb;var b=d.parse(a);return b&&b._}finally{ob=Date}};c.toString=d.toString;return c};b.multi=b.utc.multi=Lb;var x=y.map(),q=Nb(v),p=Bb(v),m=Nb(h),u=Bb(h),t=Nb(k),n=Bb(k),K=Nb(l),r=Bb(l);g.forEach(function(a,b){x.set(a.toLowerCase(),b)});var w={a:function(a){return h[a.getDay()]},A:function(a){return v[a.getDay()]},b:function(a){return l[a.getMonth()]},B:function(a){return k[a.getMonth()]},c:b(d),d:function(a,b){return Pa(a.getDate(),
b,2)},e:function(a,b){return Pa(a.getDate(),b,2)},H:function(a,b){return Pa(a.getHours(),b,2)},I:function(a,b){return Pa(a.getHours()%12||12,b,2)},j:function(a,b){return Pa(1+V.dayOfYear(a),b,3)},L:function(a,b){return Pa(a.getMilliseconds(),b,3)},m:function(a,b){return Pa(a.getMonth()+1,b,2)},M:function(a,b){return Pa(a.getMinutes(),b,2)},p:function(a){return g[+(12<=a.getHours())]},S:function(a,b){return Pa(a.getSeconds(),b,2)},U:function(a,b){return Pa(V.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},
W:function(a,b){return Pa(V.mondayOfYear(a),b,2)},x:b(e),X:b(f),y:function(a,b){return Pa(a.getFullYear()%100,b,2)},Y:function(a,b){return Pa(a.getFullYear()%1E4,b,4)},Z:Cb,"%":function(){return"%"}},A={a:function(a,b,c){m.lastIndex=0;return(b=m.exec(b.slice(c)))?(a.w=u.get(b[0].toLowerCase()),c+b[0].length):-1},A:function(a,b,c){q.lastIndex=0;return(b=q.exec(b.slice(c)))?(a.w=p.get(b[0].toLowerCase()),c+b[0].length):-1},b:function(a,b,c){K.lastIndex=0;return(b=K.exec(b.slice(c)))?(a.m=r.get(b[0].toLowerCase()),
c+b[0].length):-1},B:function(a,b,c){t.lastIndex=0;return(b=t.exec(b.slice(c)))?(a.m=n.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,d){return c(a,w.c.toString(),b,d)},d:Vb,e:Vb,H:Sa,I:Sa,j:jb,L:hb,m:oc,M:vb,p:function(a,b,c){b=x.get(b.slice(c,c+=2).toLowerCase());return null==b?-1:(a.p=b,c)},S:Ua,U:tc,w:Zb,W:Ib,x:function(a,b,d){return c(a,w.x.toString(),b,d)},X:function(a,b,d){return c(a,w.X.toString(),b,d)},y:Bc,Y:fc,Z:Jb,"%":hc};return b}function Pa(a,b,c){var d=0>a?"-":"";a=(d?-a:
a)+"";var e=a.length;return d+(e<c?Array(c-e+1).join(b)+a:a)}function Nb(a){return new RegExp("^(?:"+a.map(y.requote).join("|")+")","i")}function Bb(a){for(var b=new h,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Zb(a,b,c){Ra.lastIndex=0;return(b=Ra.exec(b.slice(c,c+1)))?(a.w=+b[0],c+b[0].length):-1}function tc(a,b,c){Ra.lastIndex=0;return(b=Ra.exec(b.slice(c)))?(a.U=+b[0],c+b[0].length):-1}function Ib(a,b,c){Ra.lastIndex=0;return(b=Ra.exec(b.slice(c)))?(a.W=+b[0],c+b[0].length):
-1}function fc(a,b,c){Ra.lastIndex=0;return(b=Ra.exec(b.slice(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}function Bc(a,b,c){Ra.lastIndex=0;if(b=Ra.exec(b.slice(c,c+2))){var d=+b[0];a=(a.y=d+(68<d?1900:2E3),c+b[0].length)}else a=-1;return a}function Jb(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function oc(a,b,c){Ra.lastIndex=0;return(b=Ra.exec(b.slice(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1}function Vb(a,b,c){Ra.lastIndex=0;return(b=Ra.exec(b.slice(c,c+2)))?(a.d=+b[0],c+b[0].length):
-1}function jb(a,b,c){Ra.lastIndex=0;return(b=Ra.exec(b.slice(c,c+3)))?(a.j=+b[0],c+b[0].length):-1}function Sa(a,b,c){Ra.lastIndex=0;return(b=Ra.exec(b.slice(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function vb(a,b,c){Ra.lastIndex=0;return(b=Ra.exec(b.slice(c,c+2)))?(a.M=+b[0],c+b[0].length):-1}function Ua(a,b,c){Ra.lastIndex=0;return(b=Ra.exec(b.slice(c,c+2)))?(a.S=+b[0],c+b[0].length):-1}function hb(a,b,c){Ra.lastIndex=0;return(b=Ra.exec(b.slice(c,c+3)))?(a.L=+b[0],c+b[0].length):-1}function Cb(a){var b=
a.getTimezoneOffset();a=0<b?"-":"+";var c=ga(b)/60|0,b=ga(b)%60;return a+Pa(c,"0",2)+Pa(b,"0",2)}function hc(a,b,c){Of.lastIndex=0;return(a=Of.exec(b.slice(c,c+1)))?c+a[0].length:-1}function Lb(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function Kb(){}function Ab(a,b,c){var d=c.s=a+b,e=d-a;c.t=a-(d-e)+(b-e)}function sa(a,b){if(a&&Pf.hasOwnProperty(a.type))Pf[a.type](a,b)}function rb(a,b,c){var d=-1;c=a.length-c;
var e;for(b.lineStart();++d<c;)e=a[d],b.point(e[0],e[1],e[2]);b.lineEnd()}function Db(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)rb(a[c],b,1);b.polygonEnd()}function $b(){function a(a,b){a*=fa;b=b*fa/2+ea/4;var c=a-d,g=0<=c?1:-1,c=g*c,v=Math.cos(b),C=Math.sin(b),h=f*C;Xc.add(Math.atan2(h*g*Math.sin(c),e*v+h*Math.cos(c)));d=a;e=v;f=C}var b,c,d,e,f;Gb.point=function(g,v){Gb.point=a;d=(b=g)*fa;e=Math.cos(v=(c=v)*fa/2+ea/4);f=Math.sin(v)};Gb.lineEnd=function(){a(b,c)}}function $a(a){var b=a[0];
a=a[1];var c=Math.cos(a);return[c*Math.cos(b),c*Math.sin(b),Math.sin(a)]}function wb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function nb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Ob(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function ib(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function uc(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function ac(a){return[Math.atan2(a[1],a[0]),Ja(a[2])]}function xb(a,b){return 1E-6>ga(a[0]-b[0])&&1E-6>ga(a[1]-
b[1])}function pa(a,b){a*=fa;var c=Math.cos(b*=fa);Pb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function Pb(a,b,c){++Bd;Yc+=(a-Yc)/Bd;Zc+=(b-Zc)/Bd;yc+=(c-yc)/Bd}function Tc(){function a(a,e){a*=fa;var f=Math.cos(e*=fa),g=f*Math.cos(a),f=f*Math.sin(a),v=Math.sin(e),C=Math.atan2(Math.sqrt((C=c*v-d*f)*C+(C=d*g-b*v)*C+(C=b*f-c*g)*C),b*g+c*f+d*v);fe+=C;Ic+=C*(b+(b=g));Jc+=C*(c+(c=f));lc+=C*(d+(d=v));Pb(b,c,d)}var b,c,d;bc.point=function(e,f){e*=fa;var g=Math.cos(f*=fa);b=g*Math.cos(e);c=g*Math.sin(e);
d=Math.sin(f);bc.point=a;Pb(b,c,d)}}function ic(){bc.point=pa}function Uc(){function a(a,b){a*=fa;var c=Math.cos(b*=fa),g=c*Math.cos(a),c=c*Math.sin(a),v=Math.sin(b),C=e*v-f*c,h=f*g-d*v,W=d*c-e*g,k=Math.sqrt(C*C+h*h+W*W),l=d*g+e*c+f*v,x=k&&-xa(l)/k,k=Math.atan2(k,l);hd+=x*C;id+=x*h;Kc+=x*W;fe+=k;Ic+=k*(d+(d=g));Jc+=k*(e+(e=c));lc+=k*(f+(f=v));Pb(d,e,f)}var b,c,d,e,f;bc.point=function(g,v){b=g;c=v;bc.point=a;g*=fa;var C=Math.cos(v*=fa);d=C*Math.cos(g);e=C*Math.sin(g);f=Math.sin(v);Pb(d,e,f)};bc.lineEnd=
function(){a(b,c);bc.lineEnd=ic;bc.point=pa}}function vc(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])});return c}function wc(){return!0}function jc(a,b,c,d,e){var f=[],g=[];a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],d=a[b];if(xb(c,d)){e.lineStart();for(d=0;d<b;++d)e.point((c=a[d])[0],c[1]);e.lineEnd()}else b=new Qb(c,a,null,!0),c=new Qb(c,null,b,!1),b.o=c,f.push(b),g.push(c),b=new Qb(d,
a,null,!1),c=new Qb(d,null,b,!0),b.o=c,f.push(b),g.push(c)}});g.sort(b);Cc(f);Cc(g);if(f.length){a=0;b=c;for(c=g.length;a<c;++a)g[a].e=b=!b;b=f[0];for(var v,C;;){for(var h=b,W=!0;h.v;)if((h=h.n)===b)return;v=h.z;e.lineStart();do{h.v=h.o.v=!0;if(h.e){if(W)for(a=0,c=v.length;a<c;++a)e.point((C=v[a])[0],C[1]);else d(h.x,h.n.x,1,e);h=h.n}else{if(W)for(v=h.p.z,a=v.length-1;0<=a;--a)e.point((C=v[a])[0],C[1]);else d(h.x,h.p.x,-1,e);h=h.p}h=h.o;v=h.z;W=!W}while(!h.v);e.lineEnd()}}}function Cc(a){if(b=a.length){for(var b,
c=0,d=a[0],e;++c<b;)d.n=e=a[c],e.p=d,d=e;d.n=e=a[0];e.p=d}}function Qb(a,b,c,d){this.x=a;this.z=b;this.o=c;this.e=d;this.v=!1;this.n=this.p=null}function Rb(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function v(a,b){var c=e(a,b);x.point(c[0],c[1])}function C(){q.point=v;x.lineStart()}function h(){q.point=g;x.lineEnd()}function W(a,b){t.push([a,b]);var c=e(a,b);va.point(c[0],c[1])}function k(){va.lineStart();t=[]}function l(){W(t[0][0],t[0][1]);va.lineEnd();
var a=va.clean(),b=m.buffer(),c=b.length;t.pop();u.push(t);t=null;if(c)if(a&1){var a=b[0],c=a.length-1,b=-1,d;if(0<c){Ia||(f.polygonStart(),Ia=!0);for(f.lineStart();++b<c;)f.point((d=a[b])[0],d[1]);f.lineEnd()}}else 1<c&&a&2&&b.push(b.pop().concat(b.shift())),p.push(b.filter(Vc))}var x=b(f),ta=e.invert(d[0],d[1]),q={point:g,lineStart:C,lineEnd:h,polygonStart:function(){q.point=W;q.lineStart=k;q.lineEnd=l;p=[];u=[]},polygonEnd:function(){q.point=g;q.lineStart=C;q.lineEnd=h;p=y.merge(p);var a,b=ta;
a=u;var d=b[0],e=b[1],v=[Math.sin(d),-Math.cos(d),0],W=0,k=0;Xc.reset();for(var l=0,x=a.length;l<x;++l){var m=a[l],va=m.length;if(va)for(var t=m[0],oa=t[0],b=t[1]/2+ea/4,n=Math.sin(b),Ad=Math.cos(b),K=1;;){K===va&&(K=0);var b=m[K],Sb=b[0],Hc=b[1]/2+ea/4,r=Math.sin(Hc),Hc=Math.cos(Hc),w=Sb-oa,A=0<=w?1:-1,Gc=A*w,z=Gc>ea,n=n*r;Xc.add(Math.atan2(n*A*Math.sin(Gc),Ad*Hc+n*Math.cos(Gc)));W+=z?w+A*Hb:w;z^oa>=d^Sb>=d&&(t=nb($a(t),$a(b)),uc(t),oa=nb(v,t),uc(oa),oa=(z^0<=w?-1:1)*Ja(oa[2]),e>oa||e===oa&&(t[0]||
t[1]))&&(k+=z^0<=w?1:-1);if(!K++)break;oa=Sb;n=r;Ad=Hc;t=b}}a=(-1E-6>W||1E-6>W&&-1E-6>Xc)^k&1;p.length?(Ia||(f.polygonStart(),Ia=!0),jc(p,sb,a,c,f)):a&&(Ia||(f.polygonStart(),Ia=!0),f.lineStart(),c(null,null,1,f),f.lineEnd());Ia&&(f.polygonEnd(),Ia=!1);p=u=null},sphere:function(){f.polygonStart();f.lineStart();c(null,null,1,f);f.lineEnd();f.polygonEnd()}},p,m=Dc(),va=b(m),Ia=!1,u,t;return q}}function Vc(a){return 1<a.length}function Dc(){var a=[],b;return{lineStart:function(){a.push(b=[])},point:function(a,
c){b.push([a,c])},lineEnd:B,buffer:function(){var c=a;a=[];b=null;return c},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function sb(a,b){return(0>(a=a.x)[0]?a[1]-Qa-1E-6:Qa-a[1])-(0>(b=b.x)[0]?b[1]-Qa-1E-6:Qa-b[1])}function Eb(a){function b(a,b){return Math.cos(a)*Math.cos(b)>e}function c(a,b,c){var d=$a(a),f=$a(b),g=[1,0,0],f=nb(d,f),v=wb(f,f),d=f[0],C=v-d*d;if(!C)return!c&&a;v=e*v/C;C=-e*d/C;d=nb(g,f);g=ib(g,v);f=ib(f,C);Ob(g,f);f=wb(g,d);v=wb(d,d);C=f*f-v*(wb(g,g)-1);if(!(0>
C)){var h=Math.sqrt(C),C=ib(d,(-f-h)/v);Ob(C,g);C=ac(C);if(!c)return C;c=a[0];var W=b[0];a=a[1];b=b[1];var k;W<c&&(k=c,c=W,W=k);var l=W-c,x=1E-6>ga(l-ea);!x&&b<a&&(k=a,a=b,b=k);if(x||1E-6>l?x?0<a+b^C[1]<(1E-6>ga(C[0]-c)?a:b):a<=C[1]&&C[1]<=b:l>ea^(c<=C[0]&&C[0]<=W))return b=ib(d,(-f+h)/v),Ob(b,g),[C,ac(b)]}}function d(b,c){var d=f?a:ea-a,e=0;b<-d?e|=1:b>d&&(e|=2);c<-d?e|=4:c>d&&(e|=8);return e}var e=Math.cos(a),f=0<e,g=1E-6<ga(e),v=vd(a,6*fa);return Rb(b,function(a){var e,v,C,h,W;return{lineStart:function(){h=
C=!1;W=1},point:function(k,l){var x=[k,l],ta,q=b(k,l),p=f?q?0:d(k,l):q?d(k+(0>k?ea:-ea),l):0;!e&&(h=C=q)&&a.lineStart();q!==C&&(ta=c(e,x),xb(e,ta)||xb(x,ta))&&(x[0]+=1E-6,x[1]+=1E-6,q=b(x[0],x[1]));if(q!==C)W=0,q?(a.lineStart(),ta=c(x,e),a.point(ta[0],ta[1])):(ta=c(e,x),a.point(ta[0],ta[1]),a.lineEnd()),e=ta;else if(g&&e&&f^q){var m;p&v||!(m=c(x,e,!0))||(W=0,f?(a.lineStart(),a.point(m[0][0],m[0][1]),a.point(m[1][0],m[1][1]),a.lineEnd()):(a.point(m[1][0],m[1][1]),a.lineEnd(),a.lineStart(),a.point(m[0][0],
m[0][1])))}!q||e&&xb(e,x)||a.point(x[0],x[1]);e=x;C=q;v=p},lineEnd:function(){C&&a.lineEnd();e=null},clean:function(){return W|(h&&C)<<1}}},v,f?[0,-a]:[-ea,a-ea])}function yb(a,b,c,d){return function(e){var f=e.a,g=e.b,v=f.x,f=f.y,C=0,h=1,W=g.x-v,g=g.y-f,k;k=a-v;if(W||!(0<k)){k/=W;if(0>W){if(k<C)return;k<h&&(h=k)}else if(0<W){if(k>h)return;k>C&&(C=k)}k=c-v;if(W||!(0>k)){k/=W;if(0>W){if(k>h)return;k>C&&(C=k)}else if(0<W){if(k<C)return;k<h&&(h=k)}k=b-f;if(g||!(0<k)){k/=g;if(0>g){if(k<C)return;k<h&&
(h=k)}else if(0<g){if(k>h)return;k>C&&(C=k)}k=d-f;if(g||!(0>k)){k/=g;if(0>g){if(k>h)return;k>C&&(C=k)}else if(0<g){if(k<C)return;k<h&&(h=k)}0<C&&(e.a={x:v+C*W,y:f+C*g});1>h&&(e.b={x:v+h*W,y:f+h*g});return e}}}}}}function Va(a,b,c,d){function e(d,e){return 1E-6>ga(d[0]-a)?0<e?0:3:1E-6>ga(d[0]-c)?0<e?2:1:1E-6>ga(d[1]-b)?0<e?1:0:0<e?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(v){function C(f,
v,C,h){var k=0,W=0;if(null==f||(k=e(f,C))!==(W=e(v,C))||0>g(f,v)^0<C){do h.point(0===k||3===k?a:c,1<k?d:b);while((k=(k+C+4)%4)!==W)}else h.point(v[0],v[1])}function h(e,f){a<=e&&e<=c&&b<=f&&f<=d&&v.point(e,f)}function k(e,f){e=Math.max(-1E9,Math.min(1E9,e));f=Math.max(-1E9,Math.min(1E9,f));var g=a<=e&&e<=c&&b<=f&&f<=d;q&&p.push([e,f]);if(K)va=e,Ia=f,t=g,K=!1,g&&(v.lineStart(),v.point(e,f));else if(g&&oa)v.point(e,f);else{var C={a:{x:u,y:n},b:{x:e,y:f}};x(C)?(oa||(v.lineStart(),v.point(C.a.x,C.a.y)),
v.point(C.b.x,C.b.y),g||v.lineEnd(),Sb=!1):g&&(v.lineStart(),v.point(e,f),Sb=!1)}u=e;n=f;oa=g}var W=v,l=Dc(),x=yb(a,b,c,d),ta,q,p,m={point:h,lineStart:function(){m.point=k;q&&q.push(p=[]);K=!0;oa=!1;u=n=NaN},lineEnd:function(){ta&&(k(va,Ia),t&&oa&&l.rejoin(),ta.push(l.buffer()));m.point=h;oa&&v.lineEnd()},polygonStart:function(){v=l;ta=[];q=[];Sb=!0},polygonEnd:function(){v=W;ta=y.merge(ta);var b;b=[a,d];for(var c=0,e=q.length,g=b[1],h=0;h<e;++h)for(var k=1,l=q[h],x=l.length,m=l[0],va;k<x;++k)va=
l[k],m[1]<=g?va[1]>g&&0<Na(m,va,b)&&++c:va[1]<=g&&0>Na(m,va,b)&&--c,m=va;b=0!==c;c=Sb&&b;e=ta.length;if(c||e)v.polygonStart(),c&&(v.lineStart(),C(null,null,1,v),v.lineEnd()),e&&jc(ta,f,b,C,v),v.polygonEnd();ta=q=p=null}},va,Ia,t,u,n,oa,K,Sb;return m}}function ab(a){var b=0,c=ea/3,d=nd(a);a=d(b,c);a.parallels=function(a){return arguments.length?d(b=a[0]*ea/180,c=a[1]*ea/180):[b/ea*180,c/ea*180]};return a}function zb(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),
g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,Ja((f-(a*a+c*c)*e*e)/(2*e))]};return c}function Fb(){function a(a,b){Re+=e*a-d*b;d=a;e=b}var b,c,d,e;Lc.point=function(f,g){Lc.point=a;b=d=f;c=e=g};Lc.lineEnd=function(){a(b,c)}}function fd(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b);h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}
var f=gd(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d;h.point=a},pointRadius:function(a){f=gd(a);return h},result:function(){if(g.length){var a=g.join("");g=[];return a}}};return h}function gd(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Ba(a,b){Yc+=a;Zc+=b;++yc}function ya(){function a(a,d){var e=a-b,f=d-c,e=Math.sqrt(e*e+f*f);Ic+=e*(b+a)/2;Jc+=e*(c+d)/2;lc+=e;Ba(b=a,
c=d)}var b,c;cc.point=function(d,e){cc.point=a;Ba(b=d,c=e)}}function Hd(){cc.point=Ba}function Id(){function a(a,b){var c=a-d,f=b-e,c=Math.sqrt(c*c+f*f);Ic+=c*(d+a)/2;Jc+=c*(e+b)/2;lc+=c;c=e*a-d*b;hd+=c*(d+a);id+=c*(e+b);Kc+=3*c;Ba(d=a,e=b)}var b,c,d,e;cc.point=function(f,g){cc.point=a;Ba(b=d=f,c=e=g)};cc.lineEnd=function(){a(b,c)}}function Fe(a){function b(b,c){a.moveTo(b+g,c);a.arc(b,c,g,0,Hb)}function c(b,c){a.moveTo(b,c);v.point=d}function d(b,c){a.lineTo(b,c)}function e(){v.point=b}function f(){a.closePath()}
var g=4.5,v={point:b,lineStart:function(){v.point=c},lineEnd:e,polygonStart:function(){v.lineEnd=f},polygonEnd:function(){v.lineEnd=e;v.point=b},pointRadius:function(a){g=a;return v},result:B};return v}function Ac(a){function b(a){return(v?d:c)(a)}function c(b){return Oc(b,function(c,d){c=a(c,d);b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d);b.point(c[0],c[1])}function d(){va=NaN;oa.point=f;b.lineStart()}function f(c,d){var f=$a([c,d]),g=a(c,d);e(va,Ia,m,t,u,n,va=g[0],Ia=g[1],m=c,t=f[0],
u=f[1],n=f[2],v,b);b.point(va,Ia)}function g(){oa.point=c;b.lineEnd()}function C(){d();oa.point=h;oa.lineEnd=k}function h(a,b){f(W=a,b);l=va;x=Ia;q=t;ta=u;p=n;oa.point=f}function k(){e(va,Ia,m,t,u,n,l,x,W,q,ta,p,v,b);oa.lineEnd=g;g()}var W,l,x,q,ta,p,m,va,Ia,t,u,n,oa={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart();oa.lineStart=C},polygonEnd:function(){b.polygonEnd();oa.lineStart=d}};return oa}function e(b,c,d,v,C,h,k,W,l,x,q,ta,p,m){var va=k-b,Ia=W-c,t=va*va+Ia*Ia;if(t>4*f&&
p--){var u=v+x,n=C+q,oa=h+ta,K=Math.sqrt(u*u+n*n+oa*oa),r=Math.asin(oa/=K),Sb=1E-6>ga(ga(oa)-1)||1E-6>ga(d-l)?(d+l)/2:Math.atan2(n,u),w=a(Sb,r),r=w[0],w=w[1],Ad=r-b,Hc=w-c,A=Ia*Ad-va*Hc;if(A*A/t>f||.3<ga((va*Ad+Ia*Hc)/t-.5)||v*x+C*q+h*ta<g)e(b,c,d,v,C,h,r,w,Sb,u/=K,n/=K,oa,p,m),m.point(r,w),e(r,w,Sb,u,n,oa,k,W,l,x,q,ta,p,m)}}var f=.5,g=Math.cos(30*fa),v=16;b.precision=function(a){if(!arguments.length)return Math.sqrt(f);v=0<(f=a*a)&&16;return b};return b}function cd(a){var b=Ac(function(b,c){return a([b*
Fa,c*Fa])});return function(a){return Kd(b(a))}}function Jd(a){this.stream=a}function Oc(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function ec(a){return nd(function(){return a})()}function nd(a){function b(a){a=v(a[0]*fa,a[1]*fa);return[a[0]*k+K,r-a[1]*k]}function c(a){return(a=v.invert((a[0]-K)/k,(r-a[1])/k))&&[a[0]*Fa,a[1]*Fa]}function d(){v=
vc(g=od(u,t,n),f);var a=f(p,m);K=l-a[0]*k;r=x+a[1]*k;return e()}function e(){B&&(B.valid=!1,B=null);return b}var f,g,v,h=Ac(function(a,b){a=f(a,b);return[a[0]*k+K,r-a[1]*k]}),k=150,l=480,x=250,p=0,m=0,u=0,t=0,n=0,K,r,w=Qf,A=q,z=null,Aa=null,B;b.stream=function(a){B&&(B.valid=!1);B=Kd(w(g,h(A(a))));B.valid=!0;return B};b.clipAngle=function(a){if(!arguments.length)return z;w=null==a?(z=a,Qf):Eb((z=+a)*fa);return e()};b.clipExtent=function(a){if(!arguments.length)return Aa;A=(Aa=a)?Va(a[0][0],a[0][1],
a[1][0],a[1][1]):q;return e()};b.scale=function(a){if(!arguments.length)return k;k=+a;return d()};b.translate=function(a){if(!arguments.length)return[l,x];l=+a[0];x=+a[1];return d()};b.center=function(a){if(!arguments.length)return[p*Fa,m*Fa];p=a[0]%360*fa;m=a[1]%360*fa;return d()};b.rotate=function(a){if(!arguments.length)return[u*Fa,t*Fa,n*Fa];u=a[0]%360*fa;t=a[1]%360*fa;n=2<a.length?a[2]%360*fa:0;return d()};y.rebind(b,h,"precision");return function(){f=a.apply(this,arguments);b.invert=f.invert&&
c;return d()}}function Kd(a){return Oc(a,function(b,c){a.point(b*fa,c*fa)})}function nc(a,b){return[a,b]}function Ld(a,b){return[a>ea?a-Hb:a<-ea?a+Hb:a,b]}function od(a,b,c){return a?b||c?vc(td(a),ud(b,c)):td(a):b||c?ud(b,c):Ld}function Md(a){return function(b,c){return b+=a,[b>ea?b-Hb:b<-ea?b+Hb:b,c]}}function td(a){var b=Md(a);b.invert=Md(-a);return b}function ud(a,b){function c(a,b){var c=Math.cos(b),v=Math.cos(a)*c,c=Math.sin(a)*c,C=Math.sin(b),h=C*d+v*e;return[Math.atan2(c*f-h*g,v*d-C*e),Ja(h*
f+c*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);c.invert=function(a,b){var c=Math.cos(b),v=Math.cos(a)*c,c=Math.sin(a)*c,C=Math.sin(b),h=C*f-c*g;return[Math.atan2(c*f+C*g,v*d+h*e),Ja(h*d-v*e)]};return c}function vd(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,v){var C=g*b;if(null!=e){if(e=Qd(c,e),f=Qd(c,f),0<g?e<f:e>f)e+=g*Hb}else e=a+g*Hb,f=a-.5*C;for(var h;0<g?e>f:e<f;e-=C)v.point((h=ac([c,-d*Math.cos(e),-d*Math.sin(e)]))[0],h[1])}}function Qd(a,b){var c=$a(b);
c[0]-=a;uc(c);var d=xa(-c[1]);return((0>-c[2]?-d:d)+2*Math.PI-1E-6)%(2*Math.PI)}function Rd(a,b,c){var d=y.range(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function Wb(a,b,c){var d=y.range(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function sd(a){return a.source}function S(a){return a.target}function na(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),v=Math.sin(d),C=e*Math.cos(a),h=e*Math.sin(a),k=g*Math.cos(c),l=g*
Math.sin(c),W=2*Math.asin(Math.sqrt(Ca(d-b)+e*g*Ca(c-a))),x=1/Math.sin(W);c=W?function(a){var b=Math.sin(a*=W)*x;a=Math.sin(W-a)*x;var c=a*C+b*k,d=a*h+b*l;return[Math.atan2(d,c)*Fa,Math.atan2(a*f+b*v,Math.sqrt(c*c+d*d))*Fa]}:function(){return[a*Fa,b*Fa]};c.distance=W;return c}function ub(a,b){function c(b,c){var d=Math.cos(c),e=a(Math.cos(b)*d);return[e*d*Math.sin(b),e*Math.sin(c)]}c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e);return[Math.atan2(a*f,d*Math.cos(e)),Math.asin(d&&
c*f/d)]};return c}function Sd(a,b){function c(a,b){0<f?b<-Qa+1E-6&&(b=-Qa+1E-6):b>Qa-1E-6&&(b=Qa-1E-6);var c=f/Math.pow(Math.tan(ea/4+b/2),e);return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(Math.tan(ea/4+b/2)/Math.tan(ea/4+a/2)),f=d*Math.pow(Math.tan(ea/4+a/2),e)/e;if(!e)return ed;c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,2*Math.atan(Math.pow(f/((0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c)),1/e))-Qa]};return c}function Pd(a,b){function c(a,
b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;if(1E-6>ga(e))return nc;c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c)]};return c}function ed(a,b){return[a,Math.log(Math.tan(ea/4+b/2))]}function Td(a){var b=ec(a),c=b.scale,d=b.translate,e=b.clipExtent,f;b.scale=function(){var a=c.apply(b,arguments);return a===b?f?b.clipExtent(null):b:a};b.translate=function(){var a=d.apply(b,
arguments);return a===b?f?b.clipExtent(null):b:a};b.clipExtent=function(a){var g=e.apply(b,arguments);if(g===b){if(f=null==a){var v=ea*c(),C=d();e([[C[0]-v,C[1]-v],[C[0]+v,C[1]+v]])}}else f&&(g=null);return g};return b.clipExtent(null)}function wd(a,b){return[Math.log(Math.tan(ea/4+b/2)),-a]}function Ec(a){return a[0]}function Qc(a){return a[1]}function Ud(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;1<d&&0>=Na(a[c[d-2]],a[c[d-1]],a[e]);)--d;c[d++]=e}return c.slice(0,d)}function He(a,b){return a[0]-
b[0]||a[1]-b[1]}function qd(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function xd(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,v=d[0]-f;a=a[1];c=c[1];b=b[1]-a;d=d[1]-c;f=(v*(a-c)-d*(e-f))/(d*g-v*b);return[e+f*g,a+f*b]}function Vd(a){var b=a[0];a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function Je(){Xd(this);this.edge=this.site=this.circle=null}function Od(a){var b=Rf.pop()||new Je;b.site=a;return b}function pd(a){K(a);jd.remove(a);Rf.push(a);Xd(a)}function qc(a,b){var c=a.site,d=c.x,
e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-Infinity;var c=g.site,g=c.x,c=c.y,v=c-b;if(!v)return g;var C=g-d,h=1/f-1/v,k=C/v;return h?(-k+Math.sqrt(k*k-2*h*(C*C/(-2*v)-c+v/2+e-f/2)))/h+d:(d+g)/2}function Xb(a){this.site=a;this.edges=[]}function Fc(a,b){return b.angle-a.angle}function za(){Xd(this);this.x=this.y=this.arc=this.site=this.cy=null}function x(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,b=a.site,e=c.site;if(d!==e){var c=b.x,f=b.y,g=d.x-c,v=d.y-f,d=e.x-c,e=e.y-f,h=2*(g*e-v*d);if(!(-1E-12<=
h)){var k=g*g+v*v,l=d*d+e*e,v=(e*k-v*l)/h,g=(g*l-d*k)/h,e=g+f,f=Sf.pop()||new za;f.arc=a;f.site=b;f.x=v+c;f.y=e+Math.sqrt(v*v+g*g);f.cy=e;a.circle=f;a=null;for(b=Cd._;b;)if(f.y<b.y||f.y===b.y&&f.x<=b.x)if(b.L)b=b.L;else{a=b.P;break}else if(b.R)b=b.R;else{a=b;break}Cd.insert(a,f);a||(Se=f)}}}}function K(a){var b=a.circle;b&&(b.P||(Se=b.N),Cd.remove(b),Sf.push(b),Xd(b),a.circle=null)}function Aa(a,b){var c=a.b;if(c)return!0;var d=a.a,c=b[0][0],e=b[1][0],f=b[0][1],g=b[1][1],v=a.l,h=a.r,C=v.x,v=v.y,k=
h.x,h=h.y,l=(C+k)/2,x;if(h===v){if(l<c||l>=e)return;if(C>k){if(!d)d={x:l,y:f};else if(d.y>=g)return;c={x:l,y:g}}else{if(!d)d={x:l,y:g};else if(d.y<f)return;c={x:l,y:f}}}else if(x=(C-k)/(h-v),l=(v+h)/2-x*l,-1>x||1<x)if(C>k){if(!d)d={x:(f-l)/x,y:f};else if(d.y>=g)return;c={x:(g-l)/x,y:g}}else{if(!d)d={x:(g-l)/x,y:g};else if(d.y<f)return;c={x:(f-l)/x,y:f}}else if(v<h){if(!d)d={x:c,y:x*c+l};else if(d.x>=e)return;c={x:e,y:x*e+l}}else{if(!d)d={x:e,y:x*e+l};else if(d.x<c)return;c={x:c,y:x*c+l}}a.a=d;a.b=
c;return!0}function ma(a,b){this.l=a;this.r=b;this.a=this.b=null}function Rc(a,b,c,d){var e=new ma(a,b);kd.push(e);c&&Nd(e,a,b,c);d&&Nd(e,b,a,d);$c[a.i].edges.push(new Wd(e,a,b));$c[b.i].edges.push(new Wd(e,b,a));return e}function hh(a,b,c){a=new ma(a,null);a.a=b;a.b=c;kd.push(a);return a}function Nd(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function Wd(a,b,c){var d=a.a,e=a.b;this.edge=a;this.site=b;this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-
e.x,e.y-d.y)}function Le(){this._=null}function Xd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function rd(a,b){var c=b.R,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.R=c.L;b.R&&(b.R.U=b);c.L=b}function yd(a,b){var c=b.L,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.L=c.R;b.L&&(b.L.U=b);c.R=b}function Ef(a){for(;a.L;)a=a.L;return a}function Me(a,b){var c=a.sort(ih).pop(),d,e,f;kd=[];$c=Array(a.length);jd=new Le;for(Cd=new Le;;)if(f=Se,c&&(!f||c.y<f.y||c.y===f.y&&c.x<f.x)){if(c.x!==d||c.y!==e){$c[c.i]=new Xb(c);
var g,v;e=d=void 0;f=c;for(var h=f.x,C=f.y,k=jd._;k;)if(v=qc(k,C)-h,1E-6<v)k=k.L;else{var l=k;g=C;var q=l.N;q?g=qc(q,g):(l=l.site,g=l.y===g?l.x:Infinity);g=h-g;if(1E-6<g){if(!k.R){e=k;break}k=k.R}else{-1E-6<v?(e=k.P,d=k):-1E-6<g?(e=k,d=k.N):e=d=k;break}}v=Od(f);jd.insert(e,v);if(e||d)if(e===d)K(e),d=Od(e.site),jd.insert(v,d),v.edge=d.edge=Rc(e.site,v.site),x(e),x(d);else if(d){K(e);K(d);h=e.site;k=h.x;g=h.y;var l=f.x-k,q=f.y-g,C=d.site,p=C.x-k,m=C.y-g,u=2*(l*m-q*p),t=l*l+q*q,n=p*p+m*m,k={x:(m*t-q*
n)/u+k,y:(l*n-p*t)/u+g};Nd(d.edge,h,C,k);v.edge=Rc(h,f,null,k);d.edge=Rc(f,C,null,k);x(e);x(d)}else v.edge=Rc(e.site,v.site);d=c.x;e=c.y}c=a.pop()}else if(f){C=f.arc;f=C.circle;h=f.x;k=f.cy;f={x:h,y:k};l=C.P;g=C.N;v=[C];pd(C);for(C=l;C.circle&&1E-6>ga(h-C.circle.x)&&1E-6>ga(k-C.circle.cy);)l=C.P,v.unshift(C),pd(C),C=l;v.unshift(C);K(C);for(l=g;l.circle&&1E-6>ga(h-l.circle.x)&&1E-6>ga(k-l.circle.cy);)g=l.N,v.push(l),pd(l),l=g;v.push(l);K(l);k=v.length;for(h=1;h<k;++h)l=v[h],C=v[h-1],Nd(l.edge,C.site,
l.site,f);C=v[0];l=v[k-1];l.edge=Rc(C.site,l.site,null,f);x(C);x(l)}else break;if(b){c=kd;d=yb(b[0][0],b[0][1],b[1][0],b[1][1]);for(e=c.length;e--;)if(f=c[e],!Aa(f,b)||!d(f)||1E-6>ga(f.a.x-f.b.x)&&1E-6>ga(f.a.y-f.b.y))f.a=f.b=null,c.splice(e,1);c=b[0][0];d=b[1][0];e=b[0][1];f=b[1][1];k=$c;for(g=k.length;g--;)if((l=k[g])&&l.prepare())for(p=l.edges,m=p.length,q=0;q<m;)if(u=p[q].end(),h=u.x,C=u.y,t=p[++q%m].start(),v=t.x,t=t.y,1E-6<ga(h-v)||1E-6<ga(C-t))p.splice(q,0,new Wd(hh(l.site,u,1E-6>ga(h-c)&&
1E-6<f-C?{x:c,y:1E-6>ga(v-c)?t:f}:1E-6>ga(C-f)&&1E-6<d-h?{x:1E-6>ga(t-f)?v:d,y:f}:1E-6>ga(h-d)&&1E-6<C-e?{x:d,y:1E-6>ga(v-d)?t:e}:1E-6>ga(C-e)&&1E-6<h-c?{x:1E-6>ga(t-e)?v:c,y:e}:null),l.site,null)),++m}c={cells:$c,edges:kd};jd=Cd=kd=$c=null;return c}function ih(a,b){return b.y-a.y||b.x-a.x}function ah(a){return a.x}function jh(a){return a.y}function Ff(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function zd(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),v=.5*(d+f);b=b.nodes;b[0]&&zd(a,b[0],
c,d,g,v);b[1]&&zd(a,b[1],g,d,e,v);b[2]&&zd(a,b[2],c,v,g,f);b[3]&&zd(a,b[3],g,v,e,f)}}function kh(a,b,c,d,e,f,g){var v=Infinity,h;(function Gc(a,C,k,l,x){if(!(C>f||k>g||l<d||x<e)){if(W=a.point){var W,q=b-a.x,p=c-a.y,q=q*q+p*p;q<v&&(q=Math.sqrt(v=q),d=b-q,e=c-q,f=b+q,g=c+q,h=W)}W=a.nodes;for(var q=.5*(C+l),p=.5*(k+x),m=(c>=p)<<1|b>=q,ta=m+4;m<ta;++m)if(a=W[m&3])switch(m&3){case 0:Gc(a,C,k,q,p);break;case 1:Gc(a,q,k,l,p);break;case 2:Gc(a,C,p,q,x);break;case 3:Gc(a,q,p,l,x)}}})(a,d,e,f,g);return h}function Ie(a,
b){a=y.rgb(a);b=y.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,v=b.b-e;return function(a){return"#"+db(Math.round(c+f*a))+db(Math.round(d+g*a))+db(Math.round(e+v*a))}}function Bf(a,b){var c={},d={},e;for(e in a)e in b?c[e]=Sc(a[e],b[e]):d[e]=a[e];for(e in b)e in a||(d[e]=b[e]);return function(a){for(e in c)d[e]=c[e](a);return d}}function pc(a,b){a=+a;b=+b;return function(c){return a*(1-c)+b*c}}function Gf(a,b){var c=Te.lastIndex=Ue.lastIndex=0,d,e,f,g=-1,v=[],h=[];a+="";for(b+="";(d=Te.exec(a))&&
(e=Ue.exec(b));)(f=e.index)>c&&(f=b.slice(c,f),v[g]?v[g]+=f:v[++g]=f),(d=d[0])===(e=e[0])?v[g]?v[g]+=e:v[++g]=e:(v[++g]=null,h.push({i:g,x:pc(d,e)})),c=Ue.lastIndex;c<b.length&&(f=b.slice(c),v[g]?v[g]+=f:v[++g]=f);return 2>v.length?h[0]?(b=h[0].x,function(a){return b(a)+""}):function(){return b}:(b=h.length,function(a){for(var c=0,d;c<b;++c)v[(d=h[c]).i]=d.x(a);return v.join("")})}function Sc(a,b){for(var c=y.interpolators.length,d;0<=--c&&!(d=y.interpolators[c](a,b)););return d}function Yd(a,b){var c=
[],d=[],e=a.length,f=b.length,g=Math.min(a.length,b.length),v;for(v=0;v<g;++v)c.push(Sc(a[v],b[v]));for(;v<e;++v)d[v]=a[v];for(;v<f;++v)d[v]=b[v];return function(a){for(v=0;v<g;++v)d[v]=c[v](a);return d}}function xf(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function yf(a){return function(b){return 1-a(1-b)}}function Ge(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function zf(a){return a*a}function Vg(a){return a*a*a}function Wg(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,c=b*
a;return 4*(.5>a?c:3*(a-b)+c-.75)}function Xg(a){return 1-Math.cos(a*Qa)}function Yg(a){return Math.pow(2,10*(a-1))}function Zg(a){return 1-Math.sqrt(1-a*a)}function $g(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Af(a,b){b-=a;return function(c){return Math.round(a+b*c)}}function Ke(a){var b=[a.a,a.b],c=[a.c,a.d],d=Cf(b),e=b[0]*c[0]+b[1]*c[1],f=-e;c[0]+=f*b[0];c[1]+=f*b[1];f=Cf(c)||0;b[0]*c[1]<
c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Fa;this.translate=[a.e,a.f];this.scale=[d,f];this.skew=f?Math.atan2(e,f)*Fa:0}function Cf(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);b&&(a[0]/=b,a[1]/=b);return b}function dd(a){return a.length?a.pop()+",":""}function bh(a,b,c,d){a[0]!==b[0]||a[1]!==b[1]?(c=c.push("translate(",null,",",null,")"),d.push({i:c-4,x:pc(a[0],b[0])},{i:c-2,x:pc(a[1],b[1])})):(b[0]||b[1])&&c.push("translate("+b+")")}function ch(a,
b,c,d){a!==b?(180<a-b?b+=360:180<b-a&&(a+=360),d.push({i:c.push(dd(c)+"rotate(",null,")")-2,x:pc(a,b)})):b&&c.push(dd(c)+"rotate("+b+")")}function dh(a,b,c,d){a!==b?d.push({i:c.push(dd(c)+"skewX(",null,")")-2,x:pc(a,b)}):b&&c.push(dd(c)+"skewX("+b+")")}function eh(a,b,c,d){a[0]!==b[0]||a[1]!==b[1]?(c=c.push(dd(c)+"scale(",null,",",null,")"),d.push({i:c-4,x:pc(a[0],b[0])},{i:c-2,x:pc(a[1],b[1])})):1===b[0]&&1===b[1]||c.push(dd(c)+"scale("+b+")")}function Df(a,b){var c=[],d=[];a=y.transform(a);b=y.transform(b);
bh(a.translate,b.translate,c,d);ch(a.rotate,b.rotate,c,d);dh(a.skew,b.skew,c,d);eh(a.scale,b.scale,c,d);a=b=null;return function(a){for(var b=-1,e=d.length,f;++b<e;)c[(f=d[b]).i]=f.x(a);return c.join("")}}function fh(a,b){b=(b-=a=+a)||1/b;return function(c){return(c-a)/b}}function gh(a,b){b=(b-=a=+a)||1/b;return function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function oh(a){var b=a.source;a=a.target;var c;var d=a;if(b===d)c=b;else{c=Tf(b);for(var d=Tf(d),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,
e=c.pop(),f=d.pop();c=g}for(d=[b];b!==c;)b=b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),a=a.parent;return d}function Tf(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;b.push(a);return b}function ph(a){a.fixed|=2}function qh(a){a.fixed&=-7}function rh(a){a.fixed|=4;a.px=a.x;a.py=a.y}function sh(a){a.fixed&=-5}function Uf(a,b,c){var d=0,e=0;a.charge=0;if(!a.leaf)for(var f=a.nodes,g=f.length,v=-1,h;++v<g;)h=f[v],null!=h&&(Uf(h,b,c),a.charge+=h.charge,d+=h.charge*h.cx,e+=h.charge*
h.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,d+=b*a.point.x,e+=b*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function Dd(a,b){y.rebind(a,b,"sort","children","value");a.nodes=a;a.links=th;return a}function Ed(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;0<=--d;)c.push(e[d])}function mc(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(g=a.children)&&(f=g.length))for(var e=
-1,f,g;++e<f;)c.push(g[e]);for(;null!=(a=d.pop());)b(a)}function uh(a){return a.children}function vh(a){return a.value}function wh(a,b){return b.value-a.value}function th(a){return y.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function xh(a){return a.x}function yh(a){return a.y}function zh(a,b,c){a.y0=b;a.y=c}function Ve(a){return y.range(a.length)}function We(a){var b=-1;a=a[0].length;for(var c=[];++b<a;)c[b]=0;return c}function Ah(a){for(var b=1,
c=0,d=a[0][1],e,f=a.length;b<f;++b)(e=a[b][1])>d&&(c=b,d=e);return c}function Bh(a){return a.reduce(Ch,0)}function Ch(a,b){return a+b[1]}function Dh(a,b){return Vf(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function Vf(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function Eh(a){return[y.min(a),y.max(a)]}function Fh(a,b){return a.value-b.value}function Xe(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function Wf(a,b){a._pack_next=b;
b._pack_prev=a}function Xf(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function Yf(a){function b(a){d=Math.min(a.x-a.r,d);e=Math.max(a.x+a.r,e);f=Math.min(a.y-a.r,f);g=Math.max(a.y+a.r,g)}if((c=a.children)&&(p=c.length)){var c,d=Infinity,e=-Infinity,f=Infinity,g=-Infinity,v,h,k,l,x,q,p;c.forEach(Gh);v=c[0];v.x=-v.r;v.y=0;b(v);if(1<p&&(h=c[1],h.x=h.r,h.y=0,b(h),2<p))for(k=c[2],Zf(v,h,k),b(k),Xe(v,k),v._pack_prev=k,Xe(k,h),h=v._pack_next,l=3;l<p;l++){Zf(v,h,k=c[l]);var m=0,t=1,u=1;
for(x=h._pack_next;x!==h;x=x._pack_next,t++)if(Xf(x,k)){m=1;break}if(1==m)for(q=v._pack_prev;q!==x._pack_prev&&!Xf(q,k);q=q._pack_prev,u++);m?(t<u||t==u&&h.r<v.r?Wf(v,h=x):Wf(v=q,h),l--):(Xe(v,k),h=k,b(k))}v=(d+e)/2;h=(f+g)/2;for(l=x=0;l<p;l++)k=c[l],k.x-=v,k.y-=h,x=Math.max(x,k.r+Math.sqrt(k.x*k.x+k.y*k.y));a.r=x;c.forEach(Hh)}}function Gh(a){a._pack_next=a._pack_prev=a}function Hh(a){delete a._pack_next;delete a._pack_prev}function $f(a,b,c,d){var e=a.children;a.x=b+=d*a.x;a.y=c+=d*a.y;a.r*=d;if(e){a=
-1;for(var f=e.length;++a<f;)$f(e[a],b,c,d)}}function Zf(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,v=e*e+f*f,g=g*g,d=d*d;b=.5+(d-g)/(2*v);g=Math.sqrt(Math.max(0,2*g*(d+v)-(d-=v)*d-g*g))/(2*v);c.x=a.x+b*e+g*f;c.y=a.y+b*f-g*e}else c.x=a.x+d,c.y=a.y}function ag(a,b){return a.parent==b.parent?1:2}function Ye(a){var b=a.children;return b.length?b[0]:a.t}function Ze(a){var b=a.children,c;return(c=b.length)?b[c-1]:a.t}function Ih(a){return 1+y.max(a,function(a){return a.y})}function Jh(a){return a.reduce(function(a,
b){return a+b.x},0)/a.length}function bg(a){var b=a.children;return b&&b.length?bg(b[0]):a}function cg(a){var b=a.children,c;return b&&(c=b.length)?cg(b[c-1]):a}function $e(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function dg(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];0>e&&(c+=e/2,e=0);0>f&&(d+=f/2,f=0);return{x:c,y:d,dx:e,dy:f}}function ld(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function ge(a){return a.rangeExtent?a.rangeExtent():ld(a.range())}function Kh(a,b,c,d){var e=
c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function he(a,b){var c=0,d=a.length-1,e=a[c],f=a[d],g;f<e&&(g=c,c=d,d=g,g=e,e=f,f=g);a[c]=b.floor(e);a[d]=b.ceil(f);return a}function eg(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:Lh}function Mh(a,b,c,d){var e=[],f=[],g=0,v=Math.min(a.length,b.length)-1;a[v]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++g<=v;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=
y.bisect(a,b,1,v)-1;return f[c](e[c](b))}}function fg(a,b,c,d){function e(){var e=2<Math.min(a.length,b.length)?Mh:Kh,h=d?gh:fh;g=e(a,b,h,c);v=e(b,a,h,Sc);return f}function f(a){return g(a)}var g,v;f.invert=function(a){return v(a)};f.domain=function(b){if(!arguments.length)return a;a=b.map(Number);return e()};f.range=function(a){if(!arguments.length)return b;b=a;return e()};f.rangeRound=function(a){return f.range(a).interpolate(Af)};f.clamp=function(a){if(!arguments.length)return d;d=a;return e()};
f.interpolate=function(a){if(!arguments.length)return c;c=a;return e()};f.ticks=function(b){return y.range.apply(y,Mc(a,b))};f.tickFormat=function(b,c){return af(a,b,c)};f.nice=function(b){gg(a,b);return e()};f.copy=function(){return fg(a,b,c,d)};return e()}function bf(a,b){return y.rebind(a,b,"range","rangeRound","interpolate","clamp")}function gg(a,b){he(a,eg(Mc(a,b)[2]));he(a,eg(Mc(a,b)[2]));return a}function Mc(a,b){null==b&&(b=10);var c=ld(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/
Math.LN10)),d=b/d*e;.15>=d?e*=10:.35>=d?e*=5:.75>=d&&(e*=2);c[0]=Math.ceil(c[0]/e)*e;c[1]=Math.floor(c[1]/e)*e+.5*e;c[2]=e;return c}function af(a,b,c){a=Mc(a,b);if(c){b=Mf.exec(c);b.shift();if("s"===b[8]){var d=y.formatPrefix(Math.max(ga(a[0]),ga(a[1])));b[7]||(b[7]="."+ie(d.scale(a[2])));b[8]="f";c=y.format(b.join(""));return function(a){return c(d.scale(a))+d.symbol}}b[7]||(b[7]="."+Nh(b[8],a));c=b.join("")}else c=",."+ie(a[2])+"f";return y.format(c)}function ie(a){return-Math.floor(Math.log(a)/
Math.LN10+.01)}function Nh(a,b){var c=ie(b[2]);return a in Oh?Math.abs(c-ie(Math.max(ga(b[0]),ga(b[1]))))+ +("e"!==a):c-2*("%"===a)}function hg(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}g.invert=function(b){return f(a.invert(b))};g.domain=function(b){if(!arguments.length)return d;c=0<=b[0];a.domain((d=b.map(Number)).map(e));return g};g.base=function(c){if(!arguments.length)return b;
b=+c;a.domain(d.map(e));return g};g.nice=function(){var b=he(d.map(e),c?Math:Ph);a.domain(b);d=b.map(f);return g};g.ticks=function(){var a=ld(d),g=[],v=a[0],a=a[1],h=Math.floor(e(v)),k=Math.ceil(e(a)),l=b%1?2:b;if(isFinite(k-h)){if(c){for(;h<k;h++)for(var x=1;x<l;x++)g.push(f(h)*x);g.push(f(h))}else for(g.push(f(h));h++<k;)for(x=l-1;0<x;x--)g.push(f(h)*x);for(h=0;g[h]<v;h++);for(k=g.length;g[k-1]>a;k--);g=g.slice(h,k)}return g};g.tickFormat=function(a,c){if(!arguments.length)return ig;2>arguments.length?
c=ig:"function"!==typeof c&&(c=y.format(c));var d=Math.max(1,b*a/g.ticks().length);return function(a){var g=a/f(Math.round(e(a)));g*b<b-.5&&(g*=b);return g<=d?c(a):""}};g.copy=function(){return hg(a.copy(),b,c,d)};return bf(g,a)}function jg(a,b,c){function d(b){return a(e(b))}var e=je(b),f=je(1/b);d.invert=function(b){return f(a.invert(b))};d.domain=function(b){if(!arguments.length)return c;a.domain((c=b.map(Number)).map(e));return d};d.ticks=function(a){return y.range.apply(y,Mc(c,a))};d.tickFormat=
function(a,b){return af(c,a,b)};d.nice=function(a){return d.domain(gg(c,a))};d.exponent=function(g){if(!arguments.length)return b;e=je(b=g);f=je(1/b);a.domain(c.map(e));return d};d.copy=function(){return jg(a.copy(),b,c)};return bf(d,a)}function je(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function kg(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return y.range(a.length).map(function(a){return b+c*a})}var e,f,g;c.domain=
function(d){if(!arguments.length)return a;a=[];e=new h;for(var f=-1,g=d.length,v;++f<g;)e.has(v=d[f])||e.set(v,a.push(v));return c[b.t].apply(c,b.a)};c.range=function(a){if(!arguments.length)return f;f=a;g=0;b={t:"range",a:arguments};return c};c.rangePoints=function(e,v){2>arguments.length&&(v=0);var h=e[0],k=e[1],k=2>a.length?(h=(h+k)/2,0):(k-h)/(a.length-1+v);f=d(h+k*v/2,k);g=0;b={t:"rangePoints",a:arguments};return c};c.rangeRoundPoints=function(e,v){2>arguments.length&&(v=0);var h=e[0],k=e[1],
l=2>a.length?(h=k=Math.round((h+k)/2),0):(k-h)/(a.length-1+v)|0;f=d(h+Math.round(l*v/2+(k-h-(a.length-1+v)*l)/2),l);g=0;b={t:"rangeRoundPoints",a:arguments};return c};c.rangeBands=function(e,v,h){2>arguments.length&&(v=0);3>arguments.length&&(h=v);var k=e[1]<e[0],l=e[k-0],x=(e[1-k]-l)/(a.length-v+2*h);f=d(l+x*h,x);k&&f.reverse();g=x*(1-v);b={t:"rangeBands",a:arguments};return c};c.rangeRoundBands=function(e,v,h){2>arguments.length&&(v=0);3>arguments.length&&(h=v);var k=e[1]<e[0],l=e[k-0],x=e[1-k],
C=Math.floor((x-l)/(a.length-v+2*h));f=d(l+Math.round((x-l-(a.length-v)*C)/2),C);k&&f.reverse();g=Math.round(C*(1-v));b={t:"rangeRoundBands",a:arguments};return c};c.rangeBand=function(){return g};c.rangeExtent=function(){return ld(b.a[0])};c.copy=function(){return kg(a,b)};return c.domain(a)}function lg(a,b){function c(){var c=0,e=b.length;for(v=[];++c<e;)v[c-1]=y.quantile(a,c/e);return d}function d(a){if(!isNaN(a=+a))return b[y.bisect(v,a)]}var v;d.domain=function(b){if(!arguments.length)return a;
a=b.map(f).filter(g).sort(e);return c()};d.range=function(a){if(!arguments.length)return b;b=a;return c()};d.quantiles=function(){return v};d.invertExtent=function(c){c=b.indexOf(c);return 0>c?[NaN,NaN]:[0<c?v[c-1]:a[0],c<v.length?v[c]:a[a.length-1]]};d.copy=function(){return lg(a,b)};return c()}function mg(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){f=c.length/(b-a);g=c.length-1;return d}var f,g;d.domain=function(c){if(!arguments.length)return[a,b];a=+c[0];
b=+c[c.length-1];return e()};d.range=function(a){if(!arguments.length)return c;c=a;return e()};d.invertExtent=function(b){b=c.indexOf(b);b=0>b?NaN:b/f+a;return[b,b+1/f]};d.copy=function(){return mg(a,b,c)};return e()}function ng(a,b){function c(c){if(c<=c)return b[y.bisect(a,c)]}c.domain=function(b){if(!arguments.length)return a;a=b;return c};c.range=function(a){if(!arguments.length)return b;b=a;return c};c.invertExtent=function(c){c=b.indexOf(c);return[a[c-1],a[c]]};c.copy=function(){return ng(a,
b)};return c}function og(a){function b(a){return+a}b.invert=b;b.domain=b.range=function(c){if(!arguments.length)return a;a=c.map(b);return b};b.ticks=function(b){return y.range.apply(y,Mc(a,b))};b.tickFormat=function(b,c){return af(a,b,c)};b.copy=function(){return og(a)};return b}function Qh(){return 0}function Rh(a){return a.innerRadius}function Sh(a){return a.outerRadius}function pg(a){return a.startAngle}function qg(a){return a.endAngle}function Th(a){return a&&a.padAngle}function ke(a,b,c,d){return 0<
(a-c)*b-(b-d)*a?0:1}function le(a,b,c,d,e){var f=a[0]-b[0],g=a[1]-b[1];e=(e?d:-d)/Math.sqrt(f*f+g*g);var g=e*g,f=-e*f,v=a[0]+g,h=a[1]+f,k=b[0]+g,l=b[1]+f;a=(v+k)/2;b=(h+l)/2;e=k-v;var x=l-h,q=e*e+x*x;d=c-d;var l=v*l-k*h,C=(0>x?-1:1)*Math.sqrt(Math.max(0,d*d*q-l*l)),v=(l*x-e*C)/q,h=(-l*e-x*C)/q,k=(l*x+e*C)/q;e=(-l*e+x*C)/q;x=v-a;q=h-b;a=k-a;b=e-b;x*x+q*q>a*a+b*b&&(v=k,h=e);return[[v-g,h-f],[v*c/d,h*c/d]]}function rg(a){function b(b){function g(){h.push("M",f(a(k),v))}for(var h=[],k=[],l=-1,x=b.length,
q,C=da(c),p=da(d);++l<x;)e.call(this,q=b[l],l)?k.push([+C.call(this,q,l),+p.call(this,q,l)]):k.length&&(g(),k=[]);k.length&&g();return h.length?h.join(""):null}var c=Ec,d=Qc,e=wc,f=dc,g=f.key,v=.7;b.x=function(a){if(!arguments.length)return c;c=a;return b};b.y=function(a){if(!arguments.length)return d;d=a;return b};b.defined=function(a){if(!arguments.length)return e;e=a;return b};b.interpolate=function(a){if(!arguments.length)return g;g="function"===typeof a?f=a:(f=cf.get(a)||dc).key;return b};b.tension=
function(a){if(!arguments.length)return v;v=a;return b};return b}function dc(a){return 1<a.length?a.join("L"):a+"Z"}function sg(a){return a.join("L")+"Z"}function df(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function ef(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function me(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return dc(a);var c=a.length!=b.length,
d="",e=a[0],f=a[1],g=b[0],v=g,h=1;c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],h=2);if(1<b.length)for(v=b[1],f=a[h],h++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-v[0])+","+(f[1]-v[1])+","+f[0]+","+f[1],e=2;e<b.length;e++,h++)f=a[h],v=b[e],d+="S"+(f[0]-v[0])+","+(f[1]-v[1])+","+f[0]+","+f[1];c&&(c=a[h],d+="Q"+(f[0]+2*v[0]/3)+","+(f[1]+2*v[1]/3)+","+c[0]+","+c[1]);return d}function ff(a,b){for(var c=[],d=(1-b)/2,e,f=a[0],g=a[1],v=1,h=a.length;++v<h;)e=f,f=g,g=a[v],c.push([d*
(g[0]-e[0]),d*(g[1]-e[1])]);return c}function tg(a){if(3>a.length)return dc(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],v=[f,f,f,d[1]],e=[e,",",f,"L",Tb(Nc,g),",",Tb(Nc,v)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),v.shift(),v.push(d[1]),gf(e,g,v);a.pop();e.push("L",d);return e.join("")}function Tb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function gf(a,b,c){a.push("C",Tb(ug,b),",",Tb(ug,c),",",Tb(vg,b),",",Tb(vg,c),",",Tb(Nc,b),",",Tb(Nc,c))}function hf(a,
b){return(b[1]-a[1])/(b[0]-a[0])}function wg(a){for(var b,c=-1,d=a.length,e,f;++c<d;)b=a[c],e=b[0],f=b[1]-Qa,b[0]=e*Math.cos(f),b[1]=e*Math.sin(f);return a}function xg(a){function b(b){function h(){q.push("M",v(a(m),x),l,k(a(p.reverse()),x),"Z")}for(var q=[],p=[],m=[],C=-1,t=b.length,u,n=da(c),W=da(e),K=c===d?function(){return w}:da(d),r=e===f?function(){return ta}:da(f),w,ta;++C<t;)g.call(this,u=b[C],C)?(p.push([w=+n.call(this,u,C),ta=+W.call(this,u,C)]),m.push([+K.call(this,u,C),+r.call(this,u,
C)])):p.length&&(h(),p=[],m=[]);p.length&&h();return q.length?q.join(""):null}var c=Ec,d=Ec,e=0,f=Qc,g=wc,v=dc,h=v.key,k=v,l="L",x=.7;b.x=function(a){if(!arguments.length)return d;c=d=a;return b};b.x0=function(a){if(!arguments.length)return c;c=a;return b};b.x1=function(a){if(!arguments.length)return d;d=a;return b};b.y=function(a){if(!arguments.length)return f;e=f=a;return b};b.y0=function(a){if(!arguments.length)return e;e=a;return b};b.y1=function(a){if(!arguments.length)return f;f=a;return b};
b.defined=function(a){if(!arguments.length)return g;g=a;return b};b.interpolate=function(a){if(!arguments.length)return h;h="function"===typeof a?v=a:(v=cf.get(a)||dc).key;k=v.reverse||v;l=v.closed?"M":"L";return b};b.tension=function(a){if(!arguments.length)return x;x=a;return b};return b}function Uh(a){return a.radius}function yg(a){return[a.x,a.y]}function Vh(a){return function(){var b=a.apply(this,arguments),c=b[0],b=b[1]-Qa;return[c*Math.cos(b),c*Math.sin(b)]}}function Wh(){return 64}function Xh(){return"circle"}
function zg(a){a=Math.sqrt(a/ea);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function Ag(a){return function(){var b,c,d;(b=this[a])&&(d=b[c=b.active])&&(d.timer.c=null,d.timer.t=NaN,--b.count?delete b[c]:delete this[a],b.active+=.5,d.event&&d.event.interrupt.call(this,this.__data__,d.index))}}function Fd(a,b,c){Zd(a,bb);a.namespace=b;a.id=c;return a}function jf(a,b,c,d){var e=a.id,f=a.namespace;return qa(a,"function"===typeof c?function(a,g,v){a[f][e].tween.set(b,d(c.call(a,
a.__data__,g,v)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function Yh(a){null==a&&(a="");return function(){this.textContent=a}}function kf(a){return null==a?"__transition__":"__transition_"+a+"__"}function ne(a,b,c,d,e){function f(a){var b=l.delay;q.t=b+x;if(b<=a)return g(a-b);q.c=g}function g(c){var e=k.active,f=k[e];f&&(f.timer.c=null,f.timer.t=NaN,--k.count,delete k[e],f.event&&f.event.interrupt.call(a,a.__data__,f.index));for(var g in k)+g<d&&(e=k[g],e.timer.c=null,e.timer.t=NaN,--k.count,
delete k[g]);q.c=v;cb(function(){q.c&&v(c||1)&&(q.c=null,q.t=NaN);return 1},0,x);k.active=d;l.event&&l.event.start.call(a,a.__data__,b);C=[];l.tween.forEach(function(c,d){(d=d.call(a,a.__data__,b))&&C.push(d)});m=l.ease;p=l.duration}function v(e){e/=p;for(var f=m(e),g=C.length;0<g;)C[--g].call(a,f);if(1<=e)return l.event&&l.event.end.call(a,a.__data__,b),--k.count?delete k[d]:delete a[c],1}var k=a[c]||(a[c]={active:0,count:0}),l=k[d],x,q,p,m,C;l||(x=e.time,q=cb(f,0,x),l=k[d]={tween:new h,time:x,timer:q,
delay:e.delay,duration:e.duration,ease:e.ease,index:b},e=null,++k.count)}function Zh(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function $h(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function lf(a){return a.toISOString()}function mf(a,b,c){function d(b){return a(b)}function e(a,c){var d=(a[1]-a[0])/c,e=y.bisect(oe,d);return e==oe.length?[b.year,Mc(a.map(function(a){return a/31536E6}),c)[2]]:
e?b[d/oe[e-1]<oe[e]/d?e-1:e]:[ai,Mc(a,c)[2]]}d.invert=function(b){return ad(a.invert(b))};d.domain=function(b){if(!arguments.length)return a.domain().map(ad);a.domain(b);return d};d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,ad(+c+1),b).length}var f=d.domain(),g=ld(f);if(g=null==a?e(g,10):"number"===typeof a&&e(g,a))a=g[0],b=g[1];return d.domain(he(f,1<b?{floor:function(b){for(;c(b=a.floor(b));)b=ad(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=ad(+b+1);return b}}:a))};
d.ticks=function(a,b){var c=ld(d.domain()),f=null==a?e(c,10):"number"===typeof a?e(c,a):!a.range&&[{range:a},b];f&&(a=f[0],b=f[1]);return a.range(c[0],ad(+c[1]+1),1>b?1:b)};d.tickFormat=function(){return c};d.copy=function(){return mf(a.copy(),b,c)};return bf(d,a)}function ad(a){return new Date(a)}function bi(a){return JSON.parse(a.responseText)}function ci(a){var b=tb.createRange();b.selectNode(tb.body);return b.createContextualFragment(a.responseText)}var y={version:"3.5.17"},Bg=[].slice,kc=function(a){return Bg.call(a)},
tb=this.document;if(tb)try{kc(tb.documentElement.childNodes)[0].nodeType}catch(v){kc=function(a){for(var b=a.length,c=Array(b);b--;)c[b]=a[b];return c}}Date.now||(Date.now=function(){return+new Date});if(tb)try{tb.createElement("DIV").style.setProperty("opacity",0,"")}catch(v){var pe=this.Element.prototype,di=pe.setAttribute,ei=pe.setAttributeNS,Cg=this.CSSStyleDeclaration.prototype,fi=Cg.setProperty;pe.setAttribute=function(a,b){di.call(this,a,b+"")};pe.setAttributeNS=function(a,b,c){ei.call(this,
a,b,c+"")};Cg.setProperty=function(a,b,c){fi.call(this,a,b+"",c)}}y.ascending=e;y.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};y.min=function(a,b){var c=-1,d=a.length,e,f;if(1===arguments.length){for(;++c<d;)if(null!=(f=a[c])&&f>=f){e=f;break}for(;++c<d;)null!=(f=a[c])&&e>f&&(e=f)}else{for(;++c<d;)if(null!=(f=b.call(a,a[c],c))&&f>=f){e=f;break}for(;++c<d;)null!=(f=b.call(a,a[c],c))&&e>f&&(e=f)}return e};y.max=function(a,b){var c=-1,d=a.length,e,f;if(1===arguments.length){for(;++c<d;)if(null!=
(f=a[c])&&f>=f){e=f;break}for(;++c<d;)null!=(f=a[c])&&f>e&&(e=f)}else{for(;++c<d;)if(null!=(f=b.call(a,a[c],c))&&f>=f){e=f;break}for(;++c<d;)null!=(f=b.call(a,a[c],c))&&f>e&&(e=f)}return e};y.extent=function(a,b){var c=-1,d=a.length,e,f,g;if(1===arguments.length){for(;++c<d;)if(null!=(f=a[c])&&f>=f){e=g=f;break}for(;++c<d;)null!=(f=a[c])&&(e>f&&(e=f),g<f&&(g=f))}else{for(;++c<d;)if(null!=(f=b.call(a,a[c],c))&&f>=f){e=g=f;break}for(;++c<d;)null!=(f=b.call(a,a[c],c))&&(e>f&&(e=f),g<f&&(g=f))}return[e,
g]};y.sum=function(a,b){var c=0,d=a.length,e,f=-1;if(1===arguments.length)for(;++f<d;)isNaN(e=+a[f])||(c+=e);else for(;++f<d;)isNaN(e=+b.call(a,a[f],f))||(c+=e);return c};y.mean=function(a,b){var c=0,d=a.length,e,g=-1,v=d;if(1===arguments.length)for(;++g<d;)isNaN(e=f(a[g]))?--v:c+=e;else for(;++g<d;)isNaN(e=f(b.call(a,a[g],g)))?--v:c+=e;if(v)return c/v};y.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1];return(c-=d)?e+c*(a[d]-e):e};y.median=function(a,b){var c=[],d=a.length,
g,v=-1;if(1===arguments.length)for(;++v<d;)isNaN(g=f(a[v]))||c.push(g);else for(;++v<d;)isNaN(g=f(b.call(a,a[v],v)))||c.push(g);if(c.length)return y.quantile(c.sort(e),.5)};y.variance=function(a,b){var c=a.length,d=0,e,g,v=0,h=-1,k=0;if(1===arguments.length)for(;++h<c;)isNaN(e=f(a[h]))||(g=e-d,d+=g/++k,v+=g*(e-d));else for(;++h<c;)isNaN(e=f(b.call(a,a[h],h)))||(g=e-d,d+=g/++k,v+=g*(e-d));if(1<k)return v/(k-1)};y.deviation=function(){var a=y.variance.apply(this,arguments);return a?Math.sqrt(a):a};
var Dg=d(e);y.bisectLeft=Dg.left;y.bisect=y.bisectRight=Dg.right;y.bisector=function(a){return d(1===a.length?function(b,c){return e(a(b),c)}:a)};y.shuffle=function(a,b,c){3>(d=arguments.length)&&(c=a.length,2>d&&(b=0));for(var d=c-b,e,f;d;)f=Math.random()*d--|0,e=a[d+b],a[d+b]=a[f+b],a[f+b]=e;return a};y.permute=function(a,b){for(var c=b.length,d=Array(c);c--;)d[c]=a[b[c]];return d};y.pairs=function(a){for(var b=0,c=a.length-1,d=a[0],e=Array(0>c?0:c);b<c;)e[b]=[d,d=a[++b]];return e};y.transpose=
function(a){if(!(g=a.length))return[];for(var c=-1,d=y.min(a,b),e=Array(d);++c<d;)for(var f=-1,g,v=e[c]=Array(g);++f<g;)v[f]=a[f][c];return e};y.zip=function(){return y.transpose(arguments)};y.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};y.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};y.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};y.merge=function(a){var b=a.length,c;c=-1;for(var d=0,e,f;++c<b;)d+=a[c].length;for(e=Array(d);0<=--b;)for(f=
a[b],c=f.length;0<=--c;)e[--d]=f[c];return e};var ga=Math.abs;y.range=function(a,b,c){3>arguments.length&&(c=1,2>arguments.length&&(b=a,a=0));if(Infinity===(b-a)/c)throw Error("infinite range");var d=[],e;e=ga(c);for(var f=1;e*f%1;)f*=10;e=f;var f=-1,g;a*=e;b*=e;c*=e;if(0>c)for(;(g=a+c*++f)>b;)d.push(g/e);else for(;(g=a+c*++f)<b;)d.push(g/e);return d};y.map=function(a,b){var c=new h;if(a instanceof h)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d=-1,e=a.length,f;if(1===arguments.length)for(;++d<
e;)c.set(d,a[d]);else for(;++d<e;)c.set(b.call(a,f=a[d],d),f)}else for(d in a)c.set(d,a[d]);return c};c(h,{has:t,get:function(a){return this._[n(a)]},set:function(a,b){return this._[n(a)]=b},remove:w,keys:l,values:function(){var a=[],b;for(b in this._)a.push(this._[b]);return a},entries:function(){var a=[],b;for(b in this._)a.push({key:m(b),value:this._[b]});return a},size:p,empty:u,forEach:function(a){for(var b in this._)a.call(this,m(b),this._[b])}});y.nest=function(){function a(b,e,v){if(v>=d.length)return g?
g.call(c,e):f?e.sort(f):e;for(var k=-1,l=e.length,x=d[v++],q,p,m=new h,C;++k<l;)(C=m.get(q=x(p=e[k])))?C.push(p):m.set(q,[p]);b?(p=b(),e=function(c,d){p.set(c,a(b,d,v))}):(p={},e=function(c,d){p[c]=a(b,d,v)});m.forEach(e);return p}function b(a,c){if(c>=d.length)return a;var f=[],g=e[c++];a.forEach(function(a,d){f.push({key:a,values:b(d,c)})});return g?f.sort(function(a,b){return g(a.key,b.key)}):f}var c={},d=[],e=[],f,g;c.map=function(b,c){return a(c,b,0)};c.entries=function(c){return b(a(y.map,c,
0),0)};c.key=function(a){d.push(a);return c};c.sortKeys=function(a){e[d.length-1]=a;return c};c.sortValues=function(a){f=a;return c};c.rollup=function(a){g=a;return c};return c};y.set=function(a){var b=new k;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b};c(k,{has:t,add:function(a){this._[n(a+="")]=!0;return a},remove:w,values:l,size:p,empty:u,forEach:function(a){for(var b in this._)a.call(this,m(b))}});y.behavior={};y.rebind=function(a,b){for(var c=1,d=arguments.length,e;++c<d;)a[e=arguments[c]]=
A(a,b,b[e]);return a};var Hf="webkit ms moz Moz o O".split(" ");y.dispatch=function(){for(var a=new E,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=D(a);return a};E.prototype.on=function(a,b){var c=a.indexOf("."),d="";0<=c&&(d=a.slice(c+1),a=a.slice(0,c));if(a)return 2>arguments.length?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)if(this.hasOwnProperty(a))this[a].on(d,null);return this}};y.event=null;y.requote=function(a){return a.replace(gi,"\\$&")};var gi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,
Zd={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},Ne=function(a,b){return b.querySelector(a)},Oe=function(a,b){return b.querySelectorAll(a)},$d=function(a,b){var c=a.matches||a[z(a,"matchesSelector")];$d=function(a,b){return c.call(a,b)};return $d(a,b)};"function"===typeof Sizzle&&(Ne=function(a,b){return Sizzle(a,b)[0]||null},Oe=Sizzle,$d=Sizzle.matchesSelector);y.selection=function(){return y.select(tb.documentElement)};var wa=y.selection.prototype=[];wa.select=
function(a){var b=[],c,d,e,f;a=I(a);for(var g=-1,v=this.length;++g<v;){b.push(c=[]);c.parentNode=(e=this[g]).parentNode;for(var h=-1,k=e.length;++h<k;)(f=e[h])?(c.push(d=a.call(f,f.__data__,h,g)),d&&"__data__"in f&&(d.__data__=f.__data__)):c.push(null)}return J(b)};wa.selectAll=function(a){var b=[],c,d;a=U(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],v=-1,h=g.length;++v<h;)if(d=g[v])b.push(c=kc(a.call(d,d.__data__,v,e))),c.parentNode=d;return J(b)};var nf={svg:"http://www.w3.org/2000/svg",
xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};y.ns={prefix:nf,qualify:function(a){var b=a.indexOf(":"),c=a;0<=b&&"xmlns"!==(c=a.slice(0,b))&&(a=a.slice(b+1));return nf.hasOwnProperty(c)?{space:nf[c],local:a}:a}};wa.attr=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node();a=y.ns.qualify(a);return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(O(b,
a[b]));return this}return this.each(O(a,b))};wa.classed=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node(),d=(a=(a+"").trim().split(/^|\s+/)).length,e=-1;if(b=c.classList)for(;++e<d;){if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!aa(a[e]).test(b))return!1;return!0}for(b in a)this.each(ia(b,a[b]));return this}return this.each(ia(a,b))};wa.style=function(b,c,d){var e=arguments.length;if(3>e){if("string"!==typeof b){2>e&&(c="");for(d in b)this.each(R(d,
b[d],c));return this}if(2>e)return e=this.node(),a(e).getComputedStyle(e,null).getPropertyValue(b);d=""}return this.each(R(b,c,d))};wa.property=function(a,b){if(2>arguments.length){if("string"===typeof a)return this.node()[a];for(b in a)this.each(L(b,a[b]));return this}return this.each(L(a,b))};wa.text=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=
a}):this.node().textContent};wa.html=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};wa.append=function(a){a=ja(a);return this.select(function(){return this.appendChild(a.apply(this,arguments))})};wa.insert=function(a,b){a=ja(a);b=I(b);return this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,
arguments)||null)})};wa.remove=function(){return this.each(H)};wa.data=function(a,b){function c(a,c){var d,e=a.length,f=c.length,g=Math.min(e,f),x=Array(f),q=Array(f),p=Array(e),m,t;if(b){var g=new h,u=Array(e),n;for(d=-1;++d<e;)if(m=a[d])g.has(n=b.call(m,m.__data__,d))?p[d]=m:g.set(n,m),u[d]=n;for(d=-1;++d<f;)(m=g.get(n=b.call(c,t=c[d],d)))?!0!==m&&(x[d]=m,m.__data__=t):q[d]={__data__:t},g.set(n,!0);for(d=-1;++d<e;)d in u&&!0!==g.get(u[d])&&(p[d]=a[d])}else{for(d=-1;++d<g;)m=a[d],t=c[d],m?(m.__data__=
t,x[d]=m):q[d]={__data__:t};for(;d<f;++d)q[d]={__data__:c[d]};for(;d<e;++d)p[d]=a[d]}q.update=x;q.parentNode=x.parentNode=p.parentNode=a.parentNode;v.push(q);k.push(x);l.push(p)}var d=-1,e=this.length,f,g;if(!arguments.length){for(a=Array(e=(f=this[0]).length);++d<e;)if(g=f[d])a[d]=g.__data__;return a}var v=ua([]),k=J([]),l=J([]);if("function"===typeof a)for(;++d<e;)c(f=this[d],a.call(f,f.parentNode.__data__,d));else for(;++d<e;)c(f=this[d],a);k.enter=function(){return v};k.exit=function(){return l};
return k};wa.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};wa.filter=function(a){var b=[],c,d,e;"function"!==typeof a&&(a=Y(a));for(var f=0,g=this.length;f<g;f++){b.push(c=[]);c.parentNode=(d=this[f]).parentNode;for(var h=0,v=d.length;h<v;h++)(e=d[h])&&a.call(e,e.__data__,h,f)&&c.push(e)}return J(b)};wa.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c=this[a],d=c.length-1,e=c[d],f;0<=--d;)if(f=c[d])e&&e!==f.nextSibling&&e.parentNode.insertBefore(f,
e),e=f;return this};wa.sort=function(a){a=ka.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};wa.each=function(a){return qa(this,function(b,c,d){a.call(b,b.__data__,c,d)})};wa.call=function(a){var b=kc(arguments);a.apply(b[0]=this,b);return this};wa.empty=function(){return!this.node()};wa.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null};wa.size=function(){var a=0;qa(this,function(){++a});
return a};var xc=[];y.selection.enter=ua;y.selection.enter.prototype=xc;xc.append=wa.append;xc.empty=wa.empty;xc.node=wa.node;xc.call=wa.call;xc.size=wa.size;xc.select=function(a){for(var b=[],c,d,e,f,g,h=-1,v=this.length;++h<v;){e=(f=this[h]).update;b.push(c=[]);c.parentNode=f.parentNode;for(var k=-1,l=f.length;++k<l;)(g=f[k])?(c.push(e[k]=d=a.call(f.parentNode,g.__data__,k,h)),d.__data__=g.__data__):c.push(null)}return J(b)};xc.insert=function(a,b){2>arguments.length&&(b=T(this));return wa.insert.call(this,
a,b)};y.select=function(a){var b;"string"===typeof a?(b=[Ne(a,tb)],b.parentNode=tb.documentElement):(b=[a],b.parentNode=a&&(a.ownerDocument||a.document||a).documentElement);return J([b])};y.selectAll=function(a){"string"===typeof a?(a=kc(Oe(a,tb)),a.parentNode=tb.documentElement):(a=kc(a),a.parentNode=null);return J([a])};wa.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b=!1);for(c in a)this.each(ba(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;
c=!1}return this.each(ba(a,b,c))};var Pe=y.map({mouseenter:"mouseover",mouseleave:"mouseout"});tb&&Pe.forEach(function(a){"on"+a in tb&&Pe.remove(a)});var Wc,mh=0;y.mouse=function(a){return Q(a,G())};var Qe=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;y.touch=function(a,b,c){3>arguments.length&&(c=b,b=G().changedTouches);if(b)for(var d=0,e=b.length,f;d<e;++d)if((f=b[d]).identifier===c)return Q(a,f)};y.behavior.drag=function(){function b(){this.on("mousedown.drag",f).on("touchstart.drag",
g)}function c(a,b,c,f,g){return function(){var h=y.event.target.correspondingElement||y.event.target,v=this.parentNode,k=d.of(this,arguments),l=0,x=a(),q=".drag"+(null==x?"":"-"+x),p,m=y.select(c(h)).on(f+q,function(){var a=b(v,x),c,d;a&&(c=a[0]-u[0],d=a[1]-u[1],l|=c|d,u=a,k({type:"drag",x:a[0]+p[0],y:a[1]+p[1],dx:c,dy:d}))}).on(g+q,function(){b(v,x)&&(m.on(f+q,null).on(g+q,null),t(l),k({type:"dragend"}))}),t=M(h),u=b(v,x);e?(p=e.apply(this,arguments),p=[p.x-u[0],p.y-u[1]]):p=[0,0];k({type:"dragstart"})}}
var d=P(b,"drag","dragstart","dragend"),e=null,f=c(B,y.mouse,a,"mousemove","mouseup"),g=c(Z,y.touch,q,"touchmove","touchend");b.origin=function(a){if(!arguments.length)return e;e=a;return b};return y.rebind(b,d,"on")};y.touches=function(a,b){2>arguments.length&&(b=G().touches);return b?kc(b).map(function(b){var c=Q(a,b);c.identifier=b.identifier;return c}):[]};var ea=Math.PI,Hb=2*ea,hi=Hb-1E-6,Qa=ea/2,fa=ea/180,Fa=180/ea,Gd=Math.SQRT2;y.interpolateZoom=function(a,b){var c=a[0],d=a[1],e=a[2],f=b[2],
g=b[0]-c,h=b[1]-d,v=g*g+h*h,k,l;if(1E-12>v)l=Math.log(f/e)/Gd,k=function(a){return[c+a*g,d+a*h,e*Math.exp(Gd*a*l)]};else{var x=Math.sqrt(v);k=(f*f-e*e+4*v)/(4*e*x);var f=(f*f-e*e-4*v)/(4*f*x),q=Math.log(Math.sqrt(k*k+1)-k);l=(Math.log(Math.sqrt(f*f+1)-f)-q)/Gd;k=function(a){a*=l;var b=La(q),f=e/(2*x),v,k=Gd*a+q;v=((k=Math.exp(2*k))-1)/(k+1);var p=q,k=((p=Math.exp(p))-1/p)/2,f=f*(b*v-k);return[c+f*g,d+f*h,e*b/La(Gd*a+q)]}}k.duration=1E3*l;return k};y.behavior.zoom=function(){function b(a){a.on("mousedown.zoom",
x).on(of+".zoom",p).on("dblclick.zoom",m).on("touchstart.zoom",q)}function c(a){return[(a[0]-u.x)/u.k,(a[1]-u.y)/u.k]}function d(a){u.k=Math.max(w[0],Math.min(w[1],a))}function e(a,b){b=[b[0]*u.k+u.x,b[1]*u.k+u.y];u.x+=a[0]-b[0];u.y+=a[1]-b[1]}function f(a,c,f,g){a.__chart__={x:u.x,y:u.y,k:u.k};d(Math.pow(2,g));e(n=c,f);a=y.select(a);0<A&&(a=a.transition().duration(A));a.call(b.event)}function g(){E&&E.domain(ma.range().map(function(a){return(a-u.x)/u.k}).map(ma.invert));L&&L.domain(R.range().map(function(a){return(a-
u.y)/u.k}).map(R.invert))}function h(a){z++||a({type:"zoomstart"})}function k(a){g();a({type:"zoom",scale:u.k,translate:[u.x,u.y]})}function l(a){--z||(a({type:"zoomend"}),n=null)}function x(){var b=this,d=D.of(b,arguments),f=0,g=y.select(a(b)).on("mousemove.zoom",function(){f=1;e(y.mouse(b),v);k(d)}).on("mouseup.zoom",function(){g.on("mousemove.zoom",null).on("mouseup.zoom",null);x(f);l(d)}),v=c(y.mouse(b)),x=M(b);qe.call(b);h(d)}function q(){function a(){var a=y.touches(p);K=u.k;a.forEach(function(a){a.identifier in
t&&(t[a.identifier]=c(a))});return a}function b(){var b=y.event.target;y.select(b).on(r,g).on(w,v);A.push(b);for(var b=y.event.changedTouches,c=0,d=b.length;c<d;++c)t[b[c].identifier]=null;c=a();d=Date.now();1===c.length?(500>d-Aa&&(b=c[0],f(p,b,t[b.identifier],Math.floor(Math.log(u.k)/Math.LN2)+1),F()),Aa=d):1<c.length&&(b=c[0],d=c[1],c=b[0]-d[0],b=b[1]-d[1],n=c*c+b*b)}function g(){var a=y.touches(p),b,c,f,g;qe.call(p);for(var h=0,v=a.length;h<v;++h,g=null)if(f=a[h],g=t[f.identifier]){if(c)break;
b=f;c=g}if(g){var l=(l=f[0]-b[0])*l+(l=f[1]-b[1])*l,a=n&&Math.sqrt(l/n);b=[(b[0]+f[0])/2,(b[1]+f[1])/2];c=[(c[0]+g[0])/2,(c[1]+g[1])/2];d(a*K)}Aa=null;e(b,c);k(m)}function v(){if(y.event.touches.length){for(var b=y.event.changedTouches,c=0,d=b.length;c<d;++c)delete t[b[c].identifier];for(var e in t)return void a()}y.selectAll(A).on(C,null);W.on("mousedown.zoom",x).on("touchstart.zoom",q);z();l(m)}var p=this,m=D.of(p,arguments),t={},n=0,K,C=".zoom-"+y.event.changedTouches[0].identifier,r="touchmove"+
C,w="touchend"+C,A=[],W=y.select(p),z=M(p);b();h(m);W.on("mousedown.zoom",null).on("touchstart.zoom",b)}function p(){var a=D.of(this,arguments);B?clearTimeout(B):(qe.call(this),t=c(n=K||y.mouse(this)),h(a));B=setTimeout(function(){B=null;l(a)},50);F();d(Math.pow(2,.002*re())*u.k);e(n,t);k(a)}function m(){var a=y.mouse(this),b=Math.log(u.k)/Math.LN2;f(this,a,c(a),y.event.shiftKey?Math.ceil(b)-1:Math.floor(b)+1)}var u={x:0,y:0,k:1},t,n,K,r=[960,500],w=Eg,A=250,z=0,B,Aa,D=P(b,"zoomstart","zoom","zoomend"),
ma,E,R,L;of||(of="onwheel"in tb?(re=function(){return-y.event.deltaY*(y.event.deltaMode?120:1)},"wheel"):"onmousewheel"in tb?(re=function(){return y.event.wheelDelta},"mousewheel"):(re=function(){return-y.event.detail},"MozMousePixelScroll"));b.event=function(a){a.each(function(){var a=D.of(this,arguments),b=u;bd?y.select(this).transition().each("start.zoom",function(){u=this.__chart__||{x:0,y:0,k:1};h(a)}).tween("zoom:zoom",function(){var c=r[0],d=r[1],e=n?n[0]:c/2,f=n?n[1]:d/2,g=y.interpolateZoom([(e-
u.x)/u.k,(f-u.y)/u.k,c/u.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){b=g(b);var d=c/b[2];this.__chart__=u={x:e-b[0]*d,y:f-b[1]*d,k:d};k(a)}}).each("interrupt.zoom",function(){l(a)}).each("end.zoom",function(){l(a)}):(this.__chart__=u,h(a),k(a),l(a))})};b.translate=function(a){if(!arguments.length)return[u.x,u.y];u={x:+a[0],y:+a[1],k:u.k};g();return b};b.scale=function(a){if(!arguments.length)return u.k;u={x:u.x,y:u.y,k:null};d(+a);g();return b};b.scaleExtent=function(a){if(!arguments.length)return w;
w=null==a?Eg:[+a[0],+a[1]];return b};b.center=function(a){if(!arguments.length)return K;K=a&&[+a[0],+a[1]];return b};b.size=function(a){if(!arguments.length)return r;r=a&&[+a[0],+a[1]];return b};b.duration=function(a){if(!arguments.length)return A;A=+a;return b};b.x=function(a){if(!arguments.length)return E;E=a;ma=a.copy();u={x:0,y:0,k:1};return b};b.y=function(a){if(!arguments.length)return L;L=a;R=a.copy();u={x:0,y:0,k:1};return b};return y.rebind(b,D,"on")};var Eg=[0,Infinity],re,of;y.color=Za;
Za.prototype.toString=function(){return this.rgb()+""};y.hsl=la;var pf=la.prototype=new Za;pf.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);return new la(this.h,this.s,this.l/a)};pf.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return new la(this.h,this.s,a*this.l)};pf.rgb=function(){return r(this.h,this.s,this.l)};y.hcl=Ma;var qf=Ma.prototype=new Za;qf.brighter=function(a){return new Ma(this.h,this.c,Math.min(100,this.l+se*(arguments.length?a:1)))};qf.darker=function(a){return new Ma(this.h,
this.c,Math.max(0,this.l-se*(arguments.length?a:1)))};qf.rgb=function(){return fb(this.h,this.c,this.l).rgb()};y.lab=Ea;var se=18,If=.95047,Jf=1,Kf=1.08883,rf=Ea.prototype=new Za;rf.brighter=function(a){return new Ea(Math.min(100,this.l+se*(arguments.length?a:1)),this.a,this.b)};rf.darker=function(a){return new Ea(Math.max(0,this.l-se*(arguments.length?a:1)),this.a,this.b)};rf.rgb=function(){return mb(this.l,this.a,this.b)};y.rgb=Da;var te=Da.prototype=new Za;te.brighter=function(a){a=Math.pow(.7,
arguments.length?a:1);var b=this.r,c=this.g,d=this.b;if(!b&&!c&&!d)return new Da(30,30,30);b&&30>b&&(b=30);c&&30>c&&(c=30);d&&30>d&&(d=30);return new Da(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))};te.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return new Da(a*this.r,a*this.g,a*this.b)};te.hsl=function(){return ra(this.r,this.g,this.b)};te.toString=function(){return"#"+db(this.r)+db(this.g)+db(this.b)};var ae=y.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,
azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,
darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,
ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,
mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,
peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,
wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ae.forEach(function(a,b){ae.set(a,new Da(b>>16,b>>8&255,b&255))});y.functor=da;y.xhr=gb(q);y.dsv=function(a,b){function c(a,c,f){3>arguments.length&&(f=c,c=null);var g=ca(a,b,null==c?d:e(c),f);g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c};return g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}
function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),v=a.charCodeAt(0);c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})};c.parseRows=function(a,b){function c(){if(h>=g)return e;if(x)return x=!1,d;var b=h;if(34===a.charCodeAt(b)){for(var c=b;c++<g;)if(34===a.charCodeAt(c)){if(34!==
a.charCodeAt(c+1))break;++c}h=c+2;var f=a.charCodeAt(c+1);13===f?(x=!0,10===a.charCodeAt(c+2)&&++h):10===f&&(x=!0);return a.slice(b+1,c).replace(/""/g,'"')}for(;h<g;){f=a.charCodeAt(h++);c=1;if(10===f)x=!0;else if(13===f)x=!0,10===a.charCodeAt(h)&&(++h,++c);else if(f!==v)continue;return a.slice(b,h-c)}return a.slice(b)}for(var d={},e={},f=[],g=a.length,h=0,k=0,l,x;(l=c())!==e;){for(var q=[];l!==d&&l!==e;)q.push(l),l=c();b&&null==(q=b(q,k++))||f.push(q)}return f};c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);
var d=new k,e=[];b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))});return[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")};c.formatRows=function(a){return a.map(f).join("\n")};return c};y.csv=y.dsv(",","text/csv");y.tsv=y.dsv("\t","text/tab-separated-values");var ce,be,de,ee,Lf=this[z(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};y.timer=function(){cb.apply(this,arguments)};y.timer.flush=function(){gc();Wa()};
y.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var ii="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,b){var c=Math.pow(10,3*ga(8-b));return{scale:8<b?function(a){return a/c}:function(a){return a*c},symbol:a}});y.formatPrefix=function(a,b){var c=0;if(a=+a)0>a&&(a*=-1),b&&(a=y.round(a,Ya(a,b))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)));return ii[8+c/3]};var Mf=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,
nh=y.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=y.round(a,Ya(a,b))).toFixed(Math.max(0,Math.min(20,Ya(a*(1+1E-15),b))))}}),V=y.time={},ob=Date;eb.prototype={getDate:function(){return this._.getUTCDate()},
getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){zc.setUTCDate.apply(this._,
arguments)},setDay:function(){zc.setUTCDay.apply(this._,arguments)},setFullYear:function(){zc.setUTCFullYear.apply(this._,arguments)},setHours:function(){zc.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){zc.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){zc.setUTCMinutes.apply(this._,arguments)},setMonth:function(){zc.setUTCMonth.apply(this._,arguments)},setSeconds:function(){zc.setUTCSeconds.apply(this._,arguments)},setTime:function(){zc.setTime.apply(this._,arguments)}};
var zc=Date.prototype;V.year=lb(function(a){a=V.day(a);a.setMonth(0,1);return a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});V.years=V.year.range;V.years.utc=V.year.utc.range;V.day=lb(function(a){var b=new ob(2E3,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});V.days=V.day.range;V.days.utc=V.day.utc.range;V.dayOfYear=function(a){var b=V.year(a);return Math.floor((a-
b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,b){b=7-b;var c=V[a]=lb(function(a){(a=V.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=V.year(a).getDay();return Math.floor((V.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});V[a+"s"]=c.range;V[a+"s"].utc=c.utc.range;V[a+"OfYear"]=function(a){var c=V.year(a).getDay();return Math.floor((V.dayOfYear(a)+
(c+b)%7)/7)}});V.week=V.sunday;V.weeks=V.sunday.range;V.weeks.utc=V.sunday.utc.range;V.weekOfYear=V.sundayOfYear;var Nf={"-":"",_:" ",0:"0"},Ra=/^\s*\d+/,Of=/^%/;y.locale=function(a){return{numberFormat:Mb(a),timeFormat:Pc(a)}};var Fg=y.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});y.format=Fg.numberFormat;y.geo={};Kb.prototype={s:0,t:0,add:function(a){Ab(a,this.t,ue);Ab(ue.s,this.s,this);this.s?this.t+=ue.t:this.s=ue.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ue=new Kb;y.geo.stream=function(a,b){if(a&&Gg.hasOwnProperty(a.type))Gg[a.type](a,b);else sa(a,b)};var Gg=
{Feature:function(a,b){sa(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)sa(c[d].geometry,b)}},Pf={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){rb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)rb(c[d],b,0)},Polygon:function(a,b){Db(a.coordinates,
b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Db(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)sa(c[d],b)}};y.geo.area=function(a){ve=0;y.geo.stream(a,Gb);return ve};var ve,Xc=new Kb,Gb={sphere:function(){ve+=4*ea},point:B,lineStart:B,lineEnd:B,polygonStart:function(){Xc.reset();Gb.lineStart=$b},polygonEnd:function(){var a=2*Xc;ve+=0>a?4*ea+a:a;Gb.lineStart=Gb.lineEnd=Gb.point=B}};y.geo.bounds=function(){function a(a,b){w.push(A=
[x=a,p=a]);b<q&&(q=b);b>m&&(m=b)}function b(b,c){var d=$a([b*fa,c*fa]);if(K){var e=nb(K,d),e=nb([e[1],-e[0],0],e);uc(e);var e=ac(e),f=b-u,g=0<f?1:-1,k=e[0]*Fa*g,f=180<ga(f);f^(g*u<k&&k<g*b)?(e=e[1]*Fa,e>m&&(m=e)):(k=(k+360)%360-180,f^(g*u<k&&k<g*b))?(e=-e[1]*Fa,e<q&&(q=e)):(c<q&&(q=c),c>m&&(m=c));f?b<u?h(x,b)>h(x,p)&&(p=b):h(b,p)>h(x,p)&&(x=b):p>=x?(b<x&&(x=b),b>p&&(p=b)):b>u?h(x,b)>h(x,p)&&(p=b):h(b,p)>h(x,p)&&(x=b)}else a(b,c);K=d;u=b}function c(){z.point=b}function d(){A[0]=x;A[1]=p;z.point=a;
K=null}function e(a,c){if(K){var d=a-u;r+=180<ga(d)?d+(0<d?360:-360):d}else t=a,n=c;Gb.point(a,c);b(a,c)}function f(){Gb.lineStart()}function g(){e(t,n);Gb.lineEnd();1E-6<ga(r)&&(x=-(p=180));A[0]=x;A[1]=p;K=null}function h(a,b){return 0>(b-=a)?b+360:b}function k(a,b){return a[0]-b[0]}function l(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var x,q,p,m,u,t,n,K,r,w,A,z={point:a,lineStart:c,lineEnd:d,polygonStart:function(){z.point=e;z.lineStart=f;z.lineEnd=g;r=0;Gb.polygonStart()},polygonEnd:function(){Gb.polygonEnd();
z.point=a;z.lineStart=c;z.lineEnd=d;0>Xc?(x=-(p=180),q=-(m=90)):1E-6<r?m=90:-1E-6>r&&(q=-90);A[0]=x;A[1]=p}};return function(a){m=p=-(x=q=Infinity);w=[];y.geo.stream(a,z);if(a=w.length){w.sort(k);for(var b=1,c=w[0],d,e=[c];b<a;++b)d=w[b],l(d[0],c)||l(d[1],c)?(h(c[0],d[1])>h(c[0],c[1])&&(c[1]=d[1]),h(d[0],c[1])>h(c[0],c[1])&&(c[0]=d[0])):e.push(c=d);var f=-Infinity,g;a=e.length-1;b=0;for(c=e[a];b<=a;c=d,++b)d=e[b],(g=h(c[1],d[0]))>f&&(f=g,x=d[0],p=c[1])}w=A=null;return Infinity===x||Infinity===q?[[NaN,
NaN],[NaN,NaN]]:[[x,q],[p,m]]}}();y.geo.centroid=function(a){Bd=fe=Yc=Zc=yc=Ic=Jc=lc=hd=id=Kc=0;y.geo.stream(a,bc);a=hd;var b=id,c=Kc,d=a*a+b*b+c*c;return 1E-12>d&&(a=Ic,b=Jc,c=lc,1E-6>fe&&(a=Yc,b=Zc,c=yc),d=a*a+b*b+c*c,1E-12>d)?[NaN,NaN]:[Math.atan2(b,a)*Fa,Ja(c/Math.sqrt(d))*Fa]};var Bd,fe,Yc,Zc,yc,Ic,Jc,lc,hd,id,Kc,bc={sphere:B,point:pa,lineStart:Tc,lineEnd:ic,polygonStart:function(){bc.lineStart=Uc},polygonEnd:function(){bc.lineStart=Tc}},Qf=Rb(wc,function(a){var b=NaN,c=NaN,d=NaN,e;return{lineStart:function(){a.lineStart();
e=1},point:function(f,g){var h=0<f?ea:-ea,k=ga(f-b);if(1E-6>ga(k-ea))a.point(b,c=0<(c+g)/2?Qa:-Qa),a.point(d,c),a.lineEnd(),a.lineStart(),a.point(h,c),a.point(f,c),e=0;else if(d!==h&&k>=ea){1E-6>ga(b-d)&&(b-=1E-6*d);1E-6>ga(f-h)&&(f-=1E-6*h);var k=b,l=c,v=f,x,q,p=Math.sin(k-v);c=1E-6<ga(p)?Math.atan((Math.sin(l)*(q=Math.cos(g))*Math.sin(v)-Math.sin(g)*(x=Math.cos(l))*Math.sin(k))/(x*q*p)):(l+g)/2;a.point(d,c);a.lineEnd();a.lineStart();a.point(h,c);e=0}a.point(b=f,c=g);d=h},lineEnd:function(){a.lineEnd();
b=c=NaN},clean:function(){return 2-e}}},function(a,b,c,d){null==a?(c*=Qa,d.point(-ea,c),d.point(0,c),d.point(ea,c),d.point(ea,0),d.point(ea,-c),d.point(0,-c),d.point(-ea,-c),d.point(-ea,0),d.point(-ea,c)):1E-6<ga(a[0]-b[0])?(a=a[0]<b[0]?ea:-ea,c=c*a/2,d.point(-a,c),d.point(0,c),d.point(a,c)):d.point(b[0],b[1])},[-ea,-ea/2]);y.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){e&&(e.valid=!1);e=f(a);e.valid=!0;return e},extent:function(h){if(!arguments.length)return[[a,b],[c,d]];f=Va(a=
+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]);e&&(e.valid=!1,e=null);return g}};return g.extent([[0,0],[960,500]])};(y.geo.conicEqualArea=function(){return ab(zb)}).raw=zb;y.geo.albers=function(){return y.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};y.geo.albersUsa=function(){function a(a){var b=a[0];a=a[1];e=null;(g(b,a),e)||(h(b,a),e)||k(b,a);return e}var b=y.geo.albers(),c=y.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=y.geo.conicEqualArea().rotate([157,
0]).center([-3,19.9]).parallels([8,18]),e,f={point:function(a,b){e=[a,b]}},g,h,k;a.invert=function(a){var e=b.scale(),f=b.translate(),g=(a[0]-f[0])/e,e=(a[1]-f[1])/e;return(.12<=e&&.234>e&&-.425<=g&&-.214>g?c:.166<=e&&.234>e&&-.214<=g&&-.115>g?d:b).invert(a)};a.stream=function(a){var e=b.stream(a),f=c.stream(a),g=d.stream(a);return{point:function(a,b){e.point(a,b);f.point(a,b);g.point(a,b)},sphere:function(){e.sphere();f.sphere();g.sphere()},lineStart:function(){e.lineStart();f.lineStart();g.lineStart()},
lineEnd:function(){e.lineEnd();f.lineEnd();g.lineEnd()},polygonStart:function(){e.polygonStart();f.polygonStart();g.polygonStart()},polygonEnd:function(){e.polygonEnd();f.polygonEnd();g.polygonEnd()}}};a.precision=function(e){if(!arguments.length)return b.precision();b.precision(e);c.precision(e);d.precision(e);return a};a.scale=function(e){if(!arguments.length)return b.scale();b.scale(e);c.scale(.35*e);d.scale(e);return a.translate(b.translate())};a.translate=function(e){if(!arguments.length)return b.translate();
var l=b.scale(),v=+e[0],x=+e[1];g=b.translate(e).clipExtent([[v-.455*l,x-.238*l],[v+.455*l,x+.238*l]]).stream(f).point;h=c.translate([v-.307*l,x+.201*l]).clipExtent([[v-.425*l+1E-6,x+.12*l+1E-6],[v-.214*l-1E-6,x+.234*l-1E-6]]).stream(f).point;k=d.translate([v-.205*l,x+.212*l]).clipExtent([[v-.214*l+1E-6,x+.166*l+1E-6],[v-.115*l-1E-6,x+.234*l-1E-6]]).stream(f).point;return a};return a.scale(1070)};var sf,Re,Lc={point:B,lineStart:B,lineEnd:B,polygonStart:function(){Re=0;Lc.lineStart=Fb},polygonEnd:function(){Lc.lineStart=
Lc.lineEnd=Lc.point=B;sf+=ga(Re/2)}},we,xe,ye,ze,ji={point:function(a,b){a<we&&(we=a);a>ye&&(ye=a);b<xe&&(xe=b);b>ze&&(ze=b)},lineStart:B,lineEnd:B,polygonStart:B,polygonEnd:B},cc={point:Ba,lineStart:ya,lineEnd:Hd,polygonStart:function(){cc.lineStart=Id},polygonEnd:function(){cc.point=Ba;cc.lineStart=ya;cc.lineEnd=Hd}};y.geo.path=function(){function a(a){a&&("function"===typeof c&&g.pointRadius(+c.apply(this,arguments)),h&&h.valid||(h=f(g)),y.geo.stream(a,h));return g.result()}function b(){h=null;
return a}var c=4.5,d,e,f,g,h;a.area=function(a){sf=0;y.geo.stream(a,f(Lc));return sf};a.centroid=function(a){Yc=Zc=yc=Ic=Jc=lc=hd=id=Kc=0;y.geo.stream(a,f(cc));return Kc?[hd/Kc,id/Kc]:lc?[Ic/lc,Jc/lc]:yc?[Yc/yc,Zc/yc]:[NaN,NaN]};a.bounds=function(a){ye=ze=-(we=xe=Infinity);y.geo.stream(a,f(ji));return[[we,xe],[ye,ze]]};a.projection=function(a){if(!arguments.length)return d;f=(d=a)?a.stream||cd(a):q;return b()};a.context=function(a){if(!arguments.length)return e;g=null==(e=a)?new fd:new Fe(a);"function"!==
typeof c&&g.pointRadius(c);return b()};a.pointRadius=function(b){if(!arguments.length)return c;c="function"===typeof b?b:(g.pointRadius(+b),+b);return a};return a.projection(y.geo.albersUsa()).context(null)};y.geo.transform=function(a){return{stream:function(b){b=new Jd(b);for(var c in a)b[c]=a[c];return b}}};Jd.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},
polygonEnd:function(){this.stream.polygonEnd()}};y.geo.projection=ec;y.geo.projectionMutator=nd;(y.geo.equirectangular=function(){return ec(nc)}).raw=nc.invert=nc;y.geo.rotation=function(a){function b(b){b=a(b[0]*fa,b[1]*fa);return b[0]*=Fa,b[1]*=Fa,b}a=od(a[0]%360*fa,a[1]*fa,2<a.length?a[2]*fa:0);b.invert=function(b){b=a.invert(b[0]*fa,b[1]*fa);return b[0]*=Fa,b[1]*=Fa,b};return b};Ld.invert=nc;y.geo.circle=function(){function a(){var a="function"===typeof b?b.apply(this,arguments):b,c=od(-a[0]*
fa,-a[1]*fa,0).invert,d=[];e(null,null,1,{point:function(a,b){d.push(a=c(a,b));a[0]*=Fa;a[1]*=Fa}});return{type:"Polygon",coordinates:[d]}}var b=[0,0],c,d=6,e;a.origin=function(c){if(!arguments.length)return b;b=c;return a};a.angle=function(b){if(!arguments.length)return c;e=vd((c=+b)*fa,d*fa);return a};a.precision=function(b){if(!arguments.length)return d;e=vd(c*fa,(d=+b)*fa);return a};return a.angle(90)};y.geo.distance=function(a,b){var c=(b[0]-a[0])*fa,d=a[1]*fa,e=b[1]*fa,f=Math.cos(c),g=Math.sin(d),
d=Math.cos(d),h=Math.sin(e),e=Math.cos(e),k;return Math.atan2(Math.sqrt((k=e*Math.sin(c))*k+(k=d*h-g*e*f)*k),g*h+d*e*f)};y.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return y.range(Math.ceil(f/p)*p,e,p).map(n).concat(y.range(Math.ceil(l/m)*m,k,m).map(K)).concat(y.range(Math.ceil(d/x)*x,c,x).filter(function(a){return 1E-6<ga(a%p)}).map(u)).concat(y.range(Math.ceil(h/q)*q,g,q).filter(function(a){return 1E-6<ga(a%m)}).map(t))}var c,d,e,f,g,h,k,l,
x=10,q=x,p=90,m=360,u,t,n,K,r=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[n(f).concat(K(k).slice(1),n(e).reverse().slice(1),K(l).reverse().slice(1))]}};a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()};a.majorExtent=function(b){if(!arguments.length)return[[f,l],[e,k]];f=+b[0][0];e=+b[1][0];l=+b[0][1];k=+b[1][1];f>e&&(b=f,f=e,e=b);l>k&&(b=l,l=k,k=b);return a.precision(r)};
a.minorExtent=function(b){if(!arguments.length)return[[d,h],[c,g]];d=+b[0][0];c=+b[1][0];h=+b[0][1];g=+b[1][1];d>c&&(b=d,d=c,c=b);h>g&&(b=h,h=g,g=b);return a.precision(r)};a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()};a.majorStep=function(b){if(!arguments.length)return[p,m];p=+b[0];m=+b[1];return a};a.minorStep=function(b){if(!arguments.length)return[x,q];x=+b[0];q=+b[1];return a};a.precision=function(b){if(!arguments.length)return r;r=+b;u=Rd(h,g,90);t=Wb(d,
c,r);n=Rd(l,k,90);K=Wb(f,e,r);return a};return a.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};y.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||b.apply(this,arguments),e||d.apply(this,arguments)]}}var b=sd,c,d=S,e;a.distance=function(){return y.geo.distance(c||b.apply(this,arguments),e||d.apply(this,arguments))};a.source=function(d){if(!arguments.length)return b;b=d;c="function"===typeof d?null:d;return a};a.target=
function(b){if(!arguments.length)return d;d=b;e="function"===typeof b?null:b;return a};a.precision=function(){return arguments.length?a:0};return a};y.geo.interpolate=function(a,b){return na(a[0]*fa,a[1]*fa,b[0]*fa,b[1]*fa)};y.geo.length=function(a){tf=0;y.geo.stream(a,md);return tf};var tf,md={sphere:B,point:B,lineStart:function(){function a(a,e){var f=Math.sin(e*=fa),g=Math.cos(e),h=ga((a*=fa)-b),k=Math.cos(h);tf+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*k)*h),c*f+d*g*k);b=a;c=f;d=g}
var b,c,d;md.point=function(e,f){b=e*fa;c=Math.sin(f*=fa);d=Math.cos(f);md.point=a};md.lineEnd=function(){md.point=md.lineEnd=B}},lineEnd:B,polygonStart:B,polygonEnd:B},Hg=ub(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(y.geo.azimuthalEqualArea=function(){return ec(Hg)}).raw=Hg;var Ig=ub(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},q);(y.geo.azimuthalEquidistant=function(){return ec(Ig)}).raw=Ig;(y.geo.conicConformal=function(){return ab(Sd)}).raw=Sd;(y.geo.conicEquidistant=
function(){return ab(Pd)}).raw=Pd;var Jg=ub(function(a){return 1/a},Math.atan);(y.geo.gnomonic=function(){return ec(Jg)}).raw=Jg;ed.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Qa]};(y.geo.mercator=function(){return Td(ed)}).raw=ed;var Kg=ub(function(){return 1},Math.asin);(y.geo.orthographic=function(){return ec(Kg)}).raw=Kg;var Lg=ub(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(y.geo.stereographic=function(){return ec(Lg)}).raw=Lg;wd.invert=function(a,b){return[-b,
2*Math.atan(Math.exp(a))-Qa]};(y.geo.transverseMercator=function(){var a=Td(wd),b=a.center,c=a.rotate;a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])};a.rotate=function(a){return a?c([a[0],a[1],2<a.length?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])};return c([0,0,90])}).raw=wd;y.geom={};y.geom.hull=function(a){function b(a){if(3>a.length)return[];var b=da(c),e=da(d),f,g=a.length,h=[],k=[];for(f=0;f<g;f++)h.push([+b.call(this,a[f],f),+e.call(this,a[f],f),f]);h.sort(He);for(f=0;f<g;f++)k.push([h[f][0],
-h[f][1]]);var b=Ud(h),k=Ud(k),e=k[0]===b[0],g=k[k.length-1]===b[b.length-1],l=[];for(f=b.length-1;0<=f;--f)l.push(a[h[b[f]][2]]);for(f=+e;f<k.length-g;++f)l.push(a[h[k[f]][2]]);return l}var c=Ec,d=Qc;if(arguments.length)return b(a);b.x=function(a){return arguments.length?(c=a,b):c};b.y=function(a){return arguments.length?(d=a,b):d};return b};y.geom.polygon=function(a){Zd(a,Ae);return a};var Ae=y.geom.polygon.prototype=[];Ae.area=function(){for(var a=-1,b=this.length,c,d=this[b-1],e=0;++a<b;)c=d,
d=this[a],e+=c[1]*d[0]-c[0]*d[1];return.5*e};Ae.centroid=function(a){var b=-1,c=this.length,d=0,e=0,f,g=this[c-1],h;for(arguments.length||(a=-1/(6*this.area()));++b<c;)f=g,g=this[b],h=f[0]*g[1]-g[0]*f[1],d+=(f[0]+g[0])*h,e+=(f[1]+g[1])*h;return[d*a,e*a]};Ae.clip=function(a){for(var b,c=Vd(a),d=-1,e=this.length-Vd(this),f,g,h=this[e-1],k,l,x;++d<e;){b=a.slice();a.length=0;k=this[d];l=b[(g=b.length-c)-1];for(f=-1;++f<g;)x=b[f],qd(x,h,k)?(qd(l,h,k)||a.push(xd(l,x,h,k)),a.push(x)):qd(l,h,k)&&a.push(xd(l,
x,h,k)),l=x;c&&a.push(a[0]);h=k}return a};var kd,$c,jd,Rf=[],Se,Cd,Sf=[];Xb.prototype.prepare=function(){for(var a=this.edges,b=a.length,c;b--;)c=a[b].edge,c.b&&c.a||a.splice(b,1);a.sort(Fc);return a.length};Wd.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};Le.prototype={insert:function(a,b){var c,d,e;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?
(a=Ef(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);b.L=b.R=null;b.U=c;b.C=!0;for(a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R)&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(rd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,yd(this,d)):(e=d.L)&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(yd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,rd(this,d)),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,c=a.L,d=a.R,e,f;e=c?d?Ef(d):c:d;b?b.L===a?b.L=e:b.R=e:this._=e;c&&d?(f=e.C,e.C=a.C,
e.L=c,c.U=e,e!==d?(b=e.U,e.U=a.U,a=e.R,b.L=a,e.R=d,d.U=e):(e.U=b,b=e,a=e.R)):(f=a.C,a=e);a&&(a.U=b);if(!f)if(a&&a.C)a.C=!1;else{do{if(a===this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,rd(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=!1,a.C=!0,yd(this,a),a=b.R);a.C=b.C;b.C=a.R.C=!1;rd(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,yd(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,rd(this,a),a=b.L);a.C=b.C;b.C=a.L.C=!1;yd(this,b);a=this._;break}a.C=
!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};y.geom.voronoi=function(a){function b(a){var b=Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];Me(c(a),h).cells.forEach(function(c,h){var k=c.edges,l=c.site;(b[h]=k.length?k.map(function(a){a=a.start();return[a.x,a.y]}):l.x>=d&&l.x<=f&&l.y>=e&&l.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[]).point=a[h]});return b}function c(a){return a.map(function(a,b){return{x:1E-6*Math.round(f(a,b)/1E-6),y:1E-6*Math.round(g(a,b)/1E-6),i:b}})}var d=Ec,e=Qc,f=d,g=e,h=Be;if(a)return b(a);
b.links=function(a){return Me(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})};b.triangles=function(a){var b=[];Me(c(a)).cells.forEach(function(c,d){for(var e=c.site,f=c.edges.sort(Fc),g=-1,h=f.length,k,l=f[h-1].edge,l=l.l===e?l.r:l.l;++g<h;)k=l,l=f[g].edge,l=l.l===e?l.r:l.l,d<k.i&&d<l.i&&0>(e.x-l.x)*(k.y-e.y)-(e.x-k.x)*(l.y-e.y)&&b.push([a[d],a[k.i],a[l.i]])});return b};b.x=function(a){return arguments.length?(f=da(d=a),b):d};b.y=function(a){return arguments.length?
(g=da(e=a),b):e};b.clipExtent=function(a){if(!arguments.length)return h===Be?null:h;h=null==a?Be:a;return b};b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===Be?null:h&&h[1]};return b};var Be=[[-1E6,-1E6],[1E6,1E6]];y.geom.delaunay=function(a){return y.geom.voronoi().triangles(a)};y.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var k=a.x,x=a.y;if(null!=k){if(!(.01>ga(k-c)+ga(x-d))){var q=a.point;a.x=a.y=a.point=
null;l(a,q,k,x,e,f,g,h)}l(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else l(a,b,c,d,e,f,g,h)}function l(a,b,c,d,e,g,h,k){var l=.5*(e+h),x=.5*(g+k),q=c>=l,p=d>=x,m=p<<1|q;a.leaf=!1;a=a.nodes[m]||(a.nodes[m]=Ff());q?e=l:h=l;p?g=x:k=x;f(a,b,c,d,e,g,h,k)}var x,q=da(g),p=da(h),m,v,u,t,n,K,r,w;if(null!=b)n=b,K=c,r=d,w=e;else if(r=w=-(n=K=Infinity),m=[],v=[],t=a.length,k)for(u=0;u<t;++u)x=a[u],x.x<n&&(n=x.x),x.y<K&&(K=x.y),x.x>r&&(r=x.x),x.y>w&&(w=x.y),m.push(x.x),v.push(x.y);else for(u=0;u<t;++u){var A=
+q(x=a[u],u);x=+p(x,u);A<n&&(n=A);x<K&&(K=x);A>r&&(r=A);x>w&&(w=x);m.push(A);v.push(x)}A=r-n;x=w-K;A>x?w=K+A:r=n+x;var z=Ff();z.add=function(a){f(z,a,+q(a,++u),+p(a,u),n,K,r,w)};z.visit=function(a){zd(a,z,n,K,r,w)};z.find=function(a){return kh(z,a[0],a[1],n,K,r,w)};u=-1;if(null==b){for(;++u<t;)f(z,a[u],m[u],v[u],n,K,r,w);--u}else a.forEach(z.add);m=v=a=x=null;return z}var g=Ec,h=Qc,k;if(k=arguments.length)return g=ah,h=jh,3===k&&(e=c,d=b,c=b=0),f(a);f.x=function(a){return arguments.length?(g=a,f):
g};f.y=function(a){return arguments.length?(h=a,f):h};f.extent=function(a){if(!arguments.length)return null==b?null:[[b,c],[d,e]];null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]);return f};f.size=function(a){if(!arguments.length)return null==b?null:[d-b,e-c];null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]);return f};return f};y.interpolateRgb=Ie;y.interpolateObject=Bf;y.interpolateNumber=pc;y.interpolateString=Gf;var Te=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ue=new RegExp(Te.source,
"g");y.interpolate=Sc;y.interpolators=[function(a,b){var c=typeof b;return("string"===c?ae.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?Ie:Gf:b instanceof Za?Ie:Array.isArray(b)?Yd:"object"===c&&isNaN(b)?Bf:pc)(a,b)}];y.interpolateArray=Yd;var Mg=function(){return q},ki=y.map({linear:Mg,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return zf},cubic:function(){return Vg},sin:function(){return Xg},exp:function(){return Yg},circle:function(){return Zg},elastic:function(a,
b){var c;2>arguments.length&&(b=.45);arguments.length?c=b/Hb*Math.asin(1/a):(a=1,c=b/4);return function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Hb/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return $g}}),li=y.map({"in":q,out:yf,"in-out":Ge,"out-in":function(a){return Ge(yf(a))}});y.ease=function(a){var b=a.indexOf("-"),c=0<=b?a.slice(0,b):a,b=0<=b?a.slice(b+1):"in",c=ki.get(c)||Mg,b=li.get(b)||q;return xf(b(c.apply(null,Bg.call(arguments,
1))))};y.interpolateHcl=function(a,b){a=y.hcl(a);b=y.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;isNaN(g)&&(g=0,d=isNaN(d)?b.c:d);isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360);return function(a){return fb(c+f*a,d+g*a,e+h*a)+""}};y.interpolateHsl=function(a,b){a=y.hsl(a);b=y.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;isNaN(g)&&(g=0,d=isNaN(d)?b.s:d);isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360);return function(a){return r(c+f*a,d+g*a,e+h*a)+""}};y.interpolateLab=
function(a,b){a=y.lab(a);b=y.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return mb(c+f*a,d+g*a,e+h*a)+""}};y.interpolateRound=Af;y.transform=function(a){var b=tb.createElementNS(y.ns.prefix.svg,"g");return(y.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Ke(c?c.matrix:mi)})(a)};Ke.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+
")"};var mi={a:1,b:0,c:0,d:1,e:0,f:0};y.interpolateTransform=Df;y.layout={};y.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(oh(a[c]));return b}};y.layout.chord=function(){function a(){var a={},c=[],q=y.range(g),p=[],m,v,u,t,n;d=[];e=[];m=0;for(t=-1;++t<g;){v=0;for(n=-1;++n<g;)v+=f[t][n];c.push(v);p.push(y.range(g));m+=v}k&&q.sort(function(a,b){return k(c[a],c[b])});l&&p.forEach(function(a,b){a.sort(function(a,c){return l(f[b][a],f[b][c])})});m=(Hb-h*g)/m;v=
0;for(t=-1;++t<g;){u=v;for(n=-1;++n<g;){var K=q[t],r=p[K][n],w=f[K][r],A=v,z=v+=w*m;a[K+"-"+r]={index:K,subindex:r,startAngle:A,endAngle:z,value:w}}e[K]={index:K,startAngle:u,endAngle:v,value:c[K]};v+=h}for(t=-1;++t<g;)for(n=t-1;++n<g;)q=a[t+"-"+n],p=a[n+"-"+t],(q.value||p.value)&&d.push(q.value<p.value?{source:p,target:q}:{source:q,target:p});x&&b()}function b(){d.sort(function(a,b){return x((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c={},d,e,f,g,h=0,k,l,x;c.matrix=
function(a){if(!arguments.length)return f;g=(f=a)&&f.length;d=e=null;return c};c.padding=function(a){if(!arguments.length)return h;h=a;d=e=null;return c};c.sortGroups=function(a){if(!arguments.length)return k;k=a;d=e=null;return c};c.sortSubgroups=function(a){if(!arguments.length)return l;l=a;d=null;return c};c.sortChords=function(a){if(!arguments.length)return x;x=a;d&&b();return c};c.chords=function(){d||a();return d};c.groups=function(){e||a();return e};return c};y.layout.force=function(){function a(a){return function(b,
c,d,e){if(b.point!==a){d=b.cx-a.x;var f=b.cy-a.y;c=e-c;e=d*d+f*f;if(c*c/t<e)return e<m&&(c=b.charge/e,a.px-=d*c,a.py-=f*c),!0;b.point&&e&&e<m&&(c=b.pointCharge/e,a.px-=d*c,a.py-=f*c)}return!b.charge}}function b(a){a.px=y.event.x;a.py=y.event.y;c.resume()}var c={},d=y.dispatch("start","tick","end"),e,f=[1,1],g,h,k=.9,l=ni,x=oi,p=-30,m=pi,u=.1,t=.64,n=[],K=[],r,w,A;c.tick=function(){if(.005>(h*=.99))return e=null,d.end({type:"end",alpha:h=0}),!0;var b=n.length,c=K.length,g,l,x,q,m,v,t;for(g=0;g<c;++g)if(l=
K[g],x=l.source,q=l.target,v=q.x-x.x,t=q.y-x.y,m=v*v+t*t)m=h*w[g]*((m=Math.sqrt(m))-r[g])/m,v*=m,t*=m,q.x-=v*(m=x.weight+q.weight?x.weight/(x.weight+q.weight):.5),q.y-=t*m,x.x+=v*(m=1-m),x.y+=t*m;if(m=h*u)if(v=f[0]/2,t=f[1]/2,g=-1,m)for(;++g<b;)l=n[g],l.x+=(v-l.x)*m,l.y+=(t-l.y)*m;if(p)for(Uf(c=y.geom.quadtree(n),h,A),g=-1;++g<b;)(l=n[g]).fixed||c.visit(a(l));for(g=-1;++g<b;)l=n[g],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*k,l.y-=(l.py-(l.py=l.y))*k);d.tick({type:"tick",alpha:h})};c.nodes=
function(a){if(!arguments.length)return n;n=a;return c};c.links=function(a){if(!arguments.length)return K;K=a;return c};c.size=function(a){if(!arguments.length)return f;f=a;return c};c.linkDistance=function(a){if(!arguments.length)return l;l="function"===typeof a?a:+a;return c};c.distance=c.linkDistance;c.linkStrength=function(a){if(!arguments.length)return x;x="function"===typeof a?a:+a;return c};c.friction=function(a){if(!arguments.length)return k;k=+a;return c};c.charge=function(a){if(!arguments.length)return p;
p="function"===typeof a?a:+a;return c};c.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(m);m=a*a;return c};c.gravity=function(a){if(!arguments.length)return u;u=+a;return c};c.theta=function(a){if(!arguments.length)return Math.sqrt(t);t=a*a;return c};c.alpha=function(a){if(!arguments.length)return h;a=+a;h?0<a?h=a:(e.c=null,e.t=NaN,e=null,d.end({type:"end",alpha:h=0})):0<a&&(d.start({type:"start",alpha:h=a}),e=cb(c.tick));return c};c.start=function(){function a(a,c){if(!k){k=Array(d);
for(g=0;g<d;++g)k[g]=[];for(g=0;g<e;++g){var f=K[g];k[f.source.index].push(f.target);k[f.target.index].push(f.source)}}for(var f=k[b],g=-1,h=f.length,l;++g<h;)if(!isNaN(l=f[g][a]))return l;return Math.random()*c}var b,d=n.length,e=K.length,g=f[0],h=f[1],k,q;for(b=0;b<d;++b)(q=n[b]).index=b,q.weight=0;for(b=0;b<e;++b)q=K[b],"number"==typeof q.source&&(q.source=n[q.source]),"number"==typeof q.target&&(q.target=n[q.target]),++q.source.weight,++q.target.weight;for(b=0;b<d;++b)q=n[b],isNaN(q.x)&&(q.x=
a("x",g)),isNaN(q.y)&&(q.y=a("y",h)),isNaN(q.px)&&(q.px=q.x),isNaN(q.py)&&(q.py=q.y);r=[];if("function"===typeof l)for(b=0;b<e;++b)r[b]=+l.call(this,K[b],b);else for(b=0;b<e;++b)r[b]=l;w=[];if("function"===typeof x)for(b=0;b<e;++b)w[b]=+x.call(this,K[b],b);else for(b=0;b<e;++b)w[b]=x;A=[];if("function"===typeof p)for(b=0;b<d;++b)A[b]=+p.call(this,n[b],b);else for(b=0;b<d;++b)A[b]=p;return c.resume()};c.resume=function(){return c.alpha(.1)};c.stop=function(){return c.alpha(0)};c.drag=function(){g||
(g=y.behavior.drag().origin(q).on("dragstart.force",ph).on("drag.force",b).on("dragend.force",qh));if(!arguments.length)return g;this.on("mouseover.force",rh).on("mouseout.force",sh).call(g)};return y.rebind(c,d,"on")};var ni=20,oi=1,pi=Infinity;y.layout.hierarchy=function(){function a(e){var f=[e],g=[],h;for(e.depth=0;null!=(h=f.pop());)if(g.push(h),(l=c.call(a,h,h.depth))&&(k=l.length)){for(var k,l,x;0<=--k;)f.push(x=l[k]),x.parent=h,x.depth=h.depth+1;d&&(h.value=0);h.children=l}else d&&(h.value=
+d.call(a,h,h.depth)||0),delete h.children;mc(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b);d&&(e=a.parent)&&(e.value+=a.value)});return g}var b=wh,c=uh,d=vh;a.sort=function(c){if(!arguments.length)return b;b=c;return a};a.children=function(b){if(!arguments.length)return c;c=b;return a};a.value=function(b){if(!arguments.length)return d;d=b;return a};a.revalue=function(b){d&&(Ed(b,function(a){a.children&&(a.value=0)}),mc(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0);if(c=b.parent)c.value+=
b.value}));return b};return a};y.layout.partition=function(){function a(b,c,d,e){var f=b.children;b.x=c;b.y=b.depth*e;b.dx=d;b.dy=e;if(f&&(h=f.length)){var g=-1,h,k;for(d=b.value?d/b.value:0;++g<h;)a(k=f[g],c,b=k.value*d,e),c+=b}}function b(a){a=a.children;var c=0;if(a&&(e=a.length))for(var d=-1,e;++d<e;)c=Math.max(c,b(a[d]));return 1+c}function c(c,f){var g=d.call(this,c,f);a(g[0],0,e[0],e[1]/b(g[0]));return g}var d=y.layout.hierarchy(),e=[1,1];c.size=function(a){if(!arguments.length)return e;e=
a;return c};return Dd(c,d)};y.layout.pie=function(){function a(g){var h=g.length,k=g.map(function(c,d){return+b.call(a,c,d)}),l=+("function"===typeof d?d.apply(this,arguments):d),x=("function"===typeof e?e.apply(this,arguments):e)-l,q=Math.min(Math.abs(x)/h,+("function"===typeof f?f.apply(this,arguments):f)),p=q*(0>x?-1:1),m=y.sum(k),v=m?(x-h*p)/m:0,h=y.range(h),u=[],t;null!=c&&h.sort(c===Ng?function(a,b){return k[b]-k[a]}:function(a,b){return c(g[a],g[b])});h.forEach(function(a){u[a]={data:g[a],
value:t=k[a],startAngle:l,endAngle:l+=t*v+p,padAngle:q}});return u}var b=Number,c=Ng,d=0,e=Hb,f=0;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.sort=function(b){if(!arguments.length)return c;c=b;return a};a.startAngle=function(b){if(!arguments.length)return d;d=b;return a};a.endAngle=function(b){if(!arguments.length)return e;e=b;return a};a.padAngle=function(b){if(!arguments.length)return f;f=b;return a};return a};var Ng={};y.layout.stack=function(){function a(h,k){if(!(m=h.length))return h;
var l=h.map(function(c,d){return b.call(a,c,d)}),x=l.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),q=c.call(a,x,k),l=y.permute(l,q),x=y.permute(x,q),q=d.call(a,x,k),p=l[0].length,m,v,u,t;for(u=0;u<p;++u)for(e.call(a,l[0][u],t=q[u],x[0][u][1]),v=1;v<m;++v)e.call(a,l[v][u],t+=x[v-1][u][1],x[v][u][1]);return h}var b=q,c=Ve,d=We,e=zh,f=xh,g=yh;a.values=function(c){if(!arguments.length)return b;b=c;return a};a.order=function(b){if(!arguments.length)return c;c="function"===
typeof b?b:qi.get(b)||Ve;return a};a.offset=function(b){if(!arguments.length)return d;d="function"===typeof b?b:ri.get(b)||We;return a};a.x=function(b){if(!arguments.length)return f;f=b;return a};a.y=function(b){if(!arguments.length)return g;g=b;return a};a.out=function(b){if(!arguments.length)return e;e=b;return a};return a};var qi=y.map({"inside-out":function(a){var b=a.length,c,d=a.map(Ah),e=a.map(Bh),f=y.range(b).sort(function(a,b){return d[a]-d[b]}),g=0,h=0,k=[],l=[];for(a=0;a<b;++a)c=f[a],g<
h?(g+=e[c],k.push(c)):(h+=e[c],l.push(c));return l.reverse().concat(k)},reverse:function(a){return y.range(a.length).reverse()},"default":Ve}),ri=y.map({silhouette:function(a){var b=a.length,c=a[0].length,d=[],e=0,f,g,h,k=[];for(g=0;g<c;++g){for(h=f=0;f<b;f++)h+=a[f][g][1];h>e&&(e=h);d.push(h)}for(g=0;g<c;++g)k[g]=(e-d[g])/2;return k},wiggle:function(a){var b=a.length,c=a[0],d=c.length,e,f,g,h,k,l,x,q,p,m=[];m[0]=q=p=0;for(f=1;f<d;++f){for(h=e=0;e<b;++e)h+=a[e][f][1];k=e=0;for(x=c[f][0]-c[f-1][0];e<
b;++e){g=0;for(l=(a[e][f][1]-a[e][f-1][1])/(2*x);g<e;++g)l+=(a[g][f][1]-a[g][f-1][1])/x;k+=l*a[e][f][1]}m[f]=q-=h?k/h*x:0;q<p&&(p=q)}for(f=0;f<d;++f)m[f]-=p;return m},expand:function(a){var b=a.length,c=a[0].length,d=1/b,e,f,g,h=[];for(f=0;f<c;++f){for(g=e=0;e<b;e++)g+=a[e][f][1];if(g)for(e=0;e<b;e++)a[e][f][1]/=g;else for(e=0;e<b;e++)a[e][f][1]=d}for(f=0;f<c;++f)h[f]=0;return h},zero:We});y.layout.histogram=function(){function a(a,f){var g=[],h=a.map(c,this),k=d.call(this,h,f),l=e.call(this,k,h,
f),x;f=-1;for(var q=h.length,p=l.length-1,m=b?1:1/q;++f<p;)x=g[f]=[],x.dx=l[f+1]-(x.x=l[f]),x.y=0;if(0<p)for(f=-1;++f<q;)x=h[f],x>=k[0]&&x<=k[1]&&(x=g[y.bisect(l,x,1,p)-1],x.y+=m,x.push(a[f]));return g}var b=!0,c=Number,d=Eh,e=Dh;a.value=function(b){if(!arguments.length)return c;c=b;return a};a.range=function(b){if(!arguments.length)return d;d=da(b);return a};a.bins=function(b){if(!arguments.length)return e;e="number"===typeof b?function(a){return Vf(a,b)}:da(b);return a};a.frequency=function(c){if(!arguments.length)return b;
b=!!c;return a};return a};y.layout.pack=function(){function a(a,f){var g=b.call(this,a,f),h=g[0],k=d[0],l=d[1],x=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};h.x=h.y=0;mc(h,function(a){a.r=+x(a.value)});mc(h,Yf);if(c){var q=c*(e?1:Math.max(2*h.r/k,2*h.r/l))/2;mc(h,function(a){a.r+=q});mc(h,Yf);mc(h,function(a){a.r-=q})}$f(h,k/2,l/2,e?1:1/Math.max(2*h.r/k,2*h.r/l));return g}var b=y.layout.hierarchy().sort(Fh),c=0,d=[1,1],e;a.size=function(b){if(!arguments.length)return d;d=b;return a};
a.radius=function(b){if(!arguments.length)return e;e=null==b||"function"===typeof b?b:+b;return a};a.padding=function(b){if(!arguments.length)return c;c=+b;return a};return Dd(a,b)};y.layout.tree=function(){function a(a,l){var x=f.call(this,a,l),q=x[0],p=b(q);mc(p,c);p.parent.m=-p.z;Ed(p,d);if(k)Ed(q,e);else{var m=q,u=q,t=q;Ed(q,function(a){a.x<m.x&&(m=a);a.x>u.x&&(u=a);a.depth>t.depth&&(t=a)});var v=g(m,u)/2-m.x,n=h[0]/(u.x+g(u,m)/2+v),K=h[1]/(t.depth||1);Ed(q,function(a){a.x=(a.x+v)*n;a.y=a.depth*
K})}return x}function b(a){a={A:null,children:[a]};for(var b=[a],c;null!=(c=b.pop());)for(var d=c.children,e,f=0,g=d.length;f<g;++f)b.push((d[f]=e={_:d[f],parent:c,children:(e=d[f].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:f}).a=e);return a.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){for(var e=0,f=0,h=a.children,k=h.length,l;0<=--k;)l=h[k],l.z+=e,l.m+=e,e+=l.s+(f+=l.c);b=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+g(a._,d._),a.m=
a.z-b):a.z=b}else d&&(a.z=d.z+g(a._,d._));b=a.parent;c=a.parent.A||c[0];if(d){f=e=a;h=e.parent.children[0];k=e.m;l=f.m;for(var x=d.m,q=h.m,p;d=Ze(d),e=Ye(e),d&&e;){h=Ye(h);f=Ze(f);f.a=a;p=d.z+x-e.z-k+g(d._,e._);if(0<p){var m=d.a.parent===a.parent?d.a:c,u=a,t=p,v=t/(u.i-m.i);u.c-=v;u.s+=t;m.c+=v;u.z+=t;u.m+=t;k+=p;l+=p}x+=d.m;k+=e.m;q+=h.m;l+=f.m}d&&!Ze(f)&&(f.t=d,f.m+=x-l);e&&!Ye(h)&&(h.t=e,h.m+=k-q,c=a)}b.A=c}function d(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function e(a){a.x*=h[0];a.y=a.depth*
h[1]}var f=y.layout.hierarchy().sort(null).value(null),g=ag,h=[1,1],k=null;a.separation=function(b){if(!arguments.length)return g;g=b;return a};a.size=function(b){if(!arguments.length)return k?null:h;k=null==(h=b)?e:null;return a};a.nodeSize=function(b){if(!arguments.length)return k?h:null;k=null==(h=b)?null:e;return a};return Dd(a,f)};y.layout.cluster=function(){function a(a,f){var g=b.call(this,a,f),h=g[0],k,l=0;mc(h,function(a){var b=a.children;b&&b.length?(a.x=Jh(b),a.y=Ih(b)):(a.x=k?l+=c(a,k):
0,a.y=0,k=a)});var x=bg(h),q=cg(h),p=x.x-c(x,q)/2,m=q.x+c(q,x)/2;mc(h,e?function(a){a.x=(a.x-h.x)*d[0];a.y=(h.y-a.y)*d[1]}:function(a){a.x=(a.x-p)/(m-p)*d[0];a.y=(1-(h.y?a.y/h.y:1))*d[1]});return g}var b=y.layout.hierarchy().sort(null).value(null),c=ag,d=[1,1],e=!1;a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return e?null:d;e=null==(d=b);return a};a.nodeSize=function(b){if(!arguments.length)return e?d:null;e=null!=(d=b);return a};return Dd(a,
b)};y.layout.treemap=function(){function a(a,b){for(var c=-1,d=a.length,e,f;++c<d;)f=(e=a[c]).value*(0>b?0:b),e.area=isNaN(f)||0>=f?0:f}function b(c){var e=c.children;if(e&&e.length){var f=l(c),g=[],h=e.slice(),k=Infinity,x,q="slice"===p?f.dx:"dice"===p?f.dy:"slice-dice"===p?c.depth&1?f.dy:f.dx:Math.min(f.dx,f.dy);a(h,f.dx*f.dy/c.value);for(g.area=0;0<(c=h.length);){g.push(c=h[c-1]);g.area+=c.area;if(!(c="squarify"!==p)){c=q;for(var u=g.area,t=0,v=Infinity,n=-1,K=g.length;++n<K;)if(x=g[n].area)x<
v&&(v=x),x>t&&(t=x);u*=u;c*=c;c=(x=u?Math.max(c*t*m/u,u/(c*v*m)):Infinity)<=k}c?(h.pop(),k=x):(g.area-=g.pop().area,d(g,q,f,!1),q=Math.min(f.dx,f.dy),g.length=g.area=0,k=Infinity)}g.length&&(d(g,q,f,!0),g.length=g.area=0);e.forEach(b)}}function c(b){var e=b.children;if(e&&e.length){var f=l(b),g=e.slice(),h=[];a(g,f.dx*f.dy/b.value);for(h.area=0;b=g.pop();)h.push(b),h.area+=b.area,null!=b.z&&(d(h,b.z?f.dx:f.dy,f,!g.length),h.length=h.area=0);e.forEach(c)}}function d(a,b,c,d){var e=-1,f=a.length,h=
c.x,k=c.y,l=b?g(a.area/b):0,x;if(b==c.dx){if(d||l>c.dy)l=c.dy;for(;++e<f;)x=a[e],x.x=h,x.y=k,x.dy=l,h+=x.dx=Math.min(c.x+c.dx-h,l?g(x.area/l):0);x.z=!0;x.dx+=c.x+c.dx-h;c.y+=l;c.dy-=l}else{if(d||l>c.dx)l=c.dx;for(;++e<f;)x=a[e],x.x=h,x.y=k,x.dx=l,k+=x.dy=Math.min(c.y+c.dy-k,l?g(x.area/l):0);x.z=!1;x.dy+=c.y+c.dy-k;c.x+=l;c.dx-=l}}function e(d){d=q||f(d);var e=d[0];e.x=e.y=0;e.value?(e.dx=h[0],e.dy=h[1]):e.dx=e.dy=0;q&&f.revalue(e);a([e],e.dx*e.dy/e.value);(q?c:b)(e);x&&(q=d);return d}var f=y.layout.hierarchy(),
g=Math.round,h=[1,1],k=null,l=$e,x=!1,q,p="squarify",m=.5*(1+Math.sqrt(5));e.size=function(a){if(!arguments.length)return h;h=a;return e};e.padding=function(a){function b(b){var c=a.call(e,b,b.depth);return null==c?$e(b):dg(b,"number"===typeof c?[c,c,c,c]:c)}function c(b){return dg(b,a)}if(!arguments.length)return k;var d;l=null==(k=a)?$e:"function"===(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c;return e};e.round=function(a){if(!arguments.length)return g!=Number;g=a?Math.round:Number;return e};e.sticky=
function(a){if(!arguments.length)return x;x=a;q=null;return e};e.ratio=function(a){if(!arguments.length)return m;m=a;return e};e.mode=function(a){if(!arguments.length)return p;p=a+"";return e};return Dd(e,f)};y.random={normal:function(a,b){var c=arguments.length;2>c&&(b=1);1>c&&(a=0);return function(){var c,d;do c=2*Math.random()-1,d=2*Math.random()-1,d=c*c+d*d;while(!d||1<d);return a+b*c*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var a=y.random.normal.apply(y,arguments);return function(){return Math.exp(a())}},
bates:function(a){var b=y.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b}}};y.scale={};var Lh={floor:q,ceil:q};y.scale.linear=function(){return fg([0,1],[0,1],Sc,!1)};var Oh={s:1,g:1,p:1,r:1,e:1};y.scale.log=function(){return hg(y.scale.linear().domain([0,1]),10,!0,[1,10])};var ig=y.format(".0e"),Ph={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};y.scale.pow=function(){return jg(y.scale.linear(),
1,[0,1])};y.scale.sqrt=function(){return y.scale.pow().exponent(.5)};y.scale.ordinal=function(){return kg([],{t:"range",a:[[]]})};y.scale.category10=function(){return y.scale.ordinal().range(si)};y.scale.category20=function(){return y.scale.ordinal().range(ti)};y.scale.category20b=function(){return y.scale.ordinal().range(ui)};y.scale.category20c=function(){return y.scale.ordinal().range(vi)};var si=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ub),ti=[2062260,
11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ub),ui=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ub),vi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,
6513507,9868950,12434877,14277081].map(Ub);y.scale.quantile=function(){return lg([],[])};y.scale.quantize=function(){return mg(0,1,[0,1])};y.scale.threshold=function(){return ng([.5],[0,1])};y.scale.identity=function(){return og([0,1])};y.svg={};y.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),l=Math.max(0,+d.apply(this,arguments)),x=g.apply(this,arguments)-Qa,q=h.apply(this,arguments)-Qa,p=Math.abs(q-x),m=x>q?0:1;l<a&&(u=l,l=a,a=u);if(p>=hi)return b(l,m)+(a?b(a,1-m):"")+
"Z";var u,t,n,v,K=0,r=0,w,A,z,B,Aa,D=[];if(v=(+k.apply(this,arguments)||0)/2)n=f===Ce?Math.sqrt(a*a+l*l):+f.apply(this,arguments),m||(r*=-1),l&&(r=Ja(n/l*Math.sin(v))),a&&(K=Ja(n/a*Math.sin(v)));l?(n=l*Math.cos(x+r),v=l*Math.sin(x+r),w=l*Math.cos(q-r),A=l*Math.sin(q-r),t=Math.abs(q-x-2*r)<=ea?0:1,r&&ke(n,v,w,A)===m^t&&(w=(x+q)/2,n=l*Math.cos(w),v=l*Math.sin(w),w=A=null)):n=v=0;if(a){r=a*Math.cos(q-K);z=a*Math.sin(q-K);B=a*Math.cos(x+K);Aa=a*Math.sin(x+K);var ma=Math.abs(x-q+2*K)<=ea?0:1;K&&ke(r,z,
B,Aa)===1-m^ma&&(B=(x+q)/2,r=a*Math.cos(B),z=a*Math.sin(B),B=Aa=null)}else r=z=0;1E-6<p&&.001<(u=Math.min(Math.abs(l-a)/2,+e.apply(this,arguments)))?(t=a<l^m?0:1,ma=x=u,p<ea&&(p=null==B?[r,z]:null==w?[n,v]:xd([n,v],[B,Aa],[w,A],[r,z]),ma=n-p[0],x=v-p[1],q=w-p[0],K=A-p[1],x=1/Math.sin(Math.acos((ma*q+x*K)/(Math.sqrt(ma*ma+x*x)*Math.sqrt(q*q+K*K)))/2),p=Math.sqrt(p[0]*p[0]+p[1]*p[1]),ma=Math.min(u,(a-p)/(x-1)),x=Math.min(u,(l-p)/(x+1))),null!=w?(p=le(null==B?[r,z]:[B,Aa],[n,v],l,x,m),q=le([w,A],[r,
z],l,x,m),u===x?D.push("M",p[0],"A",x,",",x," 0 0,",t," ",p[1],"A",l,",",l," 0 ",1-m^ke(p[1][0],p[1][1],q[1][0],q[1][1]),",",m," ",q[1],"A",x,",",x," 0 0,",t," ",q[0]):D.push("M",p[0],"A",x,",",x," 0 1,",t," ",q[0])):D.push("M",n,",",v),null!=B?(l=le([n,v],[B,Aa],a,-ma,m),w=le([r,z],null==w?[n,v]:[w,A],a,-ma,m),u===ma?D.push("L",w[0],"A",ma,",",ma," 0 0,",t," ",w[1],"A",a,",",a," 0 ",m^ke(w[1][0],w[1][1],l[1][0],l[1][1]),",",1-m," ",l[1],"A",ma,",",ma," 0 0,",t," ",l[0]):D.push("L",w[0],"A",ma,",",
ma," 0 0,",t," ",l[0])):D.push("L",r,",",z)):(D.push("M",n,",",v),null!=w&&D.push("A",l,",",l," 0 ",t,",",m," ",w,",",A),D.push("L",r,",",z),null!=B&&D.push("A",a,",",a," 0 ",ma,",",1-m," ",B,",",Aa));D.push("Z");return D.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=Rh,d=Sh,e=Qh,f=Ce,g=pg,h=qg,k=Th;a.innerRadius=function(b){if(!arguments.length)return c;c=da(b);return a};a.outerRadius=function(b){if(!arguments.length)return d;d=da(b);return a};
a.cornerRadius=function(b){if(!arguments.length)return e;e=da(b);return a};a.padRadius=function(b){if(!arguments.length)return f;f=b==Ce?Ce:da(b);return a};a.startAngle=function(b){if(!arguments.length)return g;g=da(b);return a};a.endAngle=function(b){if(!arguments.length)return h;h=da(b);return a};a.padAngle=function(b){if(!arguments.length)return k;k=da(b);return a};a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+g.apply(this,arguments)+ +h.apply(this,arguments))/
2-Qa;return[Math.cos(b)*a,Math.sin(b)*a]};return a};var Ce="auto";y.svg.line=function(){return rg(q)};var cf=y.map({linear:dc,"linear-closed":sg,step:function(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);1<c&&e.push("H",d[0]);return e.join("")},"step-before":df,"step-after":ef,basis:tg,"basis-open":function(a){if(4>a.length)return dc(a);for(var b=[],c=-1,d=a.length,e,f=[0],g=[0];3>++c;)e=a[c],f.push(e[0]),g.push(e[1]);b.push(Tb(Nc,f)+","+Tb(Nc,
g));for(--c;++c<d;)e=a[c],f.shift(),f.push(e[0]),g.shift(),g.push(e[1]),gf(b,f,g);return b.join("")},"basis-closed":function(a){for(var b,c=-1,d=a.length,e=d+4,f,g=[],h=[];4>++c;)f=a[c%d],g.push(f[0]),h.push(f[1]);b=[Tb(Nc,g),",",Tb(Nc,h)];for(--c;++c<e;)f=a[c%d],g.shift(),g.push(f[0]),h.shift(),h.push(f[1]),gf(b,g,h);return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var d=a[0][0],e=a[0][1],f=a[c][0]-d,g=a[c][1]-e,h=-1,k,l;++h<=c;)k=a[h],l=h/c,k[0]=b*k[0]+(1-b)*(d+l*f),k[1]=b*k[1]+
(1-b)*(e+l*g);return tg(a)},cardinal:function(a,b){return 3>a.length?dc(a):a[0]+me(a,ff(a,b))},"cardinal-open":function(a,b){return 4>a.length?dc(a):a[1]+me(a.slice(1,-1),ff(a,b))},"cardinal-closed":function(a,b){return 3>a.length?sg(a):a[0]+me((a.push(a[0]),a),ff([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=dc(a);else{var b=a[0],c=[],d,e,f,g;d=0;e=a.length-1;var h=[];f=a[1];for(g=h[0]=hf(a[0],f);++d<e;)h[d]=(g+(g=hf(f,f=a[d+1])))/2;h[d]=g;for(var k=-1,l=a.length-1;++k<
l;)d=hf(a[k],a[k+1]),1E-6>ga(d)?h[k]=h[k+1]=0:(e=h[k]/d,f=h[k+1]/d,g=e*e+f*f,9<g&&(g=3*d/Math.sqrt(g),h[k]=g*e,h[k+1]=g*f));for(k=-1;++k<=l;)g=(a[Math.min(l,k+1)][0]-a[Math.max(0,k-1)][0])/(6*(1+h[k]*h[k])),c.push([g||0,h[k]*g||0]);a=b+me(a,c)}return a}});cf.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var ug=[0,2/3,1/3,0],vg=[0,1/3,2/3,0],Nc=[0,1/6,2/3,1/6];y.svg.line.radial=function(){var a=rg(wg);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};df.reverse=ef;ef.reverse=df;
y.svg.area=function(){return xg(q)};y.svg.area.radial=function(){var a=xg(wg);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};y.svg.chord=function(){function a(a,f){var g=b(this,d,a,f),h=b(this,e,a,f);return"M"+g.p0+c(g.r,g.p1,g.a1-g.a0)+(g.a0==h.a0&&g.a1==h.a1?"Q 0,0 "+g.p0:"Q 0,0 "+h.p0+c(h.r,h.p1,h.a1-h.a0)+("Q 0,0 "+g.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d);
b=f.call(a,e,d);c=g.call(a,e,d)-Qa;a=h.call(a,e,d)-Qa;return{r:b,a0:c,a1:a,p0:[b*Math.cos(c),b*Math.sin(c)],p1:[b*Math.cos(a),b*Math.sin(a)]}}function c(a,b,c){return"A"+a+","+a+" 0 "+ +(c>ea)+",1 "+b}var d=sd,e=S,f=Uh,g=pg,h=qg;a.radius=function(b){if(!arguments.length)return f;f=da(b);return a};a.source=function(b){if(!arguments.length)return d;d=da(b);return a};a.target=function(b){if(!arguments.length)return e;e=da(b);return a};a.startAngle=function(b){if(!arguments.length)return g;g=da(b);return a};
a.endAngle=function(b){if(!arguments.length)return h;h=da(b);return a};return a};y.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,f=[f,{x:f.x,y:h},{x:g.x,y:h},g],f=f.map(d);return"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var b=sd,c=S,d=yg;a.source=function(c){if(!arguments.length)return b;b=da(c);return a};a.target=function(b){if(!arguments.length)return c;c=da(b);return a};a.projection=function(b){if(!arguments.length)return d;d=b;return a};return a};y.svg.diagonal.radial=
function(){var a=y.svg.diagonal(),b=yg,c=a.projection;a.projection=function(a){return arguments.length?c(Vh(b=a)):b};return a};y.svg.symbol=function(){function a(a,d){return(Og.get(b.call(this,a,d))||zg)(c.call(this,a,d))}var b=Xh,c=Wh;a.type=function(c){if(!arguments.length)return b;b=da(c);return a};a.size=function(b){if(!arguments.length)return c;c=da(b);return a};return a};var Og=y.map({circle:zg,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+
a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*Pg));var b=a*Pg;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/De);var b=a*De/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/De);var b=a*De/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});y.svg.symbolTypes=Og.keys();var De=Math.sqrt(3),Pg=Math.tan(30*
fa);wa.transition=function(a){var b=bd||++Qg;a=kf(a);for(var c=[],d,e,f=Ee||{time:Date.now(),ease:Wg,delay:0,duration:250},g=-1,h=this.length;++g<h;){c.push(d=[]);for(var k=this[g],l=-1,x=k.length;++l<x;)(e=k[l])&&ne(e,l,a,b,f),d.push(e)}return Fd(c,a,b)};wa.interrupt=function(a){return this.each(null==a?qe:Ag(kf(a)))};var qe=Ag(kf()),bb=[],Qg=0,bd,Ee;bb.call=wa.call;bb.empty=wa.empty;bb.node=wa.node;bb.size=wa.size;y.transition=function(a,b){return a&&a.transition?bd?a.transition(b):a:y.selection().transition(a)};
y.transition.prototype=bb;bb.select=function(a){var b=this.id,c=this.namespace,d=[],e,f,g;a=I(a);for(var h=-1,k=this.length;++h<k;){d.push(e=[]);for(var l=this[h],x=-1,q=l.length;++x<q;)(g=l[x])&&(f=a.call(g,g.__data__,x,h))?("__data__"in g&&(f.__data__=g.__data__),ne(f,x,c,b,g[c][b]),e.push(f)):e.push(null)}return Fd(d,c,b)};bb.selectAll=function(a){var b=this.id,c=this.namespace,d=[],e,f,g,h;a=U(a);for(var k=-1,l=this.length;++k<l;)for(var x=this[k],q=-1,p=x.length;++q<p;)if(e=x[q]){h=e[c][b];f=
a.call(e,e.__data__,q,k);d.push(e=[]);for(var m=-1,u=f.length;++m<u;)(g=f[m])&&ne(g,m,c,b,h),e.push(g)}return Fd(d,c,b)};bb.filter=function(a){var b=[],c,d,e;"function"!==typeof a&&(a=Y(a));for(var f=0,g=this.length;f<g;f++){b.push(c=[]);d=this[f];for(var h=0,k=d.length;h<k;h++)(e=d[h])&&a.call(e,e.__data__,h,f)&&c.push(e)}return Fd(b,this.namespace,this.id)};bb.tween=function(a,b){var c=this.id,d=this.namespace;return 2>arguments.length?this.node()[d][c].tween.get(a):qa(this,null==b?function(b){b[d][c].tween.remove(a)}:
function(e){e[d][c].tween.set(a,b)})};bb.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b=this.getAttribute(h),c;return b!==a&&(c=g(b,a),function(a){this.setAttribute(h,c(a))})})}function f(a){return null==a?d:(a+="",function(){var b=this.getAttributeNS(h.space,h.local),c;return b!==a&&(c=g(b,a),function(a){this.setAttributeNS(h.space,h.local,c(a))})})}if(2>arguments.length){for(b in a)this.attr(b,
a[b]);return this}var g="transform"==a?Df:Sc,h=y.ns.qualify(a);return jf(this,"attr."+a,b,h.local?f:e)};bb.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=y.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)};bb.style=function(b,c,d){function e(){this.style.removeProperty(b)}
var f=arguments.length;if(3>f){if("string"!==typeof b){2>f&&(c="");for(d in b)this.style(d,b[d],c);return this}d=""}return jf(this,"style."+b,c,function(c){return null==c?e:(c+="",function(){var e=a(this).getComputedStyle(this,null).getPropertyValue(b),f;return e!==c&&(f=Sc(e,c),function(a){this.style.setProperty(b,f(a),d)})})})};bb.styleTween=function(b,c,d){3>arguments.length&&(d="");return this.tween("style."+b,function(e,f){var g=c.call(this,e,f,a(this).getComputedStyle(this,null).getPropertyValue(b));
return g&&function(a){this.style.setProperty(b,g(a),d)}})};bb.text=function(a){return jf(this,"text",a,Yh)};bb.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;2>this[a].count&&(b=this.parentNode)&&b.removeChild(this)})};bb.ease=function(a){var b=this.id,c=this.namespace;if(1>arguments.length)return this.node()[c][b].ease;"function"!==typeof a&&(a=y.ease.apply(y,arguments));return qa(this,function(d){d[c][b].ease=a})};bb.delay=function(a){var b=this.id,c=this.namespace;
return 1>arguments.length?this.node()[c][b].delay:qa(this,"function"===typeof a?function(d,e,f){d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))};bb.duration=function(a){var b=this.id,c=this.namespace;return 1>arguments.length?this.node()[c][b].duration:qa(this,"function"===typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))};bb.each=function(a,b){var c=this.id,d=this.namespace;if(2>arguments.length){var e=
Ee,f=bd;try{bd=c,qa(this,function(b,e,f){Ee=b[d][c];a.call(b,b.__data__,e,f)})}finally{Ee=e,bd=f}}else qa(this,function(e){e=e[d][c];(e.event||(e.event=y.dispatch("start","end","interrupt"))).on(a,b)});return this};bb.transition=function(){for(var a=this.id,b=++Qg,c=this.namespace,d=[],e,f,g,h,k=0,l=this.length;k<l;k++){d.push(e=[]);f=this[k];for(var x=0,q=f.length;x<q;x++){if(g=f[x])h=g[c][a],ne(g,x,c,b,{time:h.time,ease:h.ease,delay:h.delay+h.duration,duration:h.duration});e.push(g)}}return Fd(d,
c,b)};y.svg.axis=function(){function a(a){a.each(function(){var a=y.select(this),l=this.__chart__||b,x=this.__chart__=b.copy(),p=null==h?x.ticks?x.ticks.apply(x,g):x.domain():h,m=null==k?x.tickFormat?x.tickFormat.apply(x,g):q:k,u=a.selectAll(".tick").data(p,x),p=u.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),t=y.transition(u.exit()).style("opacity",1E-6).remove(),n=y.transition(u.order()).style("opacity",1),K=Math.max(d,0)+f,r=ge(x),a=a.selectAll(".domain").data([0]),a=
(a.enter().append("path").attr("class","domain"),y.transition(a));p.append("line");p.append("text");var w=p.select("line"),v=n.select("line"),u=u.select("text").text(m),A=p.select("text"),z=n.select("text"),B="top"===c||"left"===c?-1:1,Aa,D,ma,E;"bottom"===c||"top"===c?(m=Zh,Aa="x",ma="y",D="x2",E="y2",u.attr("dy",0>B?"0em":".71em").style("text-anchor","middle"),a.attr("d","M"+r[0]+","+B*e+"V0H"+r[1]+"V"+B*e)):(m=$h,Aa="y",ma="x",D="y2",E="x2",u.attr("dy",".32em").style("text-anchor",0>B?"end":"start"),
a.attr("d","M"+B*e+","+r[0]+"H0V"+r[1]+"H"+B*e));w.attr(E,B*d);A.attr(ma,B*K);v.attr(D,0).attr(E,B*d);z.attr(Aa,0).attr(ma,B*K);if(x.rangeBand)var R=x,F=R.rangeBand()/2,l=x=function(a){return R(a)+F};else l.rangeBand?l=x:t.call(m,x,l);p.call(m,l,x);n.call(m,x,x)})}var b=y.scale.linear(),c=Rg,d=6,e=6,f=3,g=[10],h=null,k;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(b){if(!arguments.length)return c;c=b in wi?b+"":Rg;return a};a.ticks=function(){if(!arguments.length)return g;
g=kc(arguments);return a};a.tickValues=function(b){if(!arguments.length)return h;h=b;return a};a.tickFormat=function(b){if(!arguments.length)return k;k=b;return a};a.tickSize=function(b){var c=arguments.length;if(!c)return d;d=+b;e=+arguments[c-1];return a};a.innerTickSize=function(b){if(!arguments.length)return d;d=+b;return a};a.outerTickSize=function(b){if(!arguments.length)return e;e=+b;return a};a.tickPadding=function(b){if(!arguments.length)return f;f=+b;return a};a.tickSubdivide=function(){return arguments.length&&
a};return a};var Rg="bottom",wi={top:1,right:1,bottom:1,left:1};y.svg.brush=function(){function b(a){a.each(function(){var a=y.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=a.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");a.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor",
"move");var l=a.selectAll(".resize").data(n,q);l.exit().remove();l.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return xi[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");l.style("display",b.empty()?"none":null);a=y.transition(a);g=y.transition(g);h&&(l=ge(h),g.attr("x",l[0]).attr("width",l[1]-l[0]),d(a));k&&(l=ge(k),
g.attr("y",l[0]).attr("height",l[1]-l[0]),e(a));c(a)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)]+","+x[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",l[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function e(a){a.select(".extent").attr("y",x[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",x[1]-x[0])}function f(){function f(){var a=y.mouse(K),b=!1;R&&(a[0]+=R[0],a[1]+=R[1]);Aa||(y.event.altKey?
(ma||(ma=[(l[0]+l[1])/2,(x[0]+x[1])/2]),E[0]=l[+(a[0]<ma[0])],E[1]=x[+(a[1]<ma[1])]):ma=null);z&&q(a,h,0)&&(d(A),b=!0);B&&q(a,k,1)&&(e(A),b=!0);b&&(c(A),w({type:"brush",mode:Aa?"move":"resize"}))}function q(a,b,c){var d=ge(b);b=d[0];var e=d[1],d=E[c],f=c?x:l,g=f[1]-f[0];Aa&&(b-=d,e-=g+d);a=(c?t:u)?Math.max(b,Math.min(e,a[c])):a[c];Aa?b=(a+=d)+g:(ma&&(d=Math.max(b,Math.min(e,2*ma[c]-a))),d<a?(b=a,a=d):b=d);if(f[0]!=a||f[1]!=b)return c?m=null:p=null,f[0]=a,f[1]=b,!0}function n(){f();A.style("pointer-events",
"all").selectAll(".resize").style("display",b.empty()?"none":null);y.select("body").style("cursor",null);L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);D();w({type:"brushend"})}var K=this,r=y.select(y.event.target),w=g.of(K,arguments),A=y.select(K),v=r.datum(),z=!/^(n|s)$/.test(v)&&h,B=!/^(e|w)$/.test(v)&&k,Aa=r.classed("extent"),D=M(K),ma,E=y.mouse(K),R,L=y.select(a(K)).on("keydown.brush",
function(){32==y.event.keyCode&&(Aa||(ma=null,E[0]-=l[1],E[1]-=x[1],Aa=2),F())}).on("keyup.brush",function(){32==y.event.keyCode&&2==Aa&&(E[0]+=l[1],E[1]+=x[1],Aa=0,F())});if(y.event.changedTouches)L.on("touchmove.brush",f).on("touchend.brush",n);else L.on("mousemove.brush",f).on("mouseup.brush",n);A.interrupt().selectAll("*").interrupt();if(Aa)E[0]=l[0]-E[0],E[1]=x[0]-E[1];else if(v){var G=+/w$/.test(v),v=+/^n/.test(v);R=[l[1-G]-E[0],x[1-v]-E[1]];E[0]=l[G];E[1]=x[v]}else y.event.altKey&&(ma=E.slice());
A.style("pointer-events","none").selectAll(".resize").style("display",null);y.select("body").style("cursor",r.style("cursor"));w({type:"brushstart"});f()}var g=P(b,"brushstart","brush","brushend"),h=null,k=null,l=[0,0],x=[0,0],p,m,u=!0,t=!0,n=uf[0];b.event=function(a){a.each(function(){var a=g.of(this,arguments),b={x:l,y:x,i:p,j:m},c=this.__chart__||b;this.__chart__=b;bd?y.select(this).transition().each("start.brush",function(){p=c.i;m=c.j;l=c.x;x=c.y;a({type:"brushstart"})}).tween("brush:brush",
function(){var c=Yd(l,b.x),d=Yd(x,b.y);p=m=null;return function(e){l=b.x=c(e);x=b.y=d(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){p=b.i;m=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};b.x=function(a){if(!arguments.length)return h;h=a;n=uf[!h<<1|!k];return b};b.y=function(a){if(!arguments.length)return k;k=a;n=uf[!h<<1|!k];return b};b.clamp=function(a){if(!arguments.length)return h&&
k?[u,t]:h?u:k?t:null;h&&k?(u=!!a[0],t=!!a[1]):h?u=!!a:k&&(t=!!a);return b};b.extent=function(a){var c,d,e,f,g;if(!arguments.length)return h&&(p?(c=p[0],d=p[1]):(c=l[0],d=l[1],h.invert&&(c=h.invert(c),d=h.invert(d)),d<c&&(g=c,c=d,d=g))),k&&(m?(e=m[0],f=m[1]):(e=x[0],f=x[1],k.invert&&(e=k.invert(e),f=k.invert(f)),f<e&&(g=e,e=f,f=g))),h&&k?[[c,e],[d,f]]:h?[c,d]:k&&[e,f];h&&(c=a[0],d=a[1],k&&(c=c[0],d=d[0]),p=[c,d],h.invert&&(c=h(c),d=h(d)),d<c&&(g=c,c=d,d=g),c!=l[0]||d!=l[1])&&(l=[c,d]);k&&(e=a[0],f=
a[1],h&&(e=e[1],f=f[1]),m=[e,f],k.invert&&(e=k(e),f=k(f)),f<e&&(g=e,e=f,f=g),e!=x[0]||f!=x[1])&&(x=[e,f]);return b};b.clear=function(){b.empty()||(l=[0,0],x=[0,0],p=m=null);return b};b.empty=function(){return!!h&&l[0]==l[1]||!!k&&x[0]==x[1]};return y.rebind(b,g,"on")};var xi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},uf=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],vf=V.format=Fg.timeFormat,Sg=vf.utc,Tg=
Sg("%Y-%m-%dT%H:%M:%S.%LZ");vf.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?lf:Tg;lf.parse=function(a){a=new Date(a);return isNaN(a)?null:a};lf.toString=Tg.toString;V.second=lb(function(a){return new ob(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});V.seconds=V.second.range;V.seconds.utc=V.second.utc.range;V.minute=lb(function(a){return new ob(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*
Math.floor(b))},function(a){return a.getMinutes()});V.minutes=V.minute.range;V.minutes.utc=V.minute.utc.range;V.hour=lb(function(a){var b=a.getTimezoneOffset()/60;return new ob(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});V.hours=V.hour.range;V.hours.utc=V.hour.utc.range;V.month=lb(function(a){a=V.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});V.months=V.month.range;
V.months.utc=V.month.utc.range;var oe=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],wf=[[V.second,1],[V.second,5],[V.second,15],[V.second,30],[V.minute,1],[V.minute,5],[V.minute,15],[V.minute,30],[V.hour,1],[V.hour,3],[V.hour,6],[V.hour,12],[V.day,1],[V.day,2],[V.week,1],[V.month,1],[V.month,3],[V.year,1]],yi=vf.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],
["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",wc]]),ai={range:function(a,b,c){return y.range(Math.ceil(a/c)*c,+b,c).map(ad)},floor:q,ceil:q};wf.year=V.year;V.scale=function(){return mf(y.scale.linear(),wf,yi)};var Ug=wf.map(function(a){return[a[0].utc,a[1]]}),zi=Sg.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],
["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",wc]]);Ug.year=V.year.utc;V.scale.utc=function(){return mf(y.scale.linear(),Ug,zi)};y.text=gb(function(a){return a.responseText});y.json=function(a,b){return ca(a,"application/json",bi,b)};y.html=function(a,b){return ca(a,"text/html",ci,b)};y.xml=gb(function(a){return a.responseXML});
"function"===typeof define&&define.amd?(this.d3=y,define(y)):"object"===typeof module&&module.exports?module.exports=y:this.d3=y}();(function(a,e){"object"===typeof exports&&"undefined"!==typeof module?module.exports=e():"function"===typeof define&&define.amd?define(e):a.moment=e()})(this,function(){function a(){return hb.apply(null,arguments)}function e(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function f(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function g(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function d(a,b){return Object.prototype.hasOwnProperty.call(a,
b)}function b(a,b){for(var c in b)d(b,c)&&(a[c]=b[c]);d(b,"toString")&&(a.toString=b.toString);d(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function c(a,b,c,d){return rc(a,b,c,d,!0).utc()}function h(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null});return a._pf}function n(a){if(null==a._isValid){var b=h(a),c=Cb.call(b.parsedDateParts,function(a){return null!=
a});a._isValid=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function m(a){var d=c(NaN);null!=a?b(h(d),a):h(d).userInvalidated=!0;return d}function t(a){return void 0===a}function w(a,b){var c,d,e;t(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);t(b._i)||
(a._i=b._i);t(b._f)||(a._f=b._f);t(b._l)||(a._l=b._l);t(b._strict)||(a._strict=b._strict);t(b._tzm)||(a._tzm=b._tzm);t(b._isUTC)||(a._isUTC=b._isUTC);t(b._offset)||(a._offset=b._offset);t(b._pf)||(a._pf=h(b));t(b._locale)||(a._locale=b._locale);if(0<hc.length)for(c in hc)d=hc[c],e=b[d],t(e)||(a[d]=e);return a}function l(b){w(this,b);this._d=new Date(null!=b._d?b._d.getTime():NaN);!1===Lb&&(Lb=!0,a.updateOffset(this),Lb=!1)}function p(a){return a instanceof l||null!=a&&null!=a._isAMomentObject}function u(a){return 0>
a?Math.ceil(a):Math.floor(a)}function k(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=u(a));return b}function q(a,b,c){var d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0,g;for(g=0;g<d;g++)(c&&a[g]!==b[g]||!c&&k(a[g])!==k(b[g]))&&f++;return f+e}function A(b){!1===a.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function z(c,d){var e=!0;return b(function(){null!=a.deprecationHandler&&a.deprecationHandler(null,c);e&&(A(c+"\nArguments: "+
Array.prototype.slice.call(arguments).join(", ")+"\n"+Error().stack),e=!1);return d.apply(this,arguments)},d)}function B(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c);Kb[b]||(A(c),Kb[b]=!0)}function E(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function D(a,c){var e=b({},a),f;for(f in c)d(c,f)&&("[object Object]"===Object.prototype.toString.call(a[f])&&"[object Object]"===Object.prototype.toString.call(c[f])?(e[f]={},b(e[f],a[f]),b(e[f],c[f])):
null!=c[f]?e[f]=c[f]:delete e[f]);return e}function F(a){null!=a&&this.set(a)}function G(a){return a?a.toLowerCase().replace("_","-"):a}function P(a){var b=null;if(!sa[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=rb._abbr,require("./locale/"+a),J(b)}catch(Aa){}return sa[a]}function J(a,b){var c;a&&(c=t(b)?U(a):I(a,b))&&(rb=c);return rb._abbr}function I(a,b){if(null!==b)return b.abbr=a,null!=sa[a]?(B("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),
b=D(sa[a]._config,b)):null!=b.parentLocale&&(null!=sa[b.parentLocale]?b=D(sa[b.parentLocale]._config,b):B("parentLocaleUndefined","specified parentLocale is not defined yet")),sa[a]=new F(b),J(a),sa[a];delete sa[a];return null}function U(a){var b;a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr);if(!a)return rb;if(!e(a)){if(b=P(a))return b;a=[a]}a:{b=0;for(var c,d,f,g;b<a.length;){g=G(a[b]).split("-");c=g.length;for(d=(d=G(a[b+1]))?d.split("-"):null;0<c;){if(f=P(g.slice(0,c).join("-"))){a=f;break a}if(d&&
d.length>=c&&q(g,d,!0)>=c-1)break;c--}b++}a=null}return a}function O(a,b){var c=a.toLowerCase();Db[c]=Db[c+"s"]=Db[b]=a}function aa(a){return"string"===typeof a?Db[a]||Db[a.toLowerCase()]:void 0}function ia(a){var b={},c,e;for(e in a)d(a,e)&&(c=aa(e))&&(b[c]=a[e]);return b}function X(b,c){return function(d){if(null!=d){if(this.isValid())this._d["set"+(this._isUTC?"UTC":"")+b](d);a.updateOffset(this,c);return this}return R(this,b)}}function R(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+
b]():NaN}function L(a,b){var c;if("object"===typeof a)for(c in a)this.set(c,a[c]);else if(a=aa(a),E(this[a]))return this[a](b);return this}function ja(a,b,c){var d=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d}function H(a,b,c,d){var e=d;"string"===typeof d&&(e=function(){return this[d]()});a&&(nb[a]=e);b&&(nb[b[0]]=function(){return ja(e.apply(this,arguments),b[1],b[2])});c&&(nb[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),
a)})}function Y(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function ka(a){var b=a.match($b),c,d;c=0;for(d=b.length;c<d;c++)b[c]=nb[b[c]]?nb[b[c]]:Y(b[c]);return function(c){var e="",f;for(f=0;f<d;f++)e+=b[f]instanceof Function?b[f].call(c,a):b[f];return e}}function qa(a,b){if(!a.isValid())return a.localeData().invalidDate();b=ua(b,a.localeData());wb[b]=wb[b]||ka(b);return wb[b](a)}function ua(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for($a.lastIndex=
0;0<=d&&$a.test(a);)a=a.replace($a,c),$a.lastIndex=0,--d;return a}function T(a,b,c){Vc[a]=E(b)?b:function(a,d){return a&&c?c:b}}function ba(a,b){return d(Vc,a)?Vc[a](b._strict,b._locale):new RegExp(ha(a))}function ha(a){return N(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function N(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function M(a,b){var c,d=b;"string"===typeof a&&(a=[a]);"number"===typeof b&&(d=function(a,c){c[b]=k(a)});
for(c=0;c<a.length;c++)Dc[a[c]]=d}function Q(a,b){M(a,function(a,c,d,e){d._w=d._w||{};b(a,d._w,d,e)})}function Z(a,b){return(new Date(Date.UTC(a,b+1,0))).getUTCDate()}function Na(a,b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=k(b);else if(b=a.localeData().monthsParse(b),"number"!==typeof b)return a;c=Math.min(a.date(),Z(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function xa(b){return null!=b?(Na(this,b),a.updateOffset(this,!0),this):R(this,
"Month")}function Ja(){function a(a,b){return b.length-a.length}var b=[],d=[],e=[],f,g;for(f=0;12>f;f++)g=c([2E3,f]),b.push(this.monthsShort(g,"")),d.push(this.months(g,"")),e.push(this.months(g,"")),e.push(this.monthsShort(g,""));b.sort(a);d.sort(a);e.sort(a);for(f=0;12>f;f++)b[f]=N(b[f]),d[f]=N(d[f]),e[f]=N(e[f]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+e.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+d.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+
b.join("|")+")","i")}function La(a){var b;(b=a._a)&&-2===h(a).overflow&&(b=0>b[Eb]||11<b[Eb]?Eb:1>b[yb]||b[yb]>Z(b[sb],b[Eb])?yb:0>b[Va]||24<b[Va]||24===b[Va]&&(0!==b[ab]||0!==b[zb]||0!==b[Fb])?Va:0>b[ab]||59<b[ab]?ab:0>b[zb]||59<b[zb]?zb:0>b[Fb]||999<b[Fb]?Fb:-1,h(a)._overflowDayOfYear&&(b<sb||b>yb)&&(b=yb),h(a)._overflowWeeks&&-1===b&&(b=fd),h(a)._overflowWeekday&&-1===b&&(b=gd),h(a).overflow=b);return a}function Ca(a){var b,c;b=a._i;var d=Hd.exec(b)||Id.exec(b),e,f,g,k;if(d){h(a).iso=!0;b=0;for(c=
Ac.length;b<c;b++)if(Ac[b][1].exec(d[1])){f=Ac[b][0];e=!1!==Ac[b][2];break}if(null==f)a._isValid=!1;else{if(d[3]){b=0;for(c=cd.length;b<c;b++)if(cd[b][1].exec(d[3])){g=(d[2]||" ")+cd[b][0];break}if(null==g){a._isValid=!1;return}}if(e||null==g){if(d[4])if(Fe.exec(d[4]))k="Z";else{a._isValid=!1;return}a._f=f+(g||"")+(k||"");qb(a)}else a._isValid=!1}}else a._isValid=!1}function Za(b){var c=Jd.exec(b._i);null!==c?b._d=new Date(+c[1]):(Ca(b),!1===b._isValid&&(delete b._isValid,a.createFromInputFallback(b)))}
function la(a,b,c,d,e,f,g){b=new Date(a,b,c,d,e,f,g);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function r(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);return b}function Ma(a){return 0===a%4&&0!==a%100||0===a%400}function fb(a,b,c){c=7+b-c;return-((7+r(a,0,c).getUTCDay()-b)%7)+c-1}function Ea(a,b,c,d,e){c=(7+c-d)%7;d=fb(a,d,e);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(Ma(b)?366:365)+d):d>(Ma(a)?366:365)?(b=a+1,a=d-(Ma(a)?
366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function mb(a,b,c){var d=fb(a.year(),b,c),d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+Ha(a,b,c)):d>Ha(a.year(),b,c)?(b=d-Ha(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}}function Ha(a,b,c){var d=fb(a,b,c);b=fb(a+1,b,c);return((Ma(a)?366:365)-d+b)/7}function Oa(a,b,c){return null!=a?a:null!=b?b:c}function Ta(b){var c,d=[],e;if(!b._d){e=new Date(a.now());e=b._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:
[e.getFullYear(),e.getMonth(),e.getDate()];if(b._w&&null==b._a[yb]&&null==b._a[Eb]){var f,g,k,l,q,p;f=b._w;if(null!=f.GG||null!=f.W||null!=f.E){if(q=1,p=4,g=Oa(f.GG,b._a[sb],mb(ra(),1,4).year),k=Oa(f.W,1),l=Oa(f.E,1),1>l||7<l)c=!0}else if(q=b._locale._week.dow,p=b._locale._week.doy,g=Oa(f.gg,b._a[sb],mb(ra(),q,p).year),k=Oa(f.w,1),null!=f.d){if(l=f.d,0>l||6<l)c=!0}else if(null!=f.e){if(l=f.e+q,0>f.e||6<f.e)c=!0}else l=q;1>k||k>Ha(g,q,p)?h(b)._overflowWeeks=!0:null!=c?h(b)._overflowWeekday=!0:(c=Ea(g,
k,l,q,p),b._a[sb]=c.year,b._dayOfYear=c.dayOfYear)}b._dayOfYear&&(c=Oa(b._a[sb],e[sb]),b._dayOfYear>(Ma(c)?366:365)&&(h(b)._overflowDayOfYear=!0),c=r(c,0,b._dayOfYear),b._a[Eb]=c.getUTCMonth(),b._a[yb]=c.getUTCDate());for(c=0;3>c&&null==b._a[c];++c)b._a[c]=d[c]=e[c];for(;7>c;c++)b._a[c]=d[c]=null==b._a[c]?2===c?1:0:b._a[c];24===b._a[Va]&&0===b._a[ab]&&0===b._a[zb]&&0===b._a[Fb]&&(b._nextDay=!0,b._a[Va]=0);b._d=(b._useUTC?r:la).apply(null,d);null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm);
b._nextDay&&(b._a[Va]=24)}}function qb(b){if(b._f===a.ISO_8601)Ca(b);else{b._a=[];h(b).empty=!0;var c=""+b._i,e,f,g,k,l,q=c.length,p=0;g=ua(b._f,b._locale).match($b)||[];for(e=0;e<g.length;e++){k=g[e];if(f=(c.match(ba(k,b))||[])[0])l=c.substr(0,c.indexOf(f)),0<l.length&&h(b).unusedInput.push(l),c=c.slice(c.indexOf(f)+f.length),p+=f.length;if(nb[k]){if(f?h(b).empty=!1:h(b).unusedTokens.push(k),l=b,null!=f&&d(Dc,k))Dc[k](f,l._a,l,k)}else b._strict&&!f&&h(b).unusedTokens.push(k)}h(b).charsLeftOver=q-
p;0<c.length&&h(b).unusedInput.push(c);!0===h(b).bigHour&&12>=b._a[Va]&&0<b._a[Va]&&(h(b).bigHour=void 0);h(b).parsedDateParts=b._a.slice(0);h(b).meridiem=b._meridiem;c=b._a;e=Va;q=b._locale;g=b._a[Va];p=b._meridiem;null!=p&&(null!=q.meridiemHour?g=q.meridiemHour(g,p):null!=q.isPM&&((q=q.isPM(p))&&12>g&&(g+=12),q||12!==g||(g=0)));c[e]=g;Ta(b);La(b)}}function Da(a){if(!a._d){var b=ia(a._i);a._a=g([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,
10)});Ta(a)}}function Ub(a){var c=a._i,d=a._f;a._locale=a._locale||U(a._l);if(null===c||void 0===d&&""===c)return m({nullInput:!0});"string"===typeof c&&(a._i=c=a._locale.preparse(c));if(p(c))return new l(La(c));if(e(d)){var g,k,q;if(0===a._f.length)h(a).invalidFormat=!0,a._d=new Date(NaN);else{for(c=0;c<a._f.length;c++)if(d=0,g=w({},a),null!=a._useUTC&&(g._useUTC=a._useUTC),g._f=a._f[c],qb(g),n(g)&&(d+=h(g).charsLeftOver,d+=10*h(g).unusedTokens.length,h(g).score=d,null==q||d<q))q=d,k=g;b(a,k||g)}}else d?
qb(a):f(c)?a._d=c:db(a);n(a)||(a._d=null);return a}function db(b){var c=b._i;void 0===c?b._d=new Date(a.now()):f(c)?b._d=new Date(c.valueOf()):"string"===typeof c?Za(b):e(c)?(b._a=g(c.slice(0),function(a){return parseInt(a,10)}),Ta(b)):"object"===typeof c?Da(b):"number"===typeof c?b._d=new Date(c):a.createFromInputFallback(b)}function rc(a,b,c,d,e){var f={};"boolean"===typeof c&&(d=c,c=void 0);f._isAMomentObject=!0;f._useUTC=f._isUTC=e;f._l=c;f._i=a;f._f=b;f._strict=d;a=new l(La(Ub(f)));a._nextDay&&
(a.add(1,"d"),a._nextDay=void 0);return a}function ra(a,b,c,d){return rc(a,b,c,d,!1)}function Yb(a,b){var c,d;1===b.length&&e(b[0])&&(b=b[0]);if(!b.length)return ra();c=b[0];for(d=1;d<b.length;++d)if(!b[d].isValid()||b[d][a](c))c=b[d];return c}function Ga(a){a=ia(a);var b=a.year||0,c=a.quarter||0,d=a.month||0,e=a.week||0,f=a.day||0;this._milliseconds=+(a.millisecond||0)+1E3*(a.second||0)+6E4*(a.minute||0)+36E5*(a.hour||0);this._days=+f+7*e;this._months=+d+3*c+12*b;this._data={};this._locale=U();this._bubble()}
function kb(a){return a instanceof Ga}function da(a,b){H(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+ja(~~(a/60),2)+b+ja(~~a%60,2)})}function gb(a,b){var c=(b||"").match(a)||[],c=((c[c.length-1]||[])+"").match(Kd)||["-",0,0],d=+(60*c[1])+k(c[2]);return"+"===c[0]?d:-d}function ca(b,c){var d,e;return c._isUTC?(d=c.clone(),e=(p(b)||f(b)?b.valueOf():ra(b).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),a.updateOffset(d,!1),d):ra(b).local()}function Ka(){return this.isValid()?
this._isUTC&&0===this._offset:!1}function cb(a,b){var c=a,e;kb(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:"number"===typeof a?(c={},b?c[b]=a:c.milliseconds=a):(e=nc.exec(a))?(c="-"===e[1]?-1:1,c={y:0,d:k(e[yb])*c,h:k(e[Va])*c,m:k(e[ab])*c,s:k(e[zb])*c,ms:k(e[Fb])*c}):(e=Ld.exec(a))?(c="-"===e[1]?-1:1,c={y:pb(e[2],c),M:pb(e[3],c),w:pb(e[4],c),d:pb(e[5],c),h:pb(e[6],c),m:pb(e[7],c),s:pb(e[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(e=ra(c.from),c=ra(c.to),e.isValid()&&c.isValid()?
(c=ca(c,e),e.isBefore(c)?c=gc(e,c):(c=gc(c,e),c.milliseconds=-c.milliseconds,c.months=-c.months),e=c):e={milliseconds:0,months:0},c={},c.ms=e.milliseconds,c.M=e.months);c=new Ga(c);kb(a)&&d(a,"_locale")&&(c._locale=a._locale);return c}function pb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function gc(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,
"M");return c}function Wa(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function Ya(a,b){return function(c,d){var e;null===d||isNaN(+d)||(B(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),e=c,c=d,d=e);e=cb("string"===typeof c?+c:c,d);Mb(this,e,a);return this}}function Mb(b,c,d,e){var f=c._milliseconds,g=Wa(c._days);c=Wa(c._months);if(b.isValid()){e=null==e?!0:e;f&&b._d.setTime(b._d.valueOf()+f*d);if(g&&(f=R(b,"Date")+g*d,b.isValid()))b._d["set"+(b._isUTC?
"UTC":"")+"Date"](f);c&&Na(b,R(b,"Month")+c*d);e&&a.updateOffset(b,g||c)}}function sc(a){if(void 0===a)return this._locale._abbr;a=U(a);null!=a&&(this._locale=a);return this}function eb(){return this._locale}function lb(a,b){H(0,[a,a.length],0,b)}function Xa(a,b,c,d,e){var f;if(null==a)return mb(this,d,e).year;f=Ha(a,d,e);b>f&&(b=f);a=Ea(a,b,c,d,e);a=r(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function Pc(a,b,d){var e,f;a=
a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],e=0;7>e;++e)f=c([2E3,1]).day(e),this._minWeekdaysParse[e]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[e]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[e]=this.weekdays(f,"").toLocaleLowerCase();if(d)b="dddd"===b?Ba.call(this._weekdaysParse,a):"ddd"===b?Ba.call(this._shortWeekdaysParse,a):Ba.call(this._minWeekdaysParse,a);else if("dddd"===
b){b=Ba.call(this._weekdaysParse,a);if(-1!==b)return b;b=Ba.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=Ba.call(this._minWeekdaysParse,a)}else if("ddd"===b){b=Ba.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=Ba.call(this._weekdaysParse,a);if(-1!==b)return b;b=Ba.call(this._minWeekdaysParse,a)}else{b=Ba.call(this._minWeekdaysParse,a);if(-1!==b)return b;b=Ba.call(this._weekdaysParse,a);if(-1!==b)return b;b=Ba.call(this._shortWeekdaysParse,a)}return-1!==b?b:null}function Pa(){function a(a,
b){return b.length-a.length}var b=[],d=[],e=[],f=[],g,h,k,l;for(g=0;7>g;g++)h=c([2E3,1]).day(g),k=this.weekdaysMin(h,""),l=this.weekdaysShort(h,""),h=this.weekdays(h,""),b.push(k),d.push(l),e.push(h),f.push(k),f.push(l),f.push(h);b.sort(a);d.sort(a);e.sort(a);f.sort(a);for(g=0;7>g;g++)d[g]=N(d[g]),e[g]=N(e[g]),f[g]=N(f[g]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+f.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+e.join("|")+")","i");this._weekdaysShortStrictRegex=
new RegExp("^("+d.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+b.join("|")+")","i")}function Nb(){return this.hours()%12||12}function Bb(a,b){H(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Zb(a,b){return b._meridiemParse}function tc(a,b){b[Fb]=k(1E3*("0."+a))}function Ib(a){return a}function fc(a,b,d,e){var f=U();b=c().set(e,b);return f[d](b,a)}function Bc(a,b,c){"number"===typeof a&&(b=a,a=void 0);a=a||"";if(null!=b)return fc(a,b,
c,"month");var d=[];for(b=0;12>b;b++)d[b]=fc(a,b,c,"month");return d}function Jb(a,b,c,d){"boolean"!==typeof a&&(c=b=a,a=!1);"number"===typeof b&&(c=b,b=void 0);b=b||"";var e=U();a=a?e._week.dow:0;if(null!=c)return fc(b,(c+a)%7,d,"day");e=[];for(c=0;7>c;c++)e[c]=fc(b,(c+a)%7,d,"day");return e}function oc(a,b,c,d){b=cb(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function Vb(a){return 0>a?Math.floor(a):Math.ceil(a)}function jb(a){return function(){return this.as(a)}}
function Sa(a){return function(){return this._data[a]}}function vb(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Ua(){var a=Fc(this._milliseconds)/1E3,b=Fc(this._days),c=Fc(this._months),d,e;d=u(a/60);e=u(d/60);a%=60;d%=60;var f=u(c/12),c=c%12,g=this.asSeconds();return g?(0>g?"-":"")+"P"+(f?f+"Y":"")+(c?c+"M":"")+(b?b+"D":"")+(e||d||a?"T":"")+(e?e+"H":"")+(d?d+"M":"")+(a?a+"S":""):"P0D"}var hb,Cb;Cb=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>
0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var hc=a.momentProperties=[],Lb=!1,Kb={};a.suppressDeprecationWarnings=!1;a.deprecationHandler=null;var Ab;Ab=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)d(a,b)&&c.push(b);return c};var sa={},rb,Db={},$b=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,$a=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,
wb={},nb={},Ob=/\d/,ib=/\d\d/,uc=/\d{3}/,ac=/\d{4}/,xb=/[+-]?\d{6}/,pa=/\d\d?/,Pb=/\d\d\d\d?/,Tc=/\d\d\d\d\d\d?/,ic=/\d{1,3}/,Uc=/\d{1,4}/,vc=/[+-]?\d{1,6}/,wc=/\d+/,jc=/[+-]?\d+/,Cc=/Z|[+-]\d\d:?\d\d/gi,Qb=/Z|[+-]\d\d(?::?\d\d)?/gi,Rb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Vc={},Dc={},sb=0,Eb=1,yb=2,Va=3,ab=4,zb=5,Fb=6,fd=7,gd=8,Ba;Ba=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===
a)return b;return-1};H("M",["MM",2],"Mo",function(){return this.month()+1});H("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});H("MMMM",0,0,function(a){return this.localeData().months(this,a)});O("month","M");T("M",pa);T("MM",pa,ib);T("MMM",function(a,b){return b.monthsShortRegex(a)});T("MMMM",function(a,b){return b.monthsRegex(a)});M(["M","MM"],function(a,b){b[Eb]=k(a)-1});M(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);null!=d?b[Eb]=d:h(c).invalidMonth=
a});var ya=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Hd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Id=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Fe=/Z|[+-]\d\d(?::?\d\d)?/,Ac=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,
!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],cd=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Jd=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=
z("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});H("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});H(0,["YY",2],0,function(){return this.year()%100});H(0,["YYYY",4],0,"year");H(0,["YYYYY",5],0,"year");H(0,["YYYYYY",6,!0],0,"year");O("year","y");T("Y",jc);T("YY",pa,ib);T("YYYY",Uc,ac);T("YYYYY",
vc,xb);T("YYYYYY",vc,xb);M(["YYYYY","YYYYYY"],sb);M("YYYY",function(b,c){c[sb]=2===b.length?a.parseTwoDigitYear(b):k(b)});M("YY",function(b,c){c[sb]=a.parseTwoDigitYear(b)});M("Y",function(a,b){b[sb]=parseInt(a,10)});a.parseTwoDigitYear=function(a){return k(a)+(68<k(a)?1900:2E3)};var Oc=X("FullYear",!0);a.ISO_8601=function(){};var ec=z("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=ra.apply(null,arguments);return this.isValid()&&
a.isValid()?a<this?this:a:m()}),nd=z("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=ra.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:m()});da("Z",":");da("ZZ","");T("Z",Qb);T("ZZ",Qb);M(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=gb(Qb,a)});var Kd=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var nc=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,Ld=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;
cb.fn=Ga.prototype;var od=Ya(1,"add"),Md=Ya(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var td=z("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});H(0,["gg",2],0,function(){return this.weekYear()%100});H(0,["GG",2],0,function(){return this.isoWeekYear()%100});lb("gggg","weekYear");lb("ggggg",
"weekYear");lb("GGGG","isoWeekYear");lb("GGGGG","isoWeekYear");O("weekYear","gg");O("isoWeekYear","GG");T("G",jc);T("g",jc);T("GG",pa,ib);T("gg",pa,ib);T("GGGG",Uc,ac);T("gggg",Uc,ac);T("GGGGG",vc,xb);T("ggggg",vc,xb);Q(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=k(a)});Q(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)});H("Q",0,"Qo","quarter");O("quarter","Q");T("Q",Ob);M("Q",function(a,b){b[Eb]=3*(k(a)-1)});H("w",["ww",2],"wo","week");H("W",["WW",2],"Wo","isoWeek");
O("week","w");O("isoWeek","W");T("w",pa);T("ww",pa,ib);T("W",pa);T("WW",pa,ib);Q(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=k(a)});H("D",["DD",2],"Do","date");O("date","D");T("D",pa);T("DD",pa,ib);T("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient});M(["D","DD"],yb);M("Do",function(a,b){b[yb]=k(a.match(pa)[0],10)});var ud=X("Date",!0);H("d",0,"do","day");H("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});H("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,
a)});H("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});H("e",0,0,"weekday");H("E",0,0,"isoWeekday");O("day","d");O("weekday","e");O("isoWeekday","E");T("d",pa);T("e",pa);T("E",pa);T("dd",function(a,b){return b.weekdaysMinRegex(a)});T("ddd",function(a,b){return b.weekdaysShortRegex(a)});T("dddd",function(a,b){return b.weekdaysRegex(a)});Q(["dd","ddd","dddd"],function(a,b,c,d){d=c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:h(c).invalidWeekday=a});Q(["d","e","E"],function(a,
b,c,d){b[d]=k(a)});H("DDD",["DDDD",3],"DDDo","dayOfYear");O("dayOfYear","DDD");T("DDD",ic);T("DDDD",uc);M(["DDD","DDDD"],function(a,b,c){c._dayOfYear=k(a)});H("H",["HH",2],0,"hour");H("h",["hh",2],0,Nb);H("k",["kk",2],0,function(){return this.hours()||24});H("hmm",0,0,function(){return""+Nb.apply(this)+ja(this.minutes(),2)});H("hmmss",0,0,function(){return""+Nb.apply(this)+ja(this.minutes(),2)+ja(this.seconds(),2)});H("Hmm",0,0,function(){return""+this.hours()+ja(this.minutes(),2)});H("Hmmss",0,0,
function(){return""+this.hours()+ja(this.minutes(),2)+ja(this.seconds(),2)});Bb("a",!0);Bb("A",!1);O("hour","h");T("a",Zb);T("A",Zb);T("H",pa);T("h",pa);T("HH",pa,ib);T("hh",pa,ib);T("hmm",Pb);T("hmmss",Tc);T("Hmm",Pb);T("Hmmss",Tc);M(["H","HH"],Va);M(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=a});M(["h","hh"],function(a,b,c){b[Va]=k(a);h(c).bigHour=!0});M("hmm",function(a,b,c){var d=a.length-2;b[Va]=k(a.substr(0,d));b[ab]=k(a.substr(d));h(c).bigHour=!0});M("hmmss",function(a,
b,c){var d=a.length-4,e=a.length-2;b[Va]=k(a.substr(0,d));b[ab]=k(a.substr(d,2));b[zb]=k(a.substr(e));h(c).bigHour=!0});M("Hmm",function(a,b,c){c=a.length-2;b[Va]=k(a.substr(0,c));b[ab]=k(a.substr(c))});M("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[Va]=k(a.substr(0,c));b[ab]=k(a.substr(c,2));b[zb]=k(a.substr(d))});var vd=X("Hours",!0);H("m",["mm",2],0,"minute");O("minute","m");T("m",pa);T("mm",pa,ib);M(["m","mm"],ab);var Qd=X("Minutes",!1);H("s",["ss",2],0,"second");O("second","s");T("s",
pa);T("ss",pa,ib);M(["s","ss"],zb);var Rd=X("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)});H(0,["SS",2],0,function(){return~~(this.millisecond()/10)});H(0,["SSS",3],0,"millisecond");H(0,["SSSS",4],0,function(){return 10*this.millisecond()});H(0,["SSSSS",5],0,function(){return 100*this.millisecond()});H(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});H(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});H(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});
H(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});O("millisecond","ms");T("S",ic,Ob);T("SS",ic,ib);T("SSS",ic,uc);var Wb;for(Wb="SSSS";9>=Wb.length;Wb+="S")T(Wb,wc);for(Wb="S";9>=Wb.length;Wb+="S")M(Wb,tc);var sd=X("Milliseconds",!1);H("z",0,0,"zoneAbbr");H("zz",0,0,"zoneName");var S=l.prototype;S.add=od;S.calendar=function(a,b){var c=a||ra(),d=ca(c,this).startOf("day"),d=this.diff(d,"days",!0),d=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":
"sameElse",e=b&&(E(b[d])?b[d]():b[d]);return this.format(e||this.localeData().calendar(d,this,ra(c)))};S.clone=function(){return new l(this)};S.diff=function(a,b,c){var d;if(!this.isValid())return NaN;a=ca(a,this);if(!a.isValid())return NaN;d=6E4*(a.utcOffset()-this.utcOffset());b=aa(b);if("year"===b||"month"===b||"quarter"===b){d=12*(a.year()-this.year())+(a.month()-this.month());var e=this.clone().add(d,"months"),f;0>a-e?(f=this.clone().add(d-1,"months"),a=(a-e)/(e-f)):(f=this.clone().add(d+1,"months"),
a=(a-e)/(f-e));a=-(d+a)||0;"quarter"===b?a/=3:"year"===b&&(a/=12)}else a=this-a,a="second"===b?a/1E3:"minute"===b?a/6E4:"hour"===b?a/36E5:"day"===b?(a-d)/864E5:"week"===b?(a-d)/6048E5:a;return c?a:u(a)};S.endOf=function(a){a=aa(a);if(void 0===a||"millisecond"===a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};S.format=function(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);b=qa(this,b);return this.localeData().postformat(b)};S.from=
function(a,b){return this.isValid()&&(p(a)&&a.isValid()||ra(a).isValid())?cb({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};S.fromNow=function(a){return this.from(ra(),a)};S.to=function(a,b){return this.isValid()&&(p(a)&&a.isValid()||ra(a).isValid())?cb({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};S.toNow=function(a){return this.to(ra(),a)};S.get=L;S.invalidAt=function(){return h(this).overflow};S.isAfter=function(a,b){var c=
p(a)?a:ra(a);if(!this.isValid()||!c.isValid())return!1;b=aa(t(b)?"millisecond":b);return"millisecond"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf()};S.isBefore=function(a,b){var c=p(a)?a:ra(a);if(!this.isValid()||!c.isValid())return!1;b=aa(t(b)?"millisecond":b);return"millisecond"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf()};S.isBetween=function(a,b,c,d){d=d||"()";return("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,
c):!this.isAfter(b,c))};S.isSame=function(a,b){var c=p(a)?a:ra(a);if(!this.isValid()||!c.isValid())return!1;b=aa(b||"millisecond");if("millisecond"===b)return this.valueOf()===c.valueOf();c=c.valueOf();return this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf()};S.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};S.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};S.isValid=function(){return n(this)};S.lang=td;S.locale=sc;S.localeData=
eb;S.max=nd;S.min=ec;S.parsingFlags=function(){return b({},h(this))};S.set=L;S.startOf=function(a){a=aa(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};S.subtract=Md;S.toArray=function(){return[this.year(),
this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};S.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};S.toDate=function(){return this._offset?new Date(this.valueOf()):this._d};S.toISOString=function(){var a=this.clone().utc();return 0<a.year()&&9999>=a.year()?E(Date.prototype.toISOString)?this.toDate().toISOString():qa(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):
qa(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")};S.toJSON=function(){return this.isValid()?this.toISOString():null};S.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};S.unix=function(){return Math.floor(this.valueOf()/1E3)};S.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};S.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};S.year=Oc;S.isLeapYear=function(){return Ma(this.year())};
S.weekYear=function(a){return Xa.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};S.isoWeekYear=function(a){return Xa.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};S.quarter=S.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};S.month=xa;S.daysInMonth=function(){return Z(this.year(),this.month())};S.week=S.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};
S.isoWeek=S.isoWeeks=function(a){var b=mb(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};S.weeksInYear=function(){var a=this.localeData()._week;return Ha(this.year(),a.dow,a.doy)};S.isoWeeksInYear=function(){return Ha(this.year(),1,4)};S.date=ud;S.day=S.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,
10));return this.add(a-b,"d")}return b};S.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};S.isoWeekday=function(a){return this.isValid()?null==a?this.day()||7:this.day(this.day()%7?a:a-7):null!=a?this:NaN};S.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};S.hour=S.hours=vd;S.minute=S.minutes=Qd;S.second=
S.seconds=Rd;S.millisecond=S.milliseconds=sd;S.utcOffset=function(b,c){var d=this._offset||0,e;return this.isValid()?null!=b?("string"===typeof b?b=gb(Qb,b):16>Math.abs(b)&&(b*=60),!this._isUTC&&c&&(e=15*-Math.round(this._d.getTimezoneOffset()/15)),this._offset=b,this._isUTC=!0,null!=e&&this.add(e,"m"),d!==b&&(!c||this._changeInProgress?Mb(this,cb(b-d,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?d:15*-Math.round(this._d.getTimezoneOffset()/
15):null!=b?this:NaN};S.utc=function(a){return this.utcOffset(0,a)};S.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};S.parseZone=function(){this._tzm?this.utcOffset(this._tzm):"string"===typeof this._i&&this.utcOffset(gb(Cc,this._i));return this};S.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?ra(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};S.isDST=function(){return this.utcOffset()>
this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};S.isDSTShifted=function(){if(!t(this._isDSTShifted))return this._isDSTShifted;var a={};w(a,this);a=Ub(a);if(a._a){var b=a._isUTC?c(a._a):ra(a._a);this._isDSTShifted=this.isValid()&&0<q(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted};S.isLocal=function(){return this.isValid()?!this._isUTC:!1};S.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};S.isUtc=Ka;S.isUTC=Ka;S.zoneAbbr=function(){return this._isUTC?
"UTC":""};S.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};S.dates=z("dates accessor is deprecated. Use date instead.",ud);S.months=z("months accessor is deprecated. Use month instead",xa);S.years=z("years accessor is deprecated. Use year instead",Oc);S.zone=z("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});var na=
F.prototype;na._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};na.calendar=function(a,b,c){a=this._calendar[a];return E(a)?a.call(b,c):a};na._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};na.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;
this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};na._invalidDate="Invalid date";na.invalidDate=function(){return this._invalidDate};na._ordinal="%d";na.ordinal=function(a){return this._ordinal.replace("%d",a)};na._ordinalParse=/\d{1,2}/;na.preparse=Ib;na.postformat=Ib;na._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",
y:"a year",yy:"%d years"};na.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return E(e)?e(a,b,c,d):e.replace(/%d/i,a)};na.pastFuture=function(a,b){var c=this._relativeTime[0<a?"future":"past"];return E(c)?c(b):c.replace(/%s/i,b)};na.set=function(a){var b,c;for(c in a)b=a[c],E(b)?this[c]=b:this["_"+c]=b;this._config=a;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)};na.months=function(a,b){return e(this._months)?this._months[a.month()]:this._months[ya.test(b)?
"format":"standalone"][a.month()]};na._months="January February March April May June July August September October November December".split(" ");na.monthsShort=function(a,b){return e(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[ya.test(b)?"format":"standalone"][a.month()]};na._monthsShort="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");na.monthsParse=function(a,b,d){var e,f;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=
[],this._longMonthsParse=[],this._shortMonthsParse=[],e=0;12>e;++e)f=c([2E3,e]),this._shortMonthsParse[e]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[e]=this.months(f,"").toLocaleLowerCase();if(d)b="MMM"===b?Ba.call(this._shortMonthsParse,a):Ba.call(this._longMonthsParse,a);else if("MMM"===b){b=Ba.call(this._shortMonthsParse,a);if(-1!==b)break a;b=Ba.call(this._longMonthsParse,a)}else{b=Ba.call(this._longMonthsParse,a);if(-1!==b)break a;b=Ba.call(this._shortMonthsParse,a)}b=-1!==
b?b:null}return b}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(e=0;12>e;e++)if(f=c([2E3,e]),d&&!this._longMonthsParse[e]&&(this._longMonthsParse[e]=new RegExp("^"+this.months(f,"").replace(".","")+"$","i"),this._shortMonthsParse[e]=new RegExp("^"+this.monthsShort(f,"").replace(".","")+"$","i")),d||this._monthsParse[e]||(f="^"+this.months(f,"")+"|^"+this.monthsShort(f,""),this._monthsParse[e]=new RegExp(f.replace(".",""),"i")),d&&"MMMM"===b&&this._longMonthsParse[e].test(a)||
d&&"MMM"===b&&this._shortMonthsParse[e].test(a)||!d&&this._monthsParse[e].test(a))return e};na._monthsRegex=Rb;na.monthsRegex=function(a){return this._monthsParseExact?(d(this,"_monthsRegex")||Ja.call(this),a?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};na._monthsShortRegex=Rb;na.monthsShortRegex=function(a){return this._monthsParseExact?(d(this,"_monthsRegex")||Ja.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):
this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex};na.week=function(a){return mb(a,this._week.dow,this._week.doy).week};na._week={dow:0,doy:6};na.firstDayOfYear=function(){return this._week.doy};na.firstDayOfWeek=function(){return this._week.dow};na.weekdays=function(a,b){return e(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]};na._weekdays="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");
na.weekdaysMin=function(a){return this._weekdaysMin[a.day()]};na._weekdaysMin="Su Mo Tu We Th Fr Sa".split(" ");na.weekdaysShort=function(a){return this._weekdaysShort[a.day()]};na._weekdaysShort="Sun Mon Tue Wed Thu Fri Sat".split(" ");na.weekdaysParse=function(a,b,d){var e,f;if(this._weekdaysParseExact)return Pc.call(this,a,b,d);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(e=0;7>e;e++)if(f=c([2E3,1]).day(e),d&&
!this._fullWeekdaysParse[e]&&(this._fullWeekdaysParse[e]=new RegExp("^"+this.weekdays(f,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[e]=new RegExp("^"+this.weekdaysShort(f,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[e]=new RegExp("^"+this.weekdaysMin(f,"").replace(".",".?")+"$","i")),this._weekdaysParse[e]||(f="^"+this.weekdays(f,"")+"|^"+this.weekdaysShort(f,"")+"|^"+this.weekdaysMin(f,""),this._weekdaysParse[e]=new RegExp(f.replace(".",""),"i")),d&&"dddd"===b&&this._fullWeekdaysParse[e].test(a)||
d&&"ddd"===b&&this._shortWeekdaysParse[e].test(a)||d&&"dd"===b&&this._minWeekdaysParse[e].test(a)||!d&&this._weekdaysParse[e].test(a))return e};na._weekdaysRegex=Rb;na.weekdaysRegex=function(a){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Pa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};na._weekdaysShortRegex=Rb;na.weekdaysShortRegex=function(a){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||
Pa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};na._weekdaysMinRegex=Rb;na.weekdaysMinRegex=function(a){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Pa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};na.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};na._meridiemParse=
/[ap]\.?m?\.?/i;na.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"};J("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===k(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});a.lang=z("moment.lang is deprecated. Use moment.locale instead.",J);a.langData=z("moment.langData is deprecated. Use moment.localeData instead.",U);var ub=Math.abs,Sd=jb("ms"),Pd=jb("s"),ed=jb("m"),Td=jb("h"),wd=jb("d"),Ec=jb("w"),Qc=jb("M"),Ud=jb("y"),He=Sa("milliseconds"),
qd=Sa("seconds"),xd=Sa("minutes"),Vd=Sa("hours"),Je=Sa("days"),Od=Sa("months"),pd=Sa("years"),qc=Math.round,Xb={s:45,m:45,h:22,d:26,M:11},Fc=Math.abs,za=Ga.prototype;za.abs=function(){var a=this._data;this._milliseconds=ub(this._milliseconds);this._days=ub(this._days);this._months=ub(this._months);a.milliseconds=ub(a.milliseconds);a.seconds=ub(a.seconds);a.minutes=ub(a.minutes);a.hours=ub(a.hours);a.months=ub(a.months);a.years=ub(a.years);return this};za.add=function(a,b){return oc(this,a,b,1)};za.subtract=
function(a,b){return oc(this,a,b,-1)};za.as=function(a){var b,c=this._milliseconds;a=aa(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*b)+c;default:throw Error("Unknown unit "+a);
}};za.asMilliseconds=Sd;za.asSeconds=Pd;za.asMinutes=ed;za.asHours=Td;za.asDays=wd;za.asWeeks=Ec;za.asMonths=Qc;za.asYears=Ud;za.valueOf=function(){return this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*k(this._months/12)};za._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*Vb(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=u(a/1E3);d.seconds=a%60;a=u(a/60);d.minutes=a%60;a=u(a/60);d.hours=a%24;b+=
u(a/24);a=u(4800*b/146097);c+=a;b-=Vb(146097*a/4800);a=u(c/12);d.days=b;d.months=c%12;d.years=a;return this};za.get=function(a){a=aa(a);return this[a+"s"]()};za.milliseconds=He;za.seconds=qd;za.minutes=xd;za.hours=Vd;za.days=Je;za.weeks=function(){return u(this.days()/7)};za.months=Od;za.years=pd;za.humanize=function(a){var b=this.localeData(),c;c=!a;var d=cb(this).abs(),e=qc(d.as("s")),f=qc(d.as("m")),g=qc(d.as("h")),h=qc(d.as("d")),k=qc(d.as("M")),d=qc(d.as("y")),e=e<Xb.s&&["s",e]||1>=f&&["m"]||
f<Xb.m&&["mm",f]||1>=g&&["h"]||g<Xb.h&&["hh",g]||1>=h&&["d"]||h<Xb.d&&["dd",h]||1>=k&&["M"]||k<Xb.M&&["MM",k]||1>=d&&["y"]||["yy",d];e[2]=c;e[3]=0<+this;e[4]=b;c=vb.apply(null,e);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};za.toISOString=Ua;za.toString=Ua;za.toJSON=Ua;za.locale=sc;za.localeData=eb;za.toIsoString=z("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ua);za.lang=td;H("X",0,0,"unix");H("x",0,0,"valueOf");T("x",jc);T("X",/[+-]?\d+(\.\d{1,3})?/);
M("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});M("x",function(a,b,c){c._d=new Date(k(a))});a.version="2.13.0";hb=ra;a.fn=S;a.min=function(){var a=[].slice.call(arguments,0);return Yb("isBefore",a)};a.max=function(){var a=[].slice.call(arguments,0);return Yb("isAfter",a)};a.now=function(){return Date.now?Date.now():+new Date};a.utc=c;a.unix=function(a){return ra(1E3*a)};a.months=function(a,b){return Bc(a,b,"months")};a.isDate=f;a.locale=J;a.invalid=m;a.duration=cb;a.isMoment=p;a.weekdays=
function(a,b,c){return Jb(a,b,c,"weekdays")};a.parseZone=function(){return ra.apply(null,arguments).parseZone()};a.localeData=U;a.isDuration=kb;a.monthsShort=function(a,b){return Bc(a,b,"monthsShort")};a.weekdaysMin=function(a,b,c){return Jb(a,b,c,"weekdaysMin")};a.defineLocale=I;a.updateLocale=function(a,b){if(null!=b){var c;null!=sa[a]&&(b=D(sa[a]._config,b));c=new F(b);c.parentLocale=sa[a];sa[a]=c;J(a)}else null!=sa[a]&&(null!=sa[a].parentLocale?sa[a]=sa[a].parentLocale:null!=sa[a]&&delete sa[a]);
return sa[a]};a.locales=function(){return Ab(sa)};a.weekdaysShort=function(a,b,c){return Jb(a,b,c,"weekdaysShort")};a.normalizeUnits=aa;a.relativeTimeThreshold=function(a,b){if(void 0===Xb[a])return!1;if(void 0===b)return Xb[a];Xb[a]=b;return!0};a.prototype=S;return a});/*
 UCSV v1.0.2
 Provided under MIT License.

 Copyright 2010, Peter Johnson
 http://www.uselesscode.org/javascript/csv/

 modified slightly by Gareth Dunstone.
*/
var CSV=function(){function a(a){return"\n"!==a.charAt(a.length-1)?a:a.substring(0,a.length-1)}var e=/^\d+$/,f=/^\d*\.\d+$|^\d+\.\d*$/,g=/^\s|\s$|,|"/,d=function(){return String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")}}();return{arrayToCsv:function(a){var b,d="",n,m,t;for(m=0;m<a.length;m+=1){n=a[m];for(t=0;t<n.length;t+=1)b=n[t],"[object String]"===Object.prototype.toString.apply(b)?(b=b.replace(/"/g,'""'),g.test(b)||e.test(b)||f.test(b)?
b='"'+b+'"':""===b&&(b='""')):b="[object Number]"===Object.prototype.toString.apply(b)?b.toString(10):null===b?"":b.toString(),d+=t<n.length-1?b+",":b;d+="\n"}return d},csvToArray:function(b,c){b=a(b);var g="",n=!1,m=!1,t="",w=[],l=[],p,u;u=function(a){!0!==m&&(""===a?a=null:!0===c&&(a=d(a)),e.test(a)?a=parseInt(a,10):f.test(a)&&(a=parseFloat(a,10)));return a};for(p=0;p<b.length;p+=1)g=b.charAt(p),!1!==n||","!==g&&"\n"!==g?'"'!==g?t+=g:n?'"'===b.charAt(p+1)?(t+='"',p+=1):n=!1:m=n=!0:(t=u(t),w.push(t),
"\n"===g&&(l.push(w),w=[]),t="",m=!1);t=u(t);w.push(t);l.push(w);return l}}}();(function(a,e){"function"===typeof define&&define.amd?define(["jquery"],e):"object"===typeof exports?module.exports=e(require("jquery")):a.bootbox=e(a.jQuery)})(this,function init(e,f){function g(b,c,d){b.stopPropagation();b.preventDefault();e.isFunction(d)&&!1===d.call(c,b)||c.modal("hide")}function d(b){var c,d=0;for(c in b)d++;return d}function b(b,c){var d=0;e.each(b,function(b,e){c(b,e,d++)})}function c(c){var f,g;if("object"!==typeof c)throw Error("Please supply an object of options");if(!c.message)throw Error("Please specify a message");
c=e.extend({},p,c);c.buttons||(c.buttons={});f=c.buttons;g=d(f);b(f,function(b,c,d){e.isFunction(c)&&(c=f[b]={callback:c});if("object"!==e.type(c))throw Error("button with key "+b+" must be an object");c.label||(c.label=b);c.className||(c.className=2>=g&&d===g-1?"btn-primary":"btn-default")});return c}function h(b,c){var d=b.length,e={};if(1>d||2<d)throw Error("Invalid argument length");2===d||"string"===typeof b[0]?(e[c[0]]=b[0],e[c[1]]=b[1]):e=b[0];return e}function n(b,c,d){return e.extend(!0,
{},b,h(c,d))}function m(b,c,d,e){b={className:"bootbox-"+b,buttons:t.apply(null,c)};return w(n(b,e,d),c)}function t(){for(var b={},c=0,d=arguments.length;c<d;c++){var e=arguments[c],f=e.toLowerCase(),e=e.toUpperCase(),g=k[p.locale];b[f]={label:g?g[e]:k.en[e]}}return b}function w(c,d){var e={};b(d,function(b,c){e[c]=!0});b(c.buttons,function(b){if(e[b]===f)throw Error("button key "+b+" is not allowed (options are "+d.join("\n")+")");});return c}var l={text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",
textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",
time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"},p={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body"},u={alert:function(){var b;b=m("alert",["ok"],["message","callback"],arguments);if(b.callback&&
!e.isFunction(b.callback))throw Error("alert requires callback property to be a function when provided");b.buttons.ok.callback=b.onEscape=function(){return e.isFunction(b.callback)?b.callback.call(this):!0};return u.dialog(b)},confirm:function(){var b;b=m("confirm",["cancel","confirm"],["message","callback"],arguments);b.buttons.cancel.callback=b.onEscape=function(){return b.callback.call(this,!1)};b.buttons.confirm.callback=function(){return b.callback.call(this,!0)};if(!e.isFunction(b.callback))throw Error("confirm requires a callback");
return u.dialog(b)},prompt:function(){var c,d,g,h,k,p;h=e("<form class='bootbox-form'></form>");d={className:"bootbox-prompt",buttons:t("cancel","confirm"),value:"",inputType:"text"};c=w(n(d,arguments,["title","callback"]),["cancel","confirm"]);d=c.show===f?!0:c.show;c.message=h;c.buttons.cancel.callback=c.onEscape=function(){return c.callback.call(this,null)};c.buttons.confirm.callback=function(){var d;switch(c.inputType){case "text":case "textarea":case "email":case "select":case "date":case "time":case "number":case "password":d=
k.val();break;case "checkbox":var f=k.find("input:checked");d=[];b(f,function(b,c){d.push(e(c).val())})}return c.callback.call(this,d)};c.show=!1;if(!c.title)throw Error("prompt requires a title");if(!e.isFunction(c.callback))throw Error("prompt requires a callback");if(!l[c.inputType])throw Error("invalid prompt type");k=e(l[c.inputType]);switch(c.inputType){case "text":case "textarea":case "email":case "date":case "time":case "number":case "password":k.val(c.value);break;case "select":var m={};
p=c.inputOptions||[];if(!e.isArray(p))throw Error("Please pass an array of input options");if(!p.length)throw Error("prompt with select requires options");b(p,function(b,c){var d=k;if(c.value===f||c.text===f)throw Error("given options in wrong format");c.group&&(m[c.group]||(m[c.group]=e("<optgroup/>").attr("label",c.group)),d=m[c.group]);d.append("<option value='"+c.value+"'>"+c.text+"</option>")});b(m,function(b,c){k.append(c)});k.val(c.value);break;case "checkbox":var G=e.isArray(c.value)?c.value:
[c.value];p=c.inputOptions||[];if(!p.length)throw Error("prompt with checkbox requires options");if(!p[0].value||!p[0].text)throw Error("given options in wrong format");k=e("<div/>");b(p,function(d,f){var g=e(l[c.inputType]);g.find("input").attr("value",f.value);g.find("label").append(f.text);b(G,function(b,c){c===f.value&&g.find("input").prop("checked",!0)});k.append(g)})}c.placeholder&&k.attr("placeholder",c.placeholder);c.pattern&&k.attr("pattern",c.pattern);c.maxlength&&k.attr("maxlength",c.maxlength);
h.append(k);h.on("submit",function(b){b.preventDefault();b.stopPropagation();g.find(".btn-primary").click()});g=u.dialog(c);g.off("shown.bs.modal");g.on("shown.bs.modal",function(){k.focus()});!0===d&&g.modal("show");return g},dialog:function(d){d=c(d);var h=e("<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>"),k=h.find(".modal-dialog"),l=h.find(".modal-body"),
p=d.buttons,m="",q={onEscape:d.onEscape};if(e.fn.modal===f)throw Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");b(p,function(b,c){m+="<button data-bb-handler='"+b+"' type='button' class='btn "+c.className+"'>"+c.label+"</button>";q[b]=c.callback});l.find(".bootbox-body").html(d.message);!0===d.animate&&h.addClass("fade");d.className&&h.addClass(d.className);"large"===d.size?k.addClass("modal-lg"):
"small"===d.size&&k.addClass("modal-sm");d.title&&l.before("<div class='modal-header'><h4 class='modal-title'></h4></div>");d.closeButton&&(k=e("<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>"),d.title?h.find(".modal-header").prepend(k):k.css("margin-top","-10px").prependTo(l));d.title&&h.find(".modal-title").html(d.title);m.length&&(l.after("<div class='modal-footer'></div>"),h.find(".modal-footer").html(m));h.on("hidden.bs.modal",
function(b){b.target===this&&h.remove()});h.on("shown.bs.modal",function(){h.find(".btn-primary:first").focus()});if("static"!==d.backdrop)h.on("click.dismiss.bs.modal",function(b){h.children(".modal-backdrop").length&&(b.currentTarget=h.children(".modal-backdrop").get(0));b.target===b.currentTarget&&h.trigger("escape.close.bb")});h.on("escape.close.bb",function(b){q.onEscape&&g(b,h,q.onEscape)});h.on("click",".modal-footer button",function(b){var c=e(this).data("bb-handler");g(b,h,q[c])});h.on("click",
".bootbox-close-button",function(b){g(b,h,q.onEscape)});h.on("keyup",function(b){27===b.which&&h.trigger("escape.close.bb")});e(d.container).append(h);h.modal({backdrop:d.backdrop?"static":!1,keyboard:!1,show:!1});d.show&&h.modal("show");return h},setDefaults:function(){var b={};2===arguments.length?b[arguments[0]]=arguments[1]:b=arguments[0];e.extend(p,b)},hideAll:function(){e(".bootbox").modal("hide");return u}},k={bg_BG:{OK:"\u041e\u043a",CANCEL:"\u041e\u0442\u043a\u0430\u0437",CONFIRM:"\u041f\u043e\u0442\u0432\u044a\u0440\u0436\u0434\u0430\u0432\u0430\u043c"},
br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zru\u0161it",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"\u0395\u03bd\u03c4\u03ac\u03be\u03b5\u03b9",CANCEL:"\u0391\u03ba\u03cd\u03c1\u03c9\u03c3\u03b7",CONFIRM:"\u0395\u03c0\u03b9\u03b2\u03b5\u03b2\u03b1\u03af\u03c9\u03c3\u03b7"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",
CONFIRM:"OK"},fa:{OK:"\u0642\u0628\u0648\u0644",CANCEL:"\u0644\u063a\u0648",CONFIRM:"\u062a\u0627\u06cc\u06cc\u062f"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"\u05d0\u05d9\u05e9\u05d5\u05e8",CANCEL:"\u05d1\u05d9\u05d8\u05d5\u05dc",CONFIRM:"\u05d0\u05d9\u05e9\u05d5\u05e8"},hu:{OK:"OK",CANCEL:"M\u00e9gsem",CONFIRM:"Meger\u0151s\u00edt"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",
CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"\u30ad\u30e3\u30f3\u30bb\u30eb",CONFIRM:"\u78ba\u8a8d"},lt:{OK:"Gerai",CANCEL:"At\u0161aukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprin\u0101t"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierd\u017a"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"\u041e\u0442\u043c\u0435\u043d\u0430",CONFIRM:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"},
sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"\u0e15\u0e01\u0e25\u0e07",CANCEL:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",CONFIRM:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19"},tr:{OK:"Tamam",CANCEL:"\u0130ptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"\u53d6\u6d88",CONFIRM:"\u786e\u8ba4"},zh_TW:{OK:"OK",CANCEL:"\u53d6\u6d88",CONFIRM:"\u78ba\u8a8d"}};u.addLocale=function(b,c){e.each(["OK","CANCEL","CONFIRM"],function(b,d){if(!c[d])throw Error("Please supply a translation for '"+
d+"'");});k[b]={OK:c.OK,CANCEL:c.CANCEL,CONFIRM:c.CONFIRM};return u};u.removeLocale=function(b){delete k[b];return u};u.setLocale=function(b){return u.setDefaults("locale",b)};u.init=function(b){return init(b||e)};return u});(function e$jscomp$0(e,f,g){function d(c,n){if(!f[c]){if(!e[c]){var h="function"==typeof require&&require;if(!n&&h)return h(c,!0);if(b)return b(c,!0);h=Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h;}h=f[c]={exports:{}};e[c][0].call(h.exports,function(b){var f=e[c][1][b];return d(f?f:b)},h,h.exports,e$jscomp$0,e,f,g)}return f[c].exports}for(var b="function"==typeof require&&require,c=0;c<g.length;c++)d(g[c]);return d})({1:[function(a,e,f){function g(a,b,d){a=String(a);for(null===
d&&(d=" ");a.length<b;)a=d+a;return a}a("./DateTime");var d={},b={d:function(a){return g(a.getDate(),2,"0")},D:function(a,b){return b.shortDayNames[a.getDay()]},j:function(a){return a.getDate()},l:function(a,b){return b.dayNames[a.getDay()]},w:function(a){return a.getDay()},z:function(a){return a.getDayInYear()},F:function(a,b){return b.monthNames[a.getMonth()-1]},m:function(a){return g(a.getMonth(),2,"0")},M:function(a,b){return b.monthNames[a.getMonth()-1].substring(0,3)},n:function(a){return a.getMonth()},
t:function(a){return a.getDaysInMonth()},Y:function(a){return a.getFullYear()},y:function(a){return(""+a.getFullYear()).substring(2,4)},a:function(a){return 12>a.getHours()?"am":"pm"},A:function(a){return 12>a.getHours()?"AM":"PM"},g:function(a){return a.getHours()%12?a.getHours()%12:12},G:function(a){return a.getHours()},h:function(a){return g(a.getHours()%12?a.getHours()%12:12,2,"0")},H:function(a){return g(a.getHours(),2,"0")},i:function(a){return g(a.getMinutes(),2,"0")},s:function(a){return g(a.getSeconds(),
2,"0")},Z:function(a){return a.date.getTimezoneOffset()/-60}};d.hoursAndMinutes=function(a,b){return(Math.round(100*(a+b/60))/100).toString()};d.format=function(a,d,e){for(var c="",f=!1,g,h=0;h<d.length;++h)g=d.charAt(h),f||"\\"!==g?(f?f=!1:g=g in b?b[g](a,e):g,c+=g):f=!0;return c};d.shortDateFormat=function(a,b){return d.format(a,b?b.shortDateFormat:"n/j/Y",b)};d.formatRange=function(a,b){return a._hasTimes?b.daysLabel(a.days())+" "+b.hoursLabel(a.hours(),a.minutes()):d.shortDateFormat(a.start,b)+
" - "+d.shortDateFormat(a.end,b)};d.formatDefiningRangeDuration=function(a,b){var c=parseInt(a.days()/360,10);if(0<c)return b.yearsLabel(c);c=parseInt(a.days()/30,10);return 0<c?b.monthsLabel(c):b.daysLabel(a.days())};d.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",FiShortDatePattern:"j.n.Y",FiWeekdayDatePattern:"D j.n.Y",FiWeekdayDateTimePattern:"D j.n.Y k\\lo G:i",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",
ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"};e.exports=d},{"./DateTime":5}],2:[function(a,e,f){e.exports={FI:a("./locale/FI"),EN:a("./locale/EN"),AU:a("./locale/AU"),ET:a("./locale/ET"),RU:a("./locale/RU"),SV:a("./locale/SV"),LV:a("./locale/LV"),FR:a("./locale/FR"),DE:a("./locale/DE")}},{"./locale/AU":8,"./locale/DE":9,"./locale/EN":10,"./locale/ET":11,"./locale/FI":13,"./locale/FR":14,
"./locale/LV":15,"./locale/RU":16,"./locale/SV":17}],3:[function(a,e,f){var g=a("./DateTime"),d={parseRegexes:[],defaultFormat:"n/j/Y",parse:function(a,c){if("string"===typeof a){if("today"===a)return g.today();var b=d.parseDate(a,c?c.shortDateFormat:d.defaultFormat);return b?b:new g(new Date(a))}throw Error("DateParse only accepts strings");},parseDate:function(a,c){function b(a){for(var b={},d=c.replace(/[^djmnY]/g,"").split(""),e=0;e<d.length;e++)b[d[e]]=+a[e+1];return g.fromDate(b.Y,b.m?b.m:b.n,
b.d?b.d:b.j)}var e=a.match(function(){void 0===d.parseRegexes[c]&&(d.parseRegexes[c]=new RegExp(c.replace(/[djmnY]/g,"(\\d+)").replace(/\./g,"\\.")));return d.parseRegexes[c]}());return e?b(e):null},parseTime:function(a){function b(a){return!isNaN(a)&&0<=a&&59>=a}a=function(a){return-1!==a.indexOf(".")?a.split("."):{4:[a.slice(0,2),a.slice(2,4)],3:[a.slice(0,1),a.slice(1,3)],2:[a,0]}[a.length]||[-1,-1]}(a.replace(/:|,/i,"."));a=[+a[0],+a[1]];return function(a){return!isNaN(a)&&0<=a&&23>=a}(a[0])&&
b(a[1])?a:null}};e.exports=d},{"./DateTime":5}],4:[function(a,e,f){function g(a,b){if(!a||!b)throw"two dates must be specified, date1="+a+", date2="+b;this.start=0<a.compareTo(b)?b:a;this.end=0<a.compareTo(b)?a:b;this._minutes=this._hours=this._days=0;this._valid=!0}var d=a("./DateTime");a("./DateFormat");var b=a("./DateParse");g.emptyRange=function(){return new function(){this.end=this.start=null;this.days=function(){return 0};this.shiftDays=function(){};this.hasDate=function(){return!1};this.clone=
function(){return g.emptyRange()};this.expandDaysTo=function(){return this};this.hasEndsOnWeekend=function(){return!1};this.isPermittedRange=function(){return!0};this.hasSelection=function(){return!1}}};g.rangeWithMinimumSize=function(a,b,d,e){if(b&&a.days()<=b){a=a.expandDaysTo(b);if(d&&a.hasEndsOnWeekend())for(a=a.shiftDays(-((a.end.getDay()+1)%7+1)).shiftInside(e);!a.isPermittedRange(b,d,e)||0<a.end.compareTo(e.end);){if(!a.isPermittedRange(b,!1,e))return g.emptyRange();a=a.shiftDays(1)}return a.isPermittedRange(b,
!1,e)?a:g.emptyRange()}return a};g.prototype._setDaysHoursAndMinutes=function(){if(this._hasTimes){var a=parseInt(this.end.getTime()-this.start.getTime(),10);this._days=parseInt(a/d.DAY,10);a-=this._days*d.DAY;this._hours=parseInt(a/d.HOUR,10);a-=this._hours*d.HOUR;this._minutes=parseInt(a/d.MINUTE,10)}};g.prototype._dateWithTime=function(a,b){return a.withTime(b[0],b[1])};g.prototype.hours=function(){return this._hours};g.prototype.minutes=function(){return this._minutes};g.prototype.hasDate=function(a){return a.isBetweenDates(this.start,
this.end)};g.prototype.isValid=function(){return this._valid&&0<=this.end.getTime()-this.start.getTime()};g.prototype.days=function(){return this._hasTimes?this._days:Math.round(this.start.distanceInDays(this.end)+1)};g.prototype.shiftDays=function(a){return new g(this.start.plusDays(a),this.end.plusDays(a))};g.prototype.expandTo=function(a){var b=this.start.clone(),c=this.end.clone();0>a.compareTo(this.start)?b=a:0<a.compareTo(this.end)&&(c=a);return new g(b,c)};g.prototype.expandDaysTo=function(a){return new g(this.start,
this.start.plusDays(a-1))};g.prototype.hasValidSize=function(a){return 0>a||this.days()>=a};g.prototype.hasValidSizeAndEndsOnWorkWeek=function(a){return this.hasValidSize(a)&&this.hasEndsOnWeekend()};g.prototype.and=function(a){var b=0<this.start.compareTo(a.start)?this.start:a.start;a=0<this.end.compareTo(a.end)?a.end:this.end;return 0>b.compareTo(a)?new g(b,a):g.emptyRange()};g.prototype.isInside=function(a){return 0<=this.start.compareTo(a.start)&&0>=this.end.compareTo(a.end)};g.prototype.hasEndsOnWeekend=
function(){return this.start.isWeekend()||this.end.isWeekend()};g.prototype.withTimes=function(a,d){var c=b.parseTime(a),e=b.parseTime(d),f=this.clone();c&&e?(f._valid=!0,f._hasTimes=!0,f.start=this._dateWithTime(this.start,c),f.end=this._dateWithTime(this.end,e),f._setDaysHoursAndMinutes()):f._valid=!1;return f};g.prototype.clone=function(){return new g(this.start,this.end)};g.prototype.toString=function(){return["DateRange:",this.start.toString(),"-",this.end.toString(),this._days,"days",this._hours,
"hours",this._minutes,"minutes",this._valid?"valid":"invalid"].join(" ")};g.prototype.isPermittedRange=function(a,b,d){return this.hasValidSize(a)&&!(b&&this.hasEndsOnWeekend())&&this.isInside(d)};g.prototype.shiftInside=function(a){if(this.days()>a.days())return g.emptyRange();var b=this.start.distanceInDays(a.start);a=this.end.distanceInDays(a.end);return 0<b?this.shiftDays(b):0>a?this.shiftDays(a):this};g.prototype.hasSelection=function(){return 0<this.days()};e.exports=g},{"./DateFormat":1,"./DateParse":3,
"./DateTime":5}],5:[function(a,e,f){function g(a){if(0===arguments.length)this.date=new Date;else if(a instanceof Date)this.date=new Date(a);else throw Error("Argument must be a date object. "+a+" was given");}function d(a){return 10>a?"0"+a:""+a}function b(a){a=a.split("-");return{year:+a[0],month:+a[1],day:+a[2]}}g.SUNDAY=0;g.MONDAY=1;g.TUESDAY=2;g.WEDNESDAY=3;g.THURSDAY=4;g.FRIDAY=5;g.SATURDAY=6;g.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];g.y2kYear=50;g.monthNumbers={Jan:0,Feb:1,Mar:2,
Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};g.fromDateTime=function(a,b,d,e,f,w){a=+a;b=+b;d=+d;e=+e||0;f=+f||0;w=+w||0||0;var c=new Date(a,b-1,d,e,f,w,0);if("Invalid Date"===c.toString()||b!==c.getMonth()+1||a!==c.getFullYear()||d!==c.getDate()||e!==c.getHours()||f!==c.getMinutes()||w!==c.getSeconds())throw Error("Invalid Date: "+a+"-"+b+"-"+d+" "+e+":"+f+":"+w);return new g(c)};g.fromDate=function(a,b,d){return g.fromDateTime(a,b,d,0,0,0)};g.fromDateObject=function(a){return new g(a)};
g.fromIsoDate=function(a){if(!/^\d{4}-[01]\d-[0-3]\d(T[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z?))?$/.test(a))throw Error(a+" is not valid ISO Date (YYYY-MM-DD or YYYY-MM-DDTHH:MM)");a=b(a.split("T")[0]);return g.fromDate(a.year,a.month,a.day)};g.fromIsoDateTime=function(a){var c,d;if(!/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z?)/.test(a))throw Error(a+" is not valid ISO Date (YYYY-MM-DDTHH:MM)");var e=a.split("T");(a=2===e.length&&e[1])?(d=a.split(":"),a=+d[0],c=+d[1],d=+d[2]||0):(c=
a=0,d=void 0);e=b(e[0]);return g.fromDateTime(e.year,e.month,e.day,a,c,d)};g.fromMillis=function(a){return new g(new Date(a))};g.prototype.withResetMS=function(){var a=this.clone();a.date.setMilliseconds(0);return a};g.prototype.withTime=function(a,b){if("string"===typeof a){var c=a.split(":");a=c[0];b=c[1]}c=this.clone();c.date.setHours(a);c.date.setMinutes(b);c.date.setSeconds(0);c.date.setMilliseconds(0);return c};g.SECOND=1E3;g.MINUTE=60*g.SECOND;g.HOUR=60*g.MINUTE;g.DAY=24*g.HOUR;g.WEEK=7*g.DAY;
g.now=function(){"undefined"===typeof g._now&&(g._now=new g);return g._now};g.today=function(){"undefined"==typeof g._today&&(g._today=(new g).getOnlyDate());return g._today};g.prototype.getTime=function(){return this.date.getTime()};g.prototype.getFullYear=function(){return this.date.getFullYear()};g.prototype.getDate=function(){return this.date.getDate()};g.prototype.getMonth=function(){return this.date.getMonth()+1};g.prototype.getDay=function(){return this.date.getDay()};g.prototype.getHours=
function(){return this.date.getHours()};g.prototype.getMinutes=function(){return this.date.getMinutes()};g.prototype.getSeconds=function(){return this.date.getSeconds()};g.prototype.getMilliseconds=function(){return this.date.getMilliseconds()};g.getDaysInMonth=function(a,b){if(12<b||1>b)throw Error("Month must be between 1-12");var c=12*a+b;return g.fromDate(Math.floor(c/12),c%12+1,1).minusDays(1).getDate()};g.getDayInYear=function(a,b,d){return g.fromDate(a,1,1).distanceInDays(g.fromDate(a,b,d))+
1};g.prototype.getDaysInMonth=function(){return g.getDaysInMonth(this.getFullYear(),this.getMonth())};g.prototype.getDayInYear=function(){return g.getDayInYear(this.getFullYear(),this.getMonth(),this.getDate())};g.prototype.plusDays=function(a){a=g.fromMillis(this.getTime()+a*g.DAY);var b=this.getHours()-a.getHours();return 0!==b?(12<b&&(b-=24),-12>b&&(b+=24),g.fromMillis(a.getTime()+b*g.HOUR)):a};g.prototype.plusMinutes=function(a){return g.fromMillis(this.clone().getTime()+a*g.MINUTE)};g.prototype.minusMinutes=
function(a){return this.plusMinutes(-a)};g.prototype.minusDays=function(a){return this.plusDays(-a)};g.prototype.compareTo=function(a){if(!a)return 1;a=this.getTime()-a.getTime();return 0===a?0:a/Math.abs(a)};g.prototype.isToday=function(){return this.equalsOnlyDate(g.today())};g.prototype.getWeekInYear=function(a){if("US"!==a&&"ISO"!==a)throw"Week numbering system must be either US or ISO, was "+a;var b=(new Date(this.getFullYear(),0,1)).getDay();if("US"===a)return Math.ceil((this.getDayInYear()+
b)/7);a=this.getDay();0===a&&(a=7);0===b&&(b=7);if(12===this.getMonth()&&29<=this.getDate()&&27<this.getDate()-a)return 1;if(1===this.getMonth()&&4>this.getDate()&&4<a)return(new g(new Date(this.getFullYear()-1,11,31))).getWeekInYear("ISO");a=Math.ceil((this.getDayInYear()+b-1)/7);4<b&&a--;return a};g.prototype.clone=function(){return new g(this.date)};g.prototype.isOddMonth=function(){return 0===this.getMonth()%2};g.prototype.equalsOnlyDate=function(a){return a?this.getMonth()===a.getMonth()&&this.getDate()===
a.getDate()&&this.getFullYear()===a.getFullYear():!1};g.prototype.isBetweenDates=function(a,b){if(a.getTime()>b.getTime())throw Error("start date can't be after end date");var c=this.getOnlyDate();return 0<=c.compareTo(a.getOnlyDate())&&0>=c.compareTo(b.getOnlyDate())};g.prototype.firstDateOfMonth=function(){return g.fromDate(this.getFullYear(),this.getMonth(),1)};g.prototype.lastDateOfMonth=function(){return g.fromDate(this.getFullYear(),this.getMonth(),this.getDaysInMonth())};g.prototype.distanceInDays=
function(a){var b=parseInt(this.getTime()/g.DAY,10);return parseInt(a.getTime()/g.DAY,10)-b};g.prototype.withWeekday=function(a){return this.plusDays(a-this.getDay())};g.prototype.getOnlyDate=function(){return g.fromDate(this.getFullYear(),this.getMonth(),this.getDate())};g.prototype.isWeekend=function(){return 6===this.getDay()||0===this.getDay()};g.prototype.toString=function(){return this.toISOString()};g.prototype.getFirstDateOfWeek=function(a){a=a?a.firstWeekday:g.MONDAY;return a==this.getDay?
this.clone():this.plusDays(a-this.getDay()-(a>this.getDay()?7:0))};g.prototype.toISOString=function(){return this.getFullYear()+"-"+d(this.getMonth())+"-"+d(this.getDate())+"T"+(d(this.getHours())+":"+d(this.getMinutes())+":"+d(this.getSeconds()))};g.prototype.toISODateString=function(){return this.getFullYear()+"-"+d(this.getMonth())+"-"+d(this.getDate())};e.exports=g},{}],6:[function(a,e,f){var g=function(a){this.durationMs=a};g.MS=1;g.SECOND=1E3;g.MIN=60*g.SECOND;g.HOUR=60*g.MIN;g.DAY=24*g.HOUR;
g.fromMS=function(a){return new g(a)};g.fromSeconds=function(a){return g.fromMS(a*g.SECOND)};g.fromMinutes=function(a){return g.fromMS(a*g.MIN)};g.fromHours=function(a){return g.fromMS(a*g.HOUR)};g.fromDays=function(a){return g.fromMS(a*g.DAY)};g.prototype.toMS=function(){return this.durationMs};g.prototype.asUnit=function(a){return Number(this.durationMs/a)};e.exports=g},{}],7:[function(a,e,f){e.exports={version:"0.2.1",DateFormat:a("./DateFormat"),DateLocale:a("./DateLocale"),DateParse:a("./DateParse"),
DateRange:a("./DateRange"),DateTime:a("./DateTime"),Duration:a("./Duration")}},{"./DateFormat":1,"./DateLocale":2,"./DateParse":3,"./DateRange":4,"./DateTime":5,"./Duration":6}],8:[function(a,e,f){f=a("../DateTime");var g=a("../DateFormat");e.exports={id:"AU",monthNames:"January February March April May June July August September October November December".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDayNames:"Su Mo Tu We Th Fr Sa".split(" "),yearsLabel:function(a){return a+
" "+(1===a?"Year":"Years")},monthsLabel:function(a){return a+" Months"},daysLabel:function(a){return a+" "+(1===a?"Day":"Days")},hoursLabel:function(a,b){var c=g.hoursAndMinutes(a,b);return c+" "+(1===+c?"Hour":"Hours")},clearRangeLabel:"Clear Range",clearDateLabel:"Clear Date",shortDateFormat:"j/n/Y",weekDateFormat:"D j/n/Y",dateTimeFormat:"D j/n/Y G:i",firstWeekday:f.SUNDAY,holidays:{}}},{"../DateFormat":1,"../DateTime":5}],9:[function(a,e,f){f=a("../DateTime");var g=a("../DateFormat");e.exports=
{id:"DE",monthNames:"Januar Februar M\u00e4rz April Mai Juni Juli August September Oktober November Dezember".split(" "),dayNames:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),shortDayNames:"So Mo Di Mi Do Fr Sa".split(" "),yearsLabel:function(a){return a+" Jahr"},monthsLabel:function(a){return a+" "+(1===a?"Monat":"Months")},daysLabel:function(a){return a+" "+(1===a?"Tag":"Tage")},hoursLabel:function(a,b){var c=g.hoursAndMinutes(a,b);return c+" "+(1===+c?"Stunde":"Stunden")},
clearRangeLabel:"Auswahl l\u00f6schen",clearDateLabel:"Auswahl l\u00f6schen",shortDateFormat:"j.n.Y",weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y  G:i",firstWeekday:f.MONDAY,holidays:{}}},{"../DateFormat":1,"../DateTime":5}],10:[function(a,e,f){f=a("../DateTime");var g=a("../DateFormat");e.exports={id:"EN",monthNames:"January February March April May June July August September October November December".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
shortDayNames:"Su Mo Tu We Th Fr Sa".split(" "),yearsLabel:function(a){return a+" "+(1===a?"Year":"Years")},monthsLabel:function(a){return a+" Months"},daysLabel:function(a){return a+" "+(1===a?"Day":"Days")},hoursLabel:function(a,b){var c=g.hoursAndMinutes(a,b);return c+" "+(1===+c?"Hour":"Hours")},clearRangeLabel:"Clear Range",clearDateLabel:"Clear Date",shortDateFormat:"n/j/Y",weekDateFormat:"D n/j/Y",dateTimeFormat:"D n/j/Y G:i",firstWeekday:f.SUNDAY,holidays:{}}},{"../DateFormat":1,"../DateTime":5}],
11:[function(a,e,f){f=a("../DateTime");var g=a("../DateFormat");e.exports={id:"ET",monthNames:"Jaanuar Veebruar M\u00e4rts Aprill Mai Juuni Juuli August September Oktoober November Detsember".split(" "),dayNames:"P\u00fchap\u00e4ev Esmasp\u00e4ev Teisip\u00e4ev Kolmap\u00e4ev Neljap\u00e4ev Reede Laup\u00e4ev".split(" "),shortDayNames:"PETKNRL".split(""),yearsLabel:function(a){return a+" "+(1===a?"Aasta":"Aastat")},monthsLabel:function(a){return a+" "+(1===a?"Kuu":"Kuud")},daysLabel:function(a){return a+
" "+(1===a?"P\u00e4ev":"P\u00e4eva")},hoursLabel:function(a,b){var c=g.hoursAndMinutes(a,b).replace(".",",");return c+" "+(1===+c?"Tund":"Tundi")},clearRangeLabel:"TODO",clearDateLabel:"TODO",shortDateFormat:"j.n.Y",weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y k\\l G:i",firstWeekday:f.MONDAY,holidays:{}}},{"../DateFormat":1,"../DateTime":5}],12:[function(a,e,f){e.exports={"2015-01-01":"Uudenvuodenp\u00e4iv\u00e4","2015-01-06":"Loppiainen","2015-04-03":"Pitk\u00e4perjantai","2015-04-04":"P\u00e4\u00e4si\u00e4islauantai",
"2015-04-05":"P\u00e4\u00e4si\u00e4isp\u00e4iv\u00e4","2015-04-06":"2. p\u00e4\u00e4si\u00e4isp\u00e4iv\u00e4","2015-05-01":"Vappu","2015-05-14":"Helatorstai","2015-06-19":"Juhannusaatto","2015-06-20":"Juhannusp\u00e4iv\u00e4","2015-10-31":"Pyh\u00e4inp\u00e4iv\u00e4","2015-12-06":"Itsen\u00e4isyysp\u00e4iv\u00e4","2015-12-24":"Jouluaatto","2015-12-25":"Joulup\u00e4iv\u00e4","2015-12-26":"Tapaninp\u00e4iv\u00e4","2016-01-01":"Uudenvuodenp\u00e4iv\u00e4","2016-01-06":"Loppiainen","2016-03-25":"Pitk\u00e4perjantai",
"2016-03-26":"P\u00e4\u00e4si\u00e4islauantai","2016-03-27":"P\u00e4\u00e4si\u00e4isp\u00e4iv\u00e4","2016-03-28":"2. p\u00e4\u00e4si\u00e4isp\u00e4iv\u00e4","2016-05-01":"Vappu","2016-05-05":"Helatorstai","2016-06-24":"Juhannusaatto","2016-06-25":"Juhannusp\u00e4iv\u00e4","2016-11-05":"Pyh\u00e4inp\u00e4iv\u00e4","2016-12-06":"Itsen\u00e4isyysp\u00e4iv\u00e4","2016-12-24":"Jouluaatto","2016-12-25":"Joulup\u00e4iv\u00e4","2016-12-26":"Tapaninp\u00e4iv\u00e4","2017-01-01":"Uudenvuodenp\u00e4iv\u00e4",
"2017-01-06":"Loppiainen","2017-04-14":"Pitk\u00e4perjantai","2017-04-15":"P\u00e4\u00e4si\u00e4islauantai","2017-04-16":"P\u00e4\u00e4si\u00e4isp\u00e4iv\u00e4","2017-04-17":"2. p\u00e4\u00e4si\u00e4isp\u00e4iv\u00e4","2017-05-01":"Vappu","2017-05-25":"Helatorstai","2017-06-23":"Juhannusaatto","2017-06-24":"Juhannusp\u00e4iv\u00e4","2017-11-04":"Pyh\u00e4inp\u00e4iv\u00e4","2017-12-06":"Itsen\u00e4isyysp\u00e4iv\u00e4","2017-12-24":"Jouluaatto","2017-12-25":"Joulup\u00e4iv\u00e4","2017-12-26":"Tapaninp\u00e4iv\u00e4",
"2018-01-01":"Uudenvuodenp\u00e4iv\u00e4","2018-01-06":"Loppiainen","2018-03-30":"Pitk\u00e4perjantai","2018-03-31":"P\u00e4\u00e4si\u00e4islauantai","2018-04-01":"P\u00e4\u00e4si\u00e4isp\u00e4iv\u00e4","2018-04-02":"2. p\u00e4\u00e4si\u00e4isp\u00e4iv\u00e4","2018-05-01":"Vappu","2018-05-10":"Helatorstai","2018-06-22":"Juhannusaatto","2018-06-23":"Juhannusp\u00e4iv\u00e4","2018-11-03":"Pyh\u00e4inp\u00e4iv\u00e4","2018-12-06":"Itsen\u00e4isyysp\u00e4iv\u00e4","2018-12-24":"Jouluaatto","2018-12-25":"Joulup\u00e4iv\u00e4",
"2018-12-26":"Tapaninp\u00e4iv\u00e4","2019-01-01":"Uudenvuodenp\u00e4iv\u00e4","2019-01-06":"Loppiainen","2019-04-19":"Pitk\u00e4perjantai","2019-04-20":"P\u00e4\u00e4si\u00e4islauantai","2019-04-21":"P\u00e4\u00e4si\u00e4isp\u00e4iv\u00e4","2019-04-22":"2. p\u00e4\u00e4si\u00e4isp\u00e4iv\u00e4","2019-05-01":"Vappu","2019-05-30":"Helatorstai","2019-06-21":"Juhannusaatto","2019-06-22":"Juhannusp\u00e4iv\u00e4","2019-11-02":"Pyh\u00e4inp\u00e4iv\u00e4","2019-12-06":"Itsen\u00e4isyysp\u00e4iv\u00e4",
"2019-12-24":"Jouluaatto","2019-12-25":"Joulup\u00e4iv\u00e4","2019-12-26":"Tapaninp\u00e4iv\u00e4","2020-01-01":"Uudenvuodenp\u00e4iv\u00e4","2020-01-06":"Loppiainen","2020-04-10":"Pitk\u00e4perjantai","2020-04-11":"P\u00e4\u00e4si\u00e4islauantai","2020-04-12":"P\u00e4\u00e4si\u00e4isp\u00e4iv\u00e4","2020-04-13":"2. p\u00e4\u00e4si\u00e4isp\u00e4iv\u00e4","2020-05-01":"Vappu","2020-05-21":"Helatorstai","2020-06-19":"Juhannusaatto","2020-06-20":"Juhannusp\u00e4iv\u00e4","2020-10-31":"Pyh\u00e4inp\u00e4iv\u00e4",
"2020-12-06":"Itsen\u00e4isyysp\u00e4iv\u00e4","2020-12-24":"Jouluaatto","2020-12-25":"Joulup\u00e4iv\u00e4","2020-12-26":"Tapaninp\u00e4iv\u00e4","2021-01-01":"Uudenvuodenp\u00e4iv\u00e4","2021-01-06":"Loppiainen","2021-04-02":"Pitk\u00e4perjantai","2021-04-03":"P\u00e4\u00e4si\u00e4islauantai","2021-04-04":"P\u00e4\u00e4si\u00e4isp\u00e4iv\u00e4","2021-04-05":"2. p\u00e4\u00e4si\u00e4isp\u00e4iv\u00e4","2021-05-01":"Vappu","2021-05-13":"Helatorstai","2021-06-25":"Juhannusaatto","2021-06-26":"Juhannusp\u00e4iv\u00e4",
"2021-11-06":"Pyh\u00e4inp\u00e4iv\u00e4","2021-12-06":"Itsen\u00e4isyysp\u00e4iv\u00e4","2021-12-24":"Jouluaatto","2021-12-25":"Joulup\u00e4iv\u00e4","2021-12-26":"Tapaninp\u00e4iv\u00e4"}},{}],13:[function(a,e,f){f=a("../DateTime");var g=a("../DateFormat");a=a("./FI-holidays");e.exports={id:"FI",monthNames:"tammikuu helmikuu maaliskuu huhtikuu toukokuu kes\u00e4kuu hein\u00e4kuu elokuu syyskuu lokakuu marraskuu joulukuu".split(" "),dayNames:"sunnuntai maanantai tiistai keskiviikko torstai perjantai lauantai".split(" "),
shortDayNames:"su ma ti ke to pe la".split(" "),yearsLabel:function(a){return a+" "+(1===a?"vuosi":"vuotta")},monthsLabel:function(a){return a+" "+(1===a?"kuukausi":"kuukautta")},daysLabel:function(a){return a+" "+(1===a?"p\u00e4iv\u00e4":"p\u00e4iv\u00e4\u00e4")},hoursLabel:function(a,b){var c=g.hoursAndMinutes(a,b).replace(".",",");return c+" "+(1===+c?"tunti":"tuntia")},clearRangeLabel:"Poista valinta",clearDateLabel:"Poista valinta",shortDateFormat:"j.n.Y",weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y k\\lo G:i",
firstWeekday:f.MONDAY,holidays:a}},{"../DateFormat":1,"../DateTime":5,"./FI-holidays":12}],14:[function(a,e,f){f=a("../DateTime");var g=a("../DateFormat");e.exports={id:"FR",monthNames:"janvier f\u00e9vrier mars avril mai juin juillet ao\u00fbt septembre octobre novembre d\u00e9cembre".split(" "),dayNames:"dimanche lundi mardi mercredi jeudi vendredi samedi".split(" "),shortDayNames:"DLMMJVS".split(""),yearsLabel:function(a){return a+" "+(1===a?"Ann\u00e9e":"Ann\u00e9es")},monthsLabel:function(a){return a+
" "+(1===a?"Mois":"Moiss")},daysLabel:function(a){return a+" "+(1===a?"Jour":"Jours")},hoursLabel:function(a,b){var c=g.hoursAndMinutes(a,b);return c+" "+(1===+c?"Heure":"Heures")},clearRangeLabel:"Effacer la s\u00e9lection",clearDateLabel:"Effacer la date",shortDateFormat:"j/n/Y",weekDateFormat:"D j/n/Y",dateTimeFormat:"D j/n/Y G:i",firstWeekday:f.MONDAY,holidays:{}}},{"../DateFormat":1,"../DateTime":5}],15:[function(a,e,f){f=a("../DateTime");var g=a("../DateFormat");e.exports={id:"LV",monthNames:"Janv\u0101ris;Febru\u0101ris;Marts;Apr\u012blis;Maijs;J\u016bnijs; J\u016blijs;Augusts;Septembris;Oktobris;Novembris;Decembris".split(";"),
dayNames:"Sv\u0113tdiena Pirmdiena Otrdiena Tre\u0161diena Ceturtdiena Piektdiena Sestdiena".split(" "),shortDayNames:"Sv P O T C Pk S".split(" "),yearsLabel:function(a){return a+" G"},monthsLabel:function(a){return a+" "+(1===a?"M\u0113nes\u012b":"M\u0113ne\u0161iem")},daysLabel:function(a){return a+" "+(1===a?"Diena":"Dienas")},hoursLabel:function(a,b){var c=g.hoursAndMinutes(a,b);return c+" "+(1===+c?"Stundas":"Min\u016btes")},clearRangeLabel:"TODO",clearDateLabel:"TODO",shortDateFormat:"j.n.Y",
weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y k\\lo G:i",firstWeekday:f.MONDAY,holidays:{}}},{"../DateFormat":1,"../DateTime":5}],16:[function(a,e,f){function g(a,c){var b=a%100;if(10<b&&20>b||0===a)b=c[2];else switch(Math.abs(a%10)){case 1:b=c[0];break;case 2:case 3:case 4:b=c[1];break;default:b=c[2]}return[a,b].join(" ")}f=a("../DateTime");var d=a("../DateFormat");e.exports={id:"RU",monthNames:"\u042f\u043d\u0432\u0430\u0440\u044c \u0424\u0435\u0432\u0440\u0430\u043b\u044c \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b\u044c \u041c\u0430\u0439 \u0418\u044e\u043d\u044c \u0418\u044e\u043b\u044c \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u041e\u043a\u0442\u044f\u0431\u0440\u044c \u041d\u043e\u044f\u0431\u0440\u044c \u0414\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),
dayNames:"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0412\u0442\u043e\u0440\u043d\u0438\u043a \u0421\u0440\u0435\u0434\u0430 \u0427\u0435\u0442\u0432\u0435\u0440\u0433 \u041f\u044f\u0442\u043d\u0438\u0446\u0430 \u0421\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),shortDayNames:"\u0412\u0441 \u041f\u043d \u0412\u0442 \u0421\u0440 \u0427\u0442 \u041f\u0442 \u0421\u0431".split(" "),yearsLabel:function(a){return g(a,
["\u0413\u043e\u0434","\u0413\u043e\u0434\u0430","\u041b\u0435\u0442"])},monthsLabel:function(a){return g(a,["\u041c\u0435\u0441\u044f\u0446","\u041c\u0435\u0441\u044f\u0446\u0430","\u041c\u0435\u0441\u044f\u0446\u0435\u0432"])},daysLabel:function(a){return g(a,["\u0414\u0435\u043d\u044c","\u0414\u043d\u044f","\u0414\u043d\u0435\u0439"])},hoursLabel:function(a,c){return d.hoursAndMinutes(a,c).replace(".",",")+" \u0427\u0430\u0441\u0430"},learRangeLabel:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d",
clearDateLabel:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0434\u0430\u0442\u0443",shortDateFormat:"j.n.Y",weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y k\\lo G:i",firstWeekday:f.MONDAY,holidays:{}}},{"../DateFormat":1,"../DateTime":5}],17:[function(a,e,f){f=a("../DateTime");var g=a("../DateFormat");e.exports={id:"SV",monthNames:"Januari Februari Mars April Maj Juni Juli Augusti September Oktober November December".split(" "),dayNames:"S\u00f6ndag M\u00e5ndag Tisdag Onsdag Torsdag Fredag L\u00f6rdag".split(" "),
shortDayNames:"S\u00f6 M\u00e5 Ti On To Fr L\u00f6".split(" "),yearsLabel:function(a){return a+" \u00c5r"},monthsLabel:function(a){return a+" "+(1===a?"M\u00e5nad":"M\u00e5nader")},daysLabel:function(a){return a+" "+(1===a?"Dag":"Dagar")},hoursLabel:function(a,b){var c=g.hoursAndMinutes(a,b).replace(".",",");return c+" "+(1===+c?"Minut":"Minuter")},clearRangeLabel:"TODO",clearDateLabel:"TODO",shortDateFormat:"j.n.Y",weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y k\\lo G:i",firstWeekday:f.MONDAY,
holidays:{}}},{"../DateFormat":1,"../DateTime":5}],18:[function(a,e,f){a("../continuousCalendar/jquery.continuousCalendar");window.DateFormat=a("dateutils").DateFormat;window.DateParse=a("dateutils").DateParse;window.DateLocale=a("dateutils").DateLocale;window.DateTime=a("dateutils").DateTime;window.DateRange=a("dateutils").DateRange},{"../continuousCalendar/jquery.continuousCalendar":22,dateutils:7}],19:[function(a,e,f){(function(f){var d="undefined"!==typeof window?window.jQuery:"undefined"!==typeof f?
f.jQuery:null,b=a("dateutils").DateFormat,c=a("dateutils").DateTime;e.exports=function(a,e,f,g,w,l){function h(a){return d.trim(["date",a.isOddMonth()?"odd":"",m(a),a.isToday()?"today":"",k(a)].sort().join(" "))}function m(a){var b=w&&a.isWeekend(),c=l[a.getOnlyDate().date];return!e.hasDate(a)||b||c?"disabled":""}function k(a){var b=0===a.getDay();a=f.holidays&&a.toISODateString()in f.holidays;return b||a?"holiday":""}function q(a){return d(F[a])}var t={},n=[],B=d('<table class="calendarHeader">').append(function(){var a=
d('<tr><th class="month"></th><th class="week">&nbsp;</th>');d(f.dayNames).each(function(b){b=d("<th>").append(f.shortDayNames[(b+f.firstWeekday)%7]).addClass("weekDay");a.append(b)});return d("<thead>").append(a)}()),E=d('<table class="calendarBody">').append(function(){function a(a,b,e){a.push("<tr>");a.push(d(b,e));a.push(g(b));for(e=0;7>e;e++){var f=b.plusDays(e);a.push(c(f))}a.push("</tr>")}function c(a){var c=f.holidays&&a.toISODateString()in f.holidays?'title="'+f.holidays[a.toISODateString()]+
'" ':"",c='<td class="'+h(a)+'" date-cell-index="'+n.length+'" '+c+">"+a.getDate()+"</td>";t[b.format(a,"Ymd",f)]=n.length;n.push(a);return c}function d(a,b){var c='<th class="month '+(a.isOddMonth()?"odd":"");b||7>=a.getDate()?c=c+' monthName">'+f.monthNames[a.getMonth()-1]:(c+='">',14>=a.getDate()&&1===a.getMonth()&&(c+=a.getFullYear()));return c+"</th>"}function g(a){return'<th class="week '+(a.isOddMonth()?"odd":"")+'">'+a.getWeekInYear("ISO")+"</th>"}for(var k=e.start.getFirstDateOfWeek(f),l=
!0,p=[];0>=k.compareTo(e.end);)a(p,k.clone(),l),l=!1,k=k.plusDays(7);return"<tbody>"+p.join("")+"</tbody>"}()),D=d('<div class="calendarScrollContent">').append(E);a.append(B);g?(E.addClass("overview"),D.addClass("viewport"),a.append(d('<div class="tinyscrollbar"></div>').append('<div class="scrollbar"> <div class="track"> <div class="thumb"> <div class="end"></div> </div> </div> </div>').append(D))):a.append(D);var F=d("td.date",a).get();(function(a){var d=b.format(c.today(),"Ymd",f);d in a&&q(a[d]).addClass("today").wrapInner("<div>")})(t);
a=d("th.month",B);return{bodyTable:E,scrollContent:D,dateCells:F,yearTitle:a,dateCellMap:t,dateCellDates:n,dateStyles:h,getDateCell:q}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{dateutils:7}],20:[function(a,e,f){(function(f){var d="undefined"!==typeof window?window.jQuery:"undefined"!==typeof f?f.jQuery:null,b=a("dateutils").DateFormat,c=a("dateutils").DateRange,g=a("dateutils").DateTime;e.exports=function(a,e,f,h,l,p,u,
k,q,A,z,B,E){function m(){L=k&&A?new c(k,A):c.emptyRange();L.start||L.end||d("span.separator",a).hide()}function t(a){function b(a){return d(a).closest("[date-cell-index]").hasClass("date")&&!d(a).hasClass("disabled")}function e(a,e){if(l.selectWeek&&b(a)||d(a).hasClass("week")){H=ja.NONE;var f=p(d(a).parent().children(".date").get(0)),k=f,q=f.plusDays(6);l.disableWeekends&&(k=f.withWeekday(g.MONDAY),q=f.withWeekday(g.FRIDAY));return(new c(k,q,h)).and(B)}if(d(a).hasClass("month"))return H=ja.NONE,
f=p(d(a).siblings(".date").get(0)),new c(f.firstDateOfMonth(),f.lastDateOfMonth(),h);e&&0<L.days()&&b(a)&&(H=ja.NONE,L=L.expandTo(p(a)));return L}var f=a.target;a=a.shiftKey;(function(a,c){return l.selectWeek?b(a)||d(a).hasClass("week"):d(a).hasClass("week")||d(a).hasClass("month")||c})(f,a)?L=e(f,a):(H=ja.CREATE_OR_RESIZE,R=p(f),R.equalsOnlyDate(L.end)?R=L.start:R.equalsOnlyDate(L.start)?R=L.end:L.hasDate(R)?H=ja.MOVE:b(f)&&(L=new c(R,R,h)))}function n(a){d(a).css("MozUserSelect","none");d(a).bind("selectstart",
function(){return!1});d(a).mousedown(function(){return!1})}function w(a){if(H!==ja.NONE){var b=p(a.target),e={move:function(){var a=R.distanceInDays(b),a=L.shiftDays(a).and(B);a.isPermittedRange(l.minimumRange,l.disableWeekends,B)&&(R=b,L=a)},create:function(){var e=new c(R,b,h);!d(a.target).hasClass("disabled")&&e.isPermittedRange(l.minimumRange,l.disableWeekends,B)&&(L=e)}};if(b)e[H]();O()}}function J(){H=ja.NONE;U()&&(L=c.emptyRange());O();ia()}function I(){L=c.emptyRange();O();ia()}function U(){for(var a=
0;a<E.length;a++)if(L.hasDate(g.fromIsoDate(E[a])))return!0;return!1}function O(){L=c.rangeWithMinimumSize(L,l.minimumRange,l.disableWeekends,B);aa(L);d("span.rangeLengthLabel",a).text(h.daysLabel(L.days()));d("span.clearDates",a).toggle(L.hasSelection())}function aa(c){d("td.selected",a).removeClass("selected").removeClass("rangeStart").removeClass("rangeEnd").removeClass("invalidSelection");if(0<c.days()){for(var f=e.dateCellMap[b.format(c.start,"Ymd",h)],g=e.dateCellMap[b.format(c.end,"Ymd",h)];f<=
g;f++){var k=e.getDateCell(f).get(0),l;l=e.dateCellDates[f];var p=c.start,q=c.end,m=[e.dateStyles(l)];l=l.equalsOnlyDate(q)?m.concat("selected rangeEnd"):l.equalsOnlyDate(p)?m.concat("selected rangeStart"):l.isBetweenDates(p,q)?m.concat("selected"):m;k.className=l.join(" ")}U()&&d("td.selected",a).addClass("invalidSelection")}c.clone()}function ia(){U()&&(L=c.emptyRange(),setTimeout(function(){aa(L)},200));a.data("calendarRange",L);q(L.start);z(L.end);X();l.selectWeek&&u.close(d("td.selected",a).first());
f(L)}function X(){L||m();if(L.start&&L.end){var c=h.weekDateFormat;d("span.startDateLabel",a).text(b.format(L.start,c,h));d("span.endDateLabel",a).text(b.format(L.end,c,h));d("span.separator, span.clearRangeLabel",a).show();d("span.startDateLabel",a).closest(".label").show()}else L.start||(d("span.startDateLabel",a).empty(),d("span.startDateLabel",a).closest(".label").hide()),L.end||d("span.endDateLabel",a).empty(),d("span.separator, span.clearRangeLabel",a).hide()}var R=null,L,ja={CREATE_OR_RESIZE:"create",
MOVE:"move",NONE:"none"},H=ja.NONE;return{showInitialSelection:X,initEvents:function(){m();L.clone();var b=e.bodyTable;d("span.rangeLengthLabel",a).text(h.daysLabel(L.days()));l.allowClearDates&&d("span.clearDates",a).click(I);b.addClass(l.selectWeek?"weekRange":"freeRange");b.mousedown(t).mouseover(w).mouseup(J);n(b.get(0));O()},addRangeLengthLabel:function(){if(d(".rangeLengthLabel",a).isEmpty()){var b=d('<div class="label"><span class="rangeLengthLabel"></span></div>');d(".continuousCalendar",
a).append(b)}},addEndDateLabel:function(a){a.append('<span class="separator"> - </span>').append('<span class="endDateLabel"></span>')},addDateClearingLabel:function(){if(l.allowClearDates){var b=d('<span class="clearDates clickable"></span>').text(h.clearRangeLabel),b=d('<div class="label clearLabel"></div>').append(b);d(".continuousCalendar",a).append(b)}},setSelection:function(a,b){a&&b&&(L=new c(a,b));J()},performTrigger:function(){a.data("calendarRange",L);f(L)}}}}).call(this,"undefined"!==typeof global?
global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{dateutils:7}],21:[function(a,e,f){(function(f){var d="undefined"!==typeof window?window.jQuery:"undefined"!==typeof f?f.jQuery:null,b=a("dateutils").DateFormat,c=a("dateutils").DateParse;e.exports=function(a,e,f,g,w,l,p,u,k){function h(a){var c=a&&b.format(a,"Ymd",g);c in e.dateCellMap&&m(a,e.getDateCell(e.dateCellMap[c]))}function m(b,c){d("td.selected",a).removeClass("selected");c.addClass("selected");t(b)}function t(c){a.data("calendarRange",
c);k(c);E(b.format(c,g.weekDateFormat,g))}function n(){d(".date",a).bind("click",function(){var a=d(this);if(!a.hasClass("disabled")){var b=l(a.get(0));m(b,a);p.close(this);f(b)}});d(".clearDates",a).click(D)}function E(b){d("span.startDateLabel",a).text(b);w.allowClearDates&&d(".clearDates",a).toggle(""!==b)}function D(){d("td.selected",a).removeClass("selected");w.startField.val("");E("")}return{showInitialSelection:function(){u&&(t(u),d(".clearDates",a).show())},initEvents:function(){n();var a;
a=w.startField;a=0<a.length&&0<a.val().length?c.parse(a.val(),g):null;h(a||u)},addRangeLengthLabel:d.noop,addEndDateLabel:d.noop,addDateClearingLabel:function(){if(w.allowClearDates){var b=d('<span class="clearDates clickable"></span>').hide();b.text(g.clearDateLabel);b=d('<div class="label clearLabel"></div>').append(b);d(".continuousCalendar",a).append(b)}},setSelection:h,performTrigger:function(){a.data("calendarRange",u);f(u)}}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{})},{dateutils:7}],22:[function(a,e,f){(function(e){var d="undefined"!==typeof window?window.jQuery:"undefined"!==typeof e?e.jQuery:null,b=a("dateutils").DateFormat,c=a("dateutils").DateParse,f=a("dateutils").DateLocale.EN,g=a("dateutils").DateRange,m=a("dateutils").DateTime,t=a("./CalendarBody"),w=a("./RangeEvents"),l=a("./SingleDateEvents");d.continuousCalendar={version:"5.0.1"};d.fn.continuousCalendar=function(a){function e(a){function e(){Y.customScroll&&
(Na=d(".tinyscrollbar",ba).tinyscrollbar(Y.scrollOptions))}function h(){xa.scrollContent||(xa=d.extend(xa,t(N,Ja,ka,Y.customScroll,Y.disableWeekends,Ca)),p(),Q.initState(),Z.addRangeLengthLabel(),Z.addDateClearingLabel(),Z.initEvents(),J())}function k(a){function b(a,b){return a?a instanceof Date?m.fromDateObject(a):a instanceof m?a:c.parse(a,ka):d.plusDays(b)}var d=(qa||m.today()).getFirstDateOfWeek(ka),e=b(a.firstDate,7*-a.weeksBefore);a=b(a.lastDate,7*a.weeksAfter+6);return new g(e,a)}function p(){if(Y.customScroll)Na||
e(),Na.bind("scroll",I);else{var a=!1;xa.scrollContent.scroll(function(){a||(setTimeout(function(){a=!1;I()},250),a=!0)})}}function u(a){var b={};d.each(a,function(a,c){b[m.fromIsoDate(c).date]=!0});return b}function n(a){var b=[ba,xa,ia,ka,Y,X,Q,qa,R],c=[ua,L,Ja,La];return a?w.apply(null,b.concat(c)):l.apply(null,b)}function F(a){function b(){h();N.is(":visible")?(N.fadeOut(Y.fadeOutDuration),d(document).unbind("click.continuousCalendar")):(Y.popupCallback(),N.show(),M&&(e(),O(),I(),M=!1),Z.setSelection(aa(Y.startField),
aa(Y.endField)),J(),d(document).bind("click.continuousCalendar",b));return!1}var c={initUI:function(){N.addClass("popup").hide();var a=d('<a href="#" class="calendarIcon">'+T.getDate()+"</a>").click(b);ba.prepend(a)},initState:d.noop,getContainer:function(a){return d('<div class="popUpContainer">').append(a)},close:function(a){b.call(a)},addDateLabelBehaviour:function(a){a.addClass("clickable");a.click(b)}},f={initUI:h,initState:U,getContainer:function(a){return a},close:d.noop,addDateLabelBehaviour:d.noop};
return a?c:f}function G(){var a=d(".continuousCalendar",ba);if(a.exists())return a;a=d('<div class="continuousCalendar">');ba.append(Q.getContainer(a));return a}function P(a,b,c){var e=d('<div class="label"><span class="startDateLabel"></span></div>');c.addEndDateLabel(e);a.prepend(e);b.addDateLabelBehaviour(e.children())}function J(){var a=d(".selected",xa.scrollContent).get(0)||d(".today",xa.scrollContent).get(0);if(a)if(a=a.offsetTop-(xa.scrollContent.height()-a.offsetHeight)/2,Y.customScroll){var b=
xa.bodyTable.height()-xa.scrollContent.height(),a=a>b?b:a;Na.tinyscrollbar_update(0<a?a:0)}else xa.scrollContent.scrollTop(a)}function I(){var a=xa.scrollContent.get(0),b=d("table",a).get(0),a=Y.customScroll?-d(".overview",N).position().top:a.scrollTop,a=parseInt(a/ha,10),b=X(b.rows[a].cells[2]);xa.yearTitle.text(b.getFullYear())}function U(){e();O();I()}function O(){ha=parseInt(xa.bodyTable.height()/d("tr",xa.bodyTable).size(),10)}function aa(a){return 0<a.length&&0<a.val().length?Y.useIsoForInput?
m.fromIsoDate(a.val()):c.parse(a.val(),ka):null}function ia(a){Y.callback.call(ba,a);ba.trigger("calendarChange",a)}function X(a){return xa.dateCellDates[d(a).closest("[date-cell-index]").attr("date-cell-index")]}function R(a){Y.startField.val(ja(a))}function L(a){Y.endField.val(ja(a))}function ja(a){return a?Y.useIsoForInput?a.toISODateString():b.shortDateFormat(a,ka):""}var H={weeksBefore:26,weeksAfter:26,firstDate:null,lastDate:null,startField:d("input.startDate",this),endField:d("input.endDate",
this),isPopup:!1,selectToday:!1,locale:f,disableWeekends:!1,disabledDates:null,minimumRange:-1,selectWeek:!1,fadeOutDuration:0,callback:d.noop,popupCallback:d.noop,customScroll:!1,scrollOptions:{sizethumb:"auto"},theme:"",allowClearDates:!1,isRange:!1,startDate:null,endDate:null,useIsoForInput:!1},Y=d.extend({},H,a),ka=Y.locale,qa=aa(Y.startField)||Y.startDate,ua=aa(Y.endField)||Y.endDate,T=m.today();Y.selectToday&&(ua=qa=T,R(T),L(T));var ba=this,ha,N,M=!0,Q,Z,Na,xa={},Ja,La,Ca;d(this).addClass("continuousCalendarContainer").addClass(Y.theme);
(function(){La=Y.disabledDates?d.map(Y.disabledDates.split(" "),function(a){a=a.split("/");var b=a[0],c=a[1];return[a[2],(1===b.length?"0":"")+b,(1===c.length?"0":"")+c].join("-")}):[];Ca=Y.disabledDates?u(La):{};Ja=k(Y);Q=F(Y.isPopup);Z=n(Y.isRange);Y.fadeOutDuration=+Y.fadeOutDuration;N=G();N.click(function(a){a.stopPropagation()});d(".startDateLabel",ba).isEmpty()&&P(ba,Q,Z);Q.initUI();Z.showInitialSelection();Z.performTrigger()})()}return this.each(function(){e.call(d(this),a)})};d.fn.calendarRange=
function(){return d(this).data("calendarRange")};d.fn.exists=function(){return 0<this.length};d.fn.isEmpty=function(){return 0===this.length}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./CalendarBody":19,"./RangeEvents":20,"./SingleDateEvents":21,dateutils:7}]},{},[18]);/*
 X-editable - v1.5.3 
 In-place editing with Twitter Bootstrap, jQuery UI or pure jQuery
 http://github.com/vitalets/x-editable
 Copyright (c) 2015 - 2016 Vitaliy Potapov; Licensed MIT */
(function(a){var e=function(e,g){this.options=a.extend({},a.fn.editableform.defaults,g);this.$div=a(e);this.options.scope||(this.options.scope=this)};e.prototype={constructor:e,initInput:function(){this.input=this.options.input;this.value=this.input.str2value(this.options.value);this.input.prerender()},initTemplate:function(){this.$form=a(a.fn.editableform.template)},initButtons:function(){var e=this.$form.find(".editable-buttons");e.append(a.fn.editableform.buttons);"bottom"===this.options.showbuttons&&
e.addClass("editable-buttons-bottom")},render:function(){this.$loading=a(a.fn.editableform.loading);this.$div.empty().append(this.$loading);this.initTemplate();this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove();this.showLoading();this.isSaving=!1;this.$div.triggerHandler("rendering");this.initInput();this.$form.find("div.editable-input").append(this.input.$tpl);this.$div.append(this.$form);a.when(this.input.render()).then(a.proxy(function(){this.options.showbuttons||
this.input.autosubmit();this.$form.find(".editable-cancel").click(a.proxy(this.cancel,this));this.input.error?(this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(a){a.preventDefault()})):(this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled"),this.input.value2input(null===this.value||void 0===this.value||""===this.value?this.options.defaultValue:
this.value),this.$form.submit(a.proxy(this.submit,this)));this.$div.triggerHandler("rendered");this.showForm();this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var a,e;this.$form?(a=this.$form.outerWidth(),e=this.$form.outerHeight(),a&&this.$loading.width(a),e&&this.$loading.height(e),this.$form.hide()):(a=this.$loading.parent().width())&&this.$loading.width(a);this.$loading.show()},showForm:function(a){this.$loading.hide();
this.$form.show();!1!==a&&this.input.activate();this.$div.triggerHandler("show")},error:function(e){var f=this.$form.find(".control-group"),d=this.$form.find(".editable-error-block");if(!1===e)f.removeClass(a.fn.editableform.errorGroupClass),d.removeClass(a.fn.editableform.errorBlockClass).empty().hide();else{if(e){e=(""+e).split("\n");for(var b=0;b<e.length;b++)e[b]=a("<div>").text(e[b]).html();e=e.join("<br>")}f.addClass(a.fn.editableform.errorGroupClass);d.addClass(a.fn.editableform.errorBlockClass).html(e).show()}},
submit:function(e){e.stopPropagation();e.preventDefault();var f=this.input.input2value();e=this.validate(f);if("object"===a.type(e)&&void 0!==e.newValue){if(f=e.newValue,this.input.value2input(f),"string"===typeof e.msg){this.error(e.msg);this.showForm();return}}else if(e){this.error(e);this.showForm();return}if(this.options.savenochange||this.input.value2str(f)!==this.input.value2str(this.value)){var d=this.input.value2submit(f);this.isSaving=!0;a.when(this.save(d)).done(a.proxy(function(a){this.isSaving=
!1;var b="function"===typeof this.options.success?this.options.success.call(this.options.scope,a,f):null;!1===b?(this.error(!1),this.showForm(!1)):"string"===typeof b?(this.error(b),this.showForm()):(b&&"object"===typeof b&&b.hasOwnProperty("newValue")&&(f=b.newValue),this.error(!1),this.value=f,this.$div.triggerHandler("save",{newValue:f,submitValue:d,response:a}))},this)).fail(a.proxy(function(a){this.isSaving=!1;a="function"===typeof this.options.error?this.options.error.call(this.options.scope,
a,f):"string"===typeof a?a:a.responseText||a.statusText||"Unknown error!";this.error(a);this.showForm()},this))}else this.$div.triggerHandler("nochange")},save:function(e){this.options.pk=a.fn.editableutils.tryParseJson(this.options.pk,!0);var f="function"===typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk;if("function"===typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==f&&void 0!==f))return this.showLoading(),
e={name:this.options.name||"",value:e,pk:f},"function"===typeof this.options.params?e=this.options.params.call(this.options.scope,e):(this.options.params=a.fn.editableutils.tryParseJson(this.options.params,!0),a.extend(e,this.options.params)),"function"===typeof this.options.url?this.options.url.call(this.options.scope,e):a.ajax(a.extend({url:this.options.url,data:e,type:"POST"},this.options.ajaxOptions))},validate:function(a){void 0===a&&(a=this.value);if("function"===typeof this.options.validate)return this.options.validate.call(this.options.scope,
a)},option:function(a,e){a in this.options&&(this.options[a]=e);"value"===a&&this.setValue(e)},setValue:function(a,e){this.value=e?this.input.str2value(a):a;this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}};a.fn.editableform=function(f){var g=arguments;return this.each(function(){var d=a(this),b=d.data("editableform"),c="object"===typeof f&&f;b||d.data("editableform",b=new e(this,c));"string"===typeof f&&b[f].apply(b,Array.prototype.slice.call(g,1))})};a.fn.editableform.Constructor=
e;a.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1};a.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>';a.fn.editableform.loading='<div class="editableform-loading"></div>';
a.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>';a.fn.editableform.errorGroupClass=null;a.fn.editableform.errorBlockClass="editable-error";a.fn.editableform.engine="jquery"})(window.jQuery);
(function(a){a.fn.editableutils={inherit:function(a,f){var e=function(){};e.prototype=f.prototype;a.prototype=new e;a.prototype.constructor=a;a.superclass=f.prototype},setCursorPosition:function(a,f){if(a.setSelectionRange&&"number"!=a.type)a.setSelectionRange(f,f);else if(a.createTextRange){var e=a.createTextRange();e.collapse(!0);e.moveEnd("character",f);e.moveStart("character",f);e.select()}},tryParseJson:function(a,f){if("string"===typeof a&&a.length&&a.match(/^[\{\[].*[\}\]]$/))if(f)try{a=(new Function("return "+
a))()}catch(g){}finally{}else a=(new Function("return "+a))();return a},sliceObj:function(e,f,g){var d,b,c={};if(!a.isArray(f)||!f.length)return c;for(var h=0;h<f.length;h++)d=f[h],e.hasOwnProperty(d)&&(c[d]=e[d]),!0!==g&&(b=d.toLowerCase(),e.hasOwnProperty(b)&&(c[d]=e[b]));return c},getConfigData:function(e){var f={};a.each(e.data(),function(a,d){if("object"!==typeof d||d&&"object"===typeof d&&(d.constructor===Object||d.constructor===Array))f[a]=d});return f},objectKeys:function(a){if(Object.keys)return Object.keys(a);
if(a!==Object(a))throw new TypeError("Object.keys called on a non-object");var e=[],g;for(g in a)Object.prototype.hasOwnProperty.call(a,g)&&e.push(g);return e},escape:function(e){return a("<div>").text(e).html()},itemsByValue:function(e,f,g){if(!f||null===e)return[];if("function"!==typeof g){var d=g||"value";g=function(a){return a[d]}}var b=a.isArray(e),c=[],h=this;a.each(f,function(d,f){if(f.children)c=c.concat(h.itemsByValue(e,f.children,g));else if(b)a.grep(e,function(a){return a==(f&&"object"===
typeof f?g(f):f)}).length&&c.push(f);else{var m=f&&"object"===typeof f?g(f):f;e==m&&c.push(f)}});return c},createInput:function(e){var f;f=e.type;"date"===f&&("inline"===e.mode?a.fn.editabletypes.datefield?f="datefield":a.fn.editabletypes.dateuifield&&(f="dateuifield"):a.fn.editabletypes.date?f="date":a.fn.editabletypes.dateui&&(f="dateui"),"date"!==f||a.fn.editabletypes.date||(f="combodate"));"datetime"===f&&"inline"===e.mode&&(f="datetimefield");"wysihtml5"!==f||a.fn.editabletypes[f]||(f="textarea");
if("function"===typeof a.fn.editabletypes[f])return f=a.fn.editabletypes[f],e=this.sliceObj(e,this.objectKeys(f.defaults)),e=new f(e);a.error("Unknown type: "+f);return!1},supportsTransitions:function(){var a=(document.body||document.documentElement).style,f="transition",g=["Moz","Webkit","Khtml","O","ms"];if("string"===typeof a[f])return!0;for(var f=f.charAt(0).toUpperCase()+f.substr(1),d=0;d<g.length;d++)if("string"===typeof a[g[d]+f])return!0;return!1}}})(window.jQuery);
(function(a){var e=function(a,d){this.init(a,d)},f=function(a,d){this.init(a,d)};e.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(f,d){this.$element=a(f);this.options=a.extend({},a.fn.editableContainer.defaults,d);this.splitOptions();this.formOptions.scope=this.$element[0];this.initContainer();this.delayedHide=!1;this.$element.on("destroyed",a.proxy(function(){this.destroy()},this));a(document).data("editable-handlers-attached")||
(a(document).on("keyup.editable",function(b){27===b.which&&a(".editable-open").editableContainer("hide")}),a(document).on("click.editable",function(b){var c=a(b.target),d,f=".editable-container .ui-datepicker-header .datepicker .modal-backdrop .bootstrap-wysihtml5-insert-image-modal .bootstrap-wysihtml5-insert-link-modal".split(" ");if(!a(".select2-drop-mask").is(":visible")&&a.contains(document.documentElement,b.target)&&!c.is(document)){for(d=0;d<f.length;d++)if(c.is(f[d])||c.parents(f[d]).length)return;
e.prototype.closeOthers(b.target)}}),a(document).data("editable-handlers-attached",!0))},splitOptions:function(){this.containerOptions={};this.formOptions={};if(!a.fn[this.containerName])throw Error(this.containerName+" not found. Have you included corresponding js file?");for(var e in this.options)e in this.defaults?this.containerOptions[e]=this.options[e]:this.formOptions[e]=this.options[e]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var a;return this.containerDataName&&
(a=this.$element.data(this.containerDataName))?a:a=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:a.proxy(this.save,this),nochange:a.proxy(function(){this.hide("nochange")},this),cancel:a.proxy(function(){this.hide("cancel")},this),show:a.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),
this.delayedHide=!1):this.setPosition()},this),rendering:a.proxy(this.setPosition,this),resize:a.proxy(this.setPosition,this),rendered:a.proxy(function(){this.$element.triggerHandler("shown",a(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(e){this.$element.addClass("editable-open");!1!==e&&this.closeOthers(this.$element[0]);this.innerShow();this.tip().addClass(this.containerClass);this.$form=a("<div>");this.tip().is(this.innerCss)?this.tip().append(this.$form):
this.tip().find(this.innerCss).append(this.$form);this.renderForm()},hide:function(a){this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")&&(this.$form.data("editableform").isSaving?this.delayedHide={reason:a}:(this.delayedHide=!1,this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",a||"manual")))},innerShow:function(){},innerHide:function(){},toggle:function(a){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():
this.show(a)},setPosition:function(){},save:function(a,d){this.$element.triggerHandler("save",d);this.hide("save")},option:function(a,d){this.options[a]=d;a in this.containerOptions?(this.containerOptions[a]=d,this.setContainerOption(a,d)):(this.formOptions[a]=d,this.$form&&this.$form.editableform("option",a,d))},setContainerOption:function(a,d){this.call("option",a,d)},destroy:function(){this.hide();this.innerDestroy();this.$element.off("destroyed");this.$element.removeData("editableContainer")},
innerDestroy:function(){},closeOthers:function(e){a(".editable-open").each(function(d,b){if(b!==e&&!a(b).find(e).length){var c=a(b),f=c.data("editableContainer");f&&("cancel"===f.options.onblur?c.data("editableContainer").hide("onblur"):"submit"===f.options.onblur&&c.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}};a.fn.editableContainer=function(g){var d=arguments;return this.each(function(){var b=
a(this),c=b.data("editableContainer"),h="object"===typeof g&&g,n="inline"===h.mode?f:e;c||b.data("editableContainer",c=new n(this,h));"string"===typeof g&&c[g].apply(c,Array.prototype.slice.call(d,1))})};a.fn.editableContainer.Popup=e;a.fn.editableContainer.Inline=f;a.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"};jQuery.event.special.destroyed={remove:function(a){a.handler&&a.handler()}}})(window.jQuery);
(function(a){a.extend(a.fn.editableContainer.Inline.prototype,a.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=a("<span></span>");this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={};this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide();this.tip().insertAfter(this.$element).show()},
innerHide:function(){this.$tip.hide(this.options.anim,a.proxy(function(){this.$element.show();this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})})(window.jQuery);
(function(a){var e=function(e,g){this.$element=a(e);this.options=a.extend({},a.fn.editable.defaults,g,a.fn.editableutils.getConfigData(this.$element));this.options.selector?this.initLive():this.init();this.options.highlight&&!a.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};e.prototype={constructor:e,init:function(){var e=!1;this.options.name=this.options.name||this.$element.attr("id");this.options.scope=this.$element[0];if(this.input=a.fn.editableutils.createInput(this.options)){void 0===
this.options.value||null===this.options.value?(this.value=this.input.html2value(a.trim(this.$element.html())),e=!0):(this.options.value=a.fn.editableutils.tryParseJson(this.options.value,!0),this.value="string"===typeof this.options.value?this.input.str2value(this.options.value):this.options.value);this.$element.addClass("editable");"textarea"===this.input.type&&this.$element.addClass("editable-pre-wrapped");"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+
".editable",a.proxy(function(a){this.options.disabled||a.preventDefault();"mouseenter"===this.options.toggle?this.show():this.toggle("click"!==this.options.toggle)},this))):this.$element.attr("tabindex",-1);"function"===typeof this.options.display&&(this.options.autotext="always");switch(this.options.autotext){case "always":e=!0;break;case "auto":e=!a.trim(this.$element.text()).length&&null!==this.value&&void 0!==this.value&&!e;break;default:e=!1}a.when(e?this.render():!0).then(a.proxy(function(){this.options.disabled?
this.disable():this.enable();this.$element.triggerHandler("init",this)},this))}},initLive:function(){var e=this.options.selector;this.options.selector=!1;this.options.autotext="never";this.$element.on(this.options.toggle+".editable",e,a.proxy(function(e){var d=a(e.target);d.data("editable")||(d.hasClass(this.options.emptyclass)&&d.empty(),d.editable(this.options).trigger(e))},this))},render:function(a){if(!1!==this.options.display)return this.input.value2htmlFinal?this.input.value2html(this.value,
this.$element[0],this.options.display,a):"function"===typeof this.options.display?this.options.display.call(this.$element[0],this.value,a):this.input.value2html(this.value,this.$element[0])},enable:function(){this.options.disabled=!1;this.$element.removeClass("editable-disabled");this.handleEmpty(this.isEmpty);"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0;this.hide();this.$element.addClass("editable-disabled");
this.handleEmpty(this.isEmpty);this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(e,g){if(e&&"object"===typeof e)a.each(e,a.proxy(function(d,b){this.option(a.trim(d),b)},this));else{this.options[e]=g;if("disabled"===e)return g?this.disable():this.enable();"value"===e&&this.setValue(g);this.container&&this.container.option(e,g);this.input.option&&this.input.option(e,g)}},handleEmpty:function(e){!1!==this.options.display&&
((this.isEmpty=void 0!==e?e:"function"===typeof this.input.isEmpty?this.input.isEmpty(this.$element):""===a.trim(this.$element.html()),this.options.disabled)?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(e){if(!this.options.disabled){if(!this.container){var f=
a.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(f);this.$element.on("save.internal",a.proxy(this.save,this));this.container=this.$element.data("editableContainer")}else if(this.container.tip().is(":visible"))return;this.container.show(e)}},hide:function(){this.container&&this.container.hide()},toggle:function(a){this.container&&this.container.tip().is(":visible")?this.hide():this.show(a)},save:function(a,e){if(this.options.unsavedclass){var d;(d=(d=(d=
(d="function"===typeof this.options.url)||!1===this.options.display)||void 0!==e.response)||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(e.newValue))?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var b=this.$element,c=b.css("background-color");b.css("background-color",this.options.highlight);setTimeout(function(){"transparent"===c&&(c="");b.css("background-color",c);b.addClass("editable-bg-transition");
setTimeout(function(){b.removeClass("editable-bg-transition")},1700)},10)}this.setValue(e.newValue,!1,e.response)},validate:function(){if("function"===typeof this.options.validate)return this.options.validate.call(this,this.value)},setValue:function(e,g,d){this.value=g?this.input.str2value(e):e;this.container&&this.container.option("value",this.value);a.when(this.render(d)).then(a.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable();
this.container&&this.container.destroy();this.input.destroy();"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable"));this.$element.off("save.internal");this.$element.removeClass("editable editable-open editable-disabled");this.$element.removeData("editable")}};a.fn.editable=function(f){var g={},d=arguments;switch(f){case "validate":return this.each(function(){var b=a(this).data("editable"),c;b&&(c=b.validate())&&(g[b.options.name]=
c)}),g;case "getValue":return 2===arguments.length&&!0===arguments[1]?g=this.eq(0).data("editable").value:this.each(function(){var b=a(this).data("editable");b&&void 0!==b.value&&null!==b.value&&(g[b.options.name]=b.input.value2submit(b.value))}),g;case "submit":var b=arguments[1]||{},c=this,h=this.editable("validate");if(a.isEmptyObject(h)){var n={};1===c.length?(h=c.data("editable"),n={name:h.options.name||"",value:h.input.value2submit(h.value),pk:"function"===typeof h.options.pk?h.options.pk.call(h.options.scope):
h.options.pk},"function"===typeof h.options.params?n=h.options.params.call(h.options.scope,n):(h.options.params=a.fn.editableutils.tryParseJson(h.options.params,!0),a.extend(n,h.options.params)),n={url:h.options.url,data:n,type:"POST"},b.success=b.success||h.options.success,b.error=b.error||h.options.error):(h=this.editable("getValue"),n={url:b.url,data:h,type:"POST"});n.success="function"===typeof b.success?function(a){b.success.call(c,a,b)}:a.noop;n.error="function"===typeof b.error?function(){b.error.apply(c,
arguments)}:a.noop;b.ajaxOptions&&a.extend(n,b.ajaxOptions);b.data&&a.extend(n.data,b.data);a.ajax(n)}else"function"===typeof b.error&&b.error.call(c,h);return this}return this.each(function(){var b=a(this),c=b.data("editable"),g="object"===typeof f&&f;g&&g.selector?new e(this,g):(c||b.data("editable",c=new e(this,g)),"string"===typeof f&&c[f].apply(c,Array.prototype.slice.call(d,1)))})};a.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,
emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}})(window.jQuery);
(function(a){a.fn.editabletypes={};var e=function(){};e.prototype={init:function(e,g,d){this.type=e;this.options=a.extend({},d,g)},prerender:function(){this.$input=this.$tpl=a(this.options.tpl);this.error=this.$clear=null},render:function(){},value2html:function(e,g){a(g)[this.options.escape?"text":"html"](a.trim(e))},html2value:function(e){return a("<div>").html(e).text()},value2str:function(a){return a},str2value:function(a){return a},value2submit:function(a){return a},value2input:function(a){this.$input.val(a)},
input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(e){return a("<div>").text(e).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(a){void 0!==this.options[a]&&null!==this.options[a]&&this.$input.attr(a,this.options[a])},option:function(a,e){this.options[a]=e}};e.defaults=
{tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0};a.extend(a.fn.editabletypes,{abstractinput:e})})(window.jQuery);
(function(a){var e=function(a){};a.fn.editableutils.inherit(e,a.fn.editabletypes.abstractinput);a.extend(e.prototype,{render:function(){var e=a.Deferred();this.error=null;this.onSourceReady(function(){this.renderList();e.resolve()},function(){this.error=this.options.sourceError;e.resolve()});return e.promise()},html2value:function(a){return null},value2html:function(e,g,d,b){var c=a.Deferred(),f=function(){"function"===typeof d?d.call(g,e,this.sourceData,b):this.value2htmlFinal(e,g);c.resolve()};
if(null===e)f.call(this);else this.onSourceReady(f,function(){c.resolve()});return c.promise()},onSourceReady:function(e,g){var d;a.isFunction(this.options.source)?(d=this.options.source.call(this.options.scope),this.sourceData=null):d=this.options.source;if(this.options.sourceCache&&a.isArray(this.sourceData))e.call(this);else{try{d=a.fn.editableutils.tryParseJson(d,!1)}catch(h){g.call(this);return}if("string"===typeof d){if(this.options.sourceCache){var b=d,c;a(document).data(b)||a(document).data(b,
{});c=a(document).data(b);if(!1===c.loading&&c.sourceData){this.sourceData=c.sourceData;this.doPrepend();e.call(this);return}if(!0===c.loading){c.callbacks.push(a.proxy(function(){this.sourceData=c.sourceData;this.doPrepend();e.call(this)},this));c.err_callbacks.push(a.proxy(g,this));return}c.loading=!0;c.callbacks=[];c.err_callbacks=[]}d=a.extend({url:d,type:"get",cache:!1,dataType:"json",success:a.proxy(function(b){c&&(c.loading=!1);this.sourceData=this.makeArray(b);a.isArray(this.sourceData)?(c&&
(c.sourceData=this.sourceData,a.each(c.callbacks,function(){this.call()})),this.doPrepend(),e.call(this)):(g.call(this),c&&a.each(c.err_callbacks,function(){this.call()}))},this),error:a.proxy(function(){g.call(this);c&&(c.loading=!1,a.each(c.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);a.ajax(d)}else this.sourceData=this.makeArray(d),a.isArray(this.sourceData)?(this.doPrepend(),e.call(this)):g.call(this)}},doPrepend:function(){null!==this.options.prepend&&void 0!==
this.options.prepend&&(a.isArray(this.prependData)||(a.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=a.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"===typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),a.isArray(this.prependData)&&a.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},
value2htmlFinal:function(a,e){},makeArray:function(e){var f,d,b=[],c,h;if(!e||"string"===typeof e)return null;if(a.isArray(e)){h=function(a,b){d={value:a,text:b};if(2<=f++)return!1};for(var n=0;n<e.length;n++)c=e[n],"object"===typeof c?(f=0,a.each(c,h),1===f?b.push(d):1<f&&(c.children&&(c.children=this.makeArray(c.children)),b.push(c))):b.push({value:c,text:c})}else a.each(e,function(a,c){b.push({value:a,text:c})});return b},option:function(a,e){this.options[a]=e;"source"===a&&(this.sourceData=null);
"prepend"===a&&(this.prependData=null)}});e.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null});a.fn.editabletypes.list=e})(window.jQuery);
(function(a){var e=function(a){this.init("text",a,e.defaults)};a.fn.editableutils.inherit(e,a.fn.editabletypes.abstractinput);a.extend(e.prototype,{render:function(){this.renderClear();this.setClass();this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),this.$input.is("input,textarea")&&!this.$input.is('[type="checkbox"],[type="range"]')&&a.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},
renderClear:function(){this.options.clear&&(this.$clear=a('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(a.proxy(function(e){if(!~a.inArray(e.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var f=this;this.t=setTimeout(function(){f.toggleClear(e)},100)}},this)).parent().css("position","relative"),this.$clear.click(a.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(a){if(this.$clear){a=this.$input.val().length;var e=this.$clear.is(":visible");
a&&!e&&this.$clear.show();!a&&e&&this.$clear.hide()}},clear:function(){this.$clear.hide();this.$input.val("").focus()}});e.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0});a.fn.editabletypes.text=e})(window.jQuery);
(function(a){var e=function(a){this.init("textarea",a,e.defaults)};a.fn.editableutils.inherit(e,a.fn.editabletypes.abstractinput);a.extend(e.prototype,{render:function(){this.setClass();this.setAttr("placeholder");this.setAttr("rows");this.$input.keydown(function(e){e.ctrlKey&&13===e.which&&a(this).closest("form").submit()})},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)}});e.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",
placeholder:null,rows:7});a.fn.editabletypes.textarea=e})(window.jQuery);
(function(a){var e=function(a){this.init("select",a,e.defaults)};a.fn.editableutils.inherit(e,a.fn.editabletypes.list);a.extend(e.prototype,{renderList:function(){this.$input.empty();var e=this.options.escape,g=function(d,b){var c;if(a.isArray(b))for(var f=0;f<b.length;f++)c={},b[f].children?(c.label=b[f].text,d.append(g(a("<optgroup>",c),b[f].children))):(c.value=b[f].value,b[f].disabled&&(c.disabled=!0),c=a("<option>",c),c[e?"text":"html"](b[f].text),d.append(c));return d};g(this.$input,this.sourceData);
this.setClass();this.$input.on("keydown.editable",function(d){13===d.which&&a(this).closest("form").submit()})},value2htmlFinal:function(e,g){var d="",b=a.fn.editableutils.itemsByValue(e,this.sourceData);b.length&&(d=b[0].text);a.fn.editabletypes.abstractinput.prototype.value2html.call(this,d,g)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){a(this).closest("form").submit()})}});e.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:"<select></select>"});
a.fn.editabletypes.select=e})(window.jQuery);
(function(a){var e=function(a){this.init("checklist",a,e.defaults)};a.fn.editableutils.inherit(e,a.fn.editabletypes.list);a.extend(e.prototype,{renderList:function(){var e;this.$tpl.empty();if(a.isArray(this.sourceData)){for(var g=0;g<this.sourceData.length;g++){e=a("<label>").append(a("<input>",{type:"checkbox",value:this.sourceData[g].value}));var d=a("<span>");d[this.options.escape?"text":"html"](" "+this.sourceData[g].text);e.append(d);a("<div>").append(e).appendTo(this.$tpl)}this.$input=this.$tpl.find('input[type="checkbox"]');
this.setClass()}},value2str:function(e){return a.isArray(e)?e.sort().join(a.trim(this.options.separator)):""},str2value:function(e){var f;"string"===typeof e&&e.length?(f=new RegExp("\\s*"+a.trim(this.options.separator)+"\\s*"),e=e.split(f)):e=a.isArray(e)?e:[e];return e},value2input:function(e){this.$input.prop("checked",!1);a.isArray(e)&&e.length&&this.$input.each(function(f,d){var b=a(d);a.each(e,function(a,d){b.val()==d&&b.prop("checked",!0)})})},input2value:function(){var e=[];this.$input.filter(":checked").each(function(f,
d){e.push(a(d).val())});return e},value2htmlFinal:function(e,g){var d=[],b=a.fn.editableutils.itemsByValue(e,this.sourceData),c=this.options.escape;b.length?(a.each(b,function(b,e){var f=c?a.fn.editableutils.escape(e.text):e.text;d.push(f)}),a(g).html(d.join("<br>"))):a(g).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(e){13===e.which&&a(this).closest("form").submit()})}});e.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',
inputclass:null,separator:","});a.fn.editabletypes.checklist=e})(window.jQuery);(function(a){var e=function(a){this.init("password",a,e.defaults)};a.fn.editableutils.inherit(e,a.fn.editabletypes.text);a.extend(e.prototype,{value2html:function(e,g){e?a(g).text("[hidden]"):a(g).empty()},html2value:function(a){return null}});e.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="password">'});a.fn.editabletypes.password=e})(window.jQuery);
(function(a){var e=function(a){this.init("email",a,e.defaults)};a.fn.editableutils.inherit(e,a.fn.editabletypes.text);e.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="email">'});a.fn.editabletypes.email=e})(window.jQuery);(function(a){var e=function(a){this.init("url",a,e.defaults)};a.fn.editableutils.inherit(e,a.fn.editabletypes.text);e.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="url">'});a.fn.editabletypes.url=e})(window.jQuery);
(function(a){var e=function(a){this.init("tel",a,e.defaults)};a.fn.editableutils.inherit(e,a.fn.editabletypes.text);e.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'});a.fn.editabletypes.tel=e})(window.jQuery);
(function(a){var e=function(a){this.init("number",a,e.defaults)};a.fn.editableutils.inherit(e,a.fn.editabletypes.text);a.extend(e.prototype,{render:function(){e.superclass.render.call(this);this.setAttr("min");this.setAttr("max");this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}});e.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null});a.fn.editabletypes.number=e})(window.jQuery);
(function(a){var e=function(a){this.init("range",a,e.defaults)};a.fn.editableutils.inherit(e,a.fn.editabletypes.number);a.extend(e.prototype,{render:function(){this.$input=this.$tpl.filter("input");this.setClass();this.setAttr("min");this.setAttr("max");this.setAttr("step");this.$input.on("input",function(){a(this).siblings("output").text(a(this).val())})},activate:function(){this.$input.focus()}});e.defaults=a.extend({},a.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',
inputclass:"input-medium"});a.fn.editabletypes.range=e})(window.jQuery);(function(a){var e=function(a){this.init("time",a,e.defaults)};a.fn.editableutils.inherit(e,a.fn.editabletypes.abstractinput);a.extend(e.prototype,{render:function(){this.setClass()}});e.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'});a.fn.editabletypes.time=e})(window.jQuery);
(function(a){var e=function(f){this.init("select2",f,e.defaults);f.select2=f.select2||{};this.sourceData=null;f.placeholder&&(f.select2.placeholder=f.placeholder);if(!f.select2.tags&&f.source){var g=f.source;a.isFunction(f.source)&&(g=f.source.call(f.scope));"string"===typeof g?(f.select2.ajax=f.select2.ajax||{},f.select2.ajax.dataType||(f.select2.ajax.dataType="json"),f.select2.ajax.data||(f.select2.ajax.data=function(a){return{query:a}}),f.select2.ajax.processResults||(f.select2.ajax.processResults=
function(a){return{results:a}}),f.select2.ajax.url=g):(this.sourceData=this.convertSource(g),f.select2.data=this.sourceData)}this.options.select2=a.extend({},e.defaults.select2,f.select2);this.isMultiple=this.options.select2.tags||this.options.select2.multiple;this.isRemote="ajax"in this.options.select2;this.idFunc=this.options.select2.id;if("function"!==typeof this.idFunc){var d=this.idFunc||"id";this.idFunc=function(a){return a[d]}}this.formatSelection=this.options.select2.formatSelection;"function"!==
typeof this.formatSelection&&(this.formatSelection=function(a){return a.text})};a.fn.editableutils.inherit(e,a.fn.editabletypes.abstractinput);a.extend(e.prototype,{render:function(){this.setClass();if(this.isRemote)this.$input.on("select2-loaded",a.proxy(function(a){this.sourceData=a.items.results},this));if(this.isMultiple)this.$input.on("change",function(){a(this).closest("form").parent().triggerHandler("resize")})},value2html:function(f,g){var d="",b,c=this;this.options.select2.tags?b=f:this.sourceData&&
(b=a.fn.editableutils.itemsByValue(f,this.sourceData,this.idFunc));a.isArray(b)?(d=[],a.each(b,function(a,b){d.push(b&&"object"===typeof b?c.formatSelection(b):b)})):b&&(d=c.formatSelection(b));d=a.isArray(d)?d.join(this.options.viewseparator):d;e.superclass.value2html.call(this,d,g)},html2value:function(a){return this.options.select2.tags?this.str2value(a,this.options.viewseparator):null},value2input:function(e){a.isArray(e)&&(e=e.join(this.getSeparator()));this.$input.data("select2")?this.$input.val(e).trigger("change",
!0):(this.$input.val(e),this.$input.select2(this.options.select2));if(this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var f=this.options.select2.formatSelection;this.options.select2.id||f||(f=a(this.options.scope),f.data("editable").isEmpty||(e={id:e,text:f.text()},this.$input.select2("data",e)))}},input2value:function(){return this.$input.select2("val")},str2value:function(e,g){if("string"!==typeof e||!this.isMultiple)return e;g=g||this.getSeparator();var d,b,c;if(null===e||
1>e.length)return null;d=e.split(g);b=0;for(c=d.length;b<c;b+=1)d[b]=a.trim(d[b]);return d},autosubmit:function(){this.$input.on("change",function(e,g){g||a(this).closest("form").submit()})},getSeparator:function(){return this.options.select2.separator||a.fn.select2.defaults.separator},convertSource:function(e){if(a.isArray(e)&&e.length&&void 0!==e[0].value)for(var f=0;f<e.length;f++)void 0!==e[f].value&&(e[f].id=e[f].value,delete e[f].value);return e},destroy:function(){this.$input.data("select2")&&
this.$input.select2("destroy")}});e.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "});a.fn.editabletypes.select2=e})(window.jQuery);
(function(a){var e=function(e,g){this.$element=a(e);this.$element.is("input")?(this.options=a.extend({},a.fn.combodate.defaults,g,this.$element.data()),this.init()):a.error("Combodate should be applied to INPUT element")};e.prototype={constructor:e,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]};this.$widget=a('<span class="combodate"></span>').html(this.getTemplate());this.initCombos();
this.$widget.on("change","select",a.proxy(function(e){this.$element.val(this.getValue()).change();this.options.smartDays&&(a(e.target).is(".month")||a(e.target).is(".year"))&&this.fillCombo("day")},this));this.$widget.find("select").css("width","auto");this.$element.hide().after(this.$widget);this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var e=this.options.template;a.each(this.map,function(a,d){d=d[0];var b=new RegExp(d+"+"),c=1<d.length?d.substring(1,2):d;e=e.replace(b,
"{"+c+"}")});e=e.replace(/ /g,"&nbsp;");a.each(this.map,function(a,d){d=d[0];var b=1<d.length?d.substring(1,2):d;e=e.replace("{"+b+"}",'<select class="'+a+'"></select>')});return e},initCombos:function(){for(var a in this.map){var e=this.$widget.find("."+a);this["$"+a]=e.length?e:null;this.fillCombo(a)}},fillCombo:function(a){var e=this["$"+a];if(e){a=this["fill"+a.charAt(0).toUpperCase()+a.slice(1)]();var d=e.val();e.empty();for(var b=0;b<a.length;b++)e.append('<option value="'+a[b][0]+'">'+a[b][1]+
"</option>");e.val(d)}},fillCommon:function(a){var e=[],d;"name"===this.options.firstItem?(d=moment.relativeTime||moment.langData()._relativeTime,a="function"===typeof d[a]?d[a](1,!0,a,!1):d[a],a=a.split(" ").reverse()[0],e.push(["",a])):"empty"===this.options.firstItem&&e.push(["",""]);return e},fillDay:function(){var a=this.fillCommon("d"),e,d,b=-1!==this.options.template.indexOf("DD"),c=31;this.options.smartDays&&this.$month&&this.$year&&(e=parseInt(this.$month.val(),10),d=parseInt(this.$year.val(),
10),isNaN(e)||isNaN(d)||(c=moment([d,e]).daysInMonth()));for(d=1;d<=c;d++)e=b?this.leadZero(d):d,a.push([d,e]);return a},fillMonth:function(){var a=this.fillCommon("M"),e,d,b=-1!==this.options.template.indexOf("MMMM"),c=-1!==this.options.template.indexOf("MMM"),h=-1!==this.options.template.indexOf("MM");for(d=0;11>=d;d++)e=b?moment().date(1).month(d).format("MMMM"):c?moment().date(1).month(d).format("MMM"):h?this.leadZero(d+1):d+1,a.push([d,e]);return a},fillYear:function(){var a=[],e,d,b=-1!==this.options.template.indexOf("YYYY");
for(d=this.options.maxYear;d>=this.options.minYear;d--)e=b?d:(d+"").substring(2),a[this.options.yearDescending?"push":"unshift"]([d,e]);return a=this.fillCommon("y").concat(a)},fillHour:function(){var a=this.fillCommon("h"),e,d;e=-1!==this.options.template.indexOf("h");this.options.template.indexOf("H");var b=-1!==this.options.template.toLowerCase().indexOf("hh"),c=e?12:23;for(d=e?1:0;d<=c;d++)e=b?this.leadZero(d):d,a.push([d,e]);return a},fillMinute:function(){var a=this.fillCommon("m"),e,d,b=-1!==
this.options.template.indexOf("mm");for(d=0;59>=d;d+=this.options.minuteStep)e=b?this.leadZero(d):d,a.push([d,e]);return a},fillSecond:function(){var a=this.fillCommon("s"),e,d,b=-1!==this.options.template.indexOf("ss");for(d=0;59>=d;d+=this.options.secondStep)e=b?this.leadZero(d):d,a.push([d,e]);return a},fillAmpm:function(){var a=-1!==this.options.template.indexOf("a");this.options.template.indexOf("A");return[["am",a?"am":"AM"],["pm",a?"pm":"PM"]]},getValue:function(e){var f,d={},b=this,c=!1;a.each(this.map,
function(a,e){if("ampm"!==a){var f="day"===a?1:0;d[a]=b["$"+a]?parseInt(b["$"+a].val(),10):f;if(isNaN(d[a]))return c=!0,!1}});if(c)return"";this.$ampm&&(d.hour=12===d.hour?"am"===this.$ampm.val()?0:12:"am"===this.$ampm.val()?d.hour:d.hour+12);f=moment([d.year,d.month,d.day,d.hour,d.minute,d.second]);this.highlight(f);e=void 0===e?this.options.format:e;return null===e?f.isValid()?f:null:f.isValid()?f.format(e):""},setValue:function(e){function f(b,c){var d={};b.children("option").each(function(b,e){var f=
a(e).attr("value"),g;""!==f&&(g=Math.abs(f-c),"undefined"===typeof d.distance||g<d.distance)&&(d={value:f,distance:g})});return d.value}if(e){var d="string"===typeof e?moment(e,this.options.format):moment(e),b=this,c={};d.isValid()&&(a.each(this.map,function(a,b){"ampm"!==a&&(c[a]=d[b[1]]())}),this.$ampm&&(12<=c.hour?(c.ampm="pm",12<c.hour&&(c.hour-=12)):(c.ampm="am",0===c.hour&&(c.hour=12))),a.each(c,function(a,c){b["$"+a]&&("minute"===a&&1<b.options.minuteStep&&b.options.roundTime&&(c=f(b["$"+a],
c)),"second"===a&&1<b.options.secondStep&&b.options.roundTime&&(c=f(b["$"+a],c)),b["$"+a].val(c))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(d.format(this.options.format)).change())}},highlight:function(a){a.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),
this.$widget.find("select").css("border-color","red"))},leadZero:function(a){return 9>=a?"0"+a:a},destroy:function(){this.$widget.remove();this.$element.removeData("combodate").show()}};a.fn.combodate=function(f){var g,d=Array.apply(null,arguments);d.shift();return"getValue"===f&&this.length&&(g=this.eq(0).data("combodate"))?g.getValue.apply(g,d):this.each(function(){var b=a(this),c=b.data("combodate"),g="object"==typeof f&&f;c||b.data("combodate",c=new e(this,g));"string"==typeof f&&"function"==
typeof c[f]&&c[f].apply(c,d)})};a.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:(new Date).getFullYear(),yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0,smartDays:!1}})(window.jQuery);
(function(a){var e=function(f){this.init("combodate",f,e.defaults);this.options.viewformat||(this.options.viewformat=this.options.format);f.combodate=a.fn.editableutils.tryParseJson(f.combodate,!0);this.options.combodate=a.extend({},e.defaults.combodate,f.combodate,{format:this.options.format,template:this.options.template})};a.fn.editableutils.inherit(e,a.fn.editabletypes.abstractinput);a.extend(e.prototype,{render:function(){this.$input.combodate(this.options.combodate);"bs3"===a.fn.editableform.engine&&
this.$input.siblings().find("select").addClass("form-control");this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(a,g){var d=a?a.format(this.options.viewformat):"";e.superclass.value2html.call(this,d,g)},html2value:function(a){return a?moment(a,this.options.viewformat):null},value2str:function(a){return a?a.format(this.options.format):""},str2value:function(a){return a?moment(a,this.options.format):null},value2submit:function(a){return this.value2str(a)},
value2input:function(a){this.$input.combodate("setValue",a)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}});e.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null});a.fn.editabletypes.combodate=e})(window.jQuery);
(function(a){var e=a.fn.editableform.Constructor.prototype.initInput;a.extend(a.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=a(a.fn.editableform.template);this.$form.find(".control-group").addClass("form-group");this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){e.apply(this);var f=null===this.input.options.inputclass||!1===this.input.options.inputclass;~a.inArray(this.input.type,"text select textarea password email url tel number range time typeaheadjs".split(" "))&&
(this.input.$input.addClass("form-control"),f&&(this.input.options.inputclass="input-sm",this.input.$input.addClass("input-sm")));for(var g=this.$form.find(".editable-buttons"),f=f?["input-sm"]:this.input.options.inputclass.split(" "),d=0;d<f.length;d++)"input-lg"===f[d].toLowerCase()&&g.find("button").removeClass("btn-sm").addClass("btn-lg")}});a.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button><button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>';
a.fn.editableform.errorGroupClass="has-error";a.fn.editableform.errorBlockClass=null;a.fn.editableform.engine="bs3"})(window.jQuery);
(function(a){a.extend(a.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:a.fn.popover.Constructor.DEFAULTS,initContainer:function(){a.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var e;this.$element.data("template")&&(e=this.$element.data("template"),this.$element.removeData("template"));this.call(this.containerOptions);e&&this.$element.data("template",e)},innerShow:function(){this.call("show")},
innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(a,f){this.container().options[a]=f},setPosition:function(){(function(){var a=this.tip(),f="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,g=/\s?auto?\s?/i,d=g.test(f);d&&(f=f.replace(g,"")||"top");var g=this.getPosition(),b=a[0].offsetWidth,c=a[0].offsetHeight;if(d){var h=this.$element.parent(),d=f,n=document.documentElement.scrollTop||
document.body.scrollTop,m="body"==this.options.container?window.innerWidth:h.outerWidth(),t="body"==this.options.container?window.innerHeight:h.outerHeight(),h="body"==this.options.container?0:h.offset().left,f="bottom"==f&&g.top+g.height+c-n>t?"top":"top"==f&&0>g.top-n-c?"bottom":"right"==f&&g.right+b>m?"left":"left"==f&&g.left-b<h?"right":f;a.removeClass(d).addClass(f)}a=this.getCalculatedOffset(f,g,b,c);this.applyPlacement(a,f)}).call(this.container())}})})(window.jQuery);
(function(a){function e(){return new Date(Date.UTC.apply(Date,arguments))}function f(b,c){var d=a(b).data(),e={},f,g=new RegExp("^"+c.toLowerCase()+"([A-Z])");c=new RegExp("^"+c.toLowerCase());for(var h in d)c.test(h)&&(f=h.replace(g,function(a,b){return b.toLowerCase()}),e[f]=d[h]);return e}function g(b){var c={};if(!t[b]&&(b=b.split("-")[0],!t[b]))return;var d=t[b];a.each(m,function(a,b){b in d&&(c[b]=d[b])});return c}var d=function(b,c){this._process_options(c);this.element=a(b);this.isInline=
!1;this.isInput=this.element.is("input");this.hasInput=(this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1)&&this.element.find("input").length;this.component&&0===this.component.length&&(this.component=!1);this.picker=a(w.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right"));
this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(a,b){return parseInt(b)+1});this._allow_update=!1;this.setStartDate(this.o.startDate);this.setEndDate(this.o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()};d.prototype={constructor:d,_process_options:function(b){this._o=a.extend({},this._o,b);b=this.o=a.extend({},
this._o);var c=b.language;t[c]||(c=c.split("-")[0],t[c]||(c=n.language));b.language=c;switch(b.startView){case 2:case "decade":b.startView=2;break;case 1:case "year":b.startView=1;break;default:b.startView=0}switch(b.minViewMode){case 1:case "months":b.minViewMode=1;break;case 2:case "years":b.minViewMode=2;break;default:b.minViewMode=0}b.startView=Math.max(b.startView,b.minViewMode);b.weekStart%=7;b.weekEnd=(b.weekStart+6)%7;c=w.parseFormat(b.format);-Infinity!==b.startDate&&(b.startDate=w.parseDate(b.startDate,
c,b.language));Infinity!==b.endDate&&(b.endDate=w.parseDate(b.endDate,c,b.language));b.daysOfWeekDisabled=b.daysOfWeekDisabled||[];a.isArray(b.daysOfWeekDisabled)||(b.daysOfWeekDisabled=b.daysOfWeekDisabled.split(/[,\s]*/));b.daysOfWeekDisabled=a.map(b.daysOfWeekDisabled,function(a){return parseInt(a,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var b=0,c,d;b<a.length;b++)c=a[b][0],d=a[b][1],c.on(d)},_unapplyEvents:function(a){for(var b=0,c,d;b<a.length;b++)c=a[b][0],d=a[b][1],
c.off(d)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]];this._secondaryEvents=
[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{mousedown:a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).size()||this.picker.is(a.target)||this.picker.find(a.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},
_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.date,e=new Date(d.getTime()+6E4*d.getTimezoneOffset());this.element.trigger({type:b,date:e,format:a.proxy(function(a){return w.formatDate(d,a||this.o.format,this.o.language)},this)})},show:function(a){this.isInline||this.picker.appendTo("body");this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();
a&&a.preventDefault();this._trigger("show")},hide:function(a){!this.isInline&&this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||
delete this.element.data().date},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6E4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6E4*a.getTimezoneOffset()))},setUTCDate:function(a){this.date=a;this.setValue()},setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a):this.component&&this.element.find("input").val(a)},getFormattedDate:function(a){void 0===a&&(a=this.o.format);
return w.formatDate(this.date,a,this.o.language)},setStartDate:function(a){this._process_options({startDate:a});this.update();this.updateNavArrows()},setEndDate:function(a){this._process_options({endDate:a});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a});this.update();this.updateNavArrows()},place:function(){if(!this.isInline){var b=parseInt(this.element.parents().filter(function(){return"auto"!=a(this).css("z-index")}).first().css("z-index"))+
10,c=this.component?this.component.parent().offset():this.element.offset(),d=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:c.top+d,left:c.left,zIndex:b})}},_allow_update:!0,update:function(){if(this._allow_update){var a,b=!1;arguments&&arguments.length&&("string"===typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):(a=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date);
this.date=w.parseDate(a,this.o.format,this.o.language);b&&this.setValue();this.viewDate=this.date<this.o.startDate?new Date(this.o.startDate):this.date>this.o.endDate?new Date(this.o.endDate):new Date(this.date);this.fill()}},fillDow:function(){var a=this.o.weekStart,b="<tr>";this.o.calendarWeeks&&(b+='<th class="cw">&nbsp;</th>',this.picker.find(".datepicker-days thead tr:first-child").prepend('<th class="cw">&nbsp;</th>'));for(;a<this.o.weekStart+7;)b+='<th class="dow">'+t[this.o.language].daysMin[a++%
7]+"</th>";b+="</tr>";this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+t[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range;this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),f=this.date.valueOf(),g=new Date;b.getUTCFullYear()<
d||b.getUTCFullYear()==d&&b.getUTCMonth()<e?c.push("old"):(b.getUTCFullYear()>d||b.getUTCFullYear()==d&&b.getUTCMonth()>e)&&c.push("new");this.o.todayHighlight&&b.getUTCFullYear()==g.getFullYear()&&b.getUTCMonth()==g.getMonth()&&b.getUTCDate()==g.getDate()&&c.push("today");f&&b.valueOf()==f&&c.push("active");(b.valueOf()<this.o.startDate||b.valueOf()>this.o.endDate||-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled))&&c.push("disabled");this.range&&(b>this.range[0]&&b<this.range[this.range.length-
1]&&c.push("range"),-1!=a.inArray(b.valueOf(),this.range)&&c.push("selected"));return c},fill:function(){var b=new Date(this.viewDate),c=b.getUTCFullYear(),d=b.getUTCMonth(),b=-Infinity!==this.o.startDate?this.o.startDate.getUTCFullYear():-Infinity,f=-Infinity!==this.o.startDate?this.o.startDate.getUTCMonth():-Infinity,g=Infinity!==this.o.endDate?this.o.endDate.getUTCFullYear():Infinity,h=Infinity!==this.o.endDate?this.o.endDate.getUTCMonth():Infinity,m;this.picker.find(".datepicker-days thead th.datepicker-switch").text(t[this.o.language].months[d]+
" "+c);this.picker.find("tfoot th.today").text(t[this.o.language].today).toggle(!1!==this.o.todayBtn);this.picker.find("tfoot th.clear").text(t[this.o.language].clear).toggle(!1!==this.o.clearBtn);this.updateNavArrows();this.fillMonths();var n=e(c,d-1,28,0,0,0,0),d=w.getDaysInMonth(n.getUTCFullYear(),n.getUTCMonth());n.setUTCDate(d);n.setUTCDate(d-(n.getUTCDay()-this.o.weekStart+7)%7);var E=new Date(n);E.setUTCDate(E.getUTCDate()+42);for(var E=E.valueOf(),d=[],D;n.valueOf()<E;){if(n.getUTCDay()==
this.o.weekStart&&(d.push("<tr>"),this.o.calendarWeeks)){D=new Date(+n+(this.o.weekStart-n.getUTCDay()-7)%7*864E5);D=new Date(+D+(11-D.getUTCDay())%7*864E5);var F=new Date(+(F=e(D.getUTCFullYear(),0,1))+(11-F.getUTCDay())%7*864E5);d.push('<td class="cw">'+((D-F)/864E5/7+1)+"</td>")}D=this.getClassNames(n);D.push("day");var G=this.o.beforeShowDay(n);void 0===G?G={}:"boolean"===typeof G?G={enabled:G}:"string"===typeof G&&(G={classes:G});!1===G.enabled&&D.push("disabled");G.classes&&(D=D.concat(G.classes.split(/\s+/)));
G.tooltip&&(m=G.tooltip);D=a.unique(D);d.push('<td class="'+D.join(" ")+'"'+(m?' title="'+m+'"':"")+">"+n.getUTCDate()+"</td>");n.getUTCDay()==this.o.weekEnd&&d.push("</tr>");n.setUTCDate(n.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(d.join(""));m=this.date&&this.date.getUTCFullYear();d=this.picker.find(".datepicker-months").find("th:eq(1)").text(c).end().find("span").removeClass("active");m&&m==c&&d.eq(this.date.getUTCMonth()).addClass("active");(c<b||c>g)&&d.addClass("disabled");
c==b&&d.slice(0,f).addClass("disabled");c==g&&d.slice(h+1).addClass("disabled");d="";c=10*parseInt(c/10,10);f=this.picker.find(".datepicker-years").find("th:eq(1)").text(c+"-"+(c+9)).end().find("td");--c;for(h=-1;11>h;h++)d+='<span class="year'+(-1==h?" old":10==h?" new":"")+(m==c?" active":"")+(c<b||c>g?" disabled":"")+'">'+c+"</span>",c+=1;f.html(d)},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),a=a.getUTCMonth();switch(this.viewMode){case 0:-Infinity!==
this.o.startDate&&b<=this.o.startDate.getUTCFullYear()&&a<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});Infinity!==this.o.endDate&&b>=this.o.endDate.getUTCFullYear()&&a>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:-Infinity!==this.o.startDate&&b<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):
this.picker.find(".prev").css({visibility:"visible"}),Infinity!==this.o.endDate&&b>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(b){b.preventDefault();b=a(b.target).closest("span, td, th");if(1==b.length)switch(b[0].nodeName.toLowerCase()){case "th":switch(b[0].className){case "datepicker-switch":this.showMode(1);break;case "prev":case "next":b=w.modes[this.viewMode].navStep*("prev"==b[0].className?
-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,b);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,b)}this.fill();break;case "today":b=new Date;b=e(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0);this.showMode(-2);this._setDate(b,"linked"==this.o.todayBtn?null:"view");break;case "clear":var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input"));c&&c.val("").change();this._trigger("changeDate");this.update();this.o.autoclose&&this.hide()}break;
case "span":if(!b.is(".disabled")){this.viewDate.setUTCDate(1);if(b.is(".month")){c=1;var d=b.parent().find("span").index(b),f=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(d);this._trigger("changeMonth",this.viewDate);1===this.o.minViewMode&&this._setDate(e(f,d,c,0,0,0,0))}else f=parseInt(b.text(),10)||0,c=1,d=0,this.viewDate.setUTCFullYear(f),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(e(f,d,c,0,0,0,0));this.showMode(-1);this.fill()}break;case "td":b.is(".day")&&
!b.is(".disabled")&&(c=parseInt(b.text(),10)||1,f=this.viewDate.getUTCFullYear(),d=this.viewDate.getUTCMonth(),b.is(".old")?0===d?(d=11,--f):--d:b.is(".new")&&(11==d?(d=0,f+=1):d+=1),this._setDate(e(f,d,c,0,0,0,0)))}},_setDate:function(a,b){b&&"date"!=b||(this.date=new Date(a));b&&"view"!=b||(this.viewDate=new Date(a));this.fill();this.setValue();this._trigger("changeDate");var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input"));c&&(c.change(),!this.o.autoclose||b&&"date"!=
b||this.hide())},moveMonth:function(a,b){if(!b)return a;var c=new Date(a.valueOf()),d=c.getUTCDate(),e=c.getUTCMonth(),f=Math.abs(b),g;b=0<b?1:-1;if(1==f){if(f=-1==b?function(){return c.getUTCMonth()==e}:function(){return c.getUTCMonth()!=g},g=e+b,c.setUTCMonth(g),0>g||11<g)g=(g+12)%12}else{for(var h=0;h<f;h++)c=this.moveMonth(c,b);g=c.getUTCMonth();c.setUTCDate(d);f=function(){return g!=c.getUTCMonth()}}for(;f();)c.setUTCDate(--d),c.setUTCMonth(g);return c},moveYear:function(a,b){return this.moveMonth(a,
12*b)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))27==a.keyCode&&this.show();else{var b=!1,c,d,e;switch(a.keyCode){case 27:this.hide();a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;c=37==a.keyCode?-1:1;a.ctrlKey?(d=this.moveYear(this.date,c),e=this.moveYear(this.viewDate,c)):a.shiftKey?(d=this.moveMonth(this.date,c),e=this.moveMonth(this.viewDate,c)):(d=new Date(this.date),d.setUTCDate(this.date.getUTCDate()+
c),e=new Date(this.viewDate),e.setUTCDate(this.viewDate.getUTCDate()+c));this.dateWithinRange(d)&&(this.date=d,this.viewDate=e,this.setValue(),this.update(),a.preventDefault(),b=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;c=38==a.keyCode?-1:1;a.ctrlKey?(d=this.moveYear(this.date,c),e=this.moveYear(this.viewDate,c)):a.shiftKey?(d=this.moveMonth(this.date,c),e=this.moveMonth(this.viewDate,c)):(d=new Date(this.date),d.setUTCDate(this.date.getUTCDate()+7*c),e=new Date(this.viewDate),
e.setUTCDate(this.viewDate.getUTCDate()+7*c));this.dateWithinRange(d)&&(this.date=d,this.viewDate=e,this.setValue(),this.update(),a.preventDefault(),b=!0);break;case 13:this.hide();a.preventDefault();break;case 9:this.hide()}if(b){this._trigger("changeDate");var f;this.isInput?f=this.element:this.component&&(f=this.element.find("input"));f&&f.change()}}},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a)));this.picker.find(">div").hide().filter(".datepicker-"+
w.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};var b=function(b,c){this.element=a(b);this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a});delete c.inputs;a(this.inputs).datepicker(c).bind("changeDate",a.proxy(this.dateUpdated,this));this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")});this.updateDates()};b.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.date});this.updateRanges()},updateRanges:function(){var b=
a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){var c=a(b.target).data("datepicker").getUTCDate();b=a.inArray(b.target,this.inputs);var d=this.inputs.length;if(-1!=b){if(c<this.dates[b])for(;0<=b&&c<this.dates[b];)this.pickers[b--].setUTCDate(c);else if(c>this.dates[b])for(;b<d&&c>this.dates[b];)this.pickers[b++].setUTCDate(c);this.updateDates()}},remove:function(){a.map(this.pickers,function(a){a.remove()});delete this.element.data().datepicker}};
var c=a.fn.datepicker,h=a.fn.datepicker=function(c){var e=Array.apply(null,arguments);e.shift();var h;this.each(function(){var k=a(this),l=k.data("datepicker"),m="object"==typeof c&&c;if(!l){var l=f(this,"date"),p=a.extend({},n,l,m),p=g(p.language),m=a.extend({},n,p,l,m);k.is(".input-daterange")||m.inputs?(l={inputs:m.inputs||k.find("input").toArray()},k.data("datepicker",l=new b(this,a.extend(m,l)))):k.data("datepicker",l=new d(this,m))}if("string"==typeof c&&"function"==typeof l[c]&&(h=l[c].apply(l,
e),void 0!==h))return!1});return void 0!==h?h:this},n=a.fn.datepicker.defaults={autoclose:!1,beforeShowDay:a.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},m=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=d;var t=a.fn.datepicker.dates={en:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),
daysShort:"Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),daysMin:"Su Mo Tu We Th Fr Sa Su".split(" "),months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),today:"Today",clear:"Clear"}},w={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return 0===a%4&&0!==a%
100||0===a%400},getDaysInMonth:function(a,b){return[31,w.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00");a=a.match(this.validParts);if(!b||!b.length||!a||0===a.length)throw Error("Invalid date format.");return{separators:b,parts:a}},parseDate:function(b,c,f){if(b instanceof Date)return b;"string"===typeof c&&(c=w.parseFormat(c));
if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(b)){var g=/([\-+]\d+)([dmwy])/,h=b.match(/([\-+]\d+)([dmwy])/g),l;b=new Date;for(var m=0;m<h.length;m++)switch(c=g.exec(h[m]),l=parseInt(c[1]),c[2]){case "d":b.setUTCDate(b.getUTCDate()+l);break;case "m":b=d.prototype.moveMonth.call(d.prototype,b,l);break;case "w":b.setUTCDate(b.getUTCDate()+7*l);break;case "y":b=d.prototype.moveYear.call(d.prototype,b,l)}return e(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),0,0,0)}h=b&&b.match(this.nonpunctuation)||
[];b=new Date;var g={},p="yyyy yy M MM m mm d dd".split(" ");l={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2E3+b)},m:function(a,b){for(--b;0>b;)b+=12;b%=12;for(a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};var u;l.M=l.MM=l.mm=l.m;l.dd=l.d;b=e(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0);var n=c.parts.slice();h.length!=n.length&&(n=a(n).filter(function(b,c){return-1!==a.inArray(c,
p)}).toArray());if(h.length==n.length){for(var m=0,F=n.length;m<F;m++){u=parseInt(h[m],10);c=n[m];if(isNaN(u))switch(c){case "MM":u=a(t[f].months).filter(function(){var a=this.slice(0,h[m].length),b=h[m].slice(0,a.length);return a==b});u=a.inArray(u[0],t[f].months)+1;break;case "M":u=a(t[f].monthsShort).filter(function(){var a=this.slice(0,h[m].length),b=h[m].slice(0,a.length);return a==b}),u=a.inArray(u[0],t[f].monthsShort)+1}g[c]=u}for(m=0;m<p.length;m++)if(c=p[m],c in g&&!isNaN(g[c]))l[c](b,g[c])}return b},
formatDate:function(b,c,d){"string"===typeof c&&(c=w.parseFormat(c));d={d:b.getUTCDate(),D:t[d].daysShort[b.getUTCDay()],DD:t[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:t[d].monthsShort[b.getUTCMonth()],MM:t[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};d.dd=(10>d.d?"0":"")+d.d;d.mm=(10>d.m?"0":"")+d.m;b=[];for(var e=a.extend([],c.separators),f=0,g=c.parts.length;f<=g;f++)e.length&&b.push(e.shift()),b.push(d[c.parts[f]]);return b.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',
contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};w.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+w.headTemplate+"<tbody></tbody>"+w.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+w.headTemplate+w.contTemplate+w.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+
w.headTemplate+w.contTemplate+w.footTemplate+"</table></div></div>";a.fn.datepicker.DPGlobal=w;a.fn.datepicker.noConflict=function(){a.fn.datepicker=c;return this};a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),h.call(c,"show"))});a(function(){h.call(a('[data-provide="datepicker-inline"]'))})})(window.jQuery);
(function(a){a.fn.bdatepicker=a.fn.datepicker.noConflict();a.fn.datepicker||(a.fn.datepicker=a.fn.bdatepicker);var e=function(a){this.init("date",a,e.defaults);this.initPicker(a,e.defaults)};a.fn.editableutils.inherit(e,a.fn.editabletypes.abstractinput);a.extend(e.prototype,{initPicker:function(e,g){this.options.viewformat||(this.options.viewformat=this.options.format);e.datepicker=a.fn.editableutils.tryParseJson(e.datepicker,!0);this.options.datepicker=a.extend({},g.datepicker,e.datepicker,{format:this.options.viewformat});
this.options.datepicker.language=this.options.datepicker.language||"en";this.dpg=a.fn.bdatepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker);this.options.clear&&(this.$clear=a('<a href="#"></a>').html(this.options.clear).click(a.proxy(function(a){a.preventDefault();a.stopPropagation();this.clear()},this)),this.$tpl.parent().append(a('<div class="editable-clear">').append(this.$clear)))},
value2html:function(a,g){var d=a?this.dpg.formatDate(a,this.parsedViewFormat,this.options.datepicker.language):"";e.superclass.value2html.call(this,d,g)},html2value:function(a){return this.parseDate(a,this.parsedViewFormat)},value2str:function(a){return a?this.dpg.formatDate(a,this.parsedFormat,this.options.datepicker.language):""},str2value:function(a){return this.parseDate(a,this.parsedFormat)},value2submit:function(a){return this.value2str(a)},value2input:function(a){this.$input.bdatepicker("update",
a)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null;this.$input.find(".active").removeClass("active");this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(e){if(!a(e.currentTarget).is(".old")&&!a(e.currentTarget).is(".new")){var f=a(this).closest("form");setTimeout(function(){f.submit()},200)}})},parseDate:function(a,e){var d=
null,b;a&&(d=this.dpg.parseDate(a,e,this.options.datepicker.language),"string"===typeof a&&(b=this.dpg.formatDate(d,e,this.options.datepicker.language),a!==b&&(d=null)));return d}});e.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"});a.fn.editabletypes.date=e})(window.jQuery);
(function(a){var e=function(a){this.init("datefield",a,e.defaults);this.initPicker(a,e.defaults)};a.fn.editableutils.inherit(e,a.fn.editabletypes.date);a.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.bdatepicker(this.options.datepicker);this.$input.off("focus keydown");this.$input.keyup(a.proxy(function(){this.$tpl.removeData("date");this.$tpl.bdatepicker("update")},this))},value2input:function(a){this.$input.val(a?
this.dpg.formatDate(a,this.parsedViewFormat,this.options.datepicker.language):"");this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});e.defaults=a.extend({},a.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,
startView:0,minViewMode:0,autoclose:!0}});a.fn.editabletypes.datefield=e})(window.jQuery);
(function(a){var e=function(a){this.init("datetime",a,e.defaults);this.initPicker(a,e.defaults)};a.fn.editableutils.inherit(e,a.fn.editabletypes.abstractinput);a.extend(e.prototype,{initPicker:function(e,g){this.options.viewformat||(this.options.viewformat=this.options.format);e.datetimepicker=a.fn.editableutils.tryParseJson(e.datetimepicker,!0);this.options.datetimepicker=a.extend({},g.datetimepicker,e.datetimepicker,{format:this.options.viewformat});this.options.datetimepicker.language=this.options.datetimepicker.language||
"en";this.dpg=a.fn.datetimepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker);this.$input.on("changeMode",function(e){var f=a(this).closest("form").parent();setTimeout(function(){f.triggerHandler("resize")},0)});this.options.clear&&(this.$clear=a('<a href="#"></a>').html(this.options.clear).click(a.proxy(function(a){a.preventDefault();
a.stopPropagation();this.clear()},this)),this.$tpl.parent().append(a('<div class="editable-clear">').append(this.$clear)))},value2html:function(a,g){var d=a?this.dpg.formatDate(this.toUTC(a),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";if(g)e.superclass.value2html.call(this,d,g);else return d},html2value:function(a){return(a=this.parseDate(a,this.parsedViewFormat))?this.fromUTC(a):null},value2str:function(a){return a?this.dpg.formatDate(this.toUTC(a),this.parsedFormat,
this.options.datetimepicker.language,this.options.formatType):""},str2value:function(a){return(a=this.parseDate(a,this.parsedFormat))?this.fromUTC(a):null},value2submit:function(a){return this.value2str(a)},value2input:function(a){a&&this.$input.data("datetimepicker").setDate(a)},input2value:function(){var a=this.$input.data("datetimepicker");return a.date?a.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null;this.$input.find(".active").removeClass("active");
this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(e){var f=a(this).closest("form");setTimeout(function(){f.submit()},200)})},toUTC:function(a){return a?new Date(a.valueOf()-6E4*a.getTimezoneOffset()):a},fromUTC:function(a){return a?new Date(a.valueOf()+6E4*a.getTimezoneOffset()):a},parseDate:function(a,e){var d=null,b;a&&(d=this.dpg.parseDate(a,e,this.options.datetimepicker.language,this.options.formatType),"string"===
typeof a&&(b=this.dpg.formatDate(d,e,this.options.datetimepicker.language,this.options.formatType),a!==b&&(d=null)));return d}});e.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"});a.fn.editabletypes.datetime=e})(window.jQuery);
(function(a){var e=function(a){this.init("datetimefield",a,e.defaults);this.initPicker(a,e.defaults)};a.fn.editableutils.inherit(e,a.fn.editabletypes.datetime);a.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.datetimepicker(this.options.datetimepicker);this.$input.off("focus keydown");this.$input.keyup(a.proxy(function(){this.$tpl.removeData("date");this.$tpl.datetimepicker("update")},this))},value2input:function(a){this.$input.val(this.value2html(a));
this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});e.defaults=a.extend({},a.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}});a.fn.editabletypes.datetimefield=e})(window.jQuery);var colorbrewer={YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:"#ffffcc #d9f0a3 #addd8e #78c679 #31a354 #006837".split(" "),7:"#ffffcc #d9f0a3 #addd8e #78c679 #41ab5d #238443 #005a32".split(" "),8:"#ffffe5 #f7fcb9 #d9f0a3 #addd8e #78c679 #41ab5d #238443 #005a32".split(" "),9:"#ffffe5 #f7fcb9 #d9f0a3 #addd8e #78c679 #41ab5d #238443 #006837 #004529".split(" ")},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc",
"#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:"#ffffcc #c7e9b4 #7fcdbb #41b6c4 #2c7fb8 #253494".split(" "),7:"#ffffcc #c7e9b4 #7fcdbb #41b6c4 #1d91c0 #225ea8 #0c2c84".split(" "),8:"#ffffd9 #edf8b1 #c7e9b4 #7fcdbb #41b6c4 #1d91c0 #225ea8 #0c2c84".split(" "),9:"#ffffd9 #edf8b1 #c7e9b4 #7fcdbb #41b6c4 #1d91c0 #225ea8 #253494 #081d58".split(" ")},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4",
"#43a2ca","#0868ac"],6:"#f0f9e8 #ccebc5 #a8ddb5 #7bccc4 #43a2ca #0868ac".split(" "),7:"#f0f9e8 #ccebc5 #a8ddb5 #7bccc4 #4eb3d3 #2b8cbe #08589e".split(" "),8:"#f7fcf0 #e0f3db #ccebc5 #a8ddb5 #7bccc4 #4eb3d3 #2b8cbe #08589e".split(" "),9:"#f7fcf0 #e0f3db #ccebc5 #a8ddb5 #7bccc4 #4eb3d3 #2b8cbe #0868ac #084081".split(" ")},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:"#edf8fb #ccece6 #99d8c9 #66c2a4 #2ca25f #006d2c".split(" "),
7:"#edf8fb #ccece6 #99d8c9 #66c2a4 #41ae76 #238b45 #005824".split(" "),8:"#f7fcfd #e5f5f9 #ccece6 #99d8c9 #66c2a4 #41ae76 #238b45 #005824".split(" "),9:"#f7fcfd #e5f5f9 #ccece6 #99d8c9 #66c2a4 #41ae76 #238b45 #006d2c #00441b".split(" ")},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:"#f6eff7 #d0d1e6 #a6bddb #67a9cf #1c9099 #016c59".split(" "),7:"#f6eff7 #d0d1e6 #a6bddb #67a9cf #3690c0 #02818a #016450".split(" "),
8:"#fff7fb #ece2f0 #d0d1e6 #a6bddb #67a9cf #3690c0 #02818a #016450".split(" "),9:"#fff7fb #ece2f0 #d0d1e6 #a6bddb #67a9cf #3690c0 #02818a #016c59 #014636".split(" ")},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:"#f1eef6 #d0d1e6 #a6bddb #74a9cf #2b8cbe #045a8d".split(" "),7:"#f1eef6 #d0d1e6 #a6bddb #74a9cf #3690c0 #0570b0 #034e7b".split(" "),8:"#fff7fb #ece7f2 #d0d1e6 #a6bddb #74a9cf #3690c0 #0570b0 #034e7b".split(" "),
9:"#fff7fb #ece7f2 #d0d1e6 #a6bddb #74a9cf #3690c0 #0570b0 #045a8d #023858".split(" ")},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:"#edf8fb #bfd3e6 #9ebcda #8c96c6 #8856a7 #810f7c".split(" "),7:"#edf8fb #bfd3e6 #9ebcda #8c96c6 #8c6bb1 #88419d #6e016b".split(" "),8:"#f7fcfd #e0ecf4 #bfd3e6 #9ebcda #8c96c6 #8c6bb1 #88419d #6e016b".split(" "),9:"#f7fcfd #e0ecf4 #bfd3e6 #9ebcda #8c96c6 #8c6bb1 #88419d #810f7c #4d004b".split(" ")},
RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:"#feebe2 #fcc5c0 #fa9fb5 #f768a1 #c51b8a #7a0177".split(" "),7:"#feebe2 #fcc5c0 #fa9fb5 #f768a1 #dd3497 #ae017e #7a0177".split(" "),8:"#fff7f3 #fde0dd #fcc5c0 #fa9fb5 #f768a1 #dd3497 #ae017e #7a0177".split(" "),9:"#fff7f3 #fde0dd #fcc5c0 #fa9fb5 #f768a1 #dd3497 #ae017e #7a0177 #49006a".split(" ")},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8",
"#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:"#f1eef6 #d4b9da #c994c7 #df65b0 #dd1c77 #980043".split(" "),7:"#f1eef6 #d4b9da #c994c7 #df65b0 #e7298a #ce1256 #91003f".split(" "),8:"#f7f4f9 #e7e1ef #d4b9da #c994c7 #df65b0 #e7298a #ce1256 #91003f".split(" "),9:"#f7f4f9 #e7e1ef #d4b9da #c994c7 #df65b0 #e7298a #ce1256 #980043 #67001f".split(" ")},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33",
"#b30000"],6:"#fef0d9 #fdd49e #fdbb84 #fc8d59 #e34a33 #b30000".split(" "),7:"#fef0d9 #fdd49e #fdbb84 #fc8d59 #ef6548 #d7301f #990000".split(" "),8:"#fff7ec #fee8c8 #fdd49e #fdbb84 #fc8d59 #ef6548 #d7301f #990000".split(" "),9:"#fff7ec #fee8c8 #fdd49e #fdbb84 #fc8d59 #ef6548 #d7301f #b30000 #7f0000".split(" ")},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:"#ffffb2 #fed976 #feb24c #fd8d3c #f03b20 #bd0026".split(" "),
7:"#ffffb2 #fed976 #feb24c #fd8d3c #fc4e2a #e31a1c #b10026".split(" "),8:"#ffffcc #ffeda0 #fed976 #feb24c #fd8d3c #fc4e2a #e31a1c #b10026".split(" "),9:"#ffffcc #ffeda0 #fed976 #feb24c #fd8d3c #fc4e2a #e31a1c #bd0026 #800026".split(" ")},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:"#ffffd4 #fee391 #fec44f #fe9929 #d95f0e #993404".split(" "),7:"#ffffd4 #fee391 #fec44f #fe9929 #ec7014 #cc4c02 #8c2d04".split(" "),
8:"#ffffe5 #fff7bc #fee391 #fec44f #fe9929 #ec7014 #cc4c02 #8c2d04".split(" "),9:"#ffffe5 #fff7bc #fee391 #fec44f #fe9929 #ec7014 #cc4c02 #993404 #662506".split(" ")},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:"#f2f0f7 #dadaeb #bcbddc #9e9ac8 #756bb1 #54278f".split(" "),7:"#f2f0f7 #dadaeb #bcbddc #9e9ac8 #807dba #6a51a3 #4a1486".split(" "),8:"#fcfbfd #efedf5 #dadaeb #bcbddc #9e9ac8 #807dba #6a51a3 #4a1486".split(" "),
9:"#fcfbfd #efedf5 #dadaeb #bcbddc #9e9ac8 #807dba #6a51a3 #54278f #3f007d".split(" ")},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:"#eff3ff #c6dbef #9ecae1 #6baed6 #3182bd #08519c".split(" "),7:"#eff3ff #c6dbef #9ecae1 #6baed6 #4292c6 #2171b5 #084594".split(" "),8:"#f7fbff #deebf7 #c6dbef #9ecae1 #6baed6 #4292c6 #2171b5 #084594".split(" "),9:"#f7fbff #deebf7 #c6dbef #9ecae1 #6baed6 #4292c6 #2171b5 #08519c #08306b".split(" ")},
Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:"#edf8e9 #c7e9c0 #a1d99b #74c476 #31a354 #006d2c".split(" "),7:"#edf8e9 #c7e9c0 #a1d99b #74c476 #41ab5d #238b45 #005a32".split(" "),8:"#f7fcf5 #e5f5e0 #c7e9c0 #a1d99b #74c476 #41ab5d #238b45 #005a32".split(" "),9:"#f7fcf5 #e5f5e0 #c7e9c0 #a1d99b #74c476 #41ab5d #238b45 #006d2c #00441b".split(" ")},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85",
"#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:"#feedde #fdd0a2 #fdae6b #fd8d3c #e6550d #a63603".split(" "),7:"#feedde #fdd0a2 #fdae6b #fd8d3c #f16913 #d94801 #8c2d04".split(" "),8:"#fff5eb #fee6ce #fdd0a2 #fdae6b #fd8d3c #f16913 #d94801 #8c2d04".split(" "),9:"#fff5eb #fee6ce #fdd0a2 #fdae6b #fd8d3c #f16913 #d94801 #a63603 #7f2704".split(" ")},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26",
"#a50f15"],6:"#fee5d9 #fcbba1 #fc9272 #fb6a4a #de2d26 #a50f15".split(" "),7:"#fee5d9 #fcbba1 #fc9272 #fb6a4a #ef3b2c #cb181d #99000d".split(" "),8:"#fff5f0 #fee0d2 #fcbba1 #fc9272 #fb6a4a #ef3b2c #cb181d #99000d".split(" "),9:"#fff5f0 #fee0d2 #fcbba1 #fc9272 #fb6a4a #ef3b2c #cb181d #a50f15 #67000d".split(" ")},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:"#f7f7f7 #d9d9d9 #bdbdbd #969696 #636363 #252525".split(" "),
7:"#f7f7f7 #d9d9d9 #bdbdbd #969696 #737373 #525252 #252525".split(" "),8:"#ffffff #f0f0f0 #d9d9d9 #bdbdbd #969696 #737373 #525252 #252525".split(" "),9:"#ffffff #f0f0f0 #d9d9d9 #bdbdbd #969696 #737373 #525252 #252525 #000000".split(" ")},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:"#b35806 #f1a340 #fee0b6 #d8daeb #998ec3 #542788".split(" "),7:"#b35806 #f1a340 #fee0b6 #f7f7f7 #d8daeb #998ec3 #542788".split(" "),
8:"#b35806 #e08214 #fdb863 #fee0b6 #d8daeb #b2abd2 #8073ac #542788".split(" "),9:"#b35806 #e08214 #fdb863 #fee0b6 #f7f7f7 #d8daeb #b2abd2 #8073ac #542788".split(" "),10:"#7f3b08 #b35806 #e08214 #fdb863 #fee0b6 #d8daeb #b2abd2 #8073ac #542788 #2d004b".split(" "),11:"#7f3b08 #b35806 #e08214 #fdb863 #fee0b6 #f7f7f7 #d8daeb #b2abd2 #8073ac #542788 #2d004b".split(" ")},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],
6:"#8c510a #d8b365 #f6e8c3 #c7eae5 #5ab4ac #01665e".split(" "),7:"#8c510a #d8b365 #f6e8c3 #f5f5f5 #c7eae5 #5ab4ac #01665e".split(" "),8:"#8c510a #bf812d #dfc27d #f6e8c3 #c7eae5 #80cdc1 #35978f #01665e".split(" "),9:"#8c510a #bf812d #dfc27d #f6e8c3 #f5f5f5 #c7eae5 #80cdc1 #35978f #01665e".split(" "),10:"#543005 #8c510a #bf812d #dfc27d #f6e8c3 #c7eae5 #80cdc1 #35978f #01665e #003c30".split(" "),11:"#543005 #8c510a #bf812d #dfc27d #f6e8c3 #f5f5f5 #c7eae5 #80cdc1 #35978f #01665e #003c30".split(" ")},
PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:"#762a83 #af8dc3 #e7d4e8 #d9f0d3 #7fbf7b #1b7837".split(" "),7:"#762a83 #af8dc3 #e7d4e8 #f7f7f7 #d9f0d3 #7fbf7b #1b7837".split(" "),8:"#762a83 #9970ab #c2a5cf #e7d4e8 #d9f0d3 #a6dba0 #5aae61 #1b7837".split(" "),9:"#762a83 #9970ab #c2a5cf #e7d4e8 #f7f7f7 #d9f0d3 #a6dba0 #5aae61 #1b7837".split(" "),10:"#40004b #762a83 #9970ab #c2a5cf #e7d4e8 #d9f0d3 #a6dba0 #5aae61 #1b7837 #00441b".split(" "),
11:"#40004b #762a83 #9970ab #c2a5cf #e7d4e8 #f7f7f7 #d9f0d3 #a6dba0 #5aae61 #1b7837 #00441b".split(" ")},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:"#c51b7d #e9a3c9 #fde0ef #e6f5d0 #a1d76a #4d9221".split(" "),7:"#c51b7d #e9a3c9 #fde0ef #f7f7f7 #e6f5d0 #a1d76a #4d9221".split(" "),8:"#c51b7d #de77ae #f1b6da #fde0ef #e6f5d0 #b8e186 #7fbc41 #4d9221".split(" "),9:"#c51b7d #de77ae #f1b6da #fde0ef #f7f7f7 #e6f5d0 #b8e186 #7fbc41 #4d9221".split(" "),
10:"#8e0152 #c51b7d #de77ae #f1b6da #fde0ef #e6f5d0 #b8e186 #7fbc41 #4d9221 #276419".split(" "),11:"#8e0152 #c51b7d #de77ae #f1b6da #fde0ef #f7f7f7 #e6f5d0 #b8e186 #7fbc41 #4d9221 #276419".split(" ")},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:"#b2182b #ef8a62 #fddbc7 #d1e5f0 #67a9cf #2166ac".split(" "),7:"#b2182b #ef8a62 #fddbc7 #f7f7f7 #d1e5f0 #67a9cf #2166ac".split(" "),8:"#b2182b #d6604d #f4a582 #fddbc7 #d1e5f0 #92c5de #4393c3 #2166ac".split(" "),
9:"#b2182b #d6604d #f4a582 #fddbc7 #f7f7f7 #d1e5f0 #92c5de #4393c3 #2166ac".split(" "),10:"#67001f #b2182b #d6604d #f4a582 #fddbc7 #d1e5f0 #92c5de #4393c3 #2166ac #053061".split(" "),11:"#67001f #b2182b #d6604d #f4a582 #fddbc7 #f7f7f7 #d1e5f0 #92c5de #4393c3 #2166ac #053061".split(" ")},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:"#b2182b #ef8a62 #fddbc7 #e0e0e0 #999999 #4d4d4d".split(" "),7:"#b2182b #ef8a62 #fddbc7 #ffffff #e0e0e0 #999999 #4d4d4d".split(" "),
8:"#b2182b #d6604d #f4a582 #fddbc7 #e0e0e0 #bababa #878787 #4d4d4d".split(" "),9:"#b2182b #d6604d #f4a582 #fddbc7 #ffffff #e0e0e0 #bababa #878787 #4d4d4d".split(" "),10:"#67001f #b2182b #d6604d #f4a582 #fddbc7 #e0e0e0 #bababa #878787 #4d4d4d #1a1a1a".split(" "),11:"#67001f #b2182b #d6604d #f4a582 #fddbc7 #ffffff #e0e0e0 #bababa #878787 #4d4d4d #1a1a1a".split(" ")},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],
6:"#d73027 #fc8d59 #fee090 #e0f3f8 #91bfdb #4575b4".split(" "),7:"#d73027 #fc8d59 #fee090 #ffffbf #e0f3f8 #91bfdb #4575b4".split(" "),8:"#d73027 #f46d43 #fdae61 #fee090 #e0f3f8 #abd9e9 #74add1 #4575b4".split(" "),9:"#d73027 #f46d43 #fdae61 #fee090 #ffffbf #e0f3f8 #abd9e9 #74add1 #4575b4".split(" "),10:"#a50026 #d73027 #f46d43 #fdae61 #fee090 #e0f3f8 #abd9e9 #74add1 #4575b4 #313695".split(" "),11:"#a50026 #d73027 #f46d43 #fdae61 #fee090 #ffffbf #e0f3f8 #abd9e9 #74add1 #4575b4 #313695".split(" ")},
Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:"#d53e4f #fc8d59 #fee08b #e6f598 #99d594 #3288bd".split(" "),7:"#d53e4f #fc8d59 #fee08b #ffffbf #e6f598 #99d594 #3288bd".split(" "),8:"#d53e4f #f46d43 #fdae61 #fee08b #e6f598 #abdda4 #66c2a5 #3288bd".split(" "),9:"#d53e4f #f46d43 #fdae61 #fee08b #ffffbf #e6f598 #abdda4 #66c2a5 #3288bd".split(" "),10:"#9e0142 #d53e4f #f46d43 #fdae61 #fee08b #e6f598 #abdda4 #66c2a5 #3288bd #5e4fa2".split(" "),
11:"#9e0142 #d53e4f #f46d43 #fdae61 #fee08b #ffffbf #e6f598 #abdda4 #66c2a5 #3288bd #5e4fa2".split(" ")},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:"#d73027 #fc8d59 #fee08b #d9ef8b #91cf60 #1a9850".split(" "),7:"#d73027 #fc8d59 #fee08b #ffffbf #d9ef8b #91cf60 #1a9850".split(" "),8:"#d73027 #f46d43 #fdae61 #fee08b #d9ef8b #a6d96a #66bd63 #1a9850".split(" "),9:"#d73027 #f46d43 #fdae61 #fee08b #ffffbf #d9ef8b #a6d96a #66bd63 #1a9850".split(" "),
10:"#a50026 #d73027 #f46d43 #fdae61 #fee08b #d9ef8b #a6d96a #66bd63 #1a9850 #006837".split(" "),11:"#a50026 #d73027 #f46d43 #fdae61 #fee08b #ffffbf #d9ef8b #a6d96a #66bd63 #1a9850 #006837".split(" ")},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:"#7fc97f #beaed4 #fdc086 #ffff99 #386cb0 #f0027f".split(" "),7:"#7fc97f #beaed4 #fdc086 #ffff99 #386cb0 #f0027f #bf5b17".split(" "),8:"#7fc97f #beaed4 #fdc086 #ffff99 #386cb0 #f0027f #bf5b17 #666666".split(" ")},
Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:"#1b9e77 #d95f02 #7570b3 #e7298a #66a61e #e6ab02".split(" "),7:"#1b9e77 #d95f02 #7570b3 #e7298a #66a61e #e6ab02 #a6761d".split(" "),8:"#1b9e77 #d95f02 #7570b3 #e7298a #66a61e #e6ab02 #a6761d #666666".split(" ")},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:"#a6cee3 #1f78b4 #b2df8a #33a02c #fb9a99 #e31a1c".split(" "),
7:"#a6cee3 #1f78b4 #b2df8a #33a02c #fb9a99 #e31a1c #fdbf6f".split(" "),8:"#a6cee3 #1f78b4 #b2df8a #33a02c #fb9a99 #e31a1c #fdbf6f #ff7f00".split(" "),9:"#a6cee3 #1f78b4 #b2df8a #33a02c #fb9a99 #e31a1c #fdbf6f #ff7f00 #cab2d6".split(" "),10:"#a6cee3 #1f78b4 #b2df8a #33a02c #fb9a99 #e31a1c #fdbf6f #ff7f00 #cab2d6 #6a3d9a".split(" "),11:"#a6cee3 #1f78b4 #b2df8a #33a02c #fb9a99 #e31a1c #fdbf6f #ff7f00 #cab2d6 #6a3d9a #ffff99".split(" "),12:"#a6cee3 #1f78b4 #b2df8a #33a02c #fb9a99 #e31a1c #fdbf6f #ff7f00 #cab2d6 #6a3d9a #ffff99 #b15928".split(" ")},
Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:"#fbb4ae #b3cde3 #ccebc5 #decbe4 #fed9a6 #ffffcc".split(" "),7:"#fbb4ae #b3cde3 #ccebc5 #decbe4 #fed9a6 #ffffcc #e5d8bd".split(" "),8:"#fbb4ae #b3cde3 #ccebc5 #decbe4 #fed9a6 #ffffcc #e5d8bd #fddaec".split(" "),9:"#fbb4ae #b3cde3 #ccebc5 #decbe4 #fed9a6 #ffffcc #e5d8bd #fddaec #f2f2f2".split(" ")},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac",
"#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:"#b3e2cd #fdcdac #cbd5e8 #f4cae4 #e6f5c9 #fff2ae".split(" "),7:"#b3e2cd #fdcdac #cbd5e8 #f4cae4 #e6f5c9 #fff2ae #f1e2cc".split(" "),8:"#b3e2cd #fdcdac #cbd5e8 #f4cae4 #e6f5c9 #fff2ae #f1e2cc #cccccc".split(" ")},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:"#e41a1c #377eb8 #4daf4a #984ea3 #ff7f00 #ffff33".split(" "),7:"#e41a1c #377eb8 #4daf4a #984ea3 #ff7f00 #ffff33 #a65628".split(" "),
8:"#e41a1c #377eb8 #4daf4a #984ea3 #ff7f00 #ffff33 #a65628 #f781bf".split(" "),9:"#e41a1c #377eb8 #4daf4a #984ea3 #ff7f00 #ffff33 #a65628 #f781bf #999999".split(" ")},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:"#66c2a5 #fc8d62 #8da0cb #e78ac3 #a6d854 #ffd92f".split(" "),7:"#66c2a5 #fc8d62 #8da0cb #e78ac3 #a6d854 #ffd92f #e5c494".split(" "),8:"#66c2a5 #fc8d62 #8da0cb #e78ac3 #a6d854 #ffd92f #e5c494 #b3b3b3".split(" ")},
Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:"#8dd3c7 #ffffb3 #bebada #fb8072 #80b1d3 #fdb462".split(" "),7:"#8dd3c7 #ffffb3 #bebada #fb8072 #80b1d3 #fdb462 #b3de69".split(" "),8:"#8dd3c7 #ffffb3 #bebada #fb8072 #80b1d3 #fdb462 #b3de69 #fccde5".split(" "),9:"#8dd3c7 #ffffb3 #bebada #fb8072 #80b1d3 #fdb462 #b3de69 #fccde5 #d9d9d9".split(" "),10:"#8dd3c7 #ffffb3 #bebada #fb8072 #80b1d3 #fdb462 #b3de69 #fccde5 #d9d9d9 #bc80bd".split(" "),
11:"#8dd3c7 #ffffb3 #bebada #fb8072 #80b1d3 #fdb462 #b3de69 #fccde5 #d9d9d9 #bc80bd #ccebc5".split(" "),12:"#8dd3c7 #ffffb3 #bebada #fb8072 #80b1d3 #fdb462 #b3de69 #fccde5 #d9d9d9 #bc80bd #ccebc5 #ffed6f".split(" ")}};!function(a){function e(a){a.stopPropagation();a.preventDefault()}if(!(window.File&&window.FileReader&&window.FileList&&window.Blob))throw"Sorry, your browser doesn't support drag-and-drop file input.";var f=a.dnd={version:"0.0.2"};f.parse={uncomment:function(a){return function(d){d=d.split("\n").filter(function(a){return 0<a.length&&"#"!==a.charAt(0)}).join("\n");return a(d)}}};f.parse.csv=f.parse.uncomment(d3.csv.parse);f.parse.tsv=f.parse.uncomment(d3.tsv.parse);f.linesToIgnore=[];f.colsToIgnore=
[];f.schemaLine="";f.file={parsers:{"text/csv":f.parse.csv,"text/tsv":f.parse.tsv,"text/dat":f.parse.csv,"application/json":JSON.parse},extensions:{csv:"text/csv",dat:"text/dat",tsv:"text/tsv",txt:"text/csv",json:"application/json"},delimiters:{"text/csv":",","text/tsv":"\t","text/dat":","},sizeFormats:["bytes","K","MB","GB"],formatSize:function(a){if(0>=a)return[0,f.file.sizeFormats[0]];var d=~~(~~Math.log(a)/Math.log(1024));return[(a/Math.pow(1024,d)).toFixed(1),f.file.sizeFormats[d]].join(" ")}};
f.guessFileType=function(a){if(a.type in f.file.parsers)return a.type;a=a.name.split(".").pop();return f.file.extensions[a]};f.read=function(a,d){var b=f.guessFileType(a),c=f.file.parsers[b];if(!c)throw"Unrecognized file type: "+b;var e=new FileReader;e.onload=function(e){e=e.target.result;var g=f.file.delimiters[b];"undefined"!==typeof g&&("text/dat"==b&&0==f.linesToIgnore.length&&(f.linesToIgnore=[0,2,3]),e=e.split("\n").filter(function(a,b){return-1==f.linesToIgnore.indexOf(b)}).map(function(a,
b){return a.split(g).filter(function(a,b){return-1==f.colsToIgnore.indexOf(b)}).join(g)}),e=e.join("\n"),0<f.schemaLine.length&&(e=e.split("\n"),e.splice(1,0,f.schemaLine),e=e.join("\n")));d.call(a,null,c(e))};e.onerror=function(b){d.call(a,b,null)};e.readAsText(a)};f.handleCtrlKey=function(a,d,b,c){var e=new FileReader;e.onload=function(){var g=e.result.split("\n").slice(0,5),h=g.map(function(a){return"<option>"+a+"</option>"}).join("");window.changeAxisSelect=function(b){var c=b&&b.options,c=Array.apply(null,
c);b=c.reduce(function(a,b,c){b.selected||a.push(c);return a},[]);f.linesToIgnore=c.reduce(function(a,b,c){b.selected&&a.push(c);return a},[]);0<b.length?(c="text/tsv"==f.guessFileType(a)?"\t":",",b=g[b.shift()||0].split(c).map(function(a){return"<option>"+a.replace(/^"(.*)"$/,"$1")}).join(""),$("#select-axis").html(b)):$("#select-axis").empty()};bootbox.dialog({title:"Advanced Data Parsing",message:'<div class="row"><div class="col-md-12"><div class="form-group"><label for="select-ignore" class="control-label">Ctrl - Select Rows to ignore</label><select id="select-ignore" multiple class="form-control" onchange="changeAxisSelect(this);">'+
h+'</select><button class="btn btn-sm" onclick="document.getElementById(\'select-ignore\').selectedIndex = -1;">Clear</button></div><div class="form-group"><label for="select-axis" class="control-label">Select Axis Column</label><select id="select-axis" class="form-control"></select></div><div class="form-group"><label for="axis-type" class="control-label">Axis data type</label><select id="axis-type" class="form-control"><option>datetime</option><option>numeric</option></select></div></div></div><script>changeAxisSelect(document.getElementById("select-ignore"));\x3c/script>',
buttons:{main:{label:"OK",className:"btn-success",callback:function(){window.axis_column_string=$("#select-axis").val();window.axis_type=$("#axis-type").val();f.read(a,function(e,f){f?a.data=f:c.error(a);0===b&&c.read(d)})}}}})};e.readAsText(a)};f.handleShiftAndCtrlKey=function(a,d,b,c){var e=new FileReader;e.onload=function(){function g(){u=l[z[0]||0].split(w).filter(function(a,b){return 0<=A.indexOf(b)});var a=u.map(function(a,b){return'<div class="input-group">'+('<div class="input-group-addon"><label for="'+
a+'-select-id" class="control-label">'+a+"</label></div>")+('<div class="input-group-addon"><select id="'+a+'-select-id" class="schema-select-input form-control">'+q+"</select></div>")+"</div>"}).join("");$("#select-schema-group").html(a)}function h(){k=l[z[0]||0].split(w).map(function(a){return"<option>"+a+"</option>"}).join("");$("#select-ignore-col").html(k);for(var a=document.getElementById("select-ignore-col"),b=0;b<a.options.length;b++)a.options[b].selected=0>A.indexOf(b);g()}function t(){var a=
l.map(function(a){return a.split(w).filter(function(a,b){return 0<=A.indexOf(b)})}).map(function(a){return"<option>"+a.join(w)+"</option>"}).join("");$("#select-ignore").html(a);for(var a=document.getElementById("select-ignore"),b=0;b<a.options.length;b++)a.options[b].selected=0>z.indexOf(b);g()}var w="text/tsv"==f.guessFileType(a)?"\t":",",l=e.result.split("\n").slice(0,5),p=l.map(function(a){return"<option>"+a+"</option>"}).join(""),u=l[0].split(w),k=u.map(function(a){return"<option>"+a+"</option>"}).join(""),
q=["numeric","datetime","factor"].map(function(a){return"<option>"+a+"</option>"}).join(""),A=[],z=[];window.changeRowSelect=function(b){b=b&&b.options;b=Array.apply(null,b);z=b.reduce(function(a,b,c){b.selected||a.push(c);return a},[]);f.linesToIgnore=b.reduce(function(a,b,c){b.selected&&a.push(c);return a},[]);h();0<z.length?(b="text/tsv"==f.guessFileType(a)?"\t":",",b=l[z.shift()||0].split(b).map(function(a){return"<option>"+a.replace(/^"(.*)"$/,"$1")}).join(""),$("#select-axis").html(b)):$("#select-axis").empty()};
window.changeColFieldSelect=function(a){a=a&&a.options;a=Array.apply(null,a);A=a.reduce(function(a,b,c){b.selected||a.push(c);return a},[]);f.colsToIgnore=a.reduce(function(a,b,c){b.selected&&a.push(c);return a},[]);t()};bootbox.dialog({title:"Advanced Data Parsing & Schema define",message:'<div class="row"><div class="col-md-12"><div class="form-group"><label for="select-ignore" class="control-label">Ctrl - Select Rows to Ignore</label><select id="select-ignore" multiple class="form-control" onchange="changeRowSelect(this);">'+
p+'</select><button class="btn btn-sm" onclick="document.getElementById(\'select-ignore\').selectedIndex = -1;">Clear</button></div><div class="form-group"><label for="select-ignore-col" class="control-label">Ctrl - Select Columns to Ignore</label><select id="select-ignore-col" multiple class="form-control" onchange="changeColFieldSelect(this);">'+k+'</select><button class="btn btn-sm" onclick="document.getElementById(\'select-ignore-col\').selectedIndex = -1;">Clear</button></div><div class="form-group"><label for="select-schema-group" class="control-label">Define Schema</label><div id="select-schema-group"></div></div><div class="form-group"><label for="select-axis" class="control-label">Select Axis Column</label><select id="select-axis" class="form-control"></select></div><div class="form-group"><label for="axis-type" class="control-label">Axis data type</label><select id="axis-type" class="form-control"><option>datetime</option><option>numeric</option></select></div></div></div><script>changeRowSelect(document.getElementById("select-ignore"));\x3c/script>',
buttons:{main:{label:"OK",className:"btn-success",callback:function(){window.axis_column_string=$("#select-axis").val();window.axis_type=$("#axis-type").val();f.schemaLine=$(".schema-select-input").map(function(a){return $(this).val()}).get().join(w);f.read(a,function(e,f){f?a.data=f:c.error(a);0===b&&c.read(d)})}}}})};e.readAsText(a)};f.dropper=function(){function a(){h.dragover(d3.event);d3.event.dataTransfer.dropEffect="copy";e(d3.event)}function d(){h.dragout(d3.event);e(d3.event)}function b(){var a=
d3.event.dataTransfer.files,b=a.length;h.drop(a);e(d3.event);d3.event.shiftKey&&d3.event.ctrlKey?[].forEach.call(a,function(c,d){f.handleShiftAndCtrlKey(c,a,--b,h)}):d3.event.ctrlKey?[].forEach.call(a,function(c,d){f.handleCtrlKey(c,a,--b,h)}):[].forEach.call(a,function(c,d){f.read(c,function(d,e){e?c.data=e:h.error(c);0===--b&&h.read(a)})})}var c=function(c){c.on("dragover.dnd",a).on("dragout.dnd",d).on("drop.dnd",b)},h=d3.dispatch("dragover","dragout","drop","read","error");d3.rebind(c,h,"on");
return c}}(this);d3.parcoords=function(a){function e(a,b){return a.filter(function(a){return-1===b.indexOf(a)})}function f(){if(k.brushed&&k.brushed.length!==k.data.length)return!0;var a=X.currentMode().brushState(),b;for(b in a)if(a.hasOwnProperty(b))return!0;return!1}function g(a){var b=d3.map(),c=d3.map();k.data.forEach(function(b){b=F[a](b[a]);c.has(b)||c.set(b,0);var d=c.get(b);c.set(b,d+1)});k.data.forEach(function(d){k.dimensions.map(function(e,f){var g=F[a](d[a]);if(!b.has(g)){var h=d3.map();b.set(g,h)}b.get(g).has(e)||
b.get(g).set(e,0);h=b.get(g).get(e);h+=F[e](d[e])/c.get(g);b.get(g).set(e,h)})});return b}function d(a,c){c.beginPath();if(null!==k.bundleDimension&&0<k.bundlingStrength||0<k.smoothness){for(var d=[],e=k.dimensions,f=e.length,g=0;g<f;++g){var h=u(e[g]),l=F[e[g]](a[e[g]]);d.push($V([h,l]));if(g<f-1){h+=.5*(u(e[g+1])-h);l+=.5*(F[e[g+1]](a[e[g+1]])-l);if(null!==k.bundleDimension)var m=k.clusterCentroids.get(F[k.bundleDimension](a[k.bundleDimension])).get(e[g]),q=k.clusterCentroids.get(F[k.bundleDimension](a[k.bundleDimension])).get(e[g+
1]),m=.5*(m+q),l=m+(1-k.bundlingStrength)*(l-m);d.push($V([h,l]))}}f=d.length;g=k.smoothness;e=[];e.push(d[0]);e.push($V([d[0].e(1)+2*g*(d[1].e(1)-d[0].e(1)),d[0].e(2)]));for(h=1;h<f-1;++h)l=d[h],m=d[h-1].subtract(d[h+1]),e.push(l.add(m.x(g))),e.push(l),e.push(l.subtract(m.x(g)));e.push($V([d[f-1].e(1)+2*g*(d[f-2].e(1)-d[f-1].e(1)),d[f-1].e(2)]));e.push(d[f-1]);c.moveTo(e[0].e(1),e[0].e(2));for(d=1;d<e.length;d+=3){if(k.showControlPoints)for(f=0;3>f;f++)c.fillRect(e[d+f].e(1),e[d+f].e(2),2,2);c.bezierCurveTo(e[d].e(1),
e[d].e(2),e[d+1].e(1),e[d+1].e(2),e[d+2].e(1),e[d+2].e(2))}}else b(a,c);c.stroke()}function b(a,b){k.dimensions.map(function(c,d){0==d?b.moveTo(u(c),F[c](a[c])):b.lineTo(u(c),F[c](a[c]))})}function c(a,b){I.brushed.strokeStyle=null!==k.brushedColor?d3.functor(k.brushedColor)(a,b):d3.functor(k.color)(a,b);return d(a,I.brushed)}function h(a,b){I.foreground.strokeStyle=d3.functor(k.color)(a,b);return d(a,I.foreground)}function n(a,b){I.highlight.strokeStyle=d3.functor(k.color)(a,b);return d(a,I.highlight)}
function m(a){q.svg.selectAll(".dimension");q.flip(a);d3.select(this.parentElement).transition().duration(1100).call(P.scale(F[a]));q.render()}function t(){var a=d3.event.deltaY,a=0>a?-5:a;k.dimensionTitleRotation+=0<a?5:a;q.svg.selectAll("text.label").attr("transform","translate(0,-5) rotate("+k.dimensionTitleRotation+")");d3.event.preventDefault()}function w(a){return a in k.dimensionTitles?k.dimensionTitles[a]:a}function l(a){k.brushed=a;A.brush.call(q,k.brushed);q.renderBrushed()}function p(a){if(!arguments.length)return X.predicate;
a=String(a).toUpperCase();if("AND"!==a&&"OR"!==a)throw"Invalid predicate "+a;X.predicate=a;k.brushed=X.currentMode().selected();q.renderBrushed();return q}function u(a){var b=G[a];return null==b?D(a):b}var k={data:[],highlighted:[],dimensions:[],dimensionTitles:{},dimensionTitleRotation:0,types:{},brushed:!1,brushedColor:null,alphaOnBrushed:0,mode:"default",rate:20,width:600,height:300,margin:{top:24,right:0,bottom:12,left:0},color:"#069",composite:"source-over",alpha:.7,bundlingStrength:.5,bundleDimension:null,
smoothness:0,showControlPoints:!1,hideAxis:[]};(function(a,b){for(key in b)a[key]=b[key];return a})(k,a);var q=function(a){a=q.selection=d3.select(a);k.width=a[0][0].clientWidth;k.height=a[0][0].clientHeight;["marks","foreground","brushed","highlight"].forEach(function(b){U[b]=a.append("canvas").attr("class",b)[0][0];I[b]=U[b].getContext("2d")});q.svg=a.append("svg").attr("width",k.width).attr("height",k.height).append("svg:g").attr("transform","translate("+k.margin.left+","+k.margin.top+")");return q},
A=d3.dispatch.apply(this,"render resize highlight brush brushend axesreorder".split(" ").concat(d3.keys(k))),z=function(){return k.width-k.margin.right-k.margin.left},B=function(){return k.height-k.margin.top-k.margin.bottom},E={brushable:!1,reorderable:!1,axes:!1,interactive:!1,debug:!1},D=d3.scale.ordinal(),F={},G={};d3.svg.line();var P=d3.svg.axis().orient("left").ticks(5),J,I={},U={},O=d3.dispatch.apply(this,d3.keys(k)).on("composite",function(a){I.foreground.globalCompositeOperation=a.value;
I.brushed.globalCompositeOperation=a.value}).on("alpha",function(a){I.foreground.globalAlpha=a.value;I.brushed.globalAlpha=a.value}).on("brushedColor",function(a){I.brushed.strokeStyle=a.value}).on("width",function(a){q.resize()}).on("height",function(a){q.resize()}).on("margin",function(a){q.resize()}).on("rate",function(a){ia.rate(a.value);aa.rate(a.value)}).on("dimensions",function(a){D.domain(k.dimensions);E.interactive&&q.render().updateAxes()}).on("bundleDimension",function(a){k.dimensions.length||
q.detectDimensions();k.dimensions[0]in F||q.autoscale();"number"===typeof a.value?a.value<k.dimensions.length?k.bundleDimension=k.dimensions[a.value]:a.value<k.hideAxis.length&&(k.bundleDimension=k.hideAxis[a.value]):k.bundleDimension=a.value;k.clusterCentroids=g(k.bundleDimension)}).on("hideAxis",function(a){k.dimensions.length||q.detectDimensions();q.dimensions(e(k.dimensions,a.value))});q.state=k;q.flags=E;(function(a,b,c){d3.keys(b).forEach(function(d){a[d]=function(e){if(!arguments.length)return b[d];
var f=b[d];b[d]=e;O[d].call(q,{value:e,previous:f});c[d].call(q,{value:e,previous:f});return a}})})(q,k,A);d3.rebind(q,A,"on");q.autoscale=function(){var a={date:function(a){var b=d3.extent(k.data,function(b){return b[a]?b[a].getTime():null});return b[0]===b[1]?d3.scale.ordinal().domain([b[0]]).rangePoints([B()+1,1]):d3.time.scale().domain(b).range([B()+1,1])},number:function(a){var b=d3.extent(k.data,function(b){return+b[a]});return b[0]===b[1]?d3.scale.ordinal().domain([b[0]]).rangePoints([B()+
1,1]):d3.scale.linear().domain(b).range([B()+1,1])},string:function(a){var b={},c=[];k.data.map(function(c){b[c[a]]=void 0===b[c[a]]?1:b[c[a]]+1});c=Object.getOwnPropertyNames(b).sort(function(a,c){return b[a]-b[c]});return d3.scale.ordinal().domain(c).rangePoints([B()+1,1])}};k.dimensions.forEach(function(b){F[b]=a[k.types[b]](b)});k.hideAxis.forEach(function(b){F[b]=a[k.types[b]](b)});D.rangePoints([0,z()],1);q.selection.selectAll("canvas").style("margin-top",k.margin.top+"px").style("margin-left",
k.margin.left+"px").attr("width",z()+2).attr("height",B()+2);I.foreground.strokeStyle=k.color;I.foreground.lineWidth=1.4;I.foreground.globalCompositeOperation=k.composite;I.foreground.globalAlpha=k.alpha;I.brushed.strokeStyle=k.brushedColor;I.brushed.lineWidth=1.4;I.brushed.globalCompositeOperation=k.composite;I.brushed.globalAlpha=k.alpha;I.highlight.lineWidth=3;return this};q.scale=function(a,b){F[a].domain(b);return this};q.flip=function(a){F[a].domain(F[a].domain().reverse());return this};q.commonScale=
function(a,b){var c=b||"number";"undefined"===typeof a&&(a=!0);var d=k.dimensions.concat(k.hideAxis).filter(function(a){return k.types[a]==c});if(a){var e=d3.extent(d.map(function(a,b){return F[a].domain()}).reduce(function(a,b){return a.concat(b)}));d.forEach(function(a){F[a].domain(e)})}else d.forEach(function(a){F[a].domain(d3.extent(k.data,function(b){return+b[a]}))});null!==k.bundleDimension&&q.bundleDimension(k.bundleDimension);return this};q.detectDimensions=function(){q.types(q.detectDimensionTypes(k.data));
q.dimensions(d3.keys(q.types()));return this};q.toType=function(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()};q.toTypeCoerceNumbers=function(a){return parseFloat(a)==a&&null!=a?"number":q.toType(a)};q.detectDimensionTypes=function(a){var b={};d3.keys(a[0]).forEach(function(c){b[c]=q.toTypeCoerceNumbers(a[0][c])});return b};q.render=function(){k.dimensions.length||q.detectDimensions();k.dimensions[0]in F||q.autoscale();q.render[k.mode]();A.render.call(this);return this};q.renderBrushed=
function(){k.dimensions.length||q.detectDimensions();k.dimensions[0]in F||q.autoscale();q.renderBrushed[k.mode]();A.render.call(this);return this};q.render["default"]=function(){q.clear("foreground");q.clear("highlight");q.renderBrushed["default"]();k.data.forEach(h)};var aa=d3.renderQueue(h).rate(50).clear(function(){q.clear("foreground");q.clear("highlight")});q.render.queue=function(){q.renderBrushed.queue();aa(k.data)};q.renderBrushed["default"]=function(){q.clear("brushed");f()&&k.brushed.forEach(c)};
var ia=d3.renderQueue(c).rate(50).clear(function(){q.clear("brushed")});q.renderBrushed.queue=function(){f()?ia(k.brushed):ia([])};q.shadows=function(){E.shadows=!0;q.alphaOnBrushed(.1);q.render();return this};q.axisDots=function(a){a=a||.1;var b=q.ctx.marks,c=2*Math.PI;b.globalAlpha=d3.min([1/Math.pow(k.data.length,.5),1]);k.data.forEach(function(d){k.dimensions.map(function(e,f){b.beginPath();b.arc(u(e),F[e](d[e]),a,0,c);b.stroke();b.fill()})});return this};q.clear=function(a){I[a].clearRect(0,
0,z()+2,B()+2);"brushed"===a&&f()&&(I.brushed.fillStyle=q.selection.style("background-color"),I.brushed.globalAlpha=1-k.alphaOnBrushed,I.brushed.fillRect(0,0,z()+2,B()+2),I.brushed.globalAlpha=k.alpha);return this};d3.rebind(q,P,"ticks","orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat");q.createAxes=function(){J&&q.removeAxes();J=q.svg.selectAll(".dimension").data(k.dimensions,function(a){return a}).enter().append("svg:g").attr("class",function(a){return"dimension "+a.match(/[a-zA-Z0-9]+/g).join("_")}).attr("transform",
function(a){return"translate("+D(a)+")"});J.append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(a){d3.select(this).call(P.scale(F[a]))}).append("svg:text").attr({"text-anchor":"middle",y:0,transform:"translate(0,-5) rotate("+k.dimensionTitleRotation+")",x:0,"class":"label"}).text(w).on("dblclick",m).on("wheel",t);E.axes=!0;return this};q.removeAxes=function(){J.remove();return this};q.updateAxes=function(){var a=q.svg.selectAll(".dimension").data(k.dimensions);a.enter().append("svg:g").attr("class",
"dimension").attr("transform",function(a){return"translate("+u(a)+")"}).style("opacity",0).append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(a){d3.select(this).call(P.scale(F[a]))}).append("svg:text").attr({"text-anchor":"middle",y:0,transform:"translate(0,-5) rotate("+k.dimensionTitleRotation+")",x:0,"class":"label"}).text(w).on("dblclick",m).on("wheel",t);a.attr("opacity",0);a.select(".axis").transition().duration(1100).each(function(a){d3.select(this).call(P.scale(F[a]))});
a.select(".label").transition().duration(1100).text(w).attr("transform","translate(0,-5) rotate("+k.dimensionTitleRotation+")");a.exit().remove();J=q.svg.selectAll(".dimension");J.transition().duration(1100).attr("transform",function(a){return"translate("+u(a)+")"}).style("opacity",1);q.svg.selectAll(".axis").transition().duration(1100).each(function(a){d3.select(this).call(P.scale(F[a]))});E.brushable&&q.brushable();E.reorderable&&q.reorderable();"None"!==q.brushMode()&&(a=q.brushMode(),q.brushMode("None"),
q.brushMode(a));return this};q.reorderable=function(){J||q.createAxes();J.style("cursor","move").call(d3.behavior.drag().on("dragstart",function(a){G[a]=this.__origin__=D(a)}).on("drag",function(a){G[a]=Math.min(z(),Math.max(0,this.__origin__+=d3.event.dx));k.dimensions.sort(function(a,b){return u(a)-u(b)});D.domain(k.dimensions);q.render();J.attr("transform",function(a){return"translate("+u(a)+")"})}).on("dragend",function(a){for(var b=0,c=k.dimensions.indexOf(a),d=this,e=this.parentElement;null!=
(d=d.previousElementSibling);)++b;b!==c&&(A.axesreorder.call(q,k.dimensions),b>c?e.insertBefore(this,e.children[c-1]):c+1<e.children.length?e.insertBefore(this,e.children[c+1]):e.appendChild(this));delete this.__origin__;delete G[a];d3.select(this).transition().attr("transform","translate("+D(a)+")");q.render()}));E.reorderable=!0;return this};q.reorder=function(a){var b=k.dimensions.slice(0);k.dimensions.sort(function(b,c){var d=F[b](a[b])-F[c](a[c]);return 0===d?b.localeCompare(c):d});var c=!1;
b.some(function(a,b){return c=a!==k.dimensions[b]});c&&(D.domain(k.dimensions),b=k.highlighted.slice(0),q.unhighlight(),J.transition().duration(1500).attr("transform",function(a){return"translate("+D(a)+")"}),q.render(),0!==b.length&&q.highlight(b))};q.adjacent_pairs=function(a){for(var b=[],c=0;c<a.length-1;c++)b.push([a[c],a[c+1]]);return b};var X={modes:{None:{install:function(a){},uninstall:function(a){},selected:function(){return[]},brushState:function(){return{}}}},mode:"None",predicate:"AND",
currentMode:function(){return this.modes[this.mode]}};q.brushModes=function(){return Object.getOwnPropertyNames(X.modes)};q.brushMode=function(a){if(0===arguments.length)return X.mode;if(-1===q.brushModes().indexOf(a))throw"pc.brushmode: Unsupported brush mode: "+a;a!==X.mode&&("None"!==X.mode&&q.brushReset(),X.modes[X.mode].uninstall(q),X.mode=a,X.modes[X.mode].install(),"None"===a?delete q.brushPredicate:q.brushPredicate=p);return q};(function(){function a(a){return!f[a].empty()}function b(){var b=
k.dimensions.filter(a),c=b.map(function(a){return f[a].extent()});if(0===b.length)return k.data;var d={date:function(a,b,d){return c[d][0]<=a[b]&&a[b]<=c[d][1]},number:function(a,b,d){return c[d][0]<=a[b]&&a[b]<=c[d][1]},string:function(a,b,d){return c[d][0]<=F[b](a[b])&&F[b](a[b])<=c[d][1]}};return k.data.filter(function(a){switch(X.predicate){case "AND":return b.every(function(b,c){return d[k.types[b]](a,b,c)});case "OR":return b.some(function(b,c){return d[k.types[b]](a,b,c)});default:throw"Unknown brush predicate "+
k.brushPredicate;}})}function c(){var a={};k.dimensions.forEach(function(b){var c=f[b];void 0===c||c.empty()||(c=c.extent(),c.sort(d3.ascending),a[b]=c)});return a}function d(a){var c=d3.svg.brush();c.y(F[a]).on("brushstart",function(){d3.event.sourceEvent.stopPropagation()}).on("brush",function(){l(b())}).on("brushend",function(){A.brushend.call(q,k.brushed)});return f[a]=c}function e(a){k.brushed=!1;J&&(J.selectAll(".brush").each(function(a){d3.select(this).call(f[a].clear())}),q.renderBrushed());
return this}var f={};X.modes["1D-axes"]={install:function(){J||q.createAxes();J.append("svg:g").attr("class","brush").each(function(a){d3.select(this).call(d(a))}).selectAll("rect").style("visibility",null).attr("x",-15).attr("width",30);q.brushExtents=c;q.brushReset=e;return q},uninstall:function(){J.selectAll(".brush").remove();f={};delete q.brushExtents;delete q.brushReset},selected:b,brushState:c}})();(function(){function a(b,c){var d=q.selection.select("svg").select("g#strums"),e=b.dims.i,f=
[b.p1,b.p2],g=d.selectAll("line#strum-"+e).data([b]),d=d.selectAll("circle#strum-"+e).data(f),f=d3.behavior.drag();g.enter().append("line").attr("id","strum-"+e).attr("class","strum");g.attr("x1",function(a){return a.p1[0]}).attr("y1",function(a){return a.p1[1]}).attr("x2",function(a){return a.p2[0]}).attr("y2",function(a){return a.p2[1]}).attr("stroke","black").attr("stroke-width",2);f.on("drag",function(c,d){var e=d3.event;d+=1;b["p"+d][0]=Math.min(Math.max(b.minX+1,e.x),b.maxX);b["p"+d][1]=Math.min(Math.max(b.minY,
e.y),b.maxY);a(b,d-1)}).on("dragend",h());d.enter().append("circle").attr("id","strum-"+e).attr("class","strum");d.attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}).attr("r",5).style("opacity",function(a,b){return void 0!==c&&b===c?.8:0}).on("mouseover",function(){d3.select(this).style("opacity",.8)}).on("mouseout",function(){d3.select(this).style("opacity",0)}).call(f)}function b(a){var b={i:-1,left:void 0,right:void 0};k.dimensions.some(function(c,d){if(D(c)<a[0]){var e=k.dimensions[d+
1];b.i=d;b.left=c;b.right=e;return!1}return!0});void 0===b.left?(b.i=0,b.left=k.dimensions[0],b.right=k.dimensions[1]):void 0===b.right&&(b.i=k.dimensions.length-1,b.right=b.left,b.left=k.dimensions[k.dimensions.length-2]);return b}function c(){return function(){var a=d3.mouse(p[0][0]),c,d;a[0]-=k.margin.left;a[1]-=k.margin.top;c=b(a);d={p1:a,dims:c,minX:D(c.left),maxX:D(c.right),minY:0,maxY:B()};m[c.i]=d;m.active=c.i;d.p1[0]=Math.min(Math.max(d.minX,a[0]),d.maxX);d.p2=d.p1.slice()}}function d(){return function(){var b=
d3.event,c=m[m.active];c.p2[0]=Math.min(Math.max(c.minX+1,b.x-k.margin.left),c.maxX);c.p2[1]=Math.min(Math.max(c.minY,b.y-k.margin.top),c.maxY);a(c,1)}}function e(a,b){var c=[a.p1[0]-a.minX,a.p1[1]-a.minX],d=[a.p2[0]-a.minX,a.p2[1]-a.minX],e=1-b/c[0],f=c[1]*(1-e),g=1-b/d[0],h=d[1]*(1-g);return function(a){var b=a[0];a=a[1];var c=e*b+f,b=g*b+h;return a>Math.min(c,b)&&a<Math.max(c,b)?!0:!1}}function f(){function a(a,b){var c=m[b],d=e(c,m.width(b)),f=c.dims.left,g=c.dims.right,h=F[g],c=[(0,F[f])(a[f])-
c.minX,h(a[g])-c.minX];return d(c)}var b=Object.getOwnPropertyNames(m),c=k.data,b=b.filter(function(a){return!isNaN(a)});return 0===b.length?c:c.filter(function(c){switch(X.predicate){case "AND":return b.every(function(b){return a(c,b)});case "OR":return b.some(function(b){return a(c,b)});default:throw"Unknown brush predicate "+k.brushPredicate;}})}function g(){var a=m[m.active],b=q.selection.select("svg").select("g#strums");delete m[m.active];m.active=void 0;b.selectAll("line#strum-"+a.dims.i).remove();
b.selectAll("circle#strum-"+a.dims.i).remove()}function h(){return function(){var a;(a=m[m.active])&&a.p1[0]===a.p2[0]&&a.p1[1]===a.p2[1]&&g(m);a=f(m);m.active=void 0;k.brushed=a;q.renderBrushed();A.brushend.call(q,k.brushed)}}function l(a){return function(){Object.getOwnPropertyNames(a).filter(function(a){return!isNaN(a)}).forEach(function(b){a.active=b;g(a)});h(a)()}}var m={},p;X.modes["2D-strums"]={install:function(){var a=d3.behavior.drag();m.active=void 0;m.width=function(a){a=m[a];if(void 0!==
a)return a.maxX-a.minX};q.on("axesreorder.strums",function(){function a(a,b){var c=k.dimensions.length;return k.dimensions.some(function(d,e){return d===a?e+e<c&&k.dimensions[e+1]===b:!1})}var b=Object.getOwnPropertyNames(m).filter(function(a){return!isNaN(a)});0<b.length&&(b.forEach(function(b){var c=m[b].dims;m.active=b;a(c.left,c.right)||g(m)}),h(m)())});q.selection.select("svg").append("g").attr("id","strums").attr("transform","translate("+k.margin.left+","+k.margin.top+")");q.brushReset=l(m);
a.on("dragstart",c(m)).on("drag",d(m)).on("dragend",h(m));p=q.selection.select("svg").insert("rect","g#strums").attr("id","strum-events").attr("x",k.margin.left).attr("y",k.margin.top).attr("width",z()).attr("height",B()+2).style("opacity",0).call(a)},uninstall:function(){q.selection.select("svg").select("g#strums").remove();q.selection.select("svg").select("rect#strum-events").remove();q.on("axesreorder.strums",void 0);delete q.brushReset;p=void 0},selected:f,brushState:function(){return m}}})();
(function(){function a(a){return!f[a].empty()}function b(){var b=k.dimensions.filter(a),c=b.map(function(a){return f[a].extent()});if(0===b.length)return k.data;var d={date:function(a,b,c,d){return d[0]<=a[b]&&a[b]<=d[1]},number:function(a,b,c,d){return d[0]<=a[b]&&a[b]<=d[1]},string:function(a,b,c,d){return d[0]<=F[b](a[b])&&F[b](a[b])<=d[1]}};return k.data.filter(function(a){switch(X.predicate){case "AND":return b.every(function(b,e){return c[e].some(function(c){return d[k.types[b]](a,b,e,c)})});
case "OR":return b.some(function(b,e){return c[e].some(function(c){return d[k.types[b]](a,b,e,c)})});default:throw"Unknown brush predicate "+k.brushPredicate;}})}function c(){var a={};k.dimensions.forEach(function(b){var c=f[b];void 0===c||c.empty()||(c=c.extent(),a[b]=c)});return a}function d(a){var c=d3.svg.multibrush();c.y(F[a]).on("brushstart",function(){d3.event.sourceEvent.stopPropagation()}).on("brush",function(){l(b())}).on("brushend",function(){l(b());A.brushend.call(q,k.brushed)}).extentAdaption(function(a){a.style("visibility",
null).attr("x",-15).attr("width",30)}).resizeAdaption(function(a){a.selectAll("rect").attr("x",-15).attr("width",30)});return f[a]=c}function e(a){k.brushed=!1;J&&(J.selectAll(".brush").each(function(a){d3.select(this).call(f[a].clear())}),q.renderBrushed());return this}if("function"===typeof d3.svg.multibrush){var f={};X.modes["1D-axes-multi"]={install:function(){J||q.createAxes();J.append("svg:g").attr("class","brush").each(function(a){d3.select(this).call(d(a))}).selectAll("rect").style("visibility",
null).attr("x",-15).attr("width",30);q.brushExtents=c;q.brushReset=e;return q},uninstall:function(){J.selectAll(".brush").remove();f={};delete q.brushExtents;delete q.brushReset},selected:b,brushState:c}}})();(function(){function a(b,c){var d=q.selection.select("svg").select("g#arcs"),e=b.dims.i,f=[b.p2,b.p3],g=d.selectAll("line#arc-"+e).data([{p1:b.p1,p2:b.p2},{p1:b.p1,p2:b.p3}]),f=d.selectAll("circle#arc-"+e).data(f),k=d3.behavior.drag(),d=d.selectAll("path#arc-"+e).data([b]);d.enter().append("path").attr("id",
"arc-"+e).attr("class","arc").style("fill","orange").style("opacity",.5);d.attr("d",b.arc).attr("transform","translate("+b.p1[0]+","+b.p1[1]+")");g.enter().append("line").attr("id","arc-"+e).attr("class","arc");g.attr("x1",function(a){return a.p1[0]}).attr("y1",function(a){return a.p1[1]}).attr("x2",function(a){return a.p2[0]}).attr("y2",function(a){return a.p2[1]}).attr("stroke","black").attr("stroke-width",2);k.on("drag",function(c,d){var f=d3.event;d+=2;b["p"+d][0]=Math.min(Math.max(b.minX+1,f.x),
b.maxX);b["p"+d][1]=Math.min(Math.max(b.minY,f.y),b.maxY);f=3===d?m.startAngle(e):m.endAngle(e);if(b.startAngle<Math.PI&&b.endAngle<Math.PI&&f<Math.PI||b.startAngle>=Math.PI&&b.endAngle>=Math.PI&&f>=Math.PI)2===d?(b.endAngle=f,b.arc.endAngle(f)):3===d&&(b.startAngle=f,b.arc.startAngle(f));a(b,d-2)}).on("dragend",h());f.enter().append("circle").attr("id","arc-"+e).attr("class","arc");f.attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}).attr("r",5).style("opacity",function(a,b){return void 0!==
c&&b===c?.8:0}).on("mouseover",function(){d3.select(this).style("opacity",.8)}).on("mouseout",function(){d3.select(this).style("opacity",0)}).call(k)}function b(a){var b={i:-1,left:void 0,right:void 0};k.dimensions.some(function(c,d){if(D(c)<a[0]){var e=k.dimensions[d+1];b.i=d;b.left=c;b.right=e;return!1}return!0});void 0===b.left?(b.i=0,b.left=k.dimensions[0],b.right=k.dimensions[1]):void 0===b.right&&(b.i=k.dimensions.length-1,b.right=b.left,b.left=k.dimensions[k.dimensions.length-2]);return b}
function c(){return function(){var a=d3.mouse(p[0][0]),c,d;a[0]-=k.margin.left;a[1]-=k.margin.top;c=b(a);d={p1:a,dims:c,minX:D(c.left),maxX:D(c.right),minY:0,maxY:B(),startAngle:void 0,endAngle:void 0,arc:d3.svg.arc().innerRadius(0)};m[c.i]=d;m.active=c.i;d.p1[0]=Math.min(Math.max(d.minX,a[0]),d.maxX);d.p2=d.p1.slice();d.p3=d.p1.slice()}}function d(){return function(){var b=d3.event,c=m[m.active];c.p2[0]=Math.min(Math.max(c.minX+1,b.x-k.margin.left),c.maxX);c.p2[1]=Math.min(Math.max(c.minY,b.y-k.margin.top),
c.maxY);c.p3=c.p2.slice();a(c,1)}}function e(a){var b=u(a.startAngle),c=u(a.endAngle);b>c&&(a=b,b=c,c=a);return function(a){return a>=b&&a<=c?!0:!1}}function f(){function a(a,b){var c=m[b],d=e(c),f=c.dims.left,g=c.dims.right,h=F[f],k=F[g],c=m.width(b),f=h(a[f])-k(a[g]);return d(Math.asin(f/Math.sqrt(c*c+f*f)))}var b=Object.getOwnPropertyNames(m),c=k.data,b=b.filter(function(a){return!isNaN(a)});return 0===b.length?c:c.filter(function(c){switch(X.predicate){case "AND":return b.every(function(b){return a(c,
b)});case "OR":return b.some(function(b){return a(c,b)});default:throw"Unknown brush predicate "+k.brushPredicate;}})}function g(){var a=m[m.active],b=q.selection.select("svg").select("g#arcs");delete m[m.active];m.active=void 0;b.selectAll("line#arc-"+a.dims.i).remove();b.selectAll("circle#arc-"+a.dims.i).remove();b.selectAll("path#arc-"+a.dims.i).remove()}function h(){return function(){var a;(a=m[m.active])&&a.p1[0]===a.p2[0]&&a.p1[1]===a.p2[1]&&g(m);if(a){var b=m.startAngle(m.active);a.startAngle=
b;a.endAngle=b;a.arc.outerRadius(m.length(m.active)).startAngle(b).endAngle(b)}a=f(m);m.active=void 0;k.brushed=a;q.renderBrushed();A.brushend.call(q,k.brushed)}}function l(a){return function(){Object.getOwnPropertyNames(a).filter(function(a){return!isNaN(a)}).forEach(function(b){a.active=b;g(a)});h(a)()}}var m={},p;(function(){var a=Math.PI/180;return function(b){return b*a}})();(function(){var a=180/Math.PI;return function(b){return b*a}})();var u=function(a){return-(a>Math.PI?a-1.5*Math.PI:a-.5*
Math.PI)};X.modes.angular={install:function(){var a=d3.behavior.drag();m.active=void 0;m.width=function(a){a=m[a];if(void 0!==a)return a.maxX-a.minX};angle=function(a,b){var c=a[0]-b[0],d=a[1]-b[1];return Math.asin(d/Math.sqrt(c*c+d*d))};m.endAngle=function(a){a=m[a];if(void 0!==a){var b=-angle(a.p1,a.p2)+Math.PI/2;a.p1[0]>a.p2[0]&&(b=2*Math.PI-b);return b}};m.startAngle=function(a){a=m[a];if(void 0!==a){var b=-angle(a.p1,a.p3)+Math.PI/2;a.p1[0]>a.p3[0]&&(b=2*Math.PI-b);return b}};m.length=function(a){var b=
m[a];if(void 0!==b)return a=b.p1[0]-b.p2[0],b=b.p1[1]-b.p2[1],Math.sqrt(a*a+b*b)};q.on("axesreorder.arcs",function(){function a(a,b){var c=k.dimensions.length;return k.dimensions.some(function(d,e){return d===a?e+e<c&&k.dimensions[e+1]===b:!1})}var b=Object.getOwnPropertyNames(m).filter(function(a){return!isNaN(a)});0<b.length&&(b.forEach(function(b){var c=m[b].dims;m.active=b;a(c.left,c.right)||g(m)}),h(m)())});q.selection.select("svg").append("g").attr("id","arcs").attr("transform","translate("+
k.margin.left+","+k.margin.top+")");q.brushReset=l(m);a.on("dragstart",c(m)).on("drag",d(m)).on("dragend",h(m));p=q.selection.select("svg").insert("rect","g#arcs").attr("id","arc-events").attr("x",k.margin.left).attr("y",k.margin.top).attr("width",z()).attr("height",B()+2).style("opacity",0).call(a)},uninstall:function(){q.selection.select("svg").select("g#arcs").remove();q.selection.select("svg").select("rect#arc-events").remove();q.on("axesreorder.arcs",void 0);delete q.brushReset;p=void 0},selected:f,
brushState:function(){return m}}})();q.interactive=function(){E.interactive=!0;return this};q.xscale=D;q.yscale=F;q.ctx=I;q.canvas=U;q.g=function(){return J};q.resize=function(){q.selection.select("svg").attr("width",k.width).attr("height",k.height);q.svg.attr("transform","translate("+k.margin.left+","+k.margin.top+")");E.brushable&&q.brushReset();q.autoscale();J&&q.createAxes();E.brushable&&q.brushable();E.reorderable&&q.reorderable();A.resize.call(this,{width:k.width,height:k.height,margin:k.margin});
return this};q.highlight=function(a){if(0===arguments.length)return k.highlighted;k.highlighted=a;q.clear("highlight");d3.selectAll([U.foreground,U.brushed]).classed("faded",!0);a.forEach(n);A.highlight.call(this,a);return this};q.unhighlight=function(){k.highlighted=[];q.clear("highlight");d3.selectAll([U.foreground,U.brushed]).classed("faded",!1);return this};q.intersection=function(a,b,c,d){return{x:((a.x*b.y-a.y*b.x)*(c.x-d.x)-(a.x-b.x)*(c.x*d.y-c.y*d.x))/((a.x-b.x)*(c.y-d.y)-(a.y-b.y)*(c.x-d.x)),
y:((a.x*b.y-a.y*b.x)*(c.y-d.y)-(a.y-b.y)*(c.x*d.y-c.y*d.x))/((a.x-b.x)*(c.y-d.y)-(a.y-b.y)*(c.x-d.x))}};q.version="0.7.0";q.toString=function(){return"Parallel Coordinates: "+k.dimensions.length+" dimensions ("+d3.keys(k.data[0]).length+" total) , "+k.data.length+" rows"};return q};
d3.renderQueue=function(a){var e=[],f=10,g=function(){},d=0,b=function(a){a&&b.data(a);b.invalidate();g();b.render()};b.render=function(){d=0;var c=!0;b.invalidate=function(){c=!1};d3.timer(function(){if(!c||d>e.length)return!0;for(var b=Math.min(d+f,e.length),g=d;g<b;g++)a(e[g],g);d+=f})};b.data=function(a){b.invalidate();e=a.slice(0);return b};b.rate=function(a){if(!arguments.length)return f;f=a;return b};b.remaining=function(){return e.length-d};b.clear=function(a){if(!arguments.length)return g(),
b;g=a;return b};b.invalidate=function(){};return b};(function(a,e){"object"===typeof exports&&"undefined"!==typeof module?e(exports):"function"===typeof define&&define.amd?define(["exports"],e):e(a.d3_queue=a.d3_queue||{})})(this,function(a){function e(a){if(!(1<=a))throw Error();this._size=a;this._call=this._error=null;this._tasks=[];this._data=[];this._waiting=this._active=this._ended=this._start=0}function f(a){if(!a._start)try{for(;a._start=a._waiting&&a._active<a._size;){var b=a._ended+a._active,c=a._tasks[b],e=c.length-1,f=c[e];c[e]=g(a,b);--a._waiting;
++a._active;c=f.apply(null,c);a._tasks[b]&&(a._tasks[b]=c||n)}}catch(u){a._tasks[a._ended+a._active-1]&&d(a,u)}}function g(a,c){return function(e,g){a._tasks[c]&&(--a._active,++a._ended,a._tasks[c]=null,null==a._error&&(null!=e?d(a,e):(a._data[c]=g,a._waiting?f(a):b(a))))}}function d(a,c){var d=a._tasks.length,e;a._error=c;a._data=void 0;for(a._waiting=NaN;0<=--d;)if(e=a._tasks[d])if(a._tasks[d]=null,e.abort)try{e.abort()}catch(p){}a._active=NaN;b(a)}function b(a){!a._active&&a._call&&a._call(a._error,
a._data)}function c(a){return new e(arguments.length?+a:Infinity)}var h=[].slice,n={};e.prototype=c.prototype={constructor:e,defer:function(a){if("function"!==typeof a||this._call)throw Error();if(null!=this._error)return this;var b=h.call(arguments,1);b.push(a);++this._waiting;this._tasks.push(b);f(this);return this},abort:function(){null==this._error&&d(this,Error("abort"));return this},await:function(a){if("function"!==typeof a||this._call)throw Error();this._call=function(b,c){a.apply(null,[b].concat(c))};
b(this);return this},awaitAll:function(a){if("function"!==typeof a||this._call)throw Error();this._call=a;b(this);return this}};a.version="2.0.3";a.queue=c});(function(){d3.svg.multibrush=function(){function f(a){if(a.rangeExtent)a=a.rangeExtent();else{var b=a.range();a=b[0];b=b[b.length-1];a=a<b?[a,b]:[b,a]}return a}function g(){d3.event.preventDefault()}function d(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=p.length;c<d;++c){var e=p[c]+b;if(e in a)return e}}function b(a){var b=".dragsuppress-"+ ++k,c="click"+b,e=d3.select(a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)).on("touchmove"+
b,g).on("dragstart"+b,g).on("selectstart"+b,g);null==u&&(u="onselectstart"in a?!1:d(a.style,"userSelect"));if(u){var f=(a&&(a.ownerDocument||a.document||a).documentElement).style,h=f[u];f[u]="none"}return function(a){e.on(b,null);u&&(f[u]=h);if(a){var d=function(){e.on(c,null)};e.on(c,function(){g();d()},!0);setTimeout(d,0)}}}function c(a){a.each(function(){var a=d3.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",w).on("touchstart.brush",
w);A=a;var b=a.selectAll(".background").data([0]);b.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");h(a);var a=d3.transition(a),b=d3.transition(b),c;z&&(c=f(z),b.attr("x",c[0]).attr("width",c[1]-c[0]),m(a));B&&(c=f(B),b.attr("y",c[0]).attr("height",c[1]-c[0]),t(a));n(a)})}function h(b){var d=E.length>D.length?E:D;extentArr=d.map(function(a,b){return b});extentResizes=d3.merge(d.map(function(a,b){return I.map(function(a){return[a,b]})}));b||
(b=A);d=b.selectAll(".extent").data(extentArr,function(a){return a});d.exit().remove();d.enter().append("rect").attr("class","extent").style("cursor","move").call(O);b=b.selectAll(".resize").data(extentResizes,function(a){return a[0]+a[1]});b.exit().remove();d=b.enter().append("g").attr("class",function(a){return"resize "+a[0]}).style("cursor",function(b){return a[b[0]]});d.append("rect").attr("x",function(a){return/[ew]$/.test(a[0])?-3:null}).attr("y",function(a){return/^[ns]/.test(a[0])?-3:null}).attr("width",
6).attr("height",6).style("visibility","hidden");d.call(U);b.style("display",function(a){return c.empty(a[1])?"none":null})}function n(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+E[a[1]][+/e$/.test(a[0])]+","+D[a[1]][+/^s/.test(a[0])]+")"})}function m(a){a.selectAll(".extent").attr("x",function(a){return E[a][0]});a.selectAll(".extent").attr("width",function(a){return E[a][1]-E[a][0]})}function t(a){a.selectAll(".extent").attr("y",function(a){return D[a][0]});a.selectAll(".extent").attr("height",
function(a){return D[a][1]-D[a][0]})}function w(){function a(){var a=d3.mouse(g),b=!1;N&&(a[0]+=N[0],a[1]+=N[1]);I||(d3.event.altKey?(U||(U=[(E[M][0]+E[M][1])/2,(D[M][0]+D[M][1])/2]),ha[0]=E[M][+(a[0]<U[0])],ha[1]=D[M][+(a[1]<U[1])]):U=null);w&&d(a,z,0)&&(m(p,M),b=!0);A&&d(a,B,1)&&(t(p,M),b=!0);b&&(n(p),l({type:"brush",mode:I?"move":"resize"}))}function d(a,b,c){var d=f(b);b=d[0];var e=d[1],d=ha[c],g=c?D[M]:E[M],h=g[1]-g[0];I&&(b-=d,e-=h+d);a=(c?J:P)?Math.max(b,Math.min(e,a[c])):a[c];I?b=(a+=d)+h:
(U&&(d=Math.max(b,Math.min(e,2*U[c]-a))),d<a?(b=a,a=d):b=d);if(g[0]!=a||g[1]!=b)return c?G[M]=null:F[M]=null,g[0]=a,g[1]=b,!0}function e(){a();(z&&E[M][0]==E[M][1]||B&&D[M][0]==D[M][1])&&c.clear();p.style("pointer-events","all").selectAll(".resize").style("display",function(a){return c.empty(a[1])?"none":null});d3.select("body").style("cursor",null);Q.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",
null);h();O();l({type:"brushend"})}var g=this,k=d3.select(d3.event.target),l=q.of(g,arguments),p=d3.select(g),u=k.datum()[0],w=!/^(n|s)$/.test(u)&&z,A=!/^(e|w)$/.test(u)&&B,I=k.classed("extent"),O=b(g),U,ha=d3.mouse(g),N,M,Q=d3.select(window).on("keydown.brush",function(){32==d3.event.keyCode&&(I||(U=null,ha[0]-=E[M][1],ha[1]-=D[M][1],I=2),d3.event.preventDefault())}).on("keyup.brush",function(){32==d3.event.keyCode&&2==I&&(ha[0]+=E[M][1],ha[1]+=D[M][1],I=0,d3.event.preventDefault())});if(d3.event.changedTouches)Q.on("touchmove.brush",
a).on("touchend.brush",e);else Q.on("mousemove.brush",a).on("mouseup.brush",e);p.interrupt().selectAll("*").interrupt();if(I)M=k.datum(),ha[0]=E[M][0]-ha[0],ha[1]=D[M][0]-ha[1];else if(u){var Z=+/w$/.test(u),Na=+/^n/.test(u);M=k.datum()[1];N=[E[M][1-Z]-ha[0],D[M][1-Na]-ha[1]];ha[0]=E[M][Z];ha[1]=D[M][Na]}else M=E.length-1,E.push([0,0]),D.push([0,0]),d3.event.altKey&&(U=ha.slice());p.style("pointer-events","none");d3.select("body").style("cursor",k.style("cursor"));I||u||p.selectAll(".resize").style("display",
null);l({type:"brushstart"});a()}var l=this.document;if(l)try{d3_array(l.documentElement.childNodes)[0].nodeType}catch(aa){d3_array=function(a){for(var b=a.length,c=Array(b);b--;)c[b]=a[b];return c}}var p="webkit ms moz Moz o O".split(" "),u="onselectstart"in document?null:d(document.documentElement.style,"userSelect"),k=0,q=d3.dispatch("brushstart","brush","brushend"),A,z=null,B=null,E=[[0,0]],D=[[0,0]],F=[],G=[],P=!0,J=!0,I=e[0],U=function(){},O=function(){};q.of=function(a,b){return function(d){try{var e=
d.sourceEvent=d3.event;d.target=c;d3.event=d;q[d.type].apply(a,b)}finally{d3.event=e}}};c.event=function(a){a.each(function(){var a=q.of(this,arguments),b={x:E,y:D,i:F,j:G},c=this.__chart__||b;this.__chart__=b;d3_transitionInheritId?d3.select(this).transition().each("start.brush",function(){F=c.i;G=c.j;E=c.x;D=c.y;a({type:"brushstart"})}).tween("brush:brush",function(){var c=d3_interpolateArray(E[0],b.x[0]),d=d3_interpolateArray(D[0],b.y[0]);F[0]=G[0]=null;return function(e){E[0]=b.x[0]=c(e);D[0]=
b.y[0]=d(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){F=b.i;G=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};c.x=function(a){if(!arguments.length)return z;z=a;I=e[!z<<1|!B];return c};c.y=function(a){if(!arguments.length)return B;B=a;I=e[!z<<1|!B];return c};c.resizeAdaption=function(a){if(!arguments.length)return U;U=a;return c};c.extentAdaption=function(a){if(!arguments.length)return O;
O=a;return c};c.clamp=function(a){if(!arguments.length)return z&&B?[P,J]:z?P:B?J:null;z&&B?(P=!!a[0],J=!!a[1]):z?P=!!a:B&&(J=!!a);return c};c.extent=function(a){var b,d,e=[];if(!arguments.length)return z&&(b=F[0]?F:E.map(function(a){return z.invert?[z.invert(a[0]),z.invert(a[1])]:a}).map(function(a){return a[1]<a[0]?[a[1],a[0]]:a}).filter(function(a){return 0!=a[1]-a[0]})),B&&(d=G[0]?G:D.map(function(a){return B.invert?[B.invert(a[0]),B.invert(a[1])]:a}).map(function(a){return a[1]<a[0]?[a[1],a[0]]:
a}).filter(function(a){return 0!=a[1]-a[0]})),z&&B&&b.forEach(function(a,b){e.push([[a[0],d[b][0]],[a[1],d[b][1]]])}),z&&B?e:z?b:B&&d;z&&(b=a,B&&(b=b.map(function(a){return[a[0][0],a[1][0]]})),F=b,E=b=b.map(function(a){return z.invert?[z(a[0]),z(a[1])]:a}).map(function(a){return a[1]<a[0]?[a[1],a[0]]:a}),B||(D=b.map(function(){return[0,0]})));B&&(d=a,z&&(d=d.map(function(a){return[a[0][1],a[1][1]]})),G=d,D=d=d.map(function(a){return B.invert?[B(a[0]),B(a[1])]:a}).map(function(a){return a[1]<a[0]?
[a[1],a[0]]:a}),z||(E=d.map(function(){return[0,0]})));0===E.length&&(E=[[0,0]]);0===D.length&&(D=[[0,0]]);return c};c.clear=function(){E=[[0,0]];D=[[0,0]];F=G=[];h();z&&m(A);B&&t(A);return c};c.empty=function(a){if(0===this.extent().length)return!0;1==E.length&&1==D.length&&(a=0);return void 0!==a?!!z&&E[a][0]==E[a][1]||!!B&&D[a][0]==D[a][1]:!1};return d3.rebind(c,q,"on")};var a={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},
e=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]]})();var Sylvester={version:"0.1.3",precision:1E-6};function Vector(){}
Vector.prototype={e:function(a){return 1>a||a>this.elements.length?null:this.elements[a-1]},dimensions:function(){return this.elements.length},modulus:function(){return Math.sqrt(this.dot(this))},eql:function(a){var e=this.elements.length;a=a.elements||a;if(e!=a.length)return!1;do if(Math.abs(this.elements[e-1]-a[e-1])>Sylvester.precision)return!1;while(--e);return!0},dup:function(){return Vector.create(this.elements)},map:function(a){var e=[];this.each(function(f,g){e.push(a(f,g))});return Vector.create(e)},
each:function(a){var e=this.elements.length,f=e,g;do g=f-e,a(this.elements[g],g+1);while(--e)},toUnitVector:function(){var a=this.modulus();return 0===a?this.dup():this.map(function(e){return e/a})},angleFrom:function(a){var e=a.elements||a;if(this.elements.length!=e.length)return null;var f=0,g=0,d=0;this.each(function(a,c){f+=a*e[c-1];g+=a*a;d+=e[c-1]*e[c-1]});g=Math.sqrt(g);d=Math.sqrt(d);if(0===g*d)return null;a=f/(g*d);-1>a&&(a=-1);1<a&&(a=1);return Math.acos(a)},isParallelTo:function(a){a=this.angleFrom(a);
return null===a?null:a<=Sylvester.precision},isAntiparallelTo:function(a){a=this.angleFrom(a);return null===a?null:Math.abs(a-Math.PI)<=Sylvester.precision},isPerpendicularTo:function(a){a=this.dot(a);return null===a?null:Math.abs(a)<=Sylvester.precision},add:function(a){var e=a.elements||a;return this.elements.length!=e.length?null:this.map(function(a,g){return a+e[g-1]})},subtract:function(a){var e=a.elements||a;return this.elements.length!=e.length?null:this.map(function(a,g){return a-e[g-1]})},
multiply:function(a){return this.map(function(e){return e*a})},x:function(a){return this.multiply(a)},dot:function(a){a=a.elements||a;var e=0,f=this.elements.length;if(f!=a.length)return null;do e+=this.elements[f-1]*a[f-1];while(--f);return e},cross:function(a){a=a.elements||a;if(3!=this.elements.length||3!=a.length)return null;var e=this.elements;return Vector.create([e[1]*a[2]-e[2]*a[1],e[2]*a[0]-e[0]*a[2],e[0]*a[1]-e[1]*a[0]])},max:function(){var a=0,e=this.elements.length,f=e,g;do g=f-e,Math.abs(this.elements[g])>
Math.abs(a)&&(a=this.elements[g]);while(--e);return a},indexOf:function(a){var e=null,f=this.elements.length,g=f,d;do d=g-f,null===e&&this.elements[d]==a&&(e=d+1);while(--f);return e},toDiagonalMatrix:function(){return Matrix.Diagonal(this.elements)},round:function(){return this.map(function(a){return Math.round(a)})},snapTo:function(a){return this.map(function(e){return Math.abs(e-a)<=Sylvester.precision?a:e})},distanceFrom:function(a){if(a.anchor)return a.distanceFrom(this);var e=a.elements||a;
if(e.length!=this.elements.length)return null;var f=0,g;this.each(function(a,b){g=a-e[b-1];f+=g*g});return Math.sqrt(f)},liesOn:function(a){return a.contains(this)},liesIn:function(a){return a.contains(this)},rotate:function(a,e){var f,g,d,b;switch(this.elements.length){case 2:f=e.elements||e;if(2!=f.length)return null;g=Matrix.Rotation(a).elements;d=this.elements[0]-f[0];b=this.elements[1]-f[1];return Vector.create([f[0]+g[0][0]*d+g[0][1]*b,f[1]+g[1][0]*d+g[1][1]*b]);case 3:if(!e.direction)return null;
var c=e.pointClosestTo(this).elements;g=Matrix.Rotation(a,e.direction).elements;d=this.elements[0]-c[0];b=this.elements[1]-c[1];f=this.elements[2]-c[2];return Vector.create([c[0]+g[0][0]*d+g[0][1]*b+g[0][2]*f,c[1]+g[1][0]*d+g[1][1]*b+g[1][2]*f,c[2]+g[2][0]*d+g[2][1]*b+g[2][2]*f]);default:return null}},reflectionIn:function(a){if(a.anchor){var e=this.elements.slice();a=a.pointClosestTo(e).elements;return Vector.create([a[0]+(a[0]-e[0]),a[1]+(a[1]-e[1]),a[2]+(a[2]-(e[2]||0))])}var f=a.elements||a;return this.elements.length!=
f.length?null:this.map(function(a,d){return f[d-1]+(f[d-1]-a)})},to3D:function(){var a=this.dup();switch(a.elements.length){case 3:break;case 2:a.elements.push(0);break;default:return null}return a},inspect:function(){return"["+this.elements.join(", ")+"]"},setElements:function(a){this.elements=(a.elements||a).slice();return this}};Vector.create=function(a){return(new Vector).setElements(a)};Vector.i=Vector.create([1,0,0]);Vector.j=Vector.create([0,1,0]);Vector.k=Vector.create([0,0,1]);
Vector.Random=function(a){var e=[];do e.push(Math.random());while(--a);return Vector.create(e)};Vector.Zero=function(a){var e=[];do e.push(0);while(--a);return Vector.create(e)};function Matrix(){}
Matrix.prototype={e:function(a,e){return 1>a||a>this.elements.length||1>e||e>this.elements[0].length?null:this.elements[a-1][e-1]},row:function(a){return a>this.elements.length?null:Vector.create(this.elements[a-1])},col:function(a){if(a>this.elements[0].length)return null;var e=[],f=this.elements.length,g=f,d;do d=g-f,e.push(this.elements[d][a-1]);while(--f);return Vector.create(e)},dimensions:function(){return{rows:this.elements.length,cols:this.elements[0].length}},rows:function(){return this.elements.length},
cols:function(){return this.elements[0].length},eql:function(a){a=a.elements||a;"undefined"==typeof a[0][0]&&(a=Matrix.create(a).elements);if(this.elements.length!=a.length||this.elements[0].length!=a[0].length)return!1;var e=this.elements.length,f=e,g,d,b=this.elements[0].length,c;do{g=f-e;d=b;do if(c=b-d,Math.abs(this.elements[g][c]-a[g][c])>Sylvester.precision)return!1;while(--d)}while(--e);return!0},dup:function(){return Matrix.create(this.elements)},map:function(a){var e=[],f=this.elements.length,
g=f,d,b,c=this.elements[0].length,h;do{d=g-f;b=c;e[d]=[];do h=c-b,e[d][h]=a(this.elements[d][h],d+1,h+1);while(--b)}while(--f);return Matrix.create(e)},isSameSizeAs:function(a){a=a.elements||a;"undefined"==typeof a[0][0]&&(a=Matrix.create(a).elements);return this.elements.length==a.length&&this.elements[0].length==a[0].length},add:function(a){var e=a.elements||a;"undefined"==typeof e[0][0]&&(e=Matrix.create(e).elements);return this.isSameSizeAs(e)?this.map(function(a,g,d){return a+e[g-1][d-1]}):null},
subtract:function(a){var e=a.elements||a;"undefined"==typeof e[0][0]&&(e=Matrix.create(e).elements);return this.isSameSizeAs(e)?this.map(function(a,g,d){return a-e[g-1][d-1]}):null},canMultiplyFromLeft:function(a){a=a.elements||a;"undefined"==typeof a[0][0]&&(a=Matrix.create(a).elements);return this.elements[0].length==a.length},multiply:function(a){if(!a.elements)return this.map(function(b){return b*a});var e=a.modulus?!0:!1,f=a.elements||a;"undefined"==typeof f[0][0]&&(f=Matrix.create(f).elements);
if(!this.canMultiplyFromLeft(f))return null;var g=this.elements.length,d=g,b,c,h=f[0].length,n,m=this.elements[0].length,t=[],w,l,p;do{b=d-g;t[b]=[];c=h;do{n=h-c;w=0;l=m;do p=m-l,w+=this.elements[b][p]*f[p][n];while(--l);t[b][n]=w}while(--c)}while(--g);f=Matrix.create(t);return e?f.col(1):f},x:function(a){return this.multiply(a)},minor:function(a,e,f,g){var d=[],b=f,c,h,n,m=this.elements.length,t=this.elements[0].length;do{c=f-b;d[c]=[];h=g;do n=g-h,d[c][n]=this.elements[(a+c-1)%m][(e+n-1)%t];while(--h)}while(--b);
return Matrix.create(d)},transpose:function(){var a=this.elements.length,e=this.elements[0].length,f=[],g=e,d,b,c;do{d=e-g;f[d]=[];b=a;do c=a-b,f[d][c]=this.elements[c][d];while(--b)}while(--g);return Matrix.create(f)},isSquare:function(){return this.elements.length==this.elements[0].length},max:function(){var a=0,e=this.elements.length,f=e,g,d,b=this.elements[0].length,c;do{g=f-e;d=b;do c=b-d,Math.abs(this.elements[g][c])>Math.abs(a)&&(a=this.elements[g][c]);while(--d)}while(--e);return a},indexOf:function(a){var e=
this.elements.length,f=e,g,d,b=this.elements[0].length,c;do{g=f-e;d=b;do if(c=b-d,this.elements[g][c]==a)return{i:g+1,j:c+1};while(--d)}while(--e);return null},diagonal:function(){if(!this.isSquare)return null;var a=[],e=this.elements.length,f=e,g;do g=f-e,a.push(this.elements[g][g]);while(--e);return Vector.create(a)},toRightTriangular:function(){var a=this.dup(),e,f=this.elements.length,g=f,d,b,c=this.elements[0].length,h;do{d=g-f;if(0==a.elements[d][d])for(j=d+1;j<g;j++)if(0!=a.elements[j][d]){e=
[];b=c;do h=c-b,e.push(a.elements[d][h]+a.elements[j][h]);while(--b);a.elements[d]=e;break}if(0!=a.elements[d][d])for(j=d+1;j<g;j++){var n=a.elements[j][d]/a.elements[d][d];e=[];b=c;do h=c-b,e.push(h<=d?0:a.elements[j][h]-a.elements[d][h]*n);while(--b);a.elements[j]=e}}while(--f);return a},toUpperTriangular:function(){return this.toRightTriangular()},determinant:function(){if(!this.isSquare())return null;var a=this.toRightTriangular(),e=a.elements[0][0],f=a.elements.length-1,g=f,d;do d=g-f+1,e*=a.elements[d][d];
while(--f);return e},det:function(){return this.determinant()},isSingular:function(){return this.isSquare()&&0===this.determinant()},trace:function(){if(!this.isSquare())return null;var a=this.elements[0][0],e=this.elements.length-1,f=e,g;do g=f-e+1,a+=this.elements[g][g];while(--e);return a},tr:function(){return this.trace()},rank:function(){var a=this.toRightTriangular(),e=0,f=this.elements.length,g=f,d,b,c=this.elements[0].length,h;do{d=g-f;b=c;do if(h=c-b,Math.abs(a.elements[d][h])>Sylvester.precision){e++;
break}while(--b)}while(--f);return e},rk:function(){return this.rank()},augment:function(a){a=a.elements||a;"undefined"==typeof a[0][0]&&(a=Matrix.create(a).elements);var e=this.dup(),f=e.elements[0].length,g=e.elements.length,d=g,b,c,h=a[0].length,n;if(g!=a.length)return null;do{b=d-g;c=h;do n=h-c,e.elements[b][f+n]=a[b][n];while(--c)}while(--g);return e},inverse:function(){if(!this.isSquare()||this.isSingular())return null;var a=this.elements.length,e=a,f,g,d=this.augment(Matrix.I(a)).toRightTriangular(),
b,c=d.elements[0].length,h,n,m=[],t;do{f=a-1;n=[];b=c;m[f]=[];g=d.elements[f][f];do h=c-b,t=d.elements[f][h]/g,n.push(t),h>=e&&m[f].push(t);while(--b);d.elements[f]=n;for(g=0;g<f;g++){n=[];b=c;do h=c-b,n.push(d.elements[g][h]-d.elements[f][h]*d.elements[g][f]);while(--b);d.elements[g]=n}}while(--a);return Matrix.create(m)},inv:function(){return this.inverse()},round:function(){return this.map(function(a){return Math.round(a)})},snapTo:function(a){return this.map(function(e){return Math.abs(e-a)<=
Sylvester.precision?a:e})},inspect:function(){var a=[],e=this.elements.length,f=e,g;do g=f-e,a.push(Vector.create(this.elements[g]).inspect());while(--e);return a.join("\n")},setElements:function(a){var e=a.elements||a;if("undefined"!=typeof e[0][0]){var f=e.length,g=f,d,b,c;this.elements=[];do{a=g-f;b=d=e[a].length;this.elements[a]=[];do c=b-d,this.elements[a][c]=e[a][c];while(--d)}while(--f);return this}g=f=e.length;this.elements=[];do a=g-f,this.elements.push([e[a]]);while(--f);return this}};
Matrix.create=function(a){return(new Matrix).setElements(a)};Matrix.I=function(a){var e=[],f=a,g,d,b;do{g=f-a;e[g]=[];d=f;do b=f-d,e[g][b]=g==b?1:0;while(--d)}while(--a);return Matrix.create(e)};Matrix.Diagonal=function(a){var e=a.length,f=e,g,d=Matrix.I(e);do g=f-e,d.elements[g][g]=a[g];while(--e);return d};
Matrix.Rotation=function(a,e){if(!e)return Matrix.create([[Math.cos(a),-Math.sin(a)],[Math.sin(a),Math.cos(a)]]);var f=e.dup();if(3!=f.elements.length)return null;var g=f.modulus(),d=f.elements[0]/g,b=f.elements[1]/g,f=f.elements[2]/g,g=Math.sin(a),c=Math.cos(a),h=1-c;return Matrix.create([[h*d*d+c,h*d*b-g*f,h*d*f+g*b],[h*d*b+g*f,h*b*b+c,h*b*f-g*d],[h*d*f-g*b,h*b*f+g*d,h*f*f+c]])};Matrix.RotationX=function(a){var e=Math.cos(a);a=Math.sin(a);return Matrix.create([[1,0,0],[0,e,-a],[0,a,e]])};
Matrix.RotationY=function(a){var e=Math.cos(a);a=Math.sin(a);return Matrix.create([[e,0,a],[0,1,0],[-a,0,e]])};Matrix.RotationZ=function(a){var e=Math.cos(a);a=Math.sin(a);return Matrix.create([[e,-a,0],[a,e,0],[0,0,1]])};Matrix.Random=function(a,e){return Matrix.Zero(a,e).map(function(){return Math.random()})};Matrix.Zero=function(a,e){var f=[],g=a,d,b,c;do{d=a-g;f[d]=[];b=e;do c=e-b,f[d][c]=0;while(--b)}while(--g);return Matrix.create(f)};function Line(){}
Line.prototype={eql:function(a){return this.isParallelTo(a)&&this.contains(a.anchor)},dup:function(){return Line.create(this.anchor,this.direction)},translate:function(a){a=a.elements||a;return Line.create([this.anchor.elements[0]+a[0],this.anchor.elements[1]+a[1],this.anchor.elements[2]+(a[2]||0)],this.direction)},isParallelTo:function(a){if(a.normal)return a.isParallelTo(this);a=this.direction.angleFrom(a.direction);return Math.abs(a)<=Sylvester.precision||Math.abs(a-Math.PI)<=Sylvester.precision},
distanceFrom:function(a){if(a.normal)return a.distanceFrom(this);if(a.direction){if(this.isParallelTo(a))return this.distanceFrom(a.anchor);var e=this.direction.cross(a.direction).toUnitVector().elements,f=this.anchor.elements;a=a.anchor.elements;return Math.abs((f[0]-a[0])*e[0]+(f[1]-a[1])*e[1]+(f[2]-a[2])*e[2])}var g=a.elements||a,f=this.anchor.elements,e=this.direction.elements;a=g[0]-f[0];var d=g[1]-f[1],g=(g[2]||0)-f[2],f=Math.sqrt(a*a+d*d+g*g);if(0===f)return 0;e=(a*e[0]+d*e[1]+g*e[2])/f;e=
1-e*e;return Math.abs(f*Math.sqrt(0>e?0:e))},contains:function(a){a=this.distanceFrom(a);return null!==a&&a<=Sylvester.precision},liesIn:function(a){return a.contains(this)},intersects:function(a){return a.normal?a.intersects(this):!this.isParallelTo(a)&&this.distanceFrom(a)<=Sylvester.precision},intersectionWith:function(a){if(a.normal)return a.intersectionWith(this);if(!this.intersects(a))return null;var e=this.anchor.elements,f=this.direction.elements,g=a.anchor.elements,d=a.direction.elements;
a=f[0];var b=f[1],f=f[2],c=d[0],h=d[1],d=d[2],n=e[0]-g[0],m=e[1]-g[1],g=e[2]-g[2],t=c*c+h*h+d*d,w=a*c+b*h+f*d,c=((-a*n-b*m-f*g)*t/(a*a+b*b+f*f)+w*(c*n+h*m+d*g))/(t-w*w);return Vector.create([e[0]+c*a,e[1]+c*b,e[2]+c*f])},pointClosestTo:function(a){if(a.direction){if(this.intersects(a))return this.intersectionWith(a);if(this.isParallelTo(a))return null;var e=this.direction.elements,f=a.direction.elements,g=e[0],d=e[1],e=e[2],b=f[0],c=f[1],h=f[2],f=e*b-g*h,n=g*c-d*b,m=d*h-e*c,g=Vector.create([f*h-n*
c,n*b-m*h,m*c-f*b]);a=Plane.create(a.anchor,g);return a.intersectionWith(this)}a=a.elements||a;if(this.contains(a))return Vector.create(a);f=this.anchor.elements;e=this.direction.elements;g=e[0];d=e[1];e=e[2];b=f[0];n=f[1];c=f[2];f=g*(a[1]-n)-d*(a[0]-b);n=d*((a[2]||0)-c)-e*(a[1]-n);m=e*(a[0]-b)-g*((a[2]||0)-c);g=Vector.create([d*f-e*m,e*n-g*f,g*m-d*n]);d=this.distanceFrom(a)/g.modulus();return Vector.create([a[0]+g.elements[0]*d,a[1]+g.elements[1]*d,(a[2]||0)+g.elements[2]*d])},rotate:function(a,
e){"undefined"==typeof e.direction&&(e=Line.create(e.to3D(),Vector.k));var f=Matrix.Rotation(a,e.direction).elements,g=e.pointClosestTo(this.anchor).elements,d=this.anchor.elements,b=this.direction.elements,c=g[0],h=g[1],g=g[2],n=d[0]-c,m=d[1]-h,d=d[2]-g;return Line.create([c+f[0][0]*n+f[0][1]*m+f[0][2]*d,h+f[1][0]*n+f[1][1]*m+f[1][2]*d,g+f[2][0]*n+f[2][1]*m+f[2][2]*d],[f[0][0]*b[0]+f[0][1]*b[1]+f[0][2]*b[2],f[1][0]*b[0]+f[1][1]*b[1]+f[1][2]*b[2],f[2][0]*b[0]+f[2][1]*b[1]+f[2][2]*b[2]])},reflectionIn:function(a){if(a.normal){var e=
this.anchor.elements,f=this.direction.elements,g=e[0],d=e[1],e=e[2],b=f[0],c=f[1],h=f[2],f=this.anchor.reflectionIn(a).elements,g=g+b,d=d+c,e=e+h;a=a.pointClosestTo([g,d,e]).elements;return Line.create(f,[a[0]+(a[0]-g)-f[0],a[1]+(a[1]-d)-f[1],a[2]+(a[2]-e)-f[2]])}if(a.direction)return this.rotate(Math.PI,a);a=a.elements||a;return Line.create(this.anchor.reflectionIn([a[0],a[1],a[2]||0]),this.direction)},setVectors:function(a,e){a=Vector.create(a);e=Vector.create(e);2==a.elements.length&&a.elements.push(0);
2==e.elements.length&&e.elements.push(0);if(3<a.elements.length||3<e.elements.length)return null;var f=e.modulus();if(0===f)return null;this.anchor=a;this.direction=Vector.create([e.elements[0]/f,e.elements[1]/f,e.elements[2]/f]);return this}};Line.create=function(a,e){return(new Line).setVectors(a,e)};Line.X=Line.create(Vector.Zero(3),Vector.i);Line.Y=Line.create(Vector.Zero(3),Vector.j);Line.Z=Line.create(Vector.Zero(3),Vector.k);function Plane(){}
Plane.prototype={eql:function(a){return this.contains(a.anchor)&&this.isParallelTo(a)},dup:function(){return Plane.create(this.anchor,this.normal)},translate:function(a){a=a.elements||a;return Plane.create([this.anchor.elements[0]+a[0],this.anchor.elements[1]+a[1],this.anchor.elements[2]+(a[2]||0)],this.normal)},isParallelTo:function(a){return a.normal?(a=this.normal.angleFrom(a.normal),Math.abs(a)<=Sylvester.precision||Math.abs(Math.PI-a)<=Sylvester.precision):a.direction?this.normal.isPerpendicularTo(a.direction):
null},isPerpendicularTo:function(a){a=this.normal.angleFrom(a.normal);return Math.abs(Math.PI/2-a)<=Sylvester.precision},distanceFrom:function(a){if(this.intersects(a)||this.contains(a))return 0;if(a.anchor){var e=this.anchor.elements,f=a.anchor.elements;a=this.normal.elements;return Math.abs((e[0]-f[0])*a[0]+(e[1]-f[1])*a[1]+(e[2]-f[2])*a[2])}f=a.elements||a;e=this.anchor.elements;a=this.normal.elements;return Math.abs((e[0]-f[0])*a[0]+(e[1]-f[1])*a[1]+(e[2]-(f[2]||0))*a[2])},contains:function(a){if(a.normal)return null;
if(a.direction)return this.contains(a.anchor)&&this.contains(a.anchor.add(a.direction));a=a.elements||a;var e=this.anchor.elements,f=this.normal.elements;return Math.abs(f[0]*(e[0]-a[0])+f[1]*(e[1]-a[1])+f[2]*(e[2]-(a[2]||0)))<=Sylvester.precision},intersects:function(a){return"undefined"==typeof a.direction&&"undefined"==typeof a.normal?null:!this.isParallelTo(a)},intersectionWith:function(a){if(!this.intersects(a))return null;if(a.direction){var e=a.anchor.elements,f=a.direction.elements;a=this.anchor.elements;
var g=this.normal.elements;a=(g[0]*(a[0]-e[0])+g[1]*(a[1]-e[1])+g[2]*(a[2]-e[2]))/(g[0]*f[0]+g[1]*f[1]+g[2]*f[2]);return Vector.create([e[0]+f[0]*a,e[1]+f[1]*a,e[2]+f[2]*a])}if(a.normal){var f=this.normal.cross(a.normal).toUnitVector(),g=this.normal.elements,e=this.anchor.elements,d=a.normal.elements,b=a.anchor.elements,c=Matrix.Zero(2,2);for(a=0;c.isSingular();)a++,c=Matrix.create([[g[a%3],g[(a+1)%3]],[d[a%3],d[(a+1)%3]]]);c=c.inverse().elements;e=g[0]*e[0]+g[1]*e[1]+g[2]*e[2];g=d[0]*b[0]+d[1]*b[1]+
d[2]*b[2];e=[c[0][0]*e+c[0][1]*g,c[1][0]*e+c[1][1]*g];g=[];for(d=1;3>=d;d++)g.push(a==d?0:e[(d+(5-a)%3)%3]);return Line.create(g,f)}},pointClosestTo:function(a){a=a.elements||a;var e=this.anchor.elements,f=this.normal.elements,e=(e[0]-a[0])*f[0]+(e[1]-a[1])*f[1]+(e[2]-(a[2]||0))*f[2];return Vector.create([a[0]+f[0]*e,a[1]+f[1]*e,(a[2]||0)+f[2]*e])},rotate:function(a,e){var f=Matrix.Rotation(a,e.direction).elements,g=e.pointClosestTo(this.anchor).elements,d=this.anchor.elements,b=this.normal.elements,
c=g[0],h=g[1],g=g[2],n=d[0]-c,m=d[1]-h,d=d[2]-g;return Plane.create([c+f[0][0]*n+f[0][1]*m+f[0][2]*d,h+f[1][0]*n+f[1][1]*m+f[1][2]*d,g+f[2][0]*n+f[2][1]*m+f[2][2]*d],[f[0][0]*b[0]+f[0][1]*b[1]+f[0][2]*b[2],f[1][0]*b[0]+f[1][1]*b[1]+f[1][2]*b[2],f[2][0]*b[0]+f[2][1]*b[1]+f[2][2]*b[2]])},reflectionIn:function(a){if(a.normal){var e=this.anchor.elements,f=this.normal.elements,g=e[0],d=e[1],e=e[2],b=f[0],c=f[1],h=f[2],f=this.anchor.reflectionIn(a).elements,g=g+b,d=d+c,e=e+h;a=a.pointClosestTo([g,d,e]).elements;
return Plane.create(f,[a[0]+(a[0]-g)-f[0],a[1]+(a[1]-d)-f[1],a[2]+(a[2]-e)-f[2]])}if(a.direction)return this.rotate(Math.PI,a);a=a.elements||a;return Plane.create(this.anchor.reflectionIn([a[0],a[1],a[2]||0]),this.normal)},setVectors:function(a,e,f){a=Vector.create(a);a=a.to3D();if(null===a)return null;e=Vector.create(e);e=e.to3D();if(null===e)return null;if("undefined"==typeof f)f=null;else if(f=Vector.create(f),f=f.to3D(),null===f)return null;var g=a.elements[0],d=a.elements[1],b=a.elements[2],
c=e.elements[0],h=e.elements[1],n=e.elements[2];if(null!==f){e=f.elements[0];var m=f.elements[1];f=f.elements[2];d=Vector.create([(h-d)*(f-b)-(n-b)*(m-d),(n-b)*(e-g)-(c-g)*(f-b),(c-g)*(m-d)-(h-d)*(e-g)]);g=d.modulus();if(0===g)return null;d=Vector.create([d.elements[0]/g,d.elements[1]/g,d.elements[2]/g])}else{g=Math.sqrt(c*c+h*h+n*n);if(0===g)return null;d=Vector.create([e.elements[0]/g,e.elements[1]/g,e.elements[2]/g])}this.anchor=a;this.normal=d;return this}};
Plane.create=function(a,e,f){return(new Plane).setVectors(a,e,f)};Plane.XY=Plane.create(Vector.Zero(3),Vector.k);Plane.YZ=Plane.create(Vector.Zero(3),Vector.i);Plane.ZX=Plane.create(Vector.Zero(3),Vector.j);Plane.YX=Plane.XY;Plane.ZY=Plane.YZ;Plane.XZ=Plane.ZX;var $V=Vector.create,$M=Matrix.create,$L=Line.create,$P=Plane.create;/*
 typeahead.js 1.2.0
 https://github.com/twitter/typeahead.js
 Copyright 2013-2017 Twitter, Inc. and other contributors; Licensed MIT
*/
(function(a,e){"function"===typeof define&&define.amd?define(["jquery"],function(f){return a.Bloodhound=e(f)}):"object"===typeof exports?module.exports=e(require("jquery")):a.Bloodhound=e(a.jQuery)})(this,function(a){var e=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,
"\\$&")},isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"===typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(b){return b instanceof a},toStr:function(a){return e.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){a.each(b,function(a,b){return c(b,a)})},map:a.map,filter:a.grep,every:function(b,c){var d=
!0;if(!b)return d;a.each(b,function(a,e){if(!(d=c.call(null,e,a,b)))return!1});return!!d},some:function(b,c){var d=!1;if(!b)return d;a.each(b,function(a,e){if(d=c.call(null,e,a,b))return!1});return!!d},mixin:a.extend,identity:function(a){return a},clone:function(b){return a.extend(!0,{},b)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,
e;return function(){var f=this,g=arguments,h;h=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||(e=a.apply(f,g))},b);h&&(e=a.apply(f,g));return e}},throttle:function(a,b){var c,d,e,f,g,h;g=0;h=function(){g=new Date;e=null;f=a.apply(c,d)};return function(){var k=new Date,l=b-(k-g);c=this;d=arguments;0>=l?(clearTimeout(e),e=null,g=k,f=a.apply(c,d)):e||(e=setTimeout(h,l));return f}},stringify:function(a){return e.isString(a)?a:JSON.stringify(a)},guid:function(){function a(a){var b=(Math.random().toString(16)+
"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b}return"tt-"+a()+a(!0)+a(!0)+a()},noop:function(){}}}(),f=function(){function a(a){return(a=e.toStr(a))?a.split(/\s+/):[]}function b(a){return(a=e.toStr(a))?a.split(/\W+/):[]}function c(a){a=e.toStr(a);var b=[],c="";e.each(a.split(""),function(a){a.match(/\s+/)?c="":(b.push(c+a),c+=a)});return b}function d(a){return function(b){b=e.isArray(b)?b:[].slice.call(arguments,0);return function(c){var d=[];e.each(b,function(b){d=d.concat(a(e.toStr(c[b])))});
return d}}}return{nonword:b,whitespace:a,ngram:c,obj:{nonword:d(b),whitespace:d(a),ngram:d(c)}}}(),g=function(){function b(b){this.maxSize=e.isNumber(b)?b:100;this.reset();0>=this.maxSize&&(this.set=this.get=a.noop)}function c(){this.head=this.tail=null}function d(a,b){this.key=a;this.val=b;this.prev=this.next=null}e.mixin(b.prototype,{set:function(a,b){var c=this.list.tail;this.size>=this.maxSize&&(this.list.remove(c),delete this.hash[c.key],this.size--);(c=this.hash[a])?(c.val=b,this.list.moveToFront(c)):
(c=new d(a,b),this.list.add(c),this.hash[a]=c,this.size++)},get:function(a){if(a=this.hash[a])return this.list.moveToFront(a),a.val},reset:function(){this.size=0;this.hash={};this.list=new c}});e.mixin(c.prototype,{add:function(a){this.head&&(a.next=this.head,this.head.prev=a);this.head=a;this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next;a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a);this.add(a)}});return b}(),d=function(){function b(a,
b){this.prefix=["__",a,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix));this.ls=b||d;!this.ls&&this._noop()}function c(a){return JSON.stringify(e.isUndefined(a)?null:a)}var d;try{d=window.localStorage,d.setItem("~~~","!"),d.removeItem("~~~")}catch(p){d=null}e.mixin(b.prototype,{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=
e.noop},_safeSet:function(a,b){try{this.ls.setItem(a,b)}catch(k){"QuotaExceededError"===k.name&&(this.clear(),this._noop())}},get:function(b){this.isExpired(b)&&this.remove(b);return a.parseJSON(this.ls.getItem(this._prefix(b)))},set:function(a,b,d){e.isNumber(d)?this._safeSet(this._ttlKey(a),c((new Date).getTime()+d)):this.ls.removeItem(this._ttlKey(a));return this._safeSet(this._prefix(a),c(b))},remove:function(a){this.ls.removeItem(this._ttlKey(a));this.ls.removeItem(this._prefix(a));return this},
clear:function(){var a;a=this.keyMatcher;var b,c,e=[],f=d.length;for(b=0;b<f;b++)(c=d.key(b)).match(a)&&e.push(c.replace(a,""));for(a=e.length;a--;)this.remove(e[a]);return this},isExpired:function(b){b=a.parseJSON(this.ls.getItem(this._ttlKey(b)));return e.isNumber(b)&&(new Date).getTime()>b?!0:!1}});return b}(),b=function(){function b(a){a=a||{};this.maxPendingRequests=a.maxPendingRequests||6;this.cancelled=!1;this.lastReq=null;this._send=a.transport;this._get=a.limiter?a.limiter(this._get):this._get;
this._cache=!1===a.cache?new g(0):f}var c=0,d={},f=new g(10);b.setMaxPendingRequests=function(a){this.maxPendingRequests=a};b.resetCache=function(){f.reset()};e.mixin(b.prototype,{_fingerprint:function(b){b=b||{};return b.url+b.type+a.param(b.data||{})},_get:function(a,b){function e(a){b(null,a);h._cache.set(k,a)}function f(){b(!0)}function g(){c--;delete d[k];h.onDeckRequestArgs&&(h._get.apply(h,h.onDeckRequestArgs),h.onDeckRequestArgs=null)}var h=this,k,l;k=this._fingerprint(a);this.cancelled||
k!==this.lastReq||((l=d[k])?l.done(e).fail(f):c<this.maxPendingRequests?(c++,d[k]=this._send(a).done(e).fail(f).always(g)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(b,c){var d,f;c=c||a.noop;b=e.isString(b)?{url:b}:b||{};f=this._fingerprint(b);this.cancelled=!1;this.lastReq=f;(d=this._cache.get(f))?c(null,d):this._get(b,c)},cancel:function(){this.cancelled=!0}});return b}(),c=window.SearchIndex=function(){function b(b){b=b||{};b.datumTokenizer&&b.queryTokenizer||a.error("datumTokenizer and queryTokenizer are both required");
this.identify=b.identify||e.stringify;this.datumTokenizer=b.datumTokenizer;this.queryTokenizer=b.queryTokenizer;this.matchAnyQueryToken=b.matchAnyQueryToken;this.reset()}function c(a){a=e.filter(a,function(a){return!!a});return a=e.map(a,function(a){return a.toLowerCase()})}function d(a){for(var b={},c=[],d=0,e=a.length;d<e;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c}e.mixin(b.prototype,{bootstrap:function(a){this.datums=a.datums;this.trie=a.trie},add:function(a){var b=this;a=e.isArray(a)?a:[a];
e.each(a,function(a){var d;b.datums[d=b.identify(a)]=a;a=c(b.datumTokenizer(a));e.each(a,function(a){var c,e;c=b.trie;for(a=a.split("");e=a.shift();)c=c.c[e]||(c.c[e]={i:[],c:{}}),c.i.push(d)})})},get:function(a){var b=this;return e.map(a,function(a){return b.datums[a]})},search:function(a){var b=this,f;a=c(this.queryTokenizer(a));e.each(a,function(a){var c,d;if(f&&0===f.length&&!b.matchAnyQueryToken)return!1;c=b.trie;for(a=a.split("");c&&(d=a.shift());)c=c.c[d];if(c&&0===a.length){d=c.i.slice(0);
if(f){c=f;var e=a=0,g=[];c=c.sort();d=d.sort();for(var h=c.length,k=d.length;a<h&&e<k;)c[a]<d[e]?a++:(c[a]>d[e]||(g.push(c[a]),a++),e++);c=g}else c=d;f=c}else if(!b.matchAnyQueryToken)return f=[],!1});return f?e.map(d(f),function(a){return b.datums[a]}):[]},all:function(){var a=[],b;for(b in this.datums)a.push(this.datums[b]);return a},reset:function(){this.datums={};this.trie={i:[],c:{}}},serialize:function(){return{datums:this.datums,trie:this.trie}}});return b}(),h=function(){function a(a){this.url=
a.url;this.ttl=a.ttl;this.cache=a.cache;this.prepare=a.prepare;this.transform=a.transform;this.transport=a.transport;this.thumbprint=a.thumbprint;this.storage=new d(a.cacheKey)}e.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(a){this.cache&&(this.storage.set("data",a,this.ttl),this.storage.set("protocol",location.protocol,this.ttl),this.storage.set("thumbprint",this.thumbprint,this.ttl))},fromCache:function(){var a,b;if(!this.cache)return null;
a=this.storage.get("data");b=this.storage.get("protocol");b=this.storage.get("thumbprint")!==this.thumbprint||b!==location.protocol;return a&&!b?a:null},fromNetwork:function(a){var b=this,c;a&&(c=this.prepare(this._settings()),this.transport(c).fail(function(){a(!0)}).done(function(c){a(null,b.transform(c))}))},clear:function(){this.storage.clear();return this}});return a}(),n=function(){function a(a){this.url=a.url;this.prepare=a.prepare;this.transform=a.transform;this.indexResponse=a.indexResponse;
this.transport=new b({cache:a.cache,limiter:a.limiter,transport:a.transport,maxPendingRequests:a.maxPendingRequests})}e.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(a,b){var c=this,d;if(b)return d=this.prepare(a||"",this._settings()),this.transport.get(d,function(a,d){a?b([]):b(c.transform(d))})},cancelLastRequest:function(){this.transport.cancel()}});return a}(),m=function(){function b(b){var c;if(!b)return null;c={url:null,ttl:864E5,cache:!0,
cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null};b=e.isString(b)?{url:b}:b;b=e.mixin(c,b);!b.url&&a.error("prefetch requires url to be set");b.transform=b.filter||b.transform;b.cacheKey=b.cacheKey||b.url;b.thumbprint="1.2.0"+b.thumbprint;b.transport=b.transport?g(b.transport):a.ajax;return b}function c(b){var c;if(b)return c={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},
b=e.isString(b)?{url:b}:b,b=e.mixin(c,b),!b.url&&a.error("remote requires url to be set"),b.transform=b.filter||b.transform,b.prepare=d(b),b.limiter=f(b),b.transport=b.transport?g(b.transport):a.ajax,delete b.replace,delete b.wildcard,delete b.rateLimitBy,delete b.rateLimitWait,b}function d(a){function b(a,b){b.url=f(b.url,a);return b}function c(a,b){b.url=b.url.replace(g,encodeURIComponent(a));return b}function d(a,b){return b}var e,f,g;e=a.prepare;f=a.replace;g=a.wildcard;return e?e:e=f?b:a.wildcard?
c:d}function f(a){function b(a){return function(b){return e.debounce(b,a)}}function c(a){return function(b){return e.throttle(b,a)}}var d,f;d=a.limiter;f=a.rateLimitBy;a=a.rateLimitWait;d||(d=/^throttle$/i.test(f)?c(a):b(a));return d}function g(b){return function(c){var d=a.Deferred();b(c,function(a){e.defer(function(){d.resolve(a)})},function(a){e.defer(function(){d.reject(a)})});return d}}return function(d){var f;d=e.mixin({initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,
matchAnyQueryToken:!1,sufficient:5,indexRemote:!1,sorter:null,local:[],prefetch:null,remote:null},d||{});!d.datumTokenizer&&a.error("datumTokenizer is required");!d.queryTokenizer&&a.error("queryTokenizer is required");f=d.sorter;d.sorter=f?function(a){return a.sort(f)}:e.identity;d.local=e.isFunction(d.local)?d.local():d.local;d.prefetch=b(d.prefetch);d.remote=c(d.remote);return d}}();return function(){function d(a){a=m(a);this.sorter=a.sorter;this.identify=a.identify;this.sufficient=a.sufficient;
this.indexRemote=a.indexRemote;this.local=a.local;this.remote=a.remote?new n(a.remote):null;this.prefetch=a.prefetch?new h(a.prefetch):null;this.index=new c({identify:this.identify,datumTokenizer:a.datumTokenizer,queryTokenizer:a.queryTokenizer});!1!==a.initialize&&this.initialize()}var g;g=window&&window.Bloodhound;d.noConflict=function(){window&&(window.Bloodhound=g);return d};d.tokenizers=f;e.mixin(d.prototype,{__ttAdapter:function(){function a(a,b,d){return c.search(a,b,d)}function b(a,b){return c.search(a,
b)}var c=this;return this.remote?a:b},_loadPrefetch:function(){function b(a,b){if(a)return d.reject();c.add(b);c.prefetch.store(c.index.serialize());d.resolve()}var c=this,d,e;d=a.Deferred();this.prefetch?(e=this.prefetch.fromCache())?(this.index.bootstrap(e),d.resolve()):this.prefetch.fromNetwork(b):d.resolve();return d.promise()},_initialize:function(){var a=this;this.clear();(this.initPromise=this._loadPrefetch()).done(function(){a.add(a.local)});return this.initPromise},initialize:function(a){return!this.initPromise||
a?this._initialize():this.initPromise},add:function(a){this.index.add(a);return this},get:function(a){a=e.isArray(a)?a:[].slice.call(arguments);return this.index.get(a)},search:function(a,b,c){function d(a){var b=[];e.each(a,function(a){!e.some(g,function(b){return f.identify(a)===f.identify(b)})&&b.push(a)});f.indexRemote&&f.add(b);c(b)}var f=this,g;b=b||e.noop;c=c||e.noop;g=this.sorter(this.index.search(a));b(this.remote?g.slice():g);this.remote&&g.length<this.sufficient?this.remote.get(a,d):this.remote&&
this.remote.cancelLastRequest();return this},all:function(){return this.index.all()},clear:function(){this.index.reset();return this},clearPrefetchCache:function(){this.prefetch&&this.prefetch.clear();return this},clearRemoteCache:function(){b.resetCache();return this},ttAdapter:function(){return this.__ttAdapter()}});return d}()});
(function(a,e){"function"===typeof define&&define.amd?define(["jquery"],function(a){return e(a)}):"object"===typeof exports?module.exports=e(require("jquery")):e(a.jQuery)})(this,function(a){var e=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"===
typeof a},isNumber:function(a){return"number"===typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"===typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(b){return b instanceof a},toStr:function(a){return e.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){a.each(b,function(a,b){return c(b,a)})},map:a.map,filter:a.grep,every:function(b,c){var d=!0;if(!b)return d;a.each(b,function(a,e){if(!(d=
c.call(null,e,a,b)))return!1});return!!d},some:function(b,c){var d=!1;if(!b)return d;a.each(b,function(a,e){if(d=c.call(null,e,a,b))return!1});return!!d},mixin:a.extend,identity:function(a){return a},clone:function(b){return a.extend(!0,{},b)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f=this,g=arguments,h;
h=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||(e=a.apply(f,g))},b);h&&(e=a.apply(f,g));return e}},throttle:function(a,b){var c,d,e,f,g,h;g=0;h=function(){g=new Date;e=null;f=a.apply(c,d)};return function(){var k=new Date,l=b-(k-g);c=this;d=arguments;0>=l?(clearTimeout(e),e=null,g=k,f=a.apply(c,d)):e||(e=setTimeout(h,l));return f}},stringify:function(a){return e.isString(a)?a:JSON.stringify(a)},guid:function(){function a(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?
"-"+b.substr(0,4)+"-"+b.substr(4,4):b}return"tt-"+a()+a(!0)+a(!0)+a()},noop:function(){}}}(),f=function(){function a(a){var b={};e.each(a,function(a,c){b[c]="."+a});return b}function b(){var a={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",
top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};e.isMsie()&&e.mixin(a.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"});return a}var c={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return function(d){var f;
d=e.mixin({},c,d);f={css:b(),classes:d,html:{wrapper:'<span class="'+d.wrapper+'"></span>',menu:'<div role="listbox" class="'+d.menu+'"></div>'},selectors:a(d)};return{css:f.css,html:f.html,classes:f.classes,selectors:f.selectors,mixin:function(a){e.mixin(a,f)}}}}(),g=function(){function b(b){b&&b.el||a.error("EventBus initialized without el");this.$el=a(b.el)}var c;c={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"};e.mixin(b.prototype,{_trigger:function(b,
c){var d=a.Event("typeahead:"+b);this.$el.trigger.call(this.$el,d,c||[]);return d},before:function(a){var b;b=[].slice.call(arguments,1);return this._trigger("before"+a,b).isDefaultPrevented()},trigger:function(a){var b;this._trigger(a,[].slice.call(arguments,1));(b=c[a])&&this._trigger(b,[].slice.call(arguments,1))}});return b}(),d=function(){function a(a,b,e,f){if(!e)return this;b=b.split(d);e=f?c(e,f):e;for(this._callbacks=this._callbacks||{};f=b.shift();)this._callbacks[f]=this._callbacks[f]||
{sync:[],async:[]},this._callbacks[f][a].push(e);return this}function b(a,b,c){return function(){for(var d,e=0,f=a.length;!d&&e<f;e+=1)d=!1===a[e].apply(b,c);return!d}}function c(a,b){return a.bind?a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var d=/\s+/,e=function(){return window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}();return{onSync:function(b,c,d){return a.call(this,"sync",b,c,d)},onAsync:function(b,c,d){return a.call(this,
"async",b,c,d)},off:function(a){var b;if(!this._callbacks)return this;for(a=a.split(d);b=a.shift();)delete this._callbacks[b];return this},trigger:function(a){var c,f,g,h,k;if(!this._callbacks)return this;a=a.split(d);for(g=[].slice.call(arguments,1);(c=a.shift())&&(f=this._callbacks[c]);)h=b(f.sync,this,[c].concat(g)),k=b(f.async,this,[c].concat(g)),h()&&e(k);return this}}}(),b=function(a){function b(a){return f[a.toUpperCase()]||a}function c(a,c,d,f){for(var g=[],h=0,k=a.length;h<k;h++){var l=e.escapeRegExChars(a[h]);
f&&(l=l.replace(/\S/g,b));g.push(l)}a=d?"\\b("+g.join("|")+")\\b":"("+g.join("|")+")";return c?new RegExp(a):new RegExp(a,"i")}var d={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1,diacriticInsensitive:!1},f={A:"[Aa\u00aa\u00c0-\u00c5\u00e0-\u00e5\u0100-\u0105\u01cd\u01ce\u0200-\u0203\u0226\u0227\u1d2c\u1d43\u1e00\u1e01\u1e9a\u1ea0-\u1ea3\u2090\u2100\u2101\u213b\u249c\u24b6\u24d0\u3371-\u3374\u3380-\u3384\u3388\u3389\u33a9-\u33af\u33c2\u33ca\u33df\u33ff\uff21\uff41]",
B:"[Bb\u1d2e\u1d47\u1e02-\u1e07\u212c\u249d\u24b7\u24d1\u3374\u3385-\u3387\u33c3\u33c8\u33d4\u33dd\uff22\uff42]",C:"[Cc\u00c7\u00e7\u0106-\u010d\u1d9c\u2100\u2102\u2103\u2105\u2106\u212d\u216d\u217d\u249e\u24b8\u24d2\u3376\u3388\u3389\u339d\u33a0\u33a4\u33c4-\u33c7\uff23\uff43]",D:"[Dd\u010e\u010f\u01c4-\u01c6\u01f1-\u01f3\u1d30\u1d48\u1e0a-\u1e13\u2145\u2146\u216e\u217e\u249f\u24b9\u24d3\u32cf\u3372\u3377-\u3379\u3397\u33ad-\u33af\u33c5\u33c8\uff24\uff44]",E:"[Ee\u00c8-\u00cb\u00e8-\u00eb\u0112-\u011b\u0204-\u0207\u0228\u0229\u1d31\u1d49\u1e18-\u1e1b\u1eb8-\u1ebd\u2091\u2121\u212f\u2130\u2147\u24a0\u24ba\u24d4\u3250\u32cd\u32ce\uff25\uff45]",
F:"[Ff\u1da0\u1e1e\u1e1f\u2109\u2131\u213b\u24a1\u24bb\u24d5\u338a-\u338c\u3399\ufb00-\ufb04\uff26\uff46]",G:"[Gg\u011c-\u0123\u01e6\u01e7\u01f4\u01f5\u1d33\u1d4d\u1e20\u1e21\u210a\u24a2\u24bc\u24d6\u32cc\u32cd\u3387\u338d-\u338f\u3393\u33ac\u33c6\u33c9\u33d2\u33ff\uff27\uff47]",H:"[Hh\u0124\u0125\u021e\u021f\u02b0\u1d34\u1e22-\u1e2b\u1e96\u210b-\u210e\u24a3\u24bd\u24d7\u32cc\u3371\u3390-\u3394\u33ca\u33cb\u33d7\uff28\uff48]",I:"[Ii\u00cc-\u00cf\u00ec-\u00ef\u0128-\u0130\u0132\u0133\u01cf\u01d0\u0208-\u020b\u1d35\u1d62\u1e2c\u1e2d\u1ec8-\u1ecb\u2071\u2110\u2111\u2139\u2148\u2160-\u2163\u2165-\u2168\u216a\u216b\u2170-\u2173\u2175-\u2178\u217a\u217b\u24a4\u24be\u24d8\u337a\u33cc\u33d5\ufb01\ufb03\uff29\uff49]",
J:"[Jj\u0132-\u0135\u01c7-\u01cc\u01f0\u02b2\u1d36\u2149\u24a5\u24bf\u24d9\u2c7c\uff2a\uff4a]",K:"[Kk\u0136\u0137\u01e8\u01e9\u1d37\u1d4f\u1e30-\u1e35\u212a\u24a6\u24c0\u24da\u3384\u3385\u3389\u338f\u3391\u3398\u339e\u33a2\u33a6\u33aa\u33b8\u33be\u33c0\u33c6\u33cd-\u33cf\uff2b\uff4b]",L:"[Ll\u0139-\u0140\u01c7-\u01c9\u02e1\u1d38\u1e36\u1e37\u1e3a-\u1e3d\u2112\u2113\u2121\u216c\u217c\u24a7\u24c1\u24db\u32cf\u3388\u3389\u33d0-\u33d3\u33d5\u33d6\u33ff\ufb02\ufb04\uff2c\uff4c]",M:"[Mm\u1d39\u1d50\u1e3e-\u1e43\u2120\u2122\u2133\u216f\u217f\u24a8\u24c2\u24dc\u3377-\u3379\u3383\u3386\u338e\u3392\u3396\u3399-\u33a8\u33ab\u33b3\u33b7\u33b9\u33bd\u33bf\u33c1\u33c2\u33ce\u33d0\u33d4-\u33d6\u33d8\u33d9\u33de\u33df\uff2d\uff4d]",
N:"[Nn\u00d1\u00f1\u0143-\u0149\u01ca-\u01cc\u01f8\u01f9\u1d3a\u1e44-\u1e4b\u207f\u2115\u2116\u24a9\u24c3\u24dd\u3381\u338b\u339a\u33b1\u33b5\u33bb\u33cc\u33d1\uff2e\uff4e]",O:"[Oo\u00ba\u00d2-\u00d6\u00f2-\u00f6\u014c-\u0151\u01a0\u01a1\u01d1\u01d2\u01ea\u01eb\u020c-\u020f\u022e\u022f\u1d3c\u1d52\u1ecc-\u1ecf\u2092\u2105\u2116\u2134\u24aa\u24c4\u24de\u3375\u33c7\u33d2\u33d6\uff2f\uff4f]",P:"[Pp\u1d3e\u1d56\u1e54-\u1e57\u2119\u24ab\u24c5\u24df\u3250\u3371\u3376\u3380\u338a\u33a9-\u33ac\u33b0\u33b4\u33ba\u33cb\u33d7-\u33da\uff30\uff50]",
Q:"[Qq\u211a\u24ac\u24c6\u24e0\u33c3\uff31\uff51]",R:"[Rr\u0154-\u0159\u0210-\u0213\u02b3\u1d3f\u1d63\u1e58-\u1e5b\u1e5e\u1e5f\u20a8\u211b-\u211d\u24ad\u24c7\u24e1\u32cd\u3374\u33ad-\u33af\u33da\u33db\uff32\uff52]",S:"[Ss\u015a-\u0161\u017f\u0218\u0219\u02e2\u1e60-\u1e63\u20a8\u2101\u2120\u24ae\u24c8\u24e2\u33a7\u33a8\u33ae-\u33b3\u33db\u33dc\ufb06\uff33\uff53]",T:"[Tt\u0162-\u0165\u021a\u021b\u1d40\u1d57\u1e6a-\u1e71\u1e97\u2121\u2122\u24af\u24c9\u24e3\u3250\u32cf\u3394\u33cf\ufb05\ufb06\uff34\uff54]",
U:"[Uu\u00d9-\u00dc\u00f9-\u00fc\u0168-\u0173\u01af\u01b0\u01d3\u01d4\u0214-\u0217\u1d41\u1d58\u1d64\u1e72-\u1e77\u1ee4-\u1ee7\u2106\u24b0\u24ca\u24e4\u3373\u337a\uff35\uff55]",V:"[Vv\u1d5b\u1d65\u1e7c-\u1e7f\u2163-\u2167\u2173-\u2177\u24b1\u24cb\u24e5\u2c7d\u32ce\u3375\u33b4-\u33b9\u33dc\u33de\uff36\uff56]",W:"[Ww\u0174\u0175\u02b7\u1d42\u1e80-\u1e89\u1e98\u24b2\u24cc\u24e6\u33ba-\u33bf\u33dd\uff37\uff57]",X:"[Xx\u02e3\u1e8a-\u1e8d\u2093\u213b\u2168-\u216b\u2178-\u217b\u24b3\u24cd\u24e7\u33d3\uff38\uff58]",
Y:"[Yy\u00dd\u00fd\u00ff\u0176-\u0178\u0232\u0233\u02b8\u1e8e\u1e8f\u1e99\u1ef2-\u1ef9\u24b4\u24ce\u24e8\u33c9\uff39\uff59]",Z:"[Zz\u0179-\u017e\u01f1-\u01f3\u1dbb\u1e90-\u1e95\u2124\u2128\u24b5\u24cf\u24e9\u3390-\u3394\uff3a\uff5a]"};return function(b){function f(a,b){for(var c,d=0;d<a.childNodes.length;d++)c=a.childNodes[d],3===c.nodeType?d+=b(c)?1:0:f(c,b)}var g;b=e.mixin({},d,b);b.node&&b.pattern&&(b.pattern=e.isArray(b.pattern)?b.pattern:[b.pattern],g=c(b.pattern,b.caseSensitive,b.wordsOnly,
b.diacriticInsensitive),f(b.node,function(c){var d,e,f;if(d=g.exec(c.data))f=a.createElement(b.tagName),b.className&&(f.className=b.className),e=c.splitText(d.index),e.splitText(d[0].length),f.appendChild(e.cloneNode(!0)),c.parentNode.replaceChild(f,e);return!!d}))}}(window.document),c=function(){function b(b,c){b=b||{};b.input||a.error("input is missing");c.mixin(this);this.$hint=a(b.hint);this.$input=a(b.input);this.$input.attr({"aria-activedescendant":"","aria-owns":this.$input.attr("id")+"_listbox",
role:"combobox","aria-readonly":"true","aria-autocomplete":"list"});a(c.menu).attr("id",this.$input.attr("id")+"_listbox");this.query=this.$input.val();this.queryWhenFocused=this.hasFocus()?this.query:null;var d=this.$input;this.$overflowHelper=a('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:d.css("font-family"),fontSize:d.css("font-size"),fontStyle:d.css("font-style"),fontVariant:d.css("font-variant"),fontWeight:d.css("font-weight"),wordSpacing:d.css("word-spacing"),
letterSpacing:d.css("letter-spacing"),textIndent:d.css("text-indent"),textRendering:d.css("text-rendering"),textTransform:d.css("text-transform")}).insertAfter(d);this._checkLanguageDirection();0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop);this.onSync("cursorchange",this._updateDescendent)}var c;c={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};b.normalizeQuery=function(a){return e.toStr(a).replace(/^\s*/g,"").replace(/\s{2,}/g,
" ")};e.mixin(b.prototype,d,{_onBlur:function(){this.resetInputValue();this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query;this.trigger("focused")},_onKeydown:function(a){var b=c[a.which||a.keyCode];this._managePreventDefault(b,a);b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._setQuery(this.getInputValue());this.clearHintIfInvalid();this._checkLanguageDirection()},_managePreventDefault:function(a,b){var c;switch(a){case "up":case "down":c=
!(b.altKey||b.ctrlKey||b.metaKey||b.shiftKey);break;default:c=!1}c&&b.preventDefault()},_shouldTrigger:function(a,b){var c;switch(a){case "tab":c=!(b.altKey||b.ctrlKey||b.metaKey||b.shiftKey);break;default:c=!0}return c},_checkLanguageDirection:function(){var a=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==a&&(this.dir=a,this.$hint.attr("dir",a),this.trigger("langDirChanged",a))},_setQuery:function(a,c){var d,e;d=this.query;e=(d=b.normalizeQuery(a)===b.normalizeQuery(d))?this.query.length!==
a.length:!1;this.query=a;c||d?!c&&e&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},_updateDescendent:function(a,b){this.$input.attr("aria-activedescendant",b)},bind:function(){var a=this,b,d,f,g;b=e.bind(this._onBlur,this);d=e.bind(this._onFocus,this);f=e.bind(this._onKeydown,this);g=e.bind(this._onInput,this);this.$input.on("blur.tt",b).on("focus.tt",d).on("keydown.tt",f);if(!e.isMsie()||9<e.isMsie())this.$input.on("input.tt",g);else this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",
function(b){c[b.which||b.keyCode]||e.defer(e.bind(a._onInput,a,b))});return this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(a,b){this.setInputValue(a);this._setQuery(a,b)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(a){this.$input.val(a);this.clearHintIfInvalid();
this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a,b;a=this.getInputValue();b=this.getHint();b=a!==b&&0===b.indexOf(a);""!==a&&b&&!this.hasOverflow()||this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var a=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());
return this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var a,b;a=this.$input.val().length;b=this.$input[0].selectionStart;return e.isNumber(b)?b===a:document.selection?(b=document.selection.createRange(),b.moveStart("character",-a),a===b.text.length):!0},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$overflowHelper.remove();this.$hint=this.$input=this.$overflowHelper=a("<div>")}});return b}(),h=function(){function c(b,c){b=b||{};b.templates=b.templates||{};b.templates.notFound=
b.templates.notFound||b.templates.empty;b.source||a.error("missing source");b.node||a.error("missing node");b.name&&!/^[_a-zA-Z0-9-]+$/.test(b.name)&&a.error("invalid dataset name: "+b.name);c.mixin(this);this.highlight=!!b.highlight;this.name=e.toStr(b.name||h());this.limit=b.limit||5;this.displayFn=f(b.display||b.displayKey);this.templates=g(b.templates,this.displayFn);this.source=b.source.__ttAdapter?b.source.__ttAdapter():b.source;this.async=e.isUndefined(b.async)?2<this.source.length:!!b.async;
this._resetLastSuggestion();this.$el=a(b.node).attr("role","presentation").addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function f(a){function b(b){return b[a]}a=a||e.stringify;return e.isFunction(a)?a:b}function g(b,c){function d(b){return a('<div role="option">').attr("id",e.guid()).text(c(b))}return{notFound:b.notFound&&e.templatify(b.notFound),pending:b.pending&&e.templatify(b.pending),header:b.header&&e.templatify(b.header),footer:b.footer&&e.templatify(b.footer),
suggestion:b.suggestion||d}}var h;h=e.getIdGenerator();c.extractData=function(b){b=a(b);return b.data("tt-selectable-object")?{dataset:b.data("tt-selectable-dataset")||"",val:b.data("tt-selectable-display")||"",obj:b.data("tt-selectable-object")||null}:null};e.mixin(c.prototype,d,{_overwrite:function(a,b){b=b||[];b.length?this._renderSuggestions(a,b):this.async&&this.templates.pending?this._renderPending(a):!this.async&&this.templates.notFound?this._renderNotFound(a):this._empty();this.trigger("rendered",
b,!1,this.name)},_append:function(a,b){b=b||[];b.length&&this.$lastSuggestion.length?this._appendSuggestions(a,b):b.length?this._renderSuggestions(a,b):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(a);this.trigger("rendered",b,!0,this.name)},_renderSuggestions:function(a,b){var c;c=this._getSuggestionsFragment(a,b);this.$lastSuggestion=c.children().last();this.$el.html(c).prepend(this._getHeader(a,b)).append(this._getFooter(a,b))},_appendSuggestions:function(a,b){var c,
d;c=this._getSuggestionsFragment(a,b);d=c.children().last();this.$lastSuggestion.after(c);this.$lastSuggestion=d},_renderPending:function(a){var b=this.templates.pending;this._resetLastSuggestion();b&&this.$el.html(b({query:a,dataset:this.name}))},_renderNotFound:function(a){var b=this.templates.notFound;this._resetLastSuggestion();b&&this.$el.html(b({query:a,dataset:this.name}))},_empty:function(){this.$el.empty();this._resetLastSuggestion()},_getSuggestionsFragment:function(c,d){var f=this,g;g=
document.createDocumentFragment();e.each(d,function(b){var d;d=f._injectQuery(c,b);b=a(f.templates.suggestion(d)).data("tt-selectable-dataset",f.name).data("tt-selectable-object",b).data("tt-selectable-display",f.displayFn(b)).addClass(f.classes.suggestion+" "+f.classes.selectable);g.appendChild(b[0])});this.highlight&&b({className:this.classes.highlight,node:g,pattern:c});return a(g)},_getFooter:function(a,b){return this.templates.footer?this.templates.footer({query:a,suggestions:b,dataset:this.name}):
null},_getHeader:function(a,b){return this.templates.header?this.templates.header({query:a,suggestions:b,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=a()},_injectQuery:function(a,b){return e.isObject(b)?e.mixin({_query:a},b):b},update:function(b){function c(a){f||(f=!0,a=(a||[]).slice(0,d.limit),g=a.length,d._overwrite(b,a),g<d.limit&&d.async&&d.trigger("asyncRequested",b,d.name))}var d=this,e=!1,f=!1,g=0;this.cancel();this.cancel=function(){e=!0;d.cancel=a.noop;
d.async&&d.trigger("asyncCanceled",b,d.name)};this.source(b,c,function(c){c=c||[];if(!e&&g<d.limit){d.cancel=a.noop;var f=Math.abs(g-d.limit);g+=f;d._append(b,c.slice(0,f));d.async&&d.trigger("asyncReceived",b,d.name)}});!f&&c([])},cancel:a.noop,clear:function(){this._empty();this.cancel();this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=a("<div>")}});return c}(),n=function(){function b(b,c){var d=this;b=b||{};b.node||a.error("node is required");
c.mixin(this);this.$node=a(b.node);this.query=null;this.datasets=e.map(b.datasets,function(b){var e=d.$node.find(b.node).first();b.node=e.length?e:a("<div>").appendTo(d.$node);return new h(b,c)})}e.mixin(b.prototype,d,{_onSelectableClick:function(b){this.trigger("selectableClicked",a(b.currentTarget))},_onRendered:function(a,b,c,d){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetRendered",b,c,d)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,
this._allDatasetsEmpty());this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return e.every(this.datasets,e.bind(function(a){a=a.isEmpty();this.$node.attr("aria-expanded",!a);return a},this))},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var a=this.getActiveSelectable();a&&a.removeClass(this.classes.cursor)},_ensureVisible:function(a){var b,c,d;b=a.position().top;a=b+a.outerHeight(!0);
c=this.$node.scrollTop();d=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10);0>b?this.$node.scrollTop(c+b):d<a&&this.$node.scrollTop(c+(a-d))},bind:function(){var b=this,c;c=e.bind(this._onSelectableClick,this);this.$node.on("click.tt",this.selectors.selectable,c);this.$node.on("mouseover",this.selectors.selectable,function(){b.setCursor(a(this))});this.$node.on("mouseleave",function(){b._removeCursor()});e.each(this.datasets,function(a){a.onSync("asyncRequested",
b._propagate,b).onSync("asyncCanceled",b._propagate,b).onSync("asyncReceived",b._propagate,b).onSync("rendered",b._onRendered,b).onSync("cleared",b._onCleared,b)});return this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.scrollTop(0);this.$node.addClass(this.classes.open)},close:function(){this.$node.attr("aria-expanded",!1);this.$node.removeClass(this.classes.open);this._removeCursor()},setLanguageDirection:function(a){this.$node.attr("dir",a)},selectableRelativeToCursor:function(a){var b,
c;c=this.getActiveSelectable();b=this._getSelectables();a=((c?b.index(c):-1)+a+1)%(b.length+1)-1;a=-1>a?b.length-1:a;return-1===a?null:b.eq(a)},setCursor:function(a){this._removeCursor();if(a=a&&a.first())a.addClass(this.classes.cursor),this._ensureVisible(a)},getSelectableData:function(a){return a&&a.length?h.extractData(a):null},getActiveSelectable:function(){var a=this._getSelectables().filter(this.selectors.cursor).first();return a.length?a:null},getTopSelectable:function(){var a=this._getSelectables().first();
return a.length?a:null},update:function(a){function b(b){b.update(a)}var c=a!==this.query;c&&(this.query=a,e.each(this.datasets,b));return c},empty:function(){e.each(this.datasets,function(a){a.clear()});this.query=null;this.$node.addClass(this.classes.empty)},destroy:function(){this.$node.off(".tt");this.$node=a("<div>");e.each(this.datasets,function(a){a.destroy()})}});return b}(),m=function(){function b(b){this.$el=a("<span></span>",{role:"status","aria-live":"polite"}).css({position:"absolute",
padding:"0",border:"0",height:"1px",width:"1px","margin-bottom":"-1px","margin-right":"-1px",overflow:"hidden",clip:"rect(0 0 0 0)","white-space":"nowrap"});b.$input.after(this.$el);e.each(b.menu.datasets,e.bind(function(a){a.onSync&&(a.onSync("rendered",e.bind(this.update,this)),a.onSync("cleared",e.bind(this.cleared,this)))},this))}e.mixin(b.prototype,{update:function(a,b){var c,d,e=b.length;1===e?(c="result",d="is"):(c="results",d="are");this.$el.text(e+" "+c+" "+d+" available, use up and down arrow keys to navigate.")},
cleared:function(){this.$el.text("")}});return b}(),t=function(){function a(){n.apply(this,[].slice.call(arguments,0))}var b=n.prototype;e.mixin(a.prototype,n.prototype,{open:function(){!this._allDatasetsEmpty()&&this._show();return b.open.apply(this,[].slice.call(arguments,0))},close:function(){this._hide();return b.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show();return b._onRendered.apply(this,[].slice.call(arguments,
0))},_onCleared:function(){this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show();return b._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(a){this.$node.css("ltr"===a?this.css.ltr:this.css.rtl);return b.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}});return a}(),w=function(){function b(b,c){var f,g,h,k,l,m,p,n,t,u,w;b=b||{};b.input||a.error("missing input");
b.menu||a.error("missing menu");b.eventBus||a.error("missing event bus");c.mixin(this);this.eventBus=b.eventBus;this.minLength=e.isNumber(b.minLength)?b.minLength:1;this.input=b.input;this.menu=b.menu;this.enabled=!0;this.autoselect=!!b.autoselect;this.active=!1;this.input.hasFocus()&&this.activate();this.dir=this.input.getLangDir();this._hacks();this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",
this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this);f=d(this,"activate","open","_onFocused");g=d(this,"deactivate","_onBlurred");h=d(this,"isActive","isOpen","_onEnterKeyed");k=d(this,"isActive","isOpen","_onTabKeyed");l=d(this,"isActive","_onEscKeyed");m=d(this,"isActive","open","_onUpKeyed");p=d(this,"isActive","open","_onDownKeyed");n=d(this,"isActive","isOpen",
"_onLeftKeyed");t=d(this,"isActive","isOpen","_onRightKeyed");u=d(this,"_openIfActive","_onQueryChanged");w=d(this,"_openIfActive","_onWhitespaceChanged");this.input.bind().onSync("focused",f,this).onSync("blurred",g,this).onSync("enterKeyed",h,this).onSync("tabKeyed",k,this).onSync("escKeyed",l,this).onSync("upKeyed",m,this).onSync("downKeyed",p,this).onSync("leftKeyed",n,this).onSync("rightKeyed",t,this).onSync("queryChanged",u,this).onSync("whitespaceChanged",w,this).onSync("langDirChanged",this._onLangDirChanged,
this)}function d(a){var b=[].slice.call(arguments,1);return function(){var c=[].slice.call(arguments);e.each(b,function(b){return a[b].apply(a,c)})}}e.mixin(b.prototype,{_hacks:function(){var b,c;b=this.input.$input||a("<div>");c=this.menu.$node||a("<div>");b.on("blur.tt",function(a){var d,f;d=document.activeElement;f=c.is(d);d=0<c.has(d).length;e.isMsie()&&(f||d)&&(a.preventDefault(),a.stopImmediatePropagation(),e.defer(function(){b.focus()}))});c.on("mousedown.tt",function(a){a.preventDefault()})},
_onSelectableClicked:function(a,b){this.select(b)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(a,b,c,d){this._updateHint();this.autoselect&&(a=this.selectors.cursor.substr(1),this.menu.$node.find(this.selectors.suggestion).first().addClass(a));this.eventBus.trigger("render",b,c,d)},_onAsyncRequested:function(a,b,c){this.eventBus.trigger("asyncrequest",c,b)},_onAsyncCanceled:function(a,b,c){this.eventBus.trigger("asynccancel",c,b)},_onAsyncReceived:function(a,b,c){this.eventBus.trigger("asyncreceive",
c,b)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())?this.select(c)&&(b.preventDefault(),b.stopPropagation()):this.autoselect&&this.select(this.menu.getTopSelectable())&&(b.preventDefault(),b.stopPropagation())},_onTabKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())?
this.select(c)&&b.preventDefault():(c=this.menu.getTopSelectable())&&this.autocomplete(c)&&b.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||
this.menu.getTopSelectable())},_onQueryChanged:function(a,b){this._minLengthMet(b)?this.menu.update(b):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(a,b){this.dir!==b&&(this.dir=b,this.menu.setLanguageDirection(b))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(a){a=e.isString(a)?a:this.input.getQuery()||"";return a.length>=this.minLength},_updateHint:function(){var a,b,d;a=this.menu.getTopSelectable();b=this.menu.getSelectableData(a);
a=this.input.getInputValue();!b||e.isBlankString(a)||this.input.hasOverflow()?this.input.clearHint():(d=c.normalizeQuery(a),d=e.escapeRegExChars(d),d=new RegExp("^(?:"+d+")(.+$)","i"),(b=d.exec(b.val))&&this.input.setHint(a+b[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){if(this.isActive())return!0;if(!this.isEnabled()||this.eventBus.before("active"))return!1;this.active=
!0;this.eventBus.trigger("active");return!0},deactivate:function(){if(this.isActive()){if(this.eventBus.before("idle"))return!1;this.active=!1;this.close();this.eventBus.trigger("idle")}return!0},isOpen:function(){return this.menu.isOpen()},open:function(){this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open"));return this.isOpen()},close:function(){this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),
this.eventBus.trigger("close"));return!this.isOpen()},setVal:function(a){this.input.setQuery(e.toStr(a))},getVal:function(){return this.input.getQuery()},select:function(a){return(a=this.menu.getSelectableData(a))&&!this.eventBus.before("select",a.obj,a.dataset)?(this.input.setQuery(a.val,!0),this.eventBus.trigger("select",a.obj,a.dataset),this.close(),!0):!1},autocomplete:function(a){var b;b=this.input.getQuery();return(a=this.menu.getSelectableData(a))&&b!==a.val&&!this.eventBus.before("autocomplete",
a.obj,a.dataset)?(this.input.setQuery(a.val),this.eventBus.trigger("autocomplete",a.obj,a.dataset),!0):!1},moveCursor:function(a){var b,c,d,e,f;b=this.input.getQuery();a=this.menu.selectableRelativeToCursor(a);d=(c=this.menu.getSelectableData(a))?c.obj:null;e=c?c.dataset:null;f=a?a.attr("id"):null;this.input.trigger("cursorchange",f);return this._minLengthMet()&&this.menu.update(b)||this.eventBus.before("cursorchange",d,e)?!1:(this.menu.setCursor(a),c?this.input.setInputValue(c.val):(this.input.resetInputValue(),
this._updateHint()),this.eventBus.trigger("cursorchange",d,e),!0)},destroy:function(){this.input.destroy();this.menu.destroy()}});return b}();(function(){function b(b,c){b.each(function(){var b=a(this),d;(d=b.data(B.typeahead))&&c(d,b)})}function d(a,b){return a.clone().addClass(b.classes.hint).removeData().css(b.css.hint).css(k(a)).prop({readonly:!0,required:!1}).removeAttr("id name placeholder").removeClass("required").attr({spellcheck:"false",tabindex:-1})}function h(a,b){a.data(B.attrs,{dir:a.attr("dir"),
autocomplete:a.attr("autocomplete"),spellcheck:a.attr("spellcheck"),style:a.attr("style")});a.addClass(b.classes.input).attr({spellcheck:!1});try{!a.attr("dir")&&a.attr("dir","auto")}catch(G){}return a}function k(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),backgroundRepeat:a.css("background-repeat"),
backgroundSize:a.css("background-size")}}function q(a){var b,c;b=a.data(B.www);c=a.parent().filter(b.selectors.wrapper);e.each(a.data(B.attrs),function(b,c){e.isUndefined(b)?a.removeAttr(c):a.attr(c,b)});a.removeData(B.typeahead).removeData(B.www).removeData(B.attr).removeClass(b.classes.input);c.length&&(a.detach().insertAfter(c),c.remove())}function A(b){b=e.isJQuery(b)||e.isElement(b)?a(b).first():[];return b.length?b:null}var z,B,E;z=a.fn.typeahead;B={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"};
E={initialize:function(b,k){var l;k=e.isArray(k)?k:[].slice.call(arguments,1);b=b||{};l=f(b.classNames);return this.each(function(){var f,q,p,u,z,D;e.each(k,function(a){a.highlight=!!b.highlight});f=a(this);q=a(l.html.wrapper);p=A(b.hint);u=A(b.menu);z=!1!==b.hint&&!p;D=!1!==b.menu&&!u;z&&(p=d(f,l));D&&(u=a(l.html.menu).css(l.css.menu));p&&p.val("");f=h(f,l);if(z||D)q.css(l.css.wrapper),f.css(z?l.css.input:l.css.inputWithNoHint),f.wrap(q).parent().prepend(z?p:null).append(D?u:null);z=D?t:n;q=new g({el:f});
p=new c({hint:p,input:f},l);u=new z({node:u,datasets:k},l);new m({$input:f,menu:u});u=new w({input:p,menu:u,eventBus:q,minLength:b.minLength,autoselect:b.autoselect},l);f.data(B.www,l);f.data(B.typeahead,u)})},isEnabled:function(){var a;b(this.first(),function(b){a=b.isEnabled()});return a},enable:function(){b(this,function(a){a.enable()});return this},disable:function(){b(this,function(a){a.disable()});return this},isActive:function(){var a;b(this.first(),function(b){a=b.isActive()});return a},activate:function(){b(this,
function(a){a.activate()});return this},deactivate:function(){b(this,function(a){a.deactivate()});return this},isOpen:function(){var a;b(this.first(),function(b){a=b.isOpen()});return a},open:function(){b(this,function(a){a.open()});return this},close:function(){b(this,function(a){a.close()});return this},select:function(c){var d=!1,e=a(c);b(this.first(),function(a){d=a.select(e)});return d},autocomplete:function(c){var d=!1,e=a(c);b(this.first(),function(a){d=a.autocomplete(e)});return d},moveCursor:function(a){var c=
!1;b(this.first(),function(b){c=b.moveCursor(a)});return c},val:function(a){var c;if(arguments.length)return b(this,function(b){b.setVal(e.toStr(a))}),this;b(this.first(),function(a){c=a.getVal()});return c},destroy:function(){b(this,function(a,b){q(b);a.destroy()});return this}};a.fn.typeahead=function(a){return E[a]?E[a].apply(this,[].slice.call(arguments,1)):E.initialize.apply(this,arguments)};a.fn.typeahead.noConflict=function(){a.fn.typeahead=z;return this}})()});(function(a,e){function f(b,c,e,h,l){var k=!1;b.contents().detach().each(function(){var m=a(this);if("undefined"==typeof this)return!0;if(m.is("script, .dotdotdot-keep"))b.append(m);else{if(k)return!0;b.append(m);if(l&&!m.is(h.after)&&!m.find(h.after).length)b[b.is("a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style")?"after":"append"](l);d(e,h)&&(k=3==this.nodeType?g(m,c,e,h,l):f(m,c,e,h,l));k||l&&l.detach()}});
c.addClass("is-truncated");return k}function g(c,e,f,g,l){var k=c[0];if(!k)return!1;var m=n(k),q=-1!==m.indexOf(" ")?" ":"\u3000",q="letter"==g.wrap?"":q,p=m.split(q),u=-1,w=-1,z=0,A=p.length-1;g.fallbackToLetter&&0==z&&0==A&&(q="",p=m.split(q),A=p.length-1);for(;z<=A&&(0!=z||0!=A);){m=Math.floor((z+A)/2);if(m==w)break;w=m;h(k,p.slice(0,w+1).join(q)+g.ellipsis);f.children().each(function(){a(this).toggle().toggle()});d(f,g)?(A=w,g.fallbackToLetter&&0==z&&0==A&&(q="",p=p[0].split(q),w=u=-1,z=0,A=p.length-
1)):z=u=w}-1==u||1==p.length&&0==p[0].length?(f=c.parent(),c.detach(),c=l&&l.closest(f).length?l.length:0,f.contents().length>c?k=t(f.contents().eq(-1-c),e):(k=t(f,e,!0),c||f.detach()),k&&(m=b(n(k),g),h(k,m),c&&l&&a(k).parent().append(l))):(m=b(p.slice(0,u+1).join(q),g),h(k,m));return!0}function d(a,b){return a.innerHeight()>b.maxHeight}function b(b,c){for(;-1<a.inArray(b.slice(-1),c.lastCharacter.remove);)b=b.slice(0,-1);0>a.inArray(b.slice(-1),c.lastCharacter.noEllipsis)&&(b+=c.ellipsis);return b}
function c(a){return{width:a.innerWidth(),height:a.innerHeight()}}function h(a,b){a.innerText?a.innerText=b:a.nodeValue?a.nodeValue=b:a.textContent&&(a.textContent=b)}function n(a){return a.innerText?a.innerText:a.nodeValue?a.nodeValue:a.textContent?a.textContent:""}function m(a){do a=a.previousSibling;while(a&&1!==a.nodeType&&3!==a.nodeType);return a}function t(b,c,d){var e=b&&b[0];if(e){if(!d){if(3===e.nodeType)return e;if(a.trim(b.text()))return t(b.contents().last(),c)}for(d=m(e);!d;){b=b.parent();
if(b.is(c)||!b.length)return!1;d=m(b[0])}if(d)return t(a(d),c)}return!1}function w(b,c){return b?"string"===typeof b?(b=a(b,c),b.length?b:!1):b.jquery?b:!1:!1}if(!a.fn.dotdotdot){a.fn.dotdotdot=function(b){if(0==this.length)return a.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(1<this.length)return this.each(function(){a(this).dotdotdot(b)});var e=this,g=e.contents();e.data("dotdotdot")&&e.trigger("destroy.dot");e.data("dotdotdot-style",e.attr("style")||"");e.css("word-wrap",
"break-word");"nowrap"===e.css("white-space")&&e.css("white-space","normal");e.bind_events=function(){e.bind("update.dot",function(b,c){e.removeClass("is-truncated");b.preventDefault();b.stopPropagation();switch(typeof h.height){case "number":h.maxHeight=h.height;break;case "function":h.maxHeight=h.height.call(e[0]);break;default:for(var l=h,m=e.innerHeight(),p=["paddingTop","paddingBottom"],q=0,t=p.length;q<t;q++){var u=parseInt(e.css(p[q]),10);isNaN(u)&&(u=0);m-=u}l.maxHeight=m}h.maxHeight+=h.tolerance;
if("undefined"!=typeof c){if("string"==typeof c||"nodeType"in c&&1===c.nodeType)c=a("<div />").append(c).contents();c instanceof a&&(g=c)}n=e.wrapInner('<div class="dotdotdot" />').children();n.contents().detach().end().append(g.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});l=p=!1;k.afterElement&&(p=k.afterElement.clone(!0),p.show(),k.afterElement.detach());if(d(n,h))if("children"==h.wrap){l=n;m=h;q=l.children();t=!1;l.empty();
for(var u=0,w=q.length;u<w;u++){var z=q.eq(u);l.append(z);p&&l.append(p);if(d(l,m)){z.remove();t=!0;break}else p&&p.detach()}l=t}else l=f(n,e,n,h,p);n.replaceWith(n.contents());n=null;a.isFunction(h.callback)&&h.callback.call(e[0],l,g);return k.isTruncated=l}).bind("isTruncated.dot",function(a,b){a.preventDefault();a.stopPropagation();"function"==typeof b&&b.call(e[0],k.isTruncated);return k.isTruncated}).bind("originalContent.dot",function(a,b){a.preventDefault();a.stopPropagation();"function"==
typeof b&&b.call(e[0],g);return g}).bind("destroy.dot",function(a){a.preventDefault();a.stopPropagation();e.unwatch().unbind_events().contents().detach().end().append(g).attr("style",e.data("dotdotdot-style")||"").removeClass("is-truncated").data("dotdotdot",!1)});return e};e.unbind_events=function(){e.unbind(".dot");return e};e.watch=function(){e.unwatch();if("window"==h.watch){var b=a(window),d=b.width(),f=b.height();b.bind("resize.dot"+k.dotId,function(){d==b.width()&&f==b.height()&&h.windowResizeFix||
(d=b.width(),f=b.height(),p&&clearInterval(p),p=setTimeout(function(){e.trigger("update.dot")},100))})}else m=c(e),p=setInterval(function(){if(e.is(":visible")){var a=c(e);if(m.width!=a.width||m.height!=a.height)e.trigger("update.dot"),m=a}},500);return e};e.unwatch=function(){a(window).unbind("resize.dot"+k.dotId);p&&clearInterval(p);return e};var h=a.extend(!0,{},a.fn.dotdotdot.defaults,b),k={},m={},p=null,n=null;h.lastCharacter.remove instanceof Array||(h.lastCharacter.remove=a.fn.dotdotdot.defaultArrays.lastCharacter.remove);
h.lastCharacter.noEllipsis instanceof Array||(h.lastCharacter.noEllipsis=a.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis);k.afterElement=w(h.after,e);k.isTruncated=!1;k.dotId=l++;e.data("dotdotdot",!0).bind_events().trigger("update.dot");h.watch&&e.watch();return e};a.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0};a.fn.dotdotdot.defaultArrays={lastCharacter:{remove:" \u3000,;.!?".split(""),
noEllipsis:[]}};a.fn.dotdotdot.debug=function(a){};var l=1,p=a.fn.html;a.fn.html=function(b){return b!=e&&!a.isFunction(b)&&this.data("dotdotdot")?this.trigger("update",[b]):p.apply(this,arguments)};var u=a.fn.text;a.fn.text=function(b){return b!=e&&!a.isFunction(b)&&this.data("dotdotdot")?(b=a("<div />").text(b).html(),this.trigger("update",[b])):u.apply(this,arguments)}}})(jQuery);
jQuery(document).ready(function(a){a(".dot-ellipsis").each(function(){var e=a(this).hasClass("dot-resize-update"),f=a(this).hasClass("dot-timer-update"),g=0,d=a(this).attr("class").split(/\s+/);a.each(d,function(a,c){var b=c.match(/^dot-height-(\d+)$/);null!==b&&(g=Number(b[1]))});d={};f&&(d.watch=!0);e&&(d.watch="window");0<g&&(d.height=g);a(this).dotdotdot(d)})});jQuery(window).load(function(){jQuery(".dot-ellipsis.dot-load-update").trigger("update.dot")});!function(a){function e(b){var c=this.viewer.viewport.deltaPointsFromPixels(b.delta,!0);b=this.viewer.viewport.pointFromPixel(b.position,!0);var d=new a.Point(b.x-c.x,b.y-c.y);if(this.rect){var e;(this.restrictToImage&&(e=this.rect.clone()),this.rectDone)?(c=this.rect.getAngleFromCenter(d),b=this.rect.getAngleFromCenter(b),this.rect.rotation=(this.rect.rotation+c-b)%Math.PI):this.startRotated?this.rect=n(this.rotatedStartPoint,b,this.startRotatedHeight):(this.rect.width+=c.x,this.rect.height+=c.y);
this.restrictToImage&&!this.rect.fitsIn(new a.Rect(0,0,1,1))&&(this.rect=e)}else{if(this.restrictToImage){if(!(0<=d.x&&1>=d.x&&0<=d.y&&1>=d.y))return;for(var f in{x:0,y:0})e=b[f]-c[f],1>e&&0<e&&(1<b[f]?(c[f]-=b[f]-1,b[f]=1):0>b[f]&&(c[f]-=b[f],b[f]=0))}this.startRotated?(this.rotatedStartPoint=d,this.rect=n(d,b,this.startRotatedHeight)):this.rect=new a.SelectionRect(d.x,d.y,c.x,c.y);this.rectDone=!1}this.draw()}function f(){this.rectDone=!0}function g(){this.viewer.canvas.focus()}function d(b){a.addClass(this.element,
"dragging");b=this.viewer.viewport.deltaPointsFromPixels(b.delta,!0);this.rect.x+=b.x;this.rect.y+=b.y;this.restrictToImage&&!this.rect.fitsIn(new a.Rect(0,0,1,1))&&(this.rect.x-=b.x,this.rect.y-=b.y);this.draw()}function b(){a.removeClass(this.element,"dragging")}function c(b,c){var d,e=c.delta,f=this.rect.getDegreeRotation(),g=this.restrictToImage?this.rect.clone():null;switch(0!==f&&(e=e.rotate(-1*f,new a.Point(0,0)),d=this.rect.getCenter()),e=this.viewer.viewport.deltaPointsFromPixels(e,!0),b){case 0:this.rect.y+=
e.y;this.rect.height-=e.y;break;case 1:this.rect.width+=e.x;break;case 2:this.rect.height+=e.y;break;case 3:this.rect.x+=e.x;this.rect.width-=e.x;break;case .5:this.rect.y+=e.y;this.rect.height-=e.y;this.rect.x+=e.x;this.rect.width-=e.x;break;case 1.5:this.rect.y+=e.y;this.rect.height-=e.y;this.rect.width+=e.x;break;case 2.5:this.rect.width+=e.x;this.rect.height+=e.y;break;case 3.5:this.rect.height+=e.y,this.rect.x+=e.x,this.rect.width-=e.x}0!==f&&(e=this.rect.getCenter(),e=e.rotate(f,d).minus(e),
this.rect.x+=e.x,this.rect.y+=e.y);this.restrictToImage&&!this.rect.fitsIn(new a.Rect(0,0,1,1))&&(this.rect=g);this.draw()}function h(a){a=a.keyCode?a.keyCode:a.charCode;13===a?this.confirm():String.fromCharCode(a)===this.keyboardShortcut&&this.toggleState()}function n(b,c,d){b.x>c.x&&(c=b=c);var e=c.minus(b);c=b.distanceTo(c);var f=-1*Math.atan2(e.x,e.y)+Math.PI/2;b=new a.Point(e.x/2+b.x,e.y/2+b.y);b=new a.SelectionRect(b.x-c/2,b.y-d/2,c,d,f);d=new a.Point(0,d);return d=d.rotate(b.getDegreeRotation(),
new a.Point(0,0)),b.x+=d.x/2,b.y+=d.y/2,b}if(!a.version||2>a.version.major)throw Error("This version of OpenSeadragonSelection requires OpenSeadragon version 2.0.0+");a.Viewer.prototype.selection=function(b){return(!this.selectionInstance||b)&&(b=b||{},b.viewer=this,this.selectionInstance=new a.Selection(b)),this.selectionInstance};a.Selection=function(m){a.extend(!0,this,{viewer:null,isSelecting:!1,buttonActiveImg:!1,rectDone:!0,element:null,toggleButton:null,showSelectionControl:!0,showConfirmDenyButtons:!0,
styleConfirmDenyButtons:!0,returnPixelCoordinates:!0,keyboardShortcut:"c",rect:null,startRotated:!1,startRotatedHeight:.1,restrictToImage:!1,onSelection:null,prefixUrl:null,navImages:{selection:{REST:"selection_rest.png",GROUP:"selection_grouphover.png",HOVER:"selection_hover.png",DOWN:"selection_pressed.png"},selectionConfirm:{REST:"selection_confirm_rest.png",GROUP:"selection_confirm_grouphover.png",HOVER:"selection_confirm_hover.png",DOWN:"selection_confirm_pressed.png"},selectionCancel:{REST:"selection_cancel_rest.png",
GROUP:"selection_cancel_grouphover.png",HOVER:"selection_cancel_hover.png",DOWN:"selection_cancel_pressed.png"}}},m);a.extend(!0,this.navImages,this.viewer.navImages);this.element||(this.element=a.makeNeutralElement("div"),this.element.style.background="rgba(0, 0, 0, 0.1)",this.element.className="selection-box");this.borders=this.borders||[];for(var n=[],w=0;4>w;w++)this.borders[w]||(this.borders[w]=a.makeNeutralElement("div"),this.borders[w].className="border-"+w,this.borders[w].style.position="absolute",
this.borders[w].style.width="1px",this.borders[w].style.height="1px",this.borders[w].style.background="#fff"),m=a.makeNeutralElement("div"),m.className="border-"+w+"-handle",m.style.position="absolute",m.style.top="50%",m.style.left="50%",m.style.width="6px",m.style.height="6px",m.style.margin="-4px 0 0 -4px",m.style.background="#000",m.style.border="1px solid #ccc",new a.MouseTracker({element:this.borders[w],dragHandler:c.bind(this,w)}),n[w]=a.makeNeutralElement("div"),n[w].className="corner-"+w+
"-handle",n[w].style.position="absolute",n[w].style.width="6px",n[w].style.height="6px",n[w].style.background="#000",n[w].style.border="1px solid #ccc",new a.MouseTracker({element:n[w],dragHandler:c.bind(this,w+.5)}),this.borders[w].appendChild(m),this.element.appendChild(this.borders[w]),setTimeout(this.element.appendChild.bind(this.element,n[w]),0);this.borders[0].style.top=0;this.borders[0].style.width="100%";this.borders[1].style.right=0;this.borders[1].style.height="100%";this.borders[2].style.bottom=
0;this.borders[2].style.width="100%";this.borders[3].style.left=0;this.borders[3].style.height="100%";n[0].style.top="-3px";n[0].style.left="-3px";n[1].style.top="-3px";n[1].style.right="-3px";n[2].style.bottom="-3px";n[2].style.right="-3px";n[3].style.bottom="-3px";n[3].style.left="-3px";this.overlay||(this.overlay=new a.SelectionOverlay(this.element,this.rect||new a.SelectionRect));this.innerTracker=new a.MouseTracker({element:this.element,clickTimeThreshold:this.viewer.clickTimeThreshold,clickDistThreshold:this.viewer.clickDistThreshold,
dragHandler:a.delegate(this,d),dragEndHandler:a.delegate(this,b),clickHandler:a.delegate(this,g)});this.outerTracker=new a.MouseTracker({element:this.viewer.drawer.canvas,clickTimeThreshold:this.viewer.clickTimeThreshold,clickDistThreshold:this.viewer.clickDistThreshold,dragHandler:a.delegate(this,e),dragEndHandler:a.delegate(this,f),clickHandler:a.delegate(this,g),startDisabled:!this.isSelecting});this.keyboardShortcut&&a.addEvent(this.viewer.container,"keypress",a.delegate(this,h),!1);m=this.prefixUrl||
this.viewer.prefixUrl||"";var l=(w=this.viewer.buttons&&this.viewer.buttons.buttons)?this.viewer.buttons.buttons[0]:null,n=l?l.onFocus:null,l=l?l.onBlur:null;if(this.showSelectionControl&&(this.toggleButton=new a.Button({element:this.toggleButton?a.getElement(this.toggleButton):null,clickTimeThreshold:this.viewer.clickTimeThreshold,clickDistThreshold:this.viewer.clickDistThreshold,tooltip:a.getString("Tooltips.SelectionToggle")||"Toggle selection",srcRest:m+this.navImages.selection.REST,srcGroup:m+
this.navImages.selection.GROUP,srcHover:m+this.navImages.selection.HOVER,srcDown:m+this.navImages.selection.DOWN,onRelease:this.toggleState.bind(this),onFocus:n,onBlur:l}),w&&(this.viewer.buttons.buttons.push(this.toggleButton),this.viewer.buttons.element.appendChild(this.toggleButton.element)),this.toggleButton.imgDown&&(this.buttonActiveImg=this.toggleButton.imgDown.cloneNode(!0),this.toggleButton.element.appendChild(this.buttonActiveImg))),this.showConfirmDenyButtons)this.confirmButton=new a.Button({element:this.confirmButton?
a.getElement(this.confirmButton):null,clickTimeThreshold:this.viewer.clickTimeThreshold,clickDistThreshold:this.viewer.clickDistThreshold,tooltip:a.getString("Tooltips.SelectionConfirm")||"Confirm selection",srcRest:m+this.navImages.selectionConfirm.REST,srcGroup:m+this.navImages.selectionConfirm.GROUP,srcHover:m+this.navImages.selectionConfirm.HOVER,srcDown:m+this.navImages.selectionConfirm.DOWN,onRelease:this.confirm.bind(this),onFocus:n,onBlur:l}),w=this.confirmButton.element,this.element.appendChild(w),
this.cancelButton=new a.Button({element:this.cancelButton?a.getElement(this.cancelButton):null,clickTimeThreshold:this.viewer.clickTimeThreshold,clickDistThreshold:this.viewer.clickDistThreshold,tooltip:a.getString("Tooltips.SelectionConfirm")||"Cancel selection",srcRest:m+this.navImages.selectionCancel.REST,srcGroup:m+this.navImages.selectionCancel.GROUP,srcHover:m+this.navImages.selectionCancel.HOVER,srcDown:m+this.navImages.selectionCancel.DOWN,onRelease:this.cancel.bind(this),onFocus:n,onBlur:l}),
m=this.cancelButton.element,this.element.appendChild(m),this.styleConfirmDenyButtons&&(w.style.position="absolute",w.style.top="50%",w.style.left="50%",w.style.transform="translate(-100%, -50%)",m.style.position="absolute",m.style.top="50%",m.style.left="50%",m.style.transform="translate(0, -50%)");this.viewer.addHandler("selection",this.onSelection);this.viewer.addHandler("open",this.draw.bind(this));this.viewer.addHandler("animation",this.draw.bind(this));this.viewer.addHandler("resize",this.draw.bind(this));
this.viewer.addHandler("rotate",this.draw.bind(this))};a.extend(a.Selection.prototype,a.ControlDock.prototype,{toggleState:function(){return this.setState(!this.isSelecting)},setState:function(a){return this.isSelecting=a,this.outerTracker.setTracking(a),a?this.draw():this.undraw(),this.buttonActiveImg&&(this.buttonActiveImg.style.visibility=a?"visible":"hidden"),this.viewer.raiseEvent("selection_toggle",{enabled:a}),this},enable:function(){return this.setState(!0)},disable:function(){return this.setState(!1)},
draw:function(){return this.rect&&(this.overlay.update(this.rect.normalize()),this.overlay.drawHTML(this.viewer.drawer.container,this.viewer.viewport)),this},undraw:function(){return this.overlay.destroy(),this.rect=null,this},confirm:function(){if(this.rect){var b=this.rect.normalize();if(this.returnPixelCoordinates){var c=this.viewer.viewport.viewportToImageRectangle(b),c=a.SelectionRect.fromRect(c).round();c.rotation=b.rotation;b=c}this.viewer.raiseEvent("selection",b);this.undraw()}return this},
cancel:function(){return this.viewer.raiseEvent("selection_cancel",!1),this.undraw()}})}(OpenSeadragon);
(function(a){a.SelectionOverlay=function(e,f){a.Overlay.apply(this,arguments);a.isPlainObject(e)?this.rotation=e.location.rotation||0:this.rotation=f.rotation||0};a.SelectionOverlay.prototype=a.extend(Object.create(a.Overlay.prototype),{drawHTML:function(){a.Overlay.prototype.drawHTML.apply(this,arguments);this.style.transform=this.style.transform.replace(/ ?rotate\(.+rad\)/,"")+" rotate("+this.rotation+"rad)"},update:function(e){a.Overlay.prototype.update.apply(this,arguments);this.rotation=e.rotation||
0}})})(OpenSeadragon);
(function(a){a.SelectionRect=function(e,f,g,d,b){a.Rect.apply(this,[e,f,g,d]);this.rotation=b||0};a.SelectionRect.fromRect=function(e){return new a.SelectionRect(e.x,e.y,e.width,e.height)};a.SelectionRect.prototype=a.extend(Object.create(a.Rect.prototype),{clone:function(){return new a.SelectionRect(this.x,this.y,this.width,this.height,this.rotation)},equals:function(e){return a.Rect.prototype.equals.apply(this,[e])&&this.rotation===e.rotation},toString:function(){return"["+Math.round(100*this.x)/
100+","+Math.round(100*this.y)/100+","+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+"@"+Math.round(100*this.rotation)/100+"]"},swapWidthHeight:function(){var a=this.clone();return a.width=this.height,a.height=this.width,a.x+=(this.width-this.height)/2,a.y+=(this.height-this.width)/2,a},getDegreeRotation:function(){return 180/Math.PI*this.rotation},getAngleFromCenter:function(a){a=a.minus(this.getCenter());return Math.atan2(a.x,a.y)},round:function(){return new a.SelectionRect(Math.round(this.x),
Math.round(this.y),Math.round(this.width),Math.round(this.height),this.rotation)},normalize:function(){var a=this.clone();return 0>a.width&&(a.x+=a.width,a.width*=-1),0>a.height&&(a.y+=a.height,a.height*=-1),a.rotation%=Math.PI,a},fitsIn:function(a){for(var e=this.normalize(),g=[e.getTopLeft(),e.getTopRight(),e.getBottomRight(),e.getBottomLeft()],d=e.getCenter(),e=e.getDegreeRotation(),b=a.getBottomRight(),c=0;4>c;c++)if(g[c]=g[c].rotate(e,d),g[c].x<a.x||g[c].x>b.x||g[c].y<a.y||g[c].y>b.y)return!1;
return!0},reduceRotation:function(){var a;return this.rotation<Math.PI/-4?(a=this.swapWidthHeight(),a.rotation+=Math.PI/2):this.rotation>Math.PI/4?(a=this.swapWidthHeight(),a.rotation-=Math.PI/2):a=this.clone(),a}})})(OpenSeadragon);/*
 BSD
*/
!function(a,e){a.tracking=a.tracking||{};tracking.inherits=function(a,e){function d(){}d.prototype=e.prototype;a.superClass_=e.prototype;a.prototype=new d;a.prototype.constructor=a;a.base=function(a,c){var b=Array.prototype.slice.call(arguments,2);return e.prototype[c].apply(a,b)}};tracking.initUserMedia_=function(e,g){a.navigator.getUserMedia({video:!0,audio:!(!g||!g.audio)},function(d){try{e.src=a.URL.createObjectURL(d)}catch(b){e.src=d}},function(){throw Error("Cannot capture user camera.");})};
tracking.isNode=function(a){return a.nodeType||this.isWindow(a)};tracking.isWindow=function(a){return!!(a&&a.alert&&a.document)};tracking.one=function(a,e){return this.isNode(a)?a:(e||document).querySelector(a)};tracking.track=function(a,e,d){if(a=tracking.one(a),!a)throw Error("Element not found, try a different element or selector.");if(!e)throw Error("Tracker not specified, try `tracking.track(element, new tracking.FaceTracker())`.");switch(a.nodeName.toLowerCase()){case "canvas":return this.trackCanvas_(a,
e,d);case "img":return this.trackImg_(a,e,d);case "video":return d&&d.camera&&this.initUserMedia_(a,d),this.trackVideo_(a,e,d);default:throw Error("Element not supported, try in a canvas, img, or video.");}};tracking.trackCanvas_=function(a,e){var d=this,b=new tracking.TrackerTask(e);return b.on("run",function(){d.trackCanvasInternal_(a,e)}),b.run()};tracking.trackCanvasInternal_=function(a,e){var d=a.width,b=a.height,c=a.getContext("2d").getImageData(0,0,d,b);e.track(c.data,d,b)};tracking.trackImg_=
function(a,e){var d=a.width,b=a.height,c=document.createElement("canvas");c.width=d;c.height=b;var f=new tracking.TrackerTask(e);return f.on("run",function(){tracking.Canvas.loadImage(c,a.src,0,0,d,b,function(){tracking.trackCanvasInternal_(c,e)})}),f.run()};tracking.trackVideo_=function(e,g){var d,b,c=document.createElement("canvas"),f=c.getContext("2d"),n=function(){d=e.offsetWidth;b=e.offsetHeight;c.width=d;c.height=b};n();e.addEventListener("resize",n);var m,t=function(){m=a.requestAnimationFrame(function(){if(e.readyState===
e.HAVE_ENOUGH_DATA){try{f.drawImage(e,0,0,d,b)}catch(w){}tracking.trackCanvasInternal_(c,g)}t()})},n=new tracking.TrackerTask(g);return n.on("stop",function(){a.cancelAnimationFrame(m)}),n.on("run",function(){t()}),n.run()};a.URL||(a.URL=a.URL||a.webkitURL||a.msURL||a.oURL);navigator.getUserMedia||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)}(window);
(function(){tracking.EventEmitter=function(){};tracking.EventEmitter.prototype.events_=null;tracking.EventEmitter.prototype.addListener=function(a,e){if("function"!=typeof e)throw new TypeError("Listener must be a function");return this.events_||(this.events_={}),this.emit("newListener",a,e),this.events_[a]||(this.events_[a]=[]),this.events_[a].push(e),this};tracking.EventEmitter.prototype.listeners=function(a){return this.events_&&this.events_[a]};tracking.EventEmitter.prototype.emit=function(a){var e=
this.listeners(a);if(e){for(var f=Array.prototype.slice.call(arguments,1),g=0;g<e.length;g++)e[g]&&e[g].apply(this,f);return!0}return!1};tracking.EventEmitter.prototype.on=tracking.EventEmitter.prototype.addListener;tracking.EventEmitter.prototype.once=function(a,e){var f=this;f.on(a,function d(){f.removeListener(a,d);e.apply(this,arguments)})};tracking.EventEmitter.prototype.removeAllListeners=function(a){return this.events_?(a?delete this.events_[a]:delete this.events_,this):this};tracking.EventEmitter.prototype.removeListener=
function(a,e){if("function"!=typeof e)throw new TypeError("Listener must be a function");if(!this.events_)return this;var f=this.listeners(a);if(Array.isArray(f)){var g=f.indexOf(e);if(0>g)return this;f.splice(g,1)}return this};tracking.EventEmitter.prototype.setMaxListeners=function(){throw Error("Not implemented");}})();
(function(){tracking.Canvas={};tracking.Canvas.loadImage=function(a,e,f,g,d,b,c){var h=this,n=new window.Image;n.crossOrigin="*";n.onload=function(){var e=a.getContext("2d");a.width=d;a.height=b;e.drawImage(n,f,g,d,b);c&&c.call(h);n=null};n.src=e}})();
(function(){tracking.DisjointSet=function(a){if(void 0===a)throw Error("DisjointSet length not specified.");this.length=a;this.parent=new Uint32Array(a);for(var e=0;a>e;e++)this.parent[e]=e};tracking.DisjointSet.prototype.length=null;tracking.DisjointSet.prototype.parent=null;tracking.DisjointSet.prototype.find=function(a){return this.parent[a]===a?a:this.parent[a]=this.find(this.parent[a])};tracking.DisjointSet.prototype.union=function(a,e){var f=this.find(a),g=this.find(e);this.parent[f]=g}})();
(function(){tracking.Image={};tracking.Image.blur=function(a,e,f,g){if(g=Math.abs(g),1>=g)throw Error("Diameter should be greater than 1.");var d=g/2,b=Math.ceil(g)+(1-Math.ceil(g)%2);g=new Float32Array(b);for(var c=(d+.5)/3,d=1/Math.sqrt(2*Math.PI*c*c),h=-1/(2*c*c),c=0,n=Math.floor(b/2),m=0;b>m;m++){var t=m-n,t=d*Math.exp(t*t*h);g[m]=t;c+=t}for(b=0;b<g.length;b++)g[b]/=c;return this.separableConvolve(a,e,f,g,g,!1)};tracking.Image.computeIntegralImage=function(a,e,f,g,d,b,c){if(4>arguments.length)throw Error("You should specify at least one output array in the order: sum, square, tilted, sobel.");
var h;c&&(h=tracking.Image.sobel(a,e,f));for(var n=0;f>n;n++)for(var m=0;e>m;m++){var t=n*e*4+4*m,w=~~(.299*a[t]+.587*a[t+1]+.114*a[t+2]);if(g&&this.computePixelValueSAT_(g,e,n,m,w),d&&this.computePixelValueSAT_(d,e,n,m,w*w),b){var l=t-4*e;this.computePixelValueRSAT_(b,e,n,m,w,~~(.299*a[l]+.587*a[l+1]+.114*a[l+2])||0)}c&&this.computePixelValueSAT_(c,e,n,m,h[t])}};tracking.Image.computePixelValueRSAT_=function(a,e,f,g,d,b){f=f*e+g;a[f]=(a[f-e-1]||0)+(a[f-e+1]||0)-(a[f-e-e]||0)+d+b};tracking.Image.computePixelValueSAT_=
function(a,e,f,g,d){f=f*e+g;a[f]=(a[f-e]||0)+(a[f-1]||0)+d-(a[f-e-1]||0)};tracking.Image.grayscale=function(a,e,f,g){for(var d=new Uint8ClampedArray(g?a.length:a.length>>2),b=0,c=0,h=0;f>h;h++)for(var n=0;e>n;n++){var m=.299*a[c]+.587*a[c+1]+.114*a[c+2];d[b++]=m;g&&(d[b++]=m,d[b++]=m,d[b++]=a[c+3]);c+=4}return d};tracking.Image.horizontalConvolve=function(a,e,f,g,d){var b=g.length,c=Math.floor(b/2),h=new Float32Array(e*f*4);d=d?1:0;for(var n=0;f>n;n++)for(var m=0;e>m;m++){for(var t=n,w=m,l=4*(n*e+
m),p=0,u=0,k=0,q=0,A=0;b>A;A++)var z=4*(t*e+Math.min(e-1,Math.max(0,w+A-c))),B=g[A],p=p+a[z]*B,u=u+a[z+1]*B,k=k+a[z+2]*B,q=q+a[z+3]*B;h[l]=p;h[l+1]=u;h[l+2]=k;h[l+3]=q+d*(255-q)}return h};tracking.Image.verticalConvolve=function(a,e,f,g,d){var b=g.length,c=Math.floor(b/2),h=new Float32Array(e*f*4);d=d?1:0;for(var n=0;f>n;n++)for(var m=0;e>m;m++){for(var t=n,w=m,l=4*(n*e+m),p=0,u=0,k=0,q=0,A=0;b>A;A++)var z=4*(Math.min(f-1,Math.max(0,t+A-c))*e+w),B=g[A],p=p+a[z]*B,u=u+a[z+1]*B,k=k+a[z+2]*B,q=q+a[z+
3]*B;h[l]=p;h[l+1]=u;h[l+2]=k;h[l+3]=q+d*(255-q)}return h};tracking.Image.separableConvolve=function(a,e,f,g,d,b){a=this.verticalConvolve(a,e,f,d,b);return this.horizontalConvolve(a,e,f,g,b)};tracking.Image.sobel=function(a,e,f){a=this.grayscale(a,e,f,!0);var g=new Float32Array(e*f*4),d=new Float32Array([-1,0,1]),b=new Float32Array([1,2,1]),c=this.separableConvolve(a,e,f,d,b);a=this.separableConvolve(a,e,f,b,d);for(e=0;e<g.length;e+=4)f=c[e],d=a[e],f=Math.sqrt(d*d+f*f),g[e]=f,g[e+1]=f,g[e+2]=f,g[e+
3]=255;return g}})();
(function(){tracking.ViolaJones={};tracking.ViolaJones.REGIONS_OVERLAP=.5;tracking.ViolaJones.classifiers={};tracking.ViolaJones.detect=function(a,e,f,g,d,b,c,h){var n,m=0,t=[],w=new Int32Array(e*f),l=new Int32Array(e*f),p=new Int32Array(e*f);0<c&&(n=new Int32Array(e*f));tracking.Image.computeIntegralImage(a,e,f,w,l,p,n);a=h[0];var u=h[1];g*=d;for(var k=g*a|0,q=g*u|0;e>k&&f>q;){for(var A=g*b+.5|0,z=0;f-q>z;z+=A)for(var B=0;e-k>B;B+=A)0<c&&this.isTriviallyExcluded(c,n,z,B,e,k,q)||this.evalStages_(h,
w,l,p,z,B,e,k,q,g)&&(t[m++]={width:k,height:q,x:B,y:z});g*=d;k=g*a|0;q=g*u|0}return this.mergeRectangles_(t)};tracking.ViolaJones.isTriviallyExcluded=function(a,e,f,g,d,b,c){f=f*d+g;d=f+c*d;return a>(e[f]-e[f+b]-e[d]+e[d+b])/(b*c*255)?!0:!1};tracking.ViolaJones.evalStages_=function(a,e,f,g,d,b,c,h,n,m){var t=1/(h*n),w=d*c+b,l=w+h;n=w+n*c;h=n+h;var p=(e[w]-e[l]-e[n]+e[h])*t,w=(f[w]-f[l]-f[n]+f[h])*t-p*p;f=1;0<w&&(f=Math.sqrt(w));w=a.length;for(l=2;w>l;){n=0;h=a[l++];for(p=a[l++];p--;){for(var u=0,
k=a[l++],q=a[l++],A=0;q>A;A++){var z,B,E,D,F=b+a[l++]*m+.5|0,G=d+a[l++]*m+.5|0,P=a[l++]*m+.5|0,J=a[l++]*m+.5|0,I=a[l++];k?(z=F-J+P+(G+P+J-1)*c,B=F+(G-1)*c,E=F-J+(G+J-1)*c,D=F+P+(G+P-1)*c,u+=(g[z]+g[B]-g[E]-g[D])*I):(z=G*c+F,B=z+P,E=z+J*c,D=E+P,u+=(e[z]-e[B]-e[E]+e[D])*I)}k=a[l++];q=a[l++];A=a[l++];n+=k*f>u*t?q:A}if(h>n)return!1}return!0};tracking.ViolaJones.mergeRectangles_=function(a){for(var e=new tracking.DisjointSet(a.length),f=0;f<a.length;f++)for(var g=a[f],d=0;d<a.length;d++){var b=a[d];if(tracking.Math.intersectRect(g.x,
g.y,g.x+g.width,g.y+g.height,b.x,b.y,b.x+b.width,b.y+b.height)){var c=(Math.max(g.x,b.x)-Math.min(g.x+g.width,b.x+b.width))*(Math.max(g.y,b.y)-Math.min(g.y+g.height,b.y+b.height)),h=g.width*g.height,b=b.width*b.height;c/(h/b*h)>=this.REGIONS_OVERLAP&&c/(h/b*b)>=this.REGIONS_OVERLAP&&e.union(f,d)}}for(var n={},f=0;f<e.length;f++)g=e.find(f),n[g]?(n[g].total++,n[g].width+=a[f].width,n[g].height+=a[f].height,n[g].x+=a[f].x,n[g].y+=a[f].y):n[g]={total:1,width:a[f].width,height:a[f].height,x:a[f].x,y:a[f].y};
var m=[];return Object.keys(n).forEach(function(a){a=n[a];m.push({total:a.total,width:a.width/a.total+.5|0,height:a.height/a.total+.5|0,x:a.x/a.total+.5|0,y:a.y/a.total+.5|0})}),m}})();
(function(){tracking.Brief={};tracking.Brief.N=512;tracking.Brief.randomImageOffsets_={};tracking.Brief.randomWindowOffsets_=null;tracking.Brief.getDescriptors=function(a,e,f){for(var g=new Int32Array((f.length>>1)*(this.N>>5)),d=0,b=this.getRandomOffsets_(e),c=0,h=0;h<f.length;h+=2)for(var n=e*f[h+1]+f[h],m=0,t=0,w=this.N;w>t;t++)a[b[m++]+n]<a[b[m++]+n]&&(d|=1<<(31&t)),t+1&31||(g[c++]=d,d=0);return g};tracking.Brief.match=function(a,e,f,g){for(var d=a.length>>1,b=f.length>>1,c=Array(d),h=0;d>h;h++){for(var n=
1/0,m=0,t=0;b>t;t++){for(var w=0,l=0,p=this.N>>5;p>l;l++)w+=tracking.Math.hammingWeight(e[h*p+l]^g[t*p+l]);n>w&&(n=w,m=t)}c[h]={index1:h,index2:m,keypoint1:[a[2*h],a[2*h+1]],keypoint2:[f[2*m],f[2*m+1]],confidence:1-n/this.N}}return c};tracking.Brief.reciprocalMatch=function(a,e,f,g){var d=[];if(0===a.length||0===f.length)return d;var b=tracking.Brief.match(a,e,f,g);a=tracking.Brief.match(f,g,a,e);for(e=0;e<b.length;e++)a[b[e].index2].index2===e&&d.push(b[e]);return d};tracking.Brief.getRandomOffsets_=
function(a){if(!this.randomWindowOffsets_){for(var e=0,f=new Int32Array(4*this.N),g=0;g<this.N;g++)f[e++]=Math.round(tracking.Math.uniformRandom(-15,16)),f[e++]=Math.round(tracking.Math.uniformRandom(-15,16)),f[e++]=Math.round(tracking.Math.uniformRandom(-15,16)),f[e++]=Math.round(tracking.Math.uniformRandom(-15,16));this.randomWindowOffsets_=f}if(!this.randomImageOffsets_[a]){e=0;f=new Int32Array(2*this.N);for(g=0;g<this.N;g++)f[e++]=this.randomWindowOffsets_[4*g]*a+this.randomWindowOffsets_[4*g+
1],f[e++]=this.randomWindowOffsets_[4*g+2]*a+this.randomWindowOffsets_[4*g+3];this.randomImageOffsets_[a]=f}return this.randomImageOffsets_[a]}})();
(function(){tracking.Fast={};tracking.Fast.THRESHOLD=40;tracking.Fast.circles_={};tracking.Fast.findCorners=function(a,e,f,g){var d=this.getCircleOffsets_(e),b=new Int32Array(16),c=[];void 0===g&&(g=this.THRESHOLD);for(var h=3;f-3>h;h++)for(var n=3;e-3>n;n++){for(var m=h*e+n,t=a[m],w=0;16>w;w++)b[w]=a[m+d[w]];this.isCorner(t,b,g)&&(c.push(n,h),n+=3)}return c};tracking.Fast.isBrighter=function(a,e,f){return a-e>f};tracking.Fast.isCorner=function(a,e,f){if(this.isTriviallyExcluded(e,a,f))return!1;for(var g=
0;16>g;g++){for(var d=!0,b=!0,c=0;9>c;c++){var h=e[g+c&15];if(!this.isBrighter(a,h,f)&&(b=!1,!1===d))break;if(!this.isDarker(a,h,f)&&(d=!1,!1===b))break}if(b||d)return!0}return!1};tracking.Fast.isDarker=function(a,e,f){return e-a>f};tracking.Fast.isTriviallyExcluded=function(a,e,f){var g=0,d=a[8],b=a[12],c=a[4];a=a[0];return this.isBrighter(a,e,f)&&g++,this.isBrighter(c,e,f)&&g++,this.isBrighter(d,e,f)&&g++,this.isBrighter(b,e,f)&&g++,3>g&&(g=0,this.isDarker(a,e,f)&&g++,this.isDarker(c,e,f)&&g++,
this.isDarker(d,e,f)&&g++,this.isDarker(b,e,f)&&g++,3>g)?!0:!1};tracking.Fast.getCircleOffsets_=function(a){if(this.circles_[a])return this.circles_[a];var e=new Int32Array(16);return e[0]=-a-a-a,e[1]=e[0]+1,e[2]=e[1]+a+1,e[3]=e[2]+a+1,e[4]=e[3]+a,e[5]=e[4]+a,e[6]=e[5]+a-1,e[7]=e[6]+a-1,e[8]=e[7]-1,e[9]=e[8]-1,e[10]=e[9]-a-1,e[11]=e[10]-a-1,e[12]=e[11]-a,e[13]=e[12]-a,e[14]=e[13]-a+1,e[15]=e[14]-a+1,this.circles_[a]=e,e}})();
(function(){tracking.Math={};tracking.Math.distance=function(a,e,f,g){a=f-a;e=g-e;return Math.sqrt(a*a+e*e)};tracking.Math.hammingWeight=function(a){return a-=a>>1&1431655765,a=(858993459&a)+(a>>2&858993459),16843009*(a+(a>>4)&252645135)>>24};tracking.Math.uniformRandom=function(a,e){return a+Math.random()*(e-a)};tracking.Math.intersectRect=function(a,e,f,g,d,b,c,h){return!(d>f||a>c||b>g||e>h)}})();
(function(){tracking.Matrix={};tracking.Matrix.forEach=function(a,e,f,g,d){d=d||1;for(var b=0;f>b;b+=d)for(var c=0;e>c;c+=d){var h=b*e*4+4*c;g.call(this,a[h],a[h+1],a[h+2],a[h+3],h,b,c)}}})();(function(){tracking.EPnP={};tracking.EPnP.solve=function(a,e,f){}})();(function(){tracking.Tracker=function(){tracking.Tracker.base(this,"constructor")};tracking.inherits(tracking.Tracker,tracking.EventEmitter);tracking.Tracker.prototype.track=function(){}})();
(function(){tracking.TrackerTask=function(a){if(tracking.TrackerTask.base(this,"constructor"),!a)throw Error("Tracker instance not specified.");this.setTracker(a)};tracking.inherits(tracking.TrackerTask,tracking.EventEmitter);tracking.TrackerTask.prototype.tracker_=null;tracking.TrackerTask.prototype.running_=!1;tracking.TrackerTask.prototype.getTracker=function(){return this.tracker_};tracking.TrackerTask.prototype.inRunning=function(){return this.running_};tracking.TrackerTask.prototype.setRunning=
function(a){this.running_=a};tracking.TrackerTask.prototype.setTracker=function(a){this.tracker_=a};tracking.TrackerTask.prototype.run=function(){var a=this;if(!this.inRunning())return this.setRunning(!0),this.reemitTrackEvent_=function(e){a.emit("track",e)},this.tracker_.on("track",this.reemitTrackEvent_),this.emit("run"),this};tracking.TrackerTask.prototype.stop=function(){return this.inRunning()?(this.setRunning(!1),this.emit("stop"),this.tracker_.removeListener("track",this.reemitTrackEvent_),
this):void 0}})();
(function(){tracking.ColorTracker=function(a){tracking.ColorTracker.base(this,"constructor");"string"==typeof a&&(a=[a]);a&&(a.forEach(function(a){if(!tracking.ColorTracker.getColor(a))throw Error('Color not valid, try `new tracking.ColorTracker("magenta")`.');}),this.setColors(a))};tracking.inherits(tracking.ColorTracker,tracking.Tracker);tracking.ColorTracker.knownColors_={};tracking.ColorTracker.neighbours_={};tracking.ColorTracker.registerColor=function(a,e){tracking.ColorTracker.knownColors_[a]=e};
tracking.ColorTracker.getColor=function(a){return tracking.ColorTracker.knownColors_[a]};tracking.ColorTracker.prototype.colors=["magenta"];tracking.ColorTracker.prototype.minDimension=20;tracking.ColorTracker.prototype.maxDimension=1/0;tracking.ColorTracker.prototype.minGroupSize=30;tracking.ColorTracker.prototype.calculateDimensions_=function(a,e){for(var d=-1,b=-1,c=1/0,f=1/0,g=0;e>g;g+=2){var m=a[g],t=a[g+1];c>m&&(c=m);m>d&&(d=m);f>t&&(f=t);t>b&&(b=t)}return{width:d-c,height:b-f,x:c,y:f}};tracking.ColorTracker.prototype.getColors=
function(){return this.colors};tracking.ColorTracker.prototype.getMinDimension=function(){return this.minDimension};tracking.ColorTracker.prototype.getMaxDimension=function(){return this.maxDimension};tracking.ColorTracker.prototype.getMinGroupSize=function(){return this.minGroupSize};tracking.ColorTracker.prototype.getNeighboursForWidth_=function(a){if(tracking.ColorTracker.neighbours_[a])return tracking.ColorTracker.neighbours_[a];var e=new Int32Array(8);return e[0]=4*-a,e[1]=4*-a+4,e[2]=4,e[3]=
4*a+4,e[4]=4*a,e[5]=4*a-4,e[6]=-4,e[7]=4*-a-4,tracking.ColorTracker.neighbours_[a]=e,e};tracking.ColorTracker.prototype.mergeRectangles_=function(a){for(var e,d=[],b=this.getMinDimension(),c=this.getMaxDimension(),f=0;f<a.length;f++){var n=a[f];e=!0;for(var m=f+1;m<a.length;m++){var t=a[m];if(tracking.Math.intersectRect(n.x,n.y,n.x+n.width,n.y+n.height,t.x,t.y,t.x+t.width,t.y+t.height)){e=!1;var m=Math.min(n.x,t.x),w=Math.min(n.y,t.y),l=Math.max(n.x+n.width,t.x+t.width);t.height=Math.max(n.y+n.height,
t.y+t.height)-w;t.width=l-m;t.x=m;t.y=w;break}}e&&n.width>=b&&n.height>=b&&n.width<=c&&n.height<=c&&d.push(n)}return d};tracking.ColorTracker.prototype.setColors=function(a){this.colors=a};tracking.ColorTracker.prototype.setMinDimension=function(a){this.minDimension=a};tracking.ColorTracker.prototype.setMaxDimension=function(a){this.maxDimension=a};tracking.ColorTracker.prototype.setMinGroupSize=function(a){this.minGroupSize=a};tracking.ColorTracker.prototype.track=function(a,e,d){var b=this,c=this.getColors();
if(!c)throw Error('Colors not specified, try `new tracking.ColorTracker("magenta")`.');var f=[];c.forEach(function(c){f=f.concat(b.trackColor_(a,e,d,c))});this.emit("track",{data:f})};tracking.ColorTracker.prototype.trackColor_=function(f,g,d,b){var c,h,n,m,t,w=tracking.ColorTracker.knownColors_[b],l=new Int32Array(f.length>>2),p=new Int8Array(f.length),u=this.getMinGroupSize(),k=this.getNeighboursForWidth_(g),q=new Int32Array(f.length),A=[],z=-4;if(!w)return A;for(var B=0;d>B;B++)for(var E=0;g>E;E++)if(z+=
4,!p[z]){c=0;t=-1;q[++t]=z;q[++t]=B;q[++t]=E;for(p[z]=1;0<=t;)if(n=q[t--],h=q[t--],m=q[t--],w(f[m],f[m+1],f[m+2],f[m+3],m,h,n)){l[c++]=n;l[c++]=h;for(var D=0;D<k.length;D++){var F=m+k[D],G=h+a[D],P=n+e[D];!p[F]&&0<=G&&d>G&&0<=P&&g>P&&(q[++t]=F,q[++t]=G,q[++t]=P,p[F]=1)}}c>=u&&(c=this.calculateDimensions_(l,c))&&(c.color=b,A.push(c))}return this.mergeRectangles_(A)};tracking.ColorTracker.registerColor("cyan",function(a,e,d){var b=a-0,c=e-255,f=d-255;return 50<=e-a&&70<=d-a?!0:6400>b*b+c*c+f*f});tracking.ColorTracker.registerColor("magenta",
function(a,e,d){var b=a-255,c=e-0,f=d-255;return 50<=a-e&&50<=d-e?!0:19600>b*b+c*c+f*f});tracking.ColorTracker.registerColor("yellow",function(a,e,d){var b=a-255,c=e-255,f=d-0;return 50<=a-d&&50<=e-d?!0:1E4>b*b+c*c+f*f});var a=new Int32Array([-1,-1,0,1,1,1,0,-1]),e=new Int32Array([0,1,1,1,0,-1,-1,-1])})();
(function(){tracking.ObjectTracker=function(a){tracking.ObjectTracker.base(this,"constructor");a&&(Array.isArray(a)||(a=[a]),Array.isArray(a)&&a.forEach(function(e,f){if("string"==typeof e&&(a[f]=tracking.ViolaJones.classifiers[e]),!a[f])throw Error('Object classifier not valid, try `new tracking.ObjectTracker("face")`.');}));this.setClassifiers(a)};tracking.inherits(tracking.ObjectTracker,tracking.Tracker);tracking.ObjectTracker.prototype.edgesDensity=.2;tracking.ObjectTracker.prototype.initialScale=
1;tracking.ObjectTracker.prototype.scaleFactor=1.25;tracking.ObjectTracker.prototype.stepSize=1.5;tracking.ObjectTracker.prototype.getClassifiers=function(){return this.classifiers};tracking.ObjectTracker.prototype.getEdgesDensity=function(){return this.edgesDensity};tracking.ObjectTracker.prototype.getInitialScale=function(){return this.initialScale};tracking.ObjectTracker.prototype.getScaleFactor=function(){return this.scaleFactor};tracking.ObjectTracker.prototype.getStepSize=function(){return this.stepSize};
tracking.ObjectTracker.prototype.track=function(a,e,f){var g=this,d=this.getClassifiers();if(!d)throw Error('Object classifier not specified, try `new tracking.ObjectTracker("face")`.');var b=[];d.forEach(function(c){b=b.concat(tracking.ViolaJones.detect(a,e,f,g.getInitialScale(),g.getScaleFactor(),g.getStepSize(),g.getEdgesDensity(),c))});this.emit("track",{data:b})};tracking.ObjectTracker.prototype.setClassifiers=function(a){this.classifiers=a};tracking.ObjectTracker.prototype.setEdgesDensity=function(a){this.edgesDensity=
a};tracking.ObjectTracker.prototype.setInitialScale=function(a){this.initialScale=a};tracking.ObjectTracker.prototype.setScaleFactor=function(a){this.scaleFactor=a};tracking.ObjectTracker.prototype.setStepSize=function(a){this.stepSize=a}})();+function(a){function e(d){return this.each(function(){var b=a(this),c=a.extend({},f.DEFAULTS,b.data(),"object"==typeof d&&d),e=b.data("bs.validator");if(e||"destroy"!=d)if(e||b.data("bs.validator",e=new f(this,c)),"string"==typeof d)e[d]()})}var f=function(d,b){this.$element=a(d);this.options=b;b.errors=a.extend({},f.DEFAULTS.errors,b.errors);for(var c in b.custom)if(!b.errors[c])throw Error("Missing default error message for custom validator: "+c);a.extend(f.VALIDATORS,b.custom);this.$element.attr("novalidate",
!0);this.toggleSubmit();this.$element.on("input.bs.validator change.bs.validator focusout.bs.validator",a.proxy(this.validateInput,this));this.$element.on("submit.bs.validator",a.proxy(this.onSubmit,this));this.$element.find("[data-match]").each(function(){var b=a(this),c=b.data("match");a(c).on("input.bs.validator",function(a){b.val()&&b.trigger("input.bs.validator")})})};f.INPUT_SELECTOR=':input:not([type="submit"], button):enabled:visible';f.DEFAULTS={delay:500,html:!1,disable:!0,custom:{},errors:{match:"Does not match",
minlength:"Not long enough"},feedback:{success:"glyphicon-ok",error:"glyphicon-remove"}};f.VALIDATORS={"native":function(a){a=a[0];return a.checkValidity?a.checkValidity():!0},match:function(d){var b=d.data("match");return!d.val()||d.val()===a(b).val()},minlength:function(a){var b=a.data("minlength");return!a.val()||a.val().length>=b}};f.prototype.validateInput=function(d){var b=a(d.target),c=b.data("bs.validator.errors");b.is('[type="radio"]')&&(b=this.$element.find('input[name="'+b.attr("name")+
'"]'));this.$element.trigger(d=a.Event("validate.bs.validator",{relatedTarget:b[0]}));if(!d.isDefaultPrevented()){var e=this;this.runValidators(b).done(function(f){b.data("bs.validator.errors",f);f.length?e.showErrors(b):e.clearErrors(b);c&&f.toString()===c.toString()||(d=f.length?a.Event("invalid.bs.validator",{relatedTarget:b[0],detail:f}):a.Event("valid.bs.validator",{relatedTarget:b[0],detail:c}),e.$element.trigger(d));e.toggleSubmit();e.$element.trigger(a.Event("validated.bs.validator",{relatedTarget:b[0]}))})}};
f.prototype.runValidators=function(d){function b(a){return d.data(a+"-error")||d.data("error")||"native"==a&&d[0].validationMessage||g.errors[a]}var c=[],e=a.Deferred(),g=this.options;d.data("bs.validator.deferred")&&d.data("bs.validator.deferred").reject();d.data("bs.validator.deferred",e);a.each(f.VALIDATORS,a.proxy(function(a,e){if((d.data(a)||"native"==a)&&!e.call(this,d)){var f=b(a);!~c.indexOf(f)&&c.push(f)}},this));!c.length&&d.val()&&(d.data("remote")||d.data("remote-post"))?d.data("remote-post")?
this.defer(d,function(){var f={};f[d.attr("name")]=d.val();a.post(d.data("remote-post"),f).fail(function(a,d,e){c.push(b(a.status)||e)}).always(function(){e.resolve(c)})}):d.data("remote")&&this.defer(d,function(){var f={};f[d.attr("name")]=d.val();a.get(d.data("remote"),f).fail(function(a,d,e){c.push(b(a.status)||e)}).always(function(){e.resolve(c)})}):e.resolve(c);return e.promise()};f.prototype.validate=function(){var a=this.options.delay;this.options.delay=0;this.$element.find(f.INPUT_SELECTOR).trigger("input.bs.validator");
this.options.delay=a;return this};f.prototype.showErrors=function(d){var b=this.options.html?"html":"text";this.defer(d,function(){var c=d.closest(".form-group"),e=c.find(".help-block.with-errors"),f=c.find(".form-control-feedback"),g=d.data("bs.validator.errors");g.length&&(g=a("<ul/>").addClass("list-unstyled").append(a.map(g,function(c){return a("<li/>")[b](c)})),void 0===e.data("bs.validator.originalContent")&&e.data("bs.validator.originalContent",e.html()),e.empty().append(g),c.addClass("has-error"),
f.length&&f.removeClass(this.options.feedback.success)&&f.addClass(this.options.feedback.error)&&c.removeClass("has-success"))})};f.prototype.clearErrors=function(a){a=a.closest(".form-group");var b=a.find(".help-block.with-errors"),c=a.find(".form-control-feedback");b.html(b.data("bs.validator.originalContent"));a.removeClass("has-error");c.length&&c.removeClass(this.options.feedback.error)&&c.addClass(this.options.feedback.success)&&a.addClass("has-success")};f.prototype.hasErrors=function(){return!!this.$element.find(f.INPUT_SELECTOR).filter(function(){return!!(a(this).data("bs.validator.errors")||
[]).length}).length};f.prototype.isIncomplete=function(){return!!this.$element.find(f.INPUT_SELECTOR).filter("[required]").filter(function(){return"checkbox"===this.type?!this.checked:"radio"===this.type?!a('[name="'+this.name+'"]:checked').length:""===a.trim(this.value)}).length};f.prototype.onSubmit=function(a){this.validate();(this.isIncomplete()||this.hasErrors())&&a.preventDefault()};f.prototype.toggleSubmit=function(){this.options.disable&&a('button[type="submit"], input[type="submit"]').filter('[form="'+
this.$element.attr("id")+'"]').add(this.$element.find('input[type="submit"], button[type="submit"]')).toggleClass("disabled",this.isIncomplete()||this.hasErrors())};f.prototype.defer=function(d,b){b=a.proxy(b,this);if(!this.options.delay)return b();window.clearTimeout(d.data("bs.validator.timeout"));d.data("bs.validator.timeout",window.setTimeout(b,this.options.delay))};f.prototype.destroy=function(){this.$element.removeAttr("novalidate").removeData("bs.validator").off(".bs.validator");this.$element.find(f.INPUT_SELECTOR).off(".bs.validator").removeData(["bs.validator.errors",
"bs.validator.deferred"]).each(function(){var d=a(this),b=d.data("bs.validator.timeout");window.clearTimeout(b)&&d.removeData("bs.validator.timeout")});this.$element.find(".help-block.with-errors").each(function(){var d=a(this),b=d.data("bs.validator.originalContent");d.removeData("bs.validator.originalContent").html(b)});this.$element.find('input[type="submit"], button[type="submit"]').removeClass("disabled");this.$element.find(".has-error").removeClass("has-error");return this};var g=a.fn.validator;
a.fn.validator=e;a.fn.validator.Constructor=f;a.fn.validator.noConflict=function(){a.fn.validator=g;return this};a(window).on("load",function(){a('form[data-toggle="validator"]').each(function(){var d=a(this);e.call(d,d.data())})})}(jQuery);(function(a){function e(b,c){this.itemsArray=[];this.$element=a(b);this.$element.hide();this.multiple=(this.isSelect="SELECT"===b.tagName)&&b.hasAttribute("multiple");this.objectItems=c&&c.itemValue;this.placeholderText=b.hasAttribute("placeholder")?this.$element.attr("placeholder"):"";this.inputSize=Math.max(1,this.placeholderText.length);this.$container=a('<div class="bootstrap-tagsinput"></div>');this.$input=a('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container);
this.$element.before(this.$container);this.build(c)}function f(a,b){if("function"!==typeof a[b]){var c=a[b];a[b]=function(a){return a[c]}}}function g(a,b){if("function"!==typeof a[b]){var c=a[b];a[b]=function(){return c}}}function d(a){return a?n.text(a).html():""}function b(a){var b=0;if(document.selection)a.focus(),b=document.selection.createRange(),b.moveStart("character",-a.value.length),b=b.text.length;else if(a.selectionStart||"0"==a.selectionStart)b=a.selectionStart;return b}function c(b,c){var d=
!1;a.each(c,function(a,c){if("number"===typeof c&&b.which===c)return d=!0,!1;if(b.which===c.which){var e=!c.hasOwnProperty("altKey")||b.altKey===c.altKey,f=!c.hasOwnProperty("shiftKey")||b.shiftKey===c.shiftKey,g=!c.hasOwnProperty("ctrlKey")||b.ctrlKey===c.ctrlKey;if(e&&f&&g)return d=!0,!1}});return d}var h={tagClass:function(a){return"label label-info"},itemValue:function(a){return a?a.toString():a},itemText:function(a){return this.itemValue(a)},itemTitle:function(a){return null},freeInput:!0,addOnBlur:!0,
maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!0,onTagExists:function(a,b){b.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};e.prototype={constructor:e,add:function(b,c,e){var f=this;if(!(f.options.maxTags&&f.itemsArray.length>=f.options.maxTags||!1!==b&&!b)){"string"===typeof b&&f.options.trimValue&&(b=a.trim(b));if("object"===typeof b&&!f.objectItems)throw"Can't add objects when itemValue option is not set";if(!b.toString().match(/^\s*$/)){f.isSelect&&
!f.multiple&&0<f.itemsArray.length&&f.remove(f.itemsArray[0]);if("string"===typeof b&&"INPUT"===this.$element[0].tagName){var g=b.split(f.options.delimiterRegex?f.options.delimiterRegex:f.options.delimiter);if(1<g.length){for(b=0;b<g.length;b++)this.add(g[b],!0);c||f.pushVal();return}}var h=f.options.itemValue(b),g=f.options.itemText(b),k=f.options.tagClass(b),m=f.options.itemTitle(b),n=a.grep(f.itemsArray,function(a){return f.options.itemValue(a)===h})[0];if(n&&!f.options.allowDuplicates)f.options.onTagExists&&
(c=a(".tag",f.$container).filter(function(){return a(this).data("item")===n}),f.options.onTagExists(b,c));else if(!(f.items().toString().length+b.length+1>f.options.maxInputLength)){var t=a.Event("beforeItemAdd",{item:b,cancel:!1,options:e});f.$element.trigger(t);t.cancel||(f.itemsArray.push(b),k=a('<span class="tag '+d(k)+(null!==m?'" title="'+m:"")+'">'+d(g)+'<span data-role="remove"></span></span>'),k.data("item",b),f.findInputWrapper().before(k),k.after(" "),f.isSelect&&!a('option[value="'+encodeURIComponent(h)+
'"]',f.$element)[0]&&(g=a("<option selected>"+d(g)+"</option>"),g.data("item",b),g.attr("value",h),f.$element.append(g)),c||f.pushVal(),f.options.maxTags!==f.itemsArray.length&&f.items().toString().length!==f.options.maxInputLength||f.$container.addClass("bootstrap-tagsinput-max"),f.$element.trigger(a.Event("itemAdded",{item:b,options:e})))}}}},remove:function(b,c,d){var e=this;e.objectItems&&(b="object"===typeof b?a.grep(e.itemsArray,function(a){return e.options.itemValue(a)==e.options.itemValue(b)}):
a.grep(e.itemsArray,function(a){return e.options.itemValue(a)==b}),b=b[b.length-1]);if(b){var f=a.Event("beforeItemRemove",{item:b,cancel:!1,options:d});e.$element.trigger(f);if(f.cancel)return;a(".tag",e.$container).filter(function(){return a(this).data("item")===b}).remove();a("option",e.$element).filter(function(){return a(this).data("item")===b}).remove();-1!==a.inArray(b,e.itemsArray)&&e.itemsArray.splice(a.inArray(b,e.itemsArray),1)}c||e.pushVal();e.options.maxTags>e.itemsArray.length&&e.$container.removeClass("bootstrap-tagsinput-max");
e.$element.trigger(a.Event("itemRemoved",{item:b,options:d}))},removeAll:function(){a(".tag",this.$container).remove();for(a("option",this.$element).remove();0<this.itemsArray.length;)this.itemsArray.pop();this.pushVal()},refresh:function(){var b=this;a(".tag",b.$container).each(function(){var c=a(this),e=c.data("item"),f=b.options.itemValue(e),g=b.options.itemText(e),h=b.options.tagClass(e);c.attr("class",null);c.addClass("tag "+d(h));c.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=
d(g);b.isSelect&&a("option",b.$element).filter(function(){return a(this).data("item")===e}).attr("value",f)})},items:function(){return this.itemsArray},pushVal:function(){var b=this,c=a.map(b.items(),function(a){return b.options.itemValue(a).toString()});b.$element.val(c,!0).trigger("change")},build:function(d){var e=this;e.options=a.extend({},h,d);e.objectItems&&(e.options.freeInput=!1);f(e.options,"itemValue");f(e.options,"itemText");g(e.options,"tagClass");if(e.options.typeahead){var m=e.options.typeahead||
{};g(m,"source");e.$input.typeahead(a.extend({},m,{source:function(b,c){function d(a){for(var b=[],d=0;d<a.length;d++){var g=e.options.itemText(a[d]);f[g]=a[d];b.push(g)}c(b)}var f=this.map={},g=m.source(b);a.isFunction(g.success)?g.success(d):a.isFunction(g.then)?g.then(d):a.when(g).then(d)},updater:function(a){e.add(this.map[a]);return this.map[a]},matcher:function(a){return-1!==a.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(a){return a.sort()},highlighter:function(a){return a.replace(new RegExp("("+
this.query+")","gi"),"<strong>$1</strong>")}}))}if(e.options.typeaheadjs){d=null;var l={},n=e.options.typeaheadjs;a.isArray(n)?(d=n[0],l=n[1]):l=n;e.$input.typeahead(d,l).on("typeahead:selected",a.proxy(function(a,b){l.valueKey?e.add(b[l.valueKey]):e.add(b);e.$input.typeahead("val","")},e))}e.$container.on("click",a.proxy(function(a){e.$element.attr("disabled")||e.$input.removeAttr("disabled");e.$input.focus()},e));if(e.options.addOnBlur&&e.options.freeInput)e.$input.on("focusout",a.proxy(function(b){0===
a(".typeahead, .twitter-typeahead",e.$container).length&&(e.add(e.$input.val()),e.$input.val(""))},e));e.$container.on("keydown","input",a.proxy(function(c){var d=a(c.target),f=e.findInputWrapper();if(e.$element.attr("disabled"))e.$input.attr("disabled","disabled");else{switch(c.which){case 8:0===b(d[0])&&(f=f.prev(),f.length&&e.remove(f.data("item")));break;case 46:0===b(d[0])&&(f=f.next(),f.length&&e.remove(f.data("item")));break;case 37:c=f.prev();0===d.val().length&&c[0]&&(c.before(f),d.focus());
break;case 39:c=f.next(),0===d.val().length&&c[0]&&(c.after(f),d.focus())}d.val();d.attr("size",Math.max(this.inputSize,d.val().length))}},e));e.$container.on("keypress","input",a.proxy(function(b){var d=a(b.target);if(e.$element.attr("disabled"))e.$input.attr("disabled","disabled");else{var f=d.val(),g=e.options.maxChars&&f.length>=e.options.maxChars;e.options.freeInput&&(c(b,e.options.confirmKeys)||g)&&(0!==f.length&&(e.add(g?f.substr(0,e.options.maxChars):f),d.val("")),!1===e.options.cancelConfirmKeysOnEmpty&&
b.preventDefault());d.val();d.attr("size",Math.max(this.inputSize,d.val().length))}},e));e.$container.on("click","[data-role=remove]",a.proxy(function(b){e.$element.attr("disabled")||e.remove(a(b.target).closest(".tag").data("item"))},e));e.options.itemValue===h.itemValue&&("INPUT"===e.$element[0].tagName?e.add(e.$element.val()):a("option",e.$element).each(function(){e.add(a(this).attr("value"),!0)}))},destroy:function(){this.$container.off("keypress","input");this.$container.off("click","[role=remove]");
this.$container.remove();this.$element.removeData("tagsinput");this.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var b=this.$input[0],c=this.$container[0];b&&b.parentNode!==c;)b=b.parentNode;return a(b)}};a.fn.tagsinput=function(b,c,d){var f=[];this.each(function(){var g=a(this).data("tagsinput");g?b||c?void 0!==g[b]&&(g=3===g[b].length&&void 0!==d?g[b](c,null,d):g[b](c),void 0!==g&&f.push(g)):f.push(g):(g=new e(this,b),
a(this).data("tagsinput",g),f.push(g),"SELECT"===this.tagName&&a("option",a(this)).attr("selected","selected"),a(this).val(a(this).val()))});return"string"==typeof b?1<f.length?f:f[0]:f};a.fn.tagsinput.Constructor=e;var n=a("<div />");a(function(){a("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})})(window.jQuery);

//# sourceMappingURL=/static/js/dist/plugins.cls.js.map